2025-02-20 18:14:40,864 p=21283 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-20 18:14:42,295 p=21283 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-20 18:14:43,692 p=21283 u=snrj n=ansible ERROR| ERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:
JSON: Expecting value: line 1 column 1 (char 0)

Syntax Error while loading YAML.
  could not find expected ':'. while scanning a simple key
  in "<unicode string>", line 8, column 5
could not find expected ':'
  in "<unicode string>", line 9, column 1

The error appears to be in '/Users/snrj/Desktop/terraform-azure-demo/configure_vm/playbooks/install_otel_and_prometheus.yml': line 9, column 1, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

    - install_otel_collector
    {# - install_prometheus #}
^ here

2025-02-20 18:15:06,955 p=21336 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-20 18:15:07,090 p=21336 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-20 18:15:07,342 p=21336 u=snrj n=ansible ERROR| ERROR! conflicting action statements: hosts, tasks

The error appears to be in '/Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/install_otel_collector/tasks/main.yml': line 2, column 3, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

---
- name: Install OpenTelemetry Collector on Azure VM
  ^ here

2025-02-20 18:16:13,652 p=21455 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-20 18:16:13,810 p=21455 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-20 18:16:14,479 p=21455 u=snrj n=ansible INFO| PLAY [Install OpenTelemetry Collector and Prometheus on VM] **************************************************************************************************
2025-02-20 18:16:14,552 p=21455 u=snrj n=ansible INFO| TASK [Gathering Facts] ***************************************************************************************************************************************
2025-02-20 18:16:18,495 p=21455 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 4.180.254.0 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-20 18:16:18,496 p=21455 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 18:16:18,501 p=21455 u=snrj n=ansible INFO| TASK [install_otel_collector : Update apt repository] ********************************************************************************************************
2025-02-20 18:16:23,468 p=21455 u=snrj n=ansible INFO| changed: [4.180.254.0] => {"cache_update_time": 1740071780, "cache_updated": true, "changed": true}
2025-02-20 18:16:23,476 p=21455 u=snrj n=ansible INFO| TASK [install_otel_collector : Install wget] *****************************************************************************************************************
2025-02-20 18:16:24,689 p=21455 u=snrj n=ansible INFO| ok: [4.180.254.0] => {"cache_update_time": 1740071780, "cache_updated": false, "changed": false}
2025-02-20 18:16:24,695 p=21455 u=snrj n=ansible INFO| TASK [install_otel_collector : Download OpenTelemetry Collector .deb package] ********************************************************************************
2025-02-20 18:16:25,708 p=21455 u=snrj n=ansible WARNING| [WARNING]: Module remote_tmp /root/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues when running as another user. To
avoid this, create the remote_tmp dir with the correct permissions manually

2025-02-20 18:16:25,709 p=21455 u=snrj n=ansible INFO| ok: [4.180.254.0] => {"changed": false, "dest": "/opt/otelcol_0.120.0_linux_amd64.deb", "elapsed": 0, "gid": 0, "group": "root", "mode": "0644", "msg": "HTTP Error 304: Not Modified", "owner": "root", "size": 33615238, "state": "file", "status_code": 304, "uid": 0, "url": "https://github.com/open-telemetry/opentelemetry-collector-releases/releases/download/v0.120.0/otelcol_0.120.0_linux_amd64.deb"}
2025-02-20 18:16:25,727 p=21455 u=snrj n=ansible INFO| TASK [install_otel_collector : List files in /opt directory for debugging] ***********************************************************************************
2025-02-20 18:16:26,078 p=21455 u=snrj n=ansible INFO| changed: [4.180.254.0] => {"changed": true, "cmd": ["ls", "-l", "/opt/"], "delta": "0:00:00.004444", "end": "2025-02-20 17:16:26.113425", "msg": "", "rc": 0, "start": "2025-02-20 17:16:26.108981", "stderr": "", "stderr_lines": [], "stdout": "total 32828\n-rw-r--r-- 1 root root 33615238 Feb 20 16:40 otelcol_0.120.0_linux_amd64.deb", "stdout_lines": ["total 32828", "-rw-r--r-- 1 root root 33615238 Feb 20 16:40 otelcol_0.120.0_linux_amd64.deb"]}
2025-02-20 18:16:26,092 p=21455 u=snrj n=ansible INFO| TASK [install_otel_collector : Show files in /opt] ***********************************************************************************************************
2025-02-20 18:16:26,110 p=21455 u=snrj n=ansible INFO| ok: [4.180.254.0] => {
    "opt_files.stdout": "total 32828\n-rw-r--r-- 1 root root 33615238 Feb 20 16:40 otelcol_0.120.0_linux_amd64.deb"
}
2025-02-20 18:16:26,116 p=21455 u=snrj n=ansible INFO| TASK [install_otel_collector : Install OpenTelemetry Collector .deb package] *********************************************************************************
2025-02-20 18:16:29,712 p=21455 u=snrj n=ansible INFO| changed: [4.180.254.0] => {"changed": true, "cmd": ["sudo", "dpkg", "-i", "/opt/otelcol_0.120.0_linux_amd64.deb"], "delta": "0:00:03.209062", "end": "2025-02-20 17:16:29.667797", "msg": "", "rc": 0, "start": "2025-02-20 17:16:26.458735", "stderr": "Removed /etc/systemd/system/multi-user.target.wants/otelcol.service.\nCreated symlink /etc/systemd/system/multi-user.target.wants/otelcol.service → /lib/systemd/system/otelcol.service.", "stderr_lines": ["Removed /etc/systemd/system/multi-user.target.wants/otelcol.service.", "Created symlink /etc/systemd/system/multi-user.target.wants/otelcol.service → /lib/systemd/system/otelcol.service."], "stdout": "(Reading database ... 62679 files and directories currently installed.)\nPreparing to unpack .../otelcol_0.120.0_linux_amd64.deb ...\nUnpacking otelcol (0.120.0) over (0.120.0) ...\nSetting up otelcol (0.120.0) ...", "stdout_lines": ["(Reading database ... 62679 files and directories currently installed.)", "Preparing to unpack .../otelcol_0.120.0_linux_amd64.deb ...", "Unpacking otelcol (0.120.0) over (0.120.0) ...", "Setting up otelcol (0.120.0) ..."]}
2025-02-20 18:16:29,721 p=21455 u=snrj n=ansible INFO| TASK [install_otel_collector : Ensure otelcol service is started and enabled] ********************************************************************************
2025-02-20 18:16:30,646 p=21455 u=snrj n=ansible INFO| ok: [4.180.254.0] => {"changed": false, "enabled": true, "name": "otelcol", "state": "started", "status": {"ActiveEnterTimestamp": "Thu 2025-02-20 17:16:29 UTC", "ActiveEnterTimestampMonotonic": "7276264599", "ActiveExitTimestamp": "n/a", "ActiveExitTimestampMonotonic": "0", "ActiveState": "active", "After": "systemd-journald.socket basic.target system.slice network.target sysinit.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Thu 2025-02-20 17:16:29 UTC", "AssertTimestampMonotonic": "7276260344", "Before": "multi-user.target shutdown.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "56014000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Thu 2025-02-20 17:16:29 UTC", "ConditionTimestampMonotonic": "7276260341", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/otelcol.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "OpenTelemetry Collector", "DevicePolicy": "auto", "DynamicUser": "no", "EffectiveCPUs": "0", "EffectiveMemoryNodes": "0", "EnvironmentFiles": "/etc/otelcol/otelcol.conf (ignore_errors=no)", "ExecMainCode": "0", "ExecMainExitTimestamp": "n/a", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "9423", "ExecMainStartTimestamp": "Thu 2025-02-20 17:16:29 UTC", "ExecMainStartTimestampMonotonic": "7276264113", "ExecMainStatus": "0", "ExecStart": "{ path=/usr/bin/otelcol ; argv[]=/usr/bin/otelcol $OTELCOL_OPTIONS ; ignore_errors=no ; start_time=[Thu 2025-02-20 17:16:29 UTC] ; stop_time=[n/a] ; pid=9423 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/otelcol ; argv[]=/usr/bin/otelcol $OTELCOL_OPTIONS ; flags= ; start_time=[Thu 2025-02-20 17:16:29 UTC] ; stop_time=[n/a] ; pid=9423 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/otelcol.service", "FreezerState": "running", "GID": "998", "Group": "otel", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "otelcol.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "n/a", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "Thu 2025-02-20 17:16:29 UTC", "InactiveExitTimestampMonotonic": "7276264599", "InvocationID": "908aecc6f2dd4d14bc6ce2446630d335", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "mixed", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "13611", "LimitNPROCSoft": "13611", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "13611", "LimitSIGPENDINGSoft": "13611", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "9423", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "18374656", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "otelcol.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "on-failure", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Thu 2025-02-20 17:16:29 UTC", "StateChangeTimestampMonotonic": "7276264599", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "5", "TasksMax": "4083", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UID": "998", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "otel", "UtmpMode": "init", "WantedBy": "multi-user.target", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-20 18:16:30,656 p=21455 u=snrj n=ansible INFO| TASK [install_otel_collector : Print otelcol service status] *************************************************************************************************
2025-02-20 18:16:31,173 p=21455 u=snrj n=ansible INFO| changed: [4.180.254.0] => {"changed": true, "cmd": ["sudo", "systemctl", "status", "otelcol", "--no-pager"], "delta": "0:00:00.021217", "end": "2025-02-20 17:16:31.208408", "msg": "", "rc": 0, "start": "2025-02-20 17:16:31.187191", "stderr": "", "stderr_lines": [], "stdout": "● otelcol.service - OpenTelemetry Collector\n     Loaded: loaded (/lib/systemd/system/otelcol.service; enabled; vendor preset: enabled)\n     Active: active (running) since Thu 2025-02-20 17:16:29 UTC; 1s ago\n   Main PID: 9423 (otelcol)\n      Tasks: 5 (limit: 4083)\n     Memory: 17.5M\n        CPU: 56ms\n     CGroup: /system.slice/otelcol.service\n             └─9423 /usr/bin/otelcol --config=/etc/otelcol/config.yaml\n\nFeb 20 17:16:29 otel-collector otelcol[9423]: 2025-02-20T17:16:29.704Z        info        otlpreceiver@v0.120.0/otlp.go:173        Starting HTTP server        {\"otelcol.component.id\": \"otlp\", \"otelcol.component.kind\": \"Receiver\", \"endpoint\": \"0.0.0.0:4318\"}\nFeb 20 17:16:29 otel-collector otelcol[9423]: 2025-02-20T17:16:29.709Z        info        prometheusreceiver@v0.120.1/metrics_receiver.go:119        Starting discovery manager        {\"otelcol.component.id\": \"prometheus\", \"otelcol.component.kind\": \"Receiver\", \"otelcol.signal\": \"metrics\"}\nFeb 20 17:16:29 otel-collector otelcol[9423]: 2025-02-20T17:16:29.718Z        info        targetallocator/manager.go:184        Scrape job added        {\"otelcol.component.id\": \"prometheus\", \"otelcol.component.kind\": \"Receiver\", \"otelcol.signal\": \"metrics\", \"jobName\": \"otel-collector\"}\nFeb 20 17:16:29 otel-collector otelcol[9423]: 2025-02-20T17:16:29.718Z        info        jaegerreceiver@v0.120.1/trace_receiver.go:219        Starting UDP server for Binary Thrift        {\"otelcol.component.id\": \"jaeger\", \"otelcol.component.kind\": \"Receiver\", \"otelcol.signal\": \"traces\", \"endpoint\": \"0.0.0.0:6832\"}\nFeb 20 17:16:29 otel-collector otelcol[9423]: 2025-02-20T17:16:29.718Z        info        jaegerreceiver@v0.120.1/trace_receiver.go:241        Starting UDP server for Compact Thrift        {\"otelcol.component.id\": \"jaeger\", \"otelcol.component.kind\": \"Receiver\", \"otelcol.signal\": \"traces\", \"endpoint\": \"0.0.0.0:6831\"}\nFeb 20 17:16:29 otel-collector otelcol[9423]: 2025-02-20T17:16:29.718Z        info        jaegerreceiver@v0.120.1/trace_receiver.go:347        Starting HTTP server for Jaeger Thrift        {\"otelcol.component.id\": \"jaeger\", \"otelcol.component.kind\": \"Receiver\", \"otelcol.signal\": \"traces\", \"endpoint\": \"0.0.0.0:14268\"}\nFeb 20 17:16:29 otel-collector otelcol[9423]: 2025-02-20T17:16:29.718Z        info        jaegerreceiver@v0.120.1/trace_receiver.go:372        Starting gRPC server for Jaeger Protobuf        {\"otelcol.component.id\": \"jaeger\", \"otelcol.component.kind\": \"Receiver\", \"otelcol.signal\": \"traces\", \"endpoint\": \"0.0.0.0:14250\"}\nFeb 20 17:16:29 otel-collector otelcol[9423]: 2025-02-20T17:16:29.718Z        info        healthcheck/handler.go:132        Health Check state change        {\"otelcol.component.id\": \"health_check\", \"otelcol.component.kind\": \"Extension\", \"status\": \"ready\"}\nFeb 20 17:16:29 otel-collector otelcol[9423]: 2025-02-20T17:16:29.718Z        info        service@v0.120.0/service.go:281        Everything is ready. Begin running and processing data.\nFeb 20 17:16:29 otel-collector otelcol[9423]: 2025-02-20T17:16:29.719Z        info        prometheusreceiver@v0.120.1/metrics_receiver.go:188        Starting scrape manager        {\"otelcol.component.id\": \"prometheus\", \"otelcol.component.kind\": \"Receiver\", \"otelcol.signal\": \"metrics\"}", "stdout_lines": ["● otelcol.service - OpenTelemetry Collector", "     Loaded: loaded (/lib/systemd/system/otelcol.service; enabled; vendor preset: enabled)", "     Active: active (running) since Thu 2025-02-20 17:16:29 UTC; 1s ago", "   Main PID: 9423 (otelcol)", "      Tasks: 5 (limit: 4083)", "     Memory: 17.5M", "        CPU: 56ms", "     CGroup: /system.slice/otelcol.service", "             └─9423 /usr/bin/otelcol --config=/etc/otelcol/config.yaml", "", "Feb 20 17:16:29 otel-collector otelcol[9423]: 2025-02-20T17:16:29.704Z        info        otlpreceiver@v0.120.0/otlp.go:173        Starting HTTP server        {\"otelcol.component.id\": \"otlp\", \"otelcol.component.kind\": \"Receiver\", \"endpoint\": \"0.0.0.0:4318\"}", "Feb 20 17:16:29 otel-collector otelcol[9423]: 2025-02-20T17:16:29.709Z        info        prometheusreceiver@v0.120.1/metrics_receiver.go:119        Starting discovery manager        {\"otelcol.component.id\": \"prometheus\", \"otelcol.component.kind\": \"Receiver\", \"otelcol.signal\": \"metrics\"}", "Feb 20 17:16:29 otel-collector otelcol[9423]: 2025-02-20T17:16:29.718Z        info        targetallocator/manager.go:184        Scrape job added        {\"otelcol.component.id\": \"prometheus\", \"otelcol.component.kind\": \"Receiver\", \"otelcol.signal\": \"metrics\", \"jobName\": \"otel-collector\"}", "Feb 20 17:16:29 otel-collector otelcol[9423]: 2025-02-20T17:16:29.718Z        info        jaegerreceiver@v0.120.1/trace_receiver.go:219        Starting UDP server for Binary Thrift        {\"otelcol.component.id\": \"jaeger\", \"otelcol.component.kind\": \"Receiver\", \"otelcol.signal\": \"traces\", \"endpoint\": \"0.0.0.0:6832\"}", "Feb 20 17:16:29 otel-collector otelcol[9423]: 2025-02-20T17:16:29.718Z        info        jaegerreceiver@v0.120.1/trace_receiver.go:241        Starting UDP server for Compact Thrift        {\"otelcol.component.id\": \"jaeger\", \"otelcol.component.kind\": \"Receiver\", \"otelcol.signal\": \"traces\", \"endpoint\": \"0.0.0.0:6831\"}", "Feb 20 17:16:29 otel-collector otelcol[9423]: 2025-02-20T17:16:29.718Z        info        jaegerreceiver@v0.120.1/trace_receiver.go:347        Starting HTTP server for Jaeger Thrift        {\"otelcol.component.id\": \"jaeger\", \"otelcol.component.kind\": \"Receiver\", \"otelcol.signal\": \"traces\", \"endpoint\": \"0.0.0.0:14268\"}", "Feb 20 17:16:29 otel-collector otelcol[9423]: 2025-02-20T17:16:29.718Z        info        jaegerreceiver@v0.120.1/trace_receiver.go:372        Starting gRPC server for Jaeger Protobuf        {\"otelcol.component.id\": \"jaeger\", \"otelcol.component.kind\": \"Receiver\", \"otelcol.signal\": \"traces\", \"endpoint\": \"0.0.0.0:14250\"}", "Feb 20 17:16:29 otel-collector otelcol[9423]: 2025-02-20T17:16:29.718Z        info        healthcheck/handler.go:132        Health Check state change        {\"otelcol.component.id\": \"health_check\", \"otelcol.component.kind\": \"Extension\", \"status\": \"ready\"}", "Feb 20 17:16:29 otel-collector otelcol[9423]: 2025-02-20T17:16:29.718Z        info        service@v0.120.0/service.go:281        Everything is ready. Begin running and processing data.", "Feb 20 17:16:29 otel-collector otelcol[9423]: 2025-02-20T17:16:29.719Z        info        prometheusreceiver@v0.120.1/metrics_receiver.go:188        Starting scrape manager        {\"otelcol.component.id\": \"prometheus\", \"otelcol.component.kind\": \"Receiver\", \"otelcol.signal\": \"metrics\"}"]}
2025-02-20 18:16:31,184 p=21455 u=snrj n=ansible INFO| TASK [install_otel_collector : Display otelcol service status] ***********************************************************************************************
2025-02-20 18:16:31,354 p=21455 u=snrj n=ansible INFO| ok: [4.180.254.0] => {
    "msg": [
        "Active: active (running) since Thu 2025-02-20 17:16:29 UTC; 1s ago"
    ]
}
2025-02-20 18:16:31,365 p=21455 u=snrj n=ansible INFO| PLAY RECAP ***************************************************************************************************************************************************
2025-02-20 18:16:31,365 p=21455 u=snrj n=ansible INFO| 4.180.254.0                : ok=10   changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-20 18:22:51,258 p=22221 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-20 18:22:51,422 p=22221 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-20 18:22:51,717 p=22221 u=snrj n=ansible INFO| PLAY [Install OpenTelemetry Collector and Prometheus on VM] **************************************************************************************************
2025-02-20 18:22:51,726 p=22221 u=snrj n=ansible INFO| TASK [Gathering Facts] ***************************************************************************************************************************************
2025-02-20 18:22:56,129 p=22221 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 4.180.254.0 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-20 18:22:56,129 p=22221 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 18:22:56,134 p=22221 u=snrj n=ansible INFO| TASK [install_otel_collector : Update apt repository] ********************************************************************************************************
2025-02-20 18:23:00,165 p=22221 u=snrj n=ansible INFO| changed: [4.180.254.0] => {"cache_update_time": 1740072177, "cache_updated": true, "changed": true}
2025-02-20 18:23:00,172 p=22221 u=snrj n=ansible INFO| TASK [install_otel_collector : Install wget] *****************************************************************************************************************
2025-02-20 18:23:01,533 p=22221 u=snrj n=ansible INFO| ok: [4.180.254.0] => {"cache_update_time": 1740072177, "cache_updated": false, "changed": false}
2025-02-20 18:23:01,540 p=22221 u=snrj n=ansible INFO| TASK [install_otel_collector : Download OpenTelemetry Collector .deb package] ********************************************************************************
2025-02-20 18:23:02,590 p=22221 u=snrj n=ansible INFO| ok: [4.180.254.0] => {"changed": false, "dest": "/opt/otelcol_0.120.0_linux_amd64.deb", "elapsed": 0, "gid": 0, "group": "root", "mode": "0644", "msg": "HTTP Error 304: Not Modified", "owner": "root", "size": 33615238, "state": "file", "status_code": 304, "uid": 0, "url": "https://github.com/open-telemetry/opentelemetry-collector-releases/releases/download/v0.120.0/otelcol_0.120.0_linux_amd64.deb"}
2025-02-20 18:23:02,600 p=22221 u=snrj n=ansible INFO| TASK [install_otel_collector : Install OpenTelemetry Collector .deb package] *********************************************************************************
2025-02-20 18:23:06,107 p=22221 u=snrj n=ansible INFO| changed: [4.180.254.0] => {"changed": true, "cmd": ["sudo", "dpkg", "-i", "/opt/otelcol_0.120.0_linux_amd64.deb"], "delta": "0:00:03.129777", "end": "2025-02-20 17:23:06.111130", "msg": "", "rc": 0, "start": "2025-02-20 17:23:02.981353", "stderr": "Removed /etc/systemd/system/multi-user.target.wants/otelcol.service.\nCreated symlink /etc/systemd/system/multi-user.target.wants/otelcol.service → /lib/systemd/system/otelcol.service.", "stderr_lines": ["Removed /etc/systemd/system/multi-user.target.wants/otelcol.service.", "Created symlink /etc/systemd/system/multi-user.target.wants/otelcol.service → /lib/systemd/system/otelcol.service."], "stdout": "(Reading database ... 62679 files and directories currently installed.)\nPreparing to unpack .../otelcol_0.120.0_linux_amd64.deb ...\nUnpacking otelcol (0.120.0) over (0.120.0) ...\nSetting up otelcol (0.120.0) ...", "stdout_lines": ["(Reading database ... 62679 files and directories currently installed.)", "Preparing to unpack .../otelcol_0.120.0_linux_amd64.deb ...", "Unpacking otelcol (0.120.0) over (0.120.0) ...", "Setting up otelcol (0.120.0) ..."]}
2025-02-20 18:23:06,116 p=22221 u=snrj n=ansible INFO| TASK [install_otel_collector : Get otelcol service status] ***************************************************************************************************
2025-02-20 18:23:06,722 p=22221 u=snrj n=ansible INFO| ok: [4.180.254.0] => {"changed": false, "name": "otelcol", "status": {"ActiveEnterTimestamp": "Thu 2025-02-20 17:23:06 UTC", "ActiveEnterTimestampMonotonic": "7672710546", "ActiveExitTimestamp": "n/a", "ActiveExitTimestampMonotonic": "0", "ActiveState": "active", "After": "basic.target systemd-journald.socket sysinit.target network.target system.slice", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Thu 2025-02-20 17:23:06 UTC", "AssertTimestampMonotonic": "7672706776", "Before": "multi-user.target shutdown.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "61102000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Thu 2025-02-20 17:23:06 UTC", "ConditionTimestampMonotonic": "7672706773", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/otelcol.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "OpenTelemetry Collector", "DevicePolicy": "auto", "DynamicUser": "no", "EffectiveCPUs": "0", "EffectiveMemoryNodes": "0", "EnvironmentFiles": "/etc/otelcol/otelcol.conf (ignore_errors=no)", "ExecMainCode": "0", "ExecMainExitTimestamp": "n/a", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "10052", "ExecMainStartTimestamp": "Thu 2025-02-20 17:23:06 UTC", "ExecMainStartTimestampMonotonic": "7672710136", "ExecMainStatus": "0", "ExecStart": "{ path=/usr/bin/otelcol ; argv[]=/usr/bin/otelcol $OTELCOL_OPTIONS ; ignore_errors=no ; start_time=[Thu 2025-02-20 17:23:06 UTC] ; stop_time=[n/a] ; pid=10052 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/otelcol ; argv[]=/usr/bin/otelcol $OTELCOL_OPTIONS ; flags= ; start_time=[Thu 2025-02-20 17:23:06 UTC] ; stop_time=[n/a] ; pid=10052 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/otelcol.service", "FreezerState": "running", "GID": "998", "Group": "otel", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "otelcol.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "n/a", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "Thu 2025-02-20 17:23:06 UTC", "InactiveExitTimestampMonotonic": "7672710546", "InvocationID": "884041f8b3254185bf5e92cc6da4a29d", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "mixed", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "13611", "LimitNPROCSoft": "13611", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "13611", "LimitSIGPENDINGSoft": "13611", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "10052", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "17592320", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "otelcol.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "on-failure", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Thu 2025-02-20 17:23:06 UTC", "StateChangeTimestampMonotonic": "7672710546", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "6", "TasksMax": "4083", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UID": "998", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "otel", "UtmpMode": "init", "WantedBy": "multi-user.target", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-20 18:23:06,733 p=22221 u=snrj n=ansible INFO| TASK [install_otel_collector : Debug if service is inactive] *************************************************************************************************
2025-02-20 18:23:06,746 p=22221 u=snrj n=ansible INFO| skipping: [4.180.254.0] => {"false_condition": "otelcol_service_status.status.ActiveState != \"active\""}
2025-02-20 18:23:06,751 p=22221 u=snrj n=ansible INFO| TASK [install_otel_collector : Start otelcol service if not running] *****************************************************************************************
2025-02-20 18:23:06,762 p=22221 u=snrj n=ansible INFO| skipping: [4.180.254.0] => {"changed": false, "false_condition": "otelcol_service_status.status.ActiveState != \"active\"", "skip_reason": "Conditional result was False"}
2025-02-20 18:23:06,766 p=22221 u=snrj n=ansible INFO| TASK [install_otel_collector : Print otelcol service status] *************************************************************************************************
2025-02-20 18:23:07,097 p=22221 u=snrj n=ansible INFO| changed: [4.180.254.0] => {"changed": true, "cmd": ["sudo", "systemctl", "status", "otelcol", "--no-pager"], "delta": "0:00:00.022579", "end": "2025-02-20 17:23:07.130369", "msg": "", "rc": 0, "start": "2025-02-20 17:23:07.107790", "stderr": "", "stderr_lines": [], "stdout": "● otelcol.service - OpenTelemetry Collector\n     Loaded: loaded (/lib/systemd/system/otelcol.service; enabled; vendor preset: enabled)\n     Active: active (running) since Thu 2025-02-20 17:23:06 UTC; 1s ago\n   Main PID: 10052 (otelcol)\n      Tasks: 6 (limit: 4083)\n     Memory: 16.7M\n        CPU: 61ms\n     CGroup: /system.slice/otelcol.service\n             └─10052 /usr/bin/otelcol --config=/etc/otelcol/config.yaml\n\nFeb 20 17:23:06 otel-collector otelcol[10052]: 2025-02-20T17:23:06.190Z        info        targetallocator/manager.go:184        Scrape job added        {\"otelcol.component.id\": \"prometheus\", \"otelcol.component.kind\": \"Receiver\", \"otelcol.signal\": \"metrics\", \"jobName\": \"otel-collector\"}\nFeb 20 17:23:06 otel-collector otelcol[10052]: 2025-02-20T17:23:06.191Z        info        otlpreceiver@v0.120.0/otlp.go:116        Starting GRPC server        {\"otelcol.component.id\": \"otlp\", \"otelcol.component.kind\": \"Receiver\", \"endpoint\": \"0.0.0.0:4317\"}\nFeb 20 17:23:06 otel-collector otelcol[10052]: 2025-02-20T17:23:06.191Z        info        otlpreceiver@v0.120.0/otlp.go:173        Starting HTTP server        {\"otelcol.component.id\": \"otlp\", \"otelcol.component.kind\": \"Receiver\", \"endpoint\": \"0.0.0.0:4318\"}\nFeb 20 17:23:06 otel-collector otelcol[10052]: 2025-02-20T17:23:06.191Z        info        jaegerreceiver@v0.120.1/trace_receiver.go:219        Starting UDP server for Binary Thrift        {\"otelcol.component.id\": \"jaeger\", \"otelcol.component.kind\": \"Receiver\", \"otelcol.signal\": \"traces\", \"endpoint\": \"0.0.0.0:6832\"}\nFeb 20 17:23:06 otel-collector otelcol[10052]: 2025-02-20T17:23:06.191Z        info        jaegerreceiver@v0.120.1/trace_receiver.go:241        Starting UDP server for Compact Thrift        {\"otelcol.component.id\": \"jaeger\", \"otelcol.component.kind\": \"Receiver\", \"otelcol.signal\": \"traces\", \"endpoint\": \"0.0.0.0:6831\"}\nFeb 20 17:23:06 otel-collector otelcol[10052]: 2025-02-20T17:23:06.191Z        info        jaegerreceiver@v0.120.1/trace_receiver.go:347        Starting HTTP server for Jaeger Thrift        {\"otelcol.component.id\": \"jaeger\", \"otelcol.component.kind\": \"Receiver\", \"otelcol.signal\": \"traces\", \"endpoint\": \"0.0.0.0:14268\"}\nFeb 20 17:23:06 otel-collector otelcol[10052]: 2025-02-20T17:23:06.191Z        info        jaegerreceiver@v0.120.1/trace_receiver.go:372        Starting gRPC server for Jaeger Protobuf        {\"otelcol.component.id\": \"jaeger\", \"otelcol.component.kind\": \"Receiver\", \"otelcol.signal\": \"traces\", \"endpoint\": \"0.0.0.0:14250\"}\nFeb 20 17:23:06 otel-collector otelcol[10052]: 2025-02-20T17:23:06.192Z        info        prometheusreceiver@v0.120.1/metrics_receiver.go:188        Starting scrape manager        {\"otelcol.component.id\": \"prometheus\", \"otelcol.component.kind\": \"Receiver\", \"otelcol.signal\": \"metrics\"}\nFeb 20 17:23:06 otel-collector otelcol[10052]: 2025-02-20T17:23:06.193Z        info        healthcheck/handler.go:132        Health Check state change        {\"otelcol.component.id\": \"health_check\", \"otelcol.component.kind\": \"Extension\", \"status\": \"ready\"}\nFeb 20 17:23:06 otel-collector otelcol[10052]: 2025-02-20T17:23:06.193Z        info        service@v0.120.0/service.go:281        Everything is ready. Begin running and processing data.", "stdout_lines": ["● otelcol.service - OpenTelemetry Collector", "     Loaded: loaded (/lib/systemd/system/otelcol.service; enabled; vendor preset: enabled)", "     Active: active (running) since Thu 2025-02-20 17:23:06 UTC; 1s ago", "   Main PID: 10052 (otelcol)", "      Tasks: 6 (limit: 4083)", "     Memory: 16.7M", "        CPU: 61ms", "     CGroup: /system.slice/otelcol.service", "             └─10052 /usr/bin/otelcol --config=/etc/otelcol/config.yaml", "", "Feb 20 17:23:06 otel-collector otelcol[10052]: 2025-02-20T17:23:06.190Z        info        targetallocator/manager.go:184        Scrape job added        {\"otelcol.component.id\": \"prometheus\", \"otelcol.component.kind\": \"Receiver\", \"otelcol.signal\": \"metrics\", \"jobName\": \"otel-collector\"}", "Feb 20 17:23:06 otel-collector otelcol[10052]: 2025-02-20T17:23:06.191Z        info        otlpreceiver@v0.120.0/otlp.go:116        Starting GRPC server        {\"otelcol.component.id\": \"otlp\", \"otelcol.component.kind\": \"Receiver\", \"endpoint\": \"0.0.0.0:4317\"}", "Feb 20 17:23:06 otel-collector otelcol[10052]: 2025-02-20T17:23:06.191Z        info        otlpreceiver@v0.120.0/otlp.go:173        Starting HTTP server        {\"otelcol.component.id\": \"otlp\", \"otelcol.component.kind\": \"Receiver\", \"endpoint\": \"0.0.0.0:4318\"}", "Feb 20 17:23:06 otel-collector otelcol[10052]: 2025-02-20T17:23:06.191Z        info        jaegerreceiver@v0.120.1/trace_receiver.go:219        Starting UDP server for Binary Thrift        {\"otelcol.component.id\": \"jaeger\", \"otelcol.component.kind\": \"Receiver\", \"otelcol.signal\": \"traces\", \"endpoint\": \"0.0.0.0:6832\"}", "Feb 20 17:23:06 otel-collector otelcol[10052]: 2025-02-20T17:23:06.191Z        info        jaegerreceiver@v0.120.1/trace_receiver.go:241        Starting UDP server for Compact Thrift        {\"otelcol.component.id\": \"jaeger\", \"otelcol.component.kind\": \"Receiver\", \"otelcol.signal\": \"traces\", \"endpoint\": \"0.0.0.0:6831\"}", "Feb 20 17:23:06 otel-collector otelcol[10052]: 2025-02-20T17:23:06.191Z        info        jaegerreceiver@v0.120.1/trace_receiver.go:347        Starting HTTP server for Jaeger Thrift        {\"otelcol.component.id\": \"jaeger\", \"otelcol.component.kind\": \"Receiver\", \"otelcol.signal\": \"traces\", \"endpoint\": \"0.0.0.0:14268\"}", "Feb 20 17:23:06 otel-collector otelcol[10052]: 2025-02-20T17:23:06.191Z        info        jaegerreceiver@v0.120.1/trace_receiver.go:372        Starting gRPC server for Jaeger Protobuf        {\"otelcol.component.id\": \"jaeger\", \"otelcol.component.kind\": \"Receiver\", \"otelcol.signal\": \"traces\", \"endpoint\": \"0.0.0.0:14250\"}", "Feb 20 17:23:06 otel-collector otelcol[10052]: 2025-02-20T17:23:06.192Z        info        prometheusreceiver@v0.120.1/metrics_receiver.go:188        Starting scrape manager        {\"otelcol.component.id\": \"prometheus\", \"otelcol.component.kind\": \"Receiver\", \"otelcol.signal\": \"metrics\"}", "Feb 20 17:23:06 otel-collector otelcol[10052]: 2025-02-20T17:23:06.193Z        info        healthcheck/handler.go:132        Health Check state change        {\"otelcol.component.id\": \"health_check\", \"otelcol.component.kind\": \"Extension\", \"status\": \"ready\"}", "Feb 20 17:23:06 otel-collector otelcol[10052]: 2025-02-20T17:23:06.193Z        info        service@v0.120.0/service.go:281        Everything is ready. Begin running and processing data."]}
2025-02-20 18:23:07,106 p=22221 u=snrj n=ansible INFO| TASK [install_otel_collector : Display otelcol service status] ***********************************************************************************************
2025-02-20 18:23:07,146 p=22221 u=snrj n=ansible INFO| ok: [4.180.254.0] => {
    "msg": [
        "Active: active (running) since Thu 2025-02-20 17:23:06 UTC; 1s ago"
    ]
}
2025-02-20 18:23:07,151 p=22221 u=snrj n=ansible INFO| PLAY RECAP ***************************************************************************************************************************************************
2025-02-20 18:23:07,151 p=22221 u=snrj n=ansible INFO| 4.180.254.0                : ok=8    changed=3    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2025-02-20 18:24:32,546 p=22402 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-20 18:24:32,679 p=22402 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-20 18:24:32,947 p=22402 u=snrj n=ansible INFO| PLAY [Install OpenTelemetry Collector and Prometheus on VM] **************************************************************************************************
2025-02-20 18:24:32,954 p=22402 u=snrj n=ansible INFO| TASK [Gathering Facts] ***************************************************************************************************************************************
2025-02-20 18:24:37,297 p=22402 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 4.180.254.0 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-20 18:24:37,297 p=22402 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 18:24:37,302 p=22402 u=snrj n=ansible INFO| TASK [install_otel_collector : Update apt repository] ********************************************************************************************************
2025-02-20 18:24:41,132 p=22402 u=snrj n=ansible INFO| changed: [4.180.254.0] => {"cache_update_time": 1740072279, "cache_updated": true, "changed": true}
2025-02-20 18:24:41,139 p=22402 u=snrj n=ansible INFO| TASK [install_otel_collector : Install wget] *****************************************************************************************************************
2025-02-20 18:24:42,465 p=22402 u=snrj n=ansible INFO| ok: [4.180.254.0] => {"cache_update_time": 1740072279, "cache_updated": false, "changed": false}
2025-02-20 18:24:42,473 p=22402 u=snrj n=ansible INFO| TASK [install_otel_collector : Download OpenTelemetry Collector .deb package] ********************************************************************************
2025-02-20 18:24:43,448 p=22402 u=snrj n=ansible INFO| ok: [4.180.254.0] => {"changed": false, "dest": "/opt/otelcol_0.120.0_linux_amd64.deb", "elapsed": 0, "gid": 0, "group": "root", "mode": "0644", "msg": "HTTP Error 304: Not Modified", "owner": "root", "size": 33615238, "state": "file", "status_code": 304, "uid": 0, "url": "https://github.com/open-telemetry/opentelemetry-collector-releases/releases/download/v0.120.0/otelcol_0.120.0_linux_amd64.deb"}
2025-02-20 18:24:43,462 p=22402 u=snrj n=ansible INFO| TASK [install_otel_collector : Install OpenTelemetry Collector .deb package] *********************************************************************************
2025-02-20 18:24:46,972 p=22402 u=snrj n=ansible INFO| changed: [4.180.254.0] => {"changed": true, "cmd": ["sudo", "dpkg", "-i", "/opt/otelcol_0.120.0_linux_amd64.deb"], "delta": "0:00:03.075302", "end": "2025-02-20 17:24:46.974034", "msg": "", "rc": 0, "start": "2025-02-20 17:24:43.898732", "stderr": "Removed /etc/systemd/system/multi-user.target.wants/otelcol.service.\nCreated symlink /etc/systemd/system/multi-user.target.wants/otelcol.service → /lib/systemd/system/otelcol.service.", "stderr_lines": ["Removed /etc/systemd/system/multi-user.target.wants/otelcol.service.", "Created symlink /etc/systemd/system/multi-user.target.wants/otelcol.service → /lib/systemd/system/otelcol.service."], "stdout": "(Reading database ... 62679 files and directories currently installed.)\nPreparing to unpack .../otelcol_0.120.0_linux_amd64.deb ...\nUnpacking otelcol (0.120.0) over (0.120.0) ...\nSetting up otelcol (0.120.0) ...", "stdout_lines": ["(Reading database ... 62679 files and directories currently installed.)", "Preparing to unpack .../otelcol_0.120.0_linux_amd64.deb ...", "Unpacking otelcol (0.120.0) over (0.120.0) ...", "Setting up otelcol (0.120.0) ..."]}
2025-02-20 18:24:46,980 p=22402 u=snrj n=ansible INFO| TASK [install_otel_collector : Get otelcol service status] ***************************************************************************************************
2025-02-20 18:24:47,667 p=22402 u=snrj n=ansible INFO| ok: [4.180.254.0] => {"changed": false, "name": "otelcol", "status": {"ActiveEnterTimestamp": "Thu 2025-02-20 17:24:46 UTC", "ActiveEnterTimestampMonotonic": "7773579614", "ActiveExitTimestamp": "n/a", "ActiveExitTimestampMonotonic": "0", "ActiveState": "active", "After": "sysinit.target system.slice basic.target network.target systemd-journald.socket", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Thu 2025-02-20 17:24:46 UTC", "AssertTimestampMonotonic": "7773575498", "Before": "multi-user.target shutdown.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "54453000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Thu 2025-02-20 17:24:46 UTC", "ConditionTimestampMonotonic": "7773575496", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/otelcol.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "OpenTelemetry Collector", "DevicePolicy": "auto", "DynamicUser": "no", "EffectiveCPUs": "0", "EffectiveMemoryNodes": "0", "EnvironmentFiles": "/etc/otelcol/otelcol.conf (ignore_errors=no)", "ExecMainCode": "0", "ExecMainExitTimestamp": "n/a", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "10706", "ExecMainStartTimestamp": "Thu 2025-02-20 17:24:46 UTC", "ExecMainStartTimestampMonotonic": "7773579107", "ExecMainStatus": "0", "ExecStart": "{ path=/usr/bin/otelcol ; argv[]=/usr/bin/otelcol $OTELCOL_OPTIONS ; ignore_errors=no ; start_time=[Thu 2025-02-20 17:24:46 UTC] ; stop_time=[n/a] ; pid=10706 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/otelcol ; argv[]=/usr/bin/otelcol $OTELCOL_OPTIONS ; flags= ; start_time=[Thu 2025-02-20 17:24:46 UTC] ; stop_time=[n/a] ; pid=10706 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/otelcol.service", "FreezerState": "running", "GID": "998", "Group": "otel", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "otelcol.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "n/a", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "Thu 2025-02-20 17:24:46 UTC", "InactiveExitTimestampMonotonic": "7773579614", "InvocationID": "edb8c8fe04b44d419fbe429f1b66c628", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "mixed", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "13611", "LimitNPROCSoft": "13611", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "13611", "LimitSIGPENDINGSoft": "13611", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "10706", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "18345984", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "otelcol.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "on-failure", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Thu 2025-02-20 17:24:46 UTC", "StateChangeTimestampMonotonic": "7773579614", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "5", "TasksMax": "4083", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UID": "998", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "otel", "UtmpMode": "init", "WantedBy": "multi-user.target", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-20 18:24:47,677 p=22402 u=snrj n=ansible INFO| TASK [install_otel_collector : Debug if service is inactive] *************************************************************************************************
2025-02-20 18:24:47,690 p=22402 u=snrj n=ansible INFO| skipping: [4.180.254.0] => {"false_condition": "otelcol_service_status.status.ActiveState != \"active\""}
2025-02-20 18:24:47,695 p=22402 u=snrj n=ansible INFO| TASK [install_otel_collector : Start otelcol service if not running] *****************************************************************************************
2025-02-20 18:24:47,706 p=22402 u=snrj n=ansible INFO| skipping: [4.180.254.0] => {"changed": false, "false_condition": "otelcol_service_status.status.ActiveState != \"active\"", "skip_reason": "Conditional result was False"}
2025-02-20 18:24:47,710 p=22402 u=snrj n=ansible INFO| TASK [install_otel_collector : Print otelcol service status] *************************************************************************************************
2025-02-20 18:24:48,051 p=22402 u=snrj n=ansible INFO| ok: [4.180.254.0] => {"changed": false, "cmd": ["sudo", "systemctl", "is-active", "otelcol"], "delta": "0:00:00.019088", "end": "2025-02-20 17:24:48.088189", "msg": "", "rc": 0, "start": "2025-02-20 17:24:48.069101", "stderr": "", "stderr_lines": [], "stdout": "active", "stdout_lines": ["active"]}
2025-02-20 18:24:48,060 p=22402 u=snrj n=ansible INFO| TASK [install_otel_collector : Display otelcol service status] ***********************************************************************************************
2025-02-20 18:24:48,078 p=22402 u=snrj n=ansible INFO| ok: [4.180.254.0] => {
    "msg": "active"
}
2025-02-20 18:24:48,083 p=22402 u=snrj n=ansible INFO| PLAY RECAP ***************************************************************************************************************************************************
2025-02-20 18:24:48,083 p=22402 u=snrj n=ansible INFO| 4.180.254.0                : ok=8    changed=2    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2025-02-20 18:44:12,918 p=24625 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-20 18:44:13,076 p=24625 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-20 18:44:13,076 p=24625 u=snrj n=ansible ERROR| ERROR! the playbook: playbooks/install_otel_and_prometheus.yml could not be found
2025-02-20 18:44:20,488 p=24635 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-20 18:44:20,612 p=24635 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-20 18:44:20,925 p=24635 u=snrj n=ansible INFO| PLAY [Configure OpenTelemetry Collector and Prometheus] ******************************************************************************************************
2025-02-20 18:44:20,936 p=24635 u=snrj n=ansible INFO| TASK [Gathering Facts] ***************************************************************************************************************************************
2025-02-20 18:44:25,234 p=24635 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 4.180.254.0 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-20 18:44:25,234 p=24635 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 18:44:25,239 p=24635 u=snrj n=ansible INFO| TASK [otel_collector : Update apt repository] ****************************************************************************************************************
2025-02-20 18:44:28,863 p=24635 u=snrj n=ansible INFO| changed: [4.180.254.0] => {"cache_update_time": 1740073466, "cache_updated": true, "changed": true}
2025-02-20 18:44:28,872 p=24635 u=snrj n=ansible INFO| TASK [otel_collector : Install wget] *************************************************************************************************************************
2025-02-20 18:44:30,188 p=24635 u=snrj n=ansible INFO| ok: [4.180.254.0] => {"cache_update_time": 1740073466, "cache_updated": false, "changed": false}
2025-02-20 18:44:30,196 p=24635 u=snrj n=ansible INFO| TASK [otel_collector : Download OpenTelemetry Collector .deb package] ****************************************************************************************
2025-02-20 18:44:31,370 p=24635 u=snrj n=ansible INFO| ok: [4.180.254.0] => {"changed": false, "dest": "/opt/otelcol_0.120.0_linux_amd64.deb", "elapsed": 0, "gid": 0, "group": "root", "mode": "0644", "msg": "HTTP Error 304: Not Modified", "owner": "root", "size": 33615238, "state": "file", "status_code": 304, "uid": 0, "url": "https://github.com/open-telemetry/opentelemetry-collector-releases/releases/download/v0.120.0/otelcol_0.120.0_linux_amd64.deb"}
2025-02-20 18:44:31,386 p=24635 u=snrj n=ansible INFO| TASK [otel_collector : Install OpenTelemetry Collector .deb package] *****************************************************************************************
2025-02-20 18:44:34,900 p=24635 u=snrj n=ansible INFO| changed: [4.180.254.0] => {"changed": true, "cmd": ["sudo", "dpkg", "-i", "/opt/otelcol_0.120.0_linux_amd64.deb"], "delta": "0:00:03.088606", "end": "2025-02-20 17:44:34.886872", "msg": "", "rc": 0, "start": "2025-02-20 17:44:31.798266", "stderr": "Removed /etc/systemd/system/multi-user.target.wants/otelcol.service.\nCreated symlink /etc/systemd/system/multi-user.target.wants/otelcol.service → /lib/systemd/system/otelcol.service.", "stderr_lines": ["Removed /etc/systemd/system/multi-user.target.wants/otelcol.service.", "Created symlink /etc/systemd/system/multi-user.target.wants/otelcol.service → /lib/systemd/system/otelcol.service."], "stdout": "(Reading database ... 62679 files and directories currently installed.)\nPreparing to unpack .../otelcol_0.120.0_linux_amd64.deb ...\nUnpacking otelcol (0.120.0) over (0.120.0) ...\nSetting up otelcol (0.120.0) ...", "stdout_lines": ["(Reading database ... 62679 files and directories currently installed.)", "Preparing to unpack .../otelcol_0.120.0_linux_amd64.deb ...", "Unpacking otelcol (0.120.0) over (0.120.0) ...", "Setting up otelcol (0.120.0) ..."]}
2025-02-20 18:44:34,934 p=24635 u=snrj n=ansible INFO| TASK [otel_collector : Template OpenTelemetry Collector config] **********************************************************************************************
2025-02-20 18:44:36,587 p=24635 u=snrj n=ansible INFO| changed: [4.180.254.0] => {"changed": true, "checksum": "e10cc0c09072f88493e506b9803f4a3572d398ec", "dest": "/etc/otelcol/config.yaml", "gid": 0, "group": "root", "md5sum": "2a87fea81d83250280607e4b0af729f2", "mode": "0644", "owner": "root", "size": 1193, "src": "/home/azureadmin/.ansible/tmp/ansible-tmp-1740073475.022193-24694-95968657857068/.source.yaml", "state": "file", "uid": 0}
2025-02-20 18:44:36,595 p=24635 u=snrj n=ansible INFO| TASK [otel_collector : Get otelcol service status] ***********************************************************************************************************
2025-02-20 18:44:37,192 p=24635 u=snrj n=ansible INFO| ok: [4.180.254.0] => {"changed": false, "name": "otelcol", "status": {"ActiveEnterTimestamp": "Thu 2025-02-20 17:44:34 UTC", "ActiveEnterTimestampMonotonic": "8961491583", "ActiveExitTimestamp": "n/a", "ActiveExitTimestampMonotonic": "0", "ActiveState": "active", "After": "sysinit.target systemd-journald.socket system.slice basic.target network.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Thu 2025-02-20 17:44:34 UTC", "AssertTimestampMonotonic": "8961487255", "Before": "shutdown.target multi-user.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "56198000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Thu 2025-02-20 17:44:34 UTC", "ConditionTimestampMonotonic": "8961487253", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/otelcol.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "OpenTelemetry Collector", "DevicePolicy": "auto", "DynamicUser": "no", "EffectiveCPUs": "0", "EffectiveMemoryNodes": "0", "EnvironmentFiles": "/etc/otelcol/otelcol.conf (ignore_errors=no)", "ExecMainCode": "0", "ExecMainExitTimestamp": "n/a", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "11393", "ExecMainStartTimestamp": "Thu 2025-02-20 17:44:34 UTC", "ExecMainStartTimestampMonotonic": "8961491121", "ExecMainStatus": "0", "ExecStart": "{ path=/usr/bin/otelcol ; argv[]=/usr/bin/otelcol $OTELCOL_OPTIONS ; ignore_errors=no ; start_time=[Thu 2025-02-20 17:44:34 UTC] ; stop_time=[n/a] ; pid=11393 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/otelcol ; argv[]=/usr/bin/otelcol $OTELCOL_OPTIONS ; flags= ; start_time=[Thu 2025-02-20 17:44:34 UTC] ; stop_time=[n/a] ; pid=11393 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/otelcol.service", "FreezerState": "running", "GID": "998", "Group": "otel", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "otelcol.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "n/a", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "Thu 2025-02-20 17:44:34 UTC", "InactiveExitTimestampMonotonic": "8961491583", "InvocationID": "d98e77faab6d4c0099d9a498e542a0ea", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "mixed", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "13611", "LimitNPROCSoft": "13611", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "13611", "LimitSIGPENDINGSoft": "13611", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "11393", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "18432000", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "otelcol.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "system.slice sysinit.target", "Restart": "on-failure", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Thu 2025-02-20 17:44:34 UTC", "StateChangeTimestampMonotonic": "8961491583", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "7", "TasksMax": "4083", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UID": "998", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "otel", "UtmpMode": "init", "WantedBy": "multi-user.target", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-20 18:44:37,202 p=24635 u=snrj n=ansible INFO| TASK [otel_collector : Debug if service is inactive] *********************************************************************************************************
2025-02-20 18:44:37,215 p=24635 u=snrj n=ansible INFO| skipping: [4.180.254.0] => {"false_condition": "otelcol_service_status.status.ActiveState != \"active\""}
2025-02-20 18:44:37,220 p=24635 u=snrj n=ansible INFO| TASK [otel_collector : Start otelcol service if not running] *************************************************************************************************
2025-02-20 18:44:37,231 p=24635 u=snrj n=ansible INFO| skipping: [4.180.254.0] => {"changed": false, "false_condition": "otelcol_service_status.status.ActiveState != \"active\"", "skip_reason": "Conditional result was False"}
2025-02-20 18:44:37,235 p=24635 u=snrj n=ansible INFO| TASK [otel_collector : Print otelcol service status] *********************************************************************************************************
2025-02-20 18:44:37,543 p=24635 u=snrj n=ansible INFO| ok: [4.180.254.0] => {"changed": false, "cmd": ["sudo", "systemctl", "is-active", "otelcol"], "delta": "0:00:00.021547", "end": "2025-02-20 17:44:37.592081", "msg": "", "rc": 0, "start": "2025-02-20 17:44:37.570534", "stderr": "", "stderr_lines": [], "stdout": "active", "stdout_lines": ["active"]}
2025-02-20 18:44:37,551 p=24635 u=snrj n=ansible INFO| TASK [otel_collector : Display otelcol service status] *******************************************************************************************************
2025-02-20 18:44:37,568 p=24635 u=snrj n=ansible INFO| ok: [4.180.254.0] => {
    "msg": "active"
}
2025-02-20 18:44:37,581 p=24635 u=snrj n=ansible INFO| RUNNING HANDLER [otel_collector : Restart otelcol service] ***************************************************************************************************
2025-02-20 18:44:38,126 p=24635 u=snrj n=ansible INFO| changed: [4.180.254.0] => {"changed": true, "enabled": true, "name": "otelcol", "state": "started", "status": {"ActiveEnterTimestamp": "Thu 2025-02-20 17:44:34 UTC", "ActiveEnterTimestampMonotonic": "8961491583", "ActiveExitTimestamp": "n/a", "ActiveExitTimestampMonotonic": "0", "ActiveState": "active", "After": "sysinit.target systemd-journald.socket system.slice basic.target network.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Thu 2025-02-20 17:44:34 UTC", "AssertTimestampMonotonic": "8961487255", "Before": "shutdown.target multi-user.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "56805000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Thu 2025-02-20 17:44:34 UTC", "ConditionTimestampMonotonic": "8961487253", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/otelcol.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "OpenTelemetry Collector", "DevicePolicy": "auto", "DynamicUser": "no", "EffectiveCPUs": "0", "EffectiveMemoryNodes": "0", "EnvironmentFiles": "/etc/otelcol/otelcol.conf (ignore_errors=no)", "ExecMainCode": "0", "ExecMainExitTimestamp": "n/a", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "11393", "ExecMainStartTimestamp": "Thu 2025-02-20 17:44:34 UTC", "ExecMainStartTimestampMonotonic": "8961491121", "ExecMainStatus": "0", "ExecStart": "{ path=/usr/bin/otelcol ; argv[]=/usr/bin/otelcol $OTELCOL_OPTIONS ; ignore_errors=no ; start_time=[Thu 2025-02-20 17:44:34 UTC] ; stop_time=[n/a] ; pid=11393 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/otelcol ; argv[]=/usr/bin/otelcol $OTELCOL_OPTIONS ; flags= ; start_time=[Thu 2025-02-20 17:44:34 UTC] ; stop_time=[n/a] ; pid=11393 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/otelcol.service", "FreezerState": "running", "GID": "998", "Group": "otel", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "otelcol.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "n/a", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "Thu 2025-02-20 17:44:34 UTC", "InactiveExitTimestampMonotonic": "8961491583", "InvocationID": "d98e77faab6d4c0099d9a498e542a0ea", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "mixed", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "13611", "LimitNPROCSoft": "13611", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "13611", "LimitSIGPENDINGSoft": "13611", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "11393", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "18530304", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "otelcol.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "system.slice sysinit.target", "Restart": "on-failure", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Thu 2025-02-20 17:44:34 UTC", "StateChangeTimestampMonotonic": "8961491583", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "7", "TasksMax": "4083", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UID": "998", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "otel", "UtmpMode": "init", "WantedBy": "multi-user.target", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-20 18:44:38,127 p=24635 u=snrj n=ansible INFO| PLAY RECAP ***************************************************************************************************************************************************
2025-02-20 18:44:38,127 p=24635 u=snrj n=ansible INFO| 4.180.254.0                : ok=10   changed=4    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2025-02-20 18:46:31,959 p=24899 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-20 18:46:32,101 p=24899 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-20 18:46:32,394 p=24899 u=snrj n=ansible INFO| PLAY [Configure OpenTelemetry Collector and Prometheus] ******************************************************************************************************
2025-02-20 18:46:32,402 p=24899 u=snrj n=ansible INFO| TASK [Gathering Facts] ***************************************************************************************************************************************
2025-02-20 18:46:36,816 p=24899 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 4.180.254.0 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-20 18:46:36,816 p=24899 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 18:46:36,821 p=24899 u=snrj n=ansible INFO| TASK [otel_collector : Update apt repository] ****************************************************************************************************************
2025-02-20 18:46:40,519 p=24899 u=snrj n=ansible INFO| changed: [4.180.254.0] => {"cache_update_time": 1740073598, "cache_updated": true, "changed": true}
2025-02-20 18:46:40,526 p=24899 u=snrj n=ansible INFO| TASK [otel_collector : Install wget] *************************************************************************************************************************
2025-02-20 18:46:41,668 p=24899 u=snrj n=ansible INFO| ok: [4.180.254.0] => {"cache_update_time": 1740073598, "cache_updated": false, "changed": false}
2025-02-20 18:46:41,674 p=24899 u=snrj n=ansible INFO| TASK [otel_collector : Download OpenTelemetry Collector .deb package] ****************************************************************************************
2025-02-20 18:46:42,689 p=24899 u=snrj n=ansible INFO| ok: [4.180.254.0] => {"changed": false, "dest": "/opt/otelcol_0.120.0_linux_amd64.deb", "elapsed": 0, "gid": 0, "group": "root", "mode": "0644", "msg": "HTTP Error 304: Not Modified", "owner": "root", "size": 33615238, "state": "file", "status_code": 304, "uid": 0, "url": "https://github.com/open-telemetry/opentelemetry-collector-releases/releases/download/v0.120.0/otelcol_0.120.0_linux_amd64.deb"}
2025-02-20 18:46:42,705 p=24899 u=snrj n=ansible INFO| TASK [otel_collector : Install OpenTelemetry Collector .deb package] *****************************************************************************************
2025-02-20 18:46:46,193 p=24899 u=snrj n=ansible INFO| changed: [4.180.254.0] => {"changed": true, "cmd": ["sudo", "dpkg", "-i", "/opt/otelcol_0.120.0_linux_amd64.deb"], "delta": "0:00:03.083999", "end": "2025-02-20 17:46:46.220722", "msg": "", "rc": 0, "start": "2025-02-20 17:46:43.136723", "stderr": "Removed /etc/systemd/system/multi-user.target.wants/otelcol.service.\nCreated symlink /etc/systemd/system/multi-user.target.wants/otelcol.service → /lib/systemd/system/otelcol.service.", "stderr_lines": ["Removed /etc/systemd/system/multi-user.target.wants/otelcol.service.", "Created symlink /etc/systemd/system/multi-user.target.wants/otelcol.service → /lib/systemd/system/otelcol.service."], "stdout": "(Reading database ... 62679 files and directories currently installed.)\nPreparing to unpack .../otelcol_0.120.0_linux_amd64.deb ...\nUnpacking otelcol (0.120.0) over (0.120.0) ...\nSetting up otelcol (0.120.0) ...", "stdout_lines": ["(Reading database ... 62679 files and directories currently installed.)", "Preparing to unpack .../otelcol_0.120.0_linux_amd64.deb ...", "Unpacking otelcol (0.120.0) over (0.120.0) ...", "Setting up otelcol (0.120.0) ..."]}
2025-02-20 18:46:46,211 p=24899 u=snrj n=ansible INFO| TASK [otel_collector : Template OpenTelemetry Collector config] **********************************************************************************************
2025-02-20 18:46:47,218 p=24899 u=snrj n=ansible INFO| ok: [4.180.254.0] => {"changed": false, "checksum": "e10cc0c09072f88493e506b9803f4a3572d398ec", "dest": "/etc/otelcol/config.yaml", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/etc/otelcol/config.yaml", "size": 1193, "state": "file", "uid": 0}
2025-02-20 18:46:47,226 p=24899 u=snrj n=ansible INFO| PLAY RECAP ***************************************************************************************************************************************************
2025-02-20 18:46:47,226 p=24899 u=snrj n=ansible INFO| 4.180.254.0                : ok=6    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-20 18:49:24,163 p=25193 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-20 18:49:24,316 p=25193 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-20 18:49:24,606 p=25193 u=snrj n=ansible INFO| PLAY [Configure OpenTelemetry Collector and Prometheus] ******************************************************************************************************
2025-02-20 18:49:24,614 p=25193 u=snrj n=ansible INFO| TASK [Gathering Facts] ***************************************************************************************************************************************
2025-02-20 18:49:29,056 p=25193 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 4.180.254.0 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-20 18:49:29,057 p=25193 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 18:49:29,062 p=25193 u=snrj n=ansible INFO| TASK [otel_collector : Update apt repository] ****************************************************************************************************************
2025-02-20 18:49:32,779 p=25193 u=snrj n=ansible INFO| changed: [4.180.254.0] => {"cache_update_time": 1740073770, "cache_updated": true, "changed": true}
2025-02-20 18:49:32,788 p=25193 u=snrj n=ansible INFO| TASK [otel_collector : Install wget] *************************************************************************************************************************
2025-02-20 18:49:33,910 p=25193 u=snrj n=ansible INFO| ok: [4.180.254.0] => {"cache_update_time": 1740073770, "cache_updated": false, "changed": false}
2025-02-20 18:49:33,918 p=25193 u=snrj n=ansible INFO| TASK [otel_collector : Download OpenTelemetry Collector .deb package] ****************************************************************************************
2025-02-20 18:49:34,937 p=25193 u=snrj n=ansible INFO| ok: [4.180.254.0] => {"changed": false, "dest": "/opt/otelcol_0.120.0_linux_amd64.deb", "elapsed": 0, "gid": 0, "group": "root", "mode": "0644", "msg": "HTTP Error 304: Not Modified", "owner": "root", "size": 33615238, "state": "file", "status_code": 304, "uid": 0, "url": "https://github.com/open-telemetry/opentelemetry-collector-releases/releases/download/v0.120.0/otelcol_0.120.0_linux_amd64.deb"}
2025-02-20 18:49:34,952 p=25193 u=snrj n=ansible INFO| TASK [otel_collector : Install OpenTelemetry Collector .deb package] *****************************************************************************************
2025-02-20 18:49:38,518 p=25193 u=snrj n=ansible INFO| changed: [4.180.254.0] => {"changed": true, "cmd": ["sudo", "dpkg", "-i", "/opt/otelcol_0.120.0_linux_amd64.deb"], "delta": "0:00:03.102754", "end": "2025-02-20 17:49:38.486928", "msg": "", "rc": 0, "start": "2025-02-20 17:49:35.384174", "stderr": "Removed /etc/systemd/system/multi-user.target.wants/otelcol.service.\nCreated symlink /etc/systemd/system/multi-user.target.wants/otelcol.service → /lib/systemd/system/otelcol.service.", "stderr_lines": ["Removed /etc/systemd/system/multi-user.target.wants/otelcol.service.", "Created symlink /etc/systemd/system/multi-user.target.wants/otelcol.service → /lib/systemd/system/otelcol.service."], "stdout": "(Reading database ... 62679 files and directories currently installed.)\nPreparing to unpack .../otelcol_0.120.0_linux_amd64.deb ...\nUnpacking otelcol (0.120.0) over (0.120.0) ...\nSetting up otelcol (0.120.0) ...", "stdout_lines": ["(Reading database ... 62679 files and directories currently installed.)", "Preparing to unpack .../otelcol_0.120.0_linux_amd64.deb ...", "Unpacking otelcol (0.120.0) over (0.120.0) ...", "Setting up otelcol (0.120.0) ..."]}
2025-02-20 18:49:38,529 p=25193 u=snrj n=ansible INFO| TASK [otel_collector : Template OpenTelemetry Collector config] **********************************************************************************************
2025-02-20 18:49:40,139 p=25193 u=snrj n=ansible INFO| changed: [4.180.254.0] => {"changed": true, "checksum": "a7cd7f8a89e6d22aaafaeeb667e5a6cba4bb561a", "dest": "/etc/otelcol/config.yaml", "gid": 0, "group": "root", "md5sum": "4aa2621da113323a7f96f98d9392b62f", "mode": "0644", "owner": "root", "size": 1209, "src": "/home/azureadmin/.ansible/tmp/ansible-tmp-1740073778.611201-25228-189309526775282/.source.yaml", "state": "file", "uid": 0}
2025-02-20 18:49:40,157 p=25193 u=snrj n=ansible INFO| RUNNING HANDLER [otel_collector : Restart otelcol service] ***************************************************************************************************
2025-02-20 18:49:40,829 p=25193 u=snrj n=ansible INFO| changed: [4.180.254.0] => {"changed": true, "enabled": true, "name": "otelcol", "state": "started", "status": {"ActiveEnterTimestamp": "Thu 2025-02-20 17:49:38 UTC", "ActiveEnterTimestampMonotonic": "9265093624", "ActiveExitTimestamp": "n/a", "ActiveExitTimestampMonotonic": "0", "ActiveState": "active", "After": "system.slice sysinit.target basic.target systemd-journald.socket network.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Thu 2025-02-20 17:49:38 UTC", "AssertTimestampMonotonic": "9265089332", "Before": "multi-user.target shutdown.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "55117000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Thu 2025-02-20 17:49:38 UTC", "ConditionTimestampMonotonic": "9265089330", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/otelcol.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "OpenTelemetry Collector", "DevicePolicy": "auto", "DynamicUser": "no", "EffectiveCPUs": "0", "EffectiveMemoryNodes": "0", "EnvironmentFiles": "/etc/otelcol/otelcol.conf (ignore_errors=no)", "ExecMainCode": "0", "ExecMainExitTimestamp": "n/a", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "12693", "ExecMainStartTimestamp": "Thu 2025-02-20 17:49:38 UTC", "ExecMainStartTimestampMonotonic": "9265093110", "ExecMainStatus": "0", "ExecStart": "{ path=/usr/bin/otelcol ; argv[]=/usr/bin/otelcol $OTELCOL_OPTIONS ; ignore_errors=no ; start_time=[Thu 2025-02-20 17:49:38 UTC] ; stop_time=[n/a] ; pid=12693 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/otelcol ; argv[]=/usr/bin/otelcol $OTELCOL_OPTIONS ; flags= ; start_time=[Thu 2025-02-20 17:49:38 UTC] ; stop_time=[n/a] ; pid=12693 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/otelcol.service", "FreezerState": "running", "GID": "998", "Group": "otel", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "otelcol.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "n/a", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "Thu 2025-02-20 17:49:38 UTC", "InactiveExitTimestampMonotonic": "9265093624", "InvocationID": "6fc2ecd946504bd4a758bb1e9b661543", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "mixed", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "13611", "LimitNPROCSoft": "13611", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "13611", "LimitSIGPENDINGSoft": "13611", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "12693", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "18399232", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "otelcol.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "on-failure", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Thu 2025-02-20 17:49:38 UTC", "StateChangeTimestampMonotonic": "9265093624", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "6", "TasksMax": "4083", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UID": "998", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "otel", "UtmpMode": "init", "WantedBy": "multi-user.target", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-20 18:49:40,830 p=25193 u=snrj n=ansible INFO| PLAY RECAP ***************************************************************************************************************************************************
2025-02-20 18:49:40,830 p=25193 u=snrj n=ansible INFO| 4.180.254.0                : ok=7    changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-20 18:54:10,909 p=25669 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-20 18:54:11,077 p=25669 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-20 18:54:11,427 p=25669 u=snrj n=ansible ERROR| ERROR! conflicting action statements: hosts, tasks

The error appears to be in '/Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/otel_collector/tasks/main.yml': line 21, column 3, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

# Configuration of OTEL COLLECTOR config file:
- name: Apply OpenTelemetry Collector configuration and restart service
  ^ here

2025-02-20 18:55:00,002 p=25749 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-20 18:55:00,145 p=25749 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-20 18:55:00,371 p=25749 u=snrj n=ansible ERROR| ERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:
JSON: Expecting value: line 1 column 1 (char 0)

Syntax Error while loading YAML.
  mapping values are not allowed in this context. mapping values are not allowed in this context
  in "<unicode string>", line 22, column 15

The error appears to be in '/Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/otel_collector/tasks/main.yml': line 22, column 15, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

- name: Template OpenTelemetry Collector config
      template:
              ^ here

2025-02-20 18:56:14,146 p=25864 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-20 18:56:14,284 p=25864 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-20 18:56:14,489 p=25864 u=snrj n=ansible ERROR| ERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:
JSON: Expecting value: line 1 column 1 (char 0)

Syntax Error while loading YAML.
  but found another document. expected a single document in the stream
  in "<unicode string>", line 2, column 1
but found another document
  in "<unicode string>", line 15, column 1

The error appears to be in '/Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/otel_collector/tasks/main.yml': line 15, column 1, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

    dest: /opt/otelcol_0.120.0_linux_amd64.deb
---
^ here

2025-02-20 18:57:31,935 p=25984 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-20 18:57:32,075 p=25984 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-20 18:57:32,302 p=25984 u=snrj n=ansible ERROR| ERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:
JSON: Expecting value: line 1 column 1 (char 0)

Syntax Error while loading YAML.
  but found another document. expected a single document in the stream
  in "<unicode string>", line 3, column 1
but found another document
  in "<unicode string>", line 17, column 1

The error appears to be in '/Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/otel_collector/tasks/main.yml': line 17, column 1, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


---
^ here

2025-02-20 18:58:28,112 p=26170 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-20 18:58:28,218 p=26170 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-20 18:58:28,428 p=26170 u=snrj n=ansible ERROR| ERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:
JSON: Expecting value: line 1 column 1 (char 0)

Syntax Error while loading YAML.
  did not find expected '-' indicator. while parsing a block collection
  in "<unicode string>", line 3, column 1
did not find expected '-' indicator
  in "<unicode string>", line 63, column 1

The error appears to be in '/Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/otel_collector/tasks/main.yml': line 63, column 1, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

# Handlers
handlers:
^ here

2025-02-20 18:58:38,770 p=26187 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-20 18:58:39,122 p=26187 u=snrj n=ansible ERROR| ERROR! conflicting action statements: debug, handlers

The error appears to be in '/Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/otel_collector/tasks/main.yml': line 58, column 3, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

# Display otelcol service status
- name: Display otelcol service status
  ^ here

2025-02-20 19:00:41,102 p=26413 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-20 19:00:41,557 p=26413 u=snrj n=ansible INFO| PLAY [Configure OpenTelemetry Collector and Prometheus] ******************************************************************************************************
2025-02-20 19:00:41,567 p=26413 u=snrj n=ansible INFO| TASK [Gathering Facts] ***************************************************************************************************************************************
2025-02-20 19:00:43,879 p=26413 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 4.180.254.0 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-20 19:00:43,879 p=26413 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:00:43,884 p=26413 u=snrj n=ansible INFO| TASK [otel_collector : Update apt repository] ****************************************************************************************************************
2025-02-20 19:00:47,696 p=26413 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:00:47,705 p=26413 u=snrj n=ansible INFO| TASK [otel_collector : Install wget] *************************************************************************************************************************
2025-02-20 19:00:48,823 p=26413 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:00:48,831 p=26413 u=snrj n=ansible INFO| TASK [otel_collector : Download OpenTelemetry Collector .deb package] ****************************************************************************************
2025-02-20 19:00:49,868 p=26413 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:00:49,875 p=26413 u=snrj n=ansible INFO| TASK [otel_collector : Install OpenTelemetry Collector .deb package] *****************************************************************************************
2025-02-20 19:00:53,431 p=26413 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:00:53,442 p=26413 u=snrj n=ansible INFO| TASK [otel_collector : Template OpenTelemetry Collector config] **********************************************************************************************
2025-02-20 19:00:54,827 p=26413 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:00:54,834 p=26413 u=snrj n=ansible INFO| TASK [otel_collector : Get otelcol service status] ***********************************************************************************************************
2025-02-20 19:00:55,415 p=26413 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:00:55,425 p=26413 u=snrj n=ansible INFO| TASK [otel_collector : Debug if service is inactive] *********************************************************************************************************
2025-02-20 19:00:55,438 p=26413 u=snrj n=ansible INFO| skipping: [4.180.254.0]
2025-02-20 19:00:55,444 p=26413 u=snrj n=ansible INFO| TASK [otel_collector : Start otelcol service if not running] *************************************************************************************************
2025-02-20 19:00:55,454 p=26413 u=snrj n=ansible INFO| skipping: [4.180.254.0]
2025-02-20 19:00:55,459 p=26413 u=snrj n=ansible INFO| TASK [otel_collector : Print otelcol service status] *********************************************************************************************************
2025-02-20 19:00:55,778 p=26413 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:00:55,787 p=26413 u=snrj n=ansible INFO| TASK [otel_collector : Display otelcol service status] *******************************************************************************************************
2025-02-20 19:00:55,804 p=26413 u=snrj n=ansible INFO| ok: [4.180.254.0] => {
    "msg": "active"
}
2025-02-20 19:00:55,817 p=26413 u=snrj n=ansible INFO| RUNNING HANDLER [otel_collector : Restart otelcol service] ***************************************************************************************************
2025-02-20 19:00:56,338 p=26413 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:00:56,339 p=26413 u=snrj n=ansible INFO| PLAY RECAP ***************************************************************************************************************************************************
2025-02-20 19:00:56,340 p=26413 u=snrj n=ansible INFO| 4.180.254.0                : ok=10   changed=4    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2025-02-20 19:01:03,032 p=26479 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-20 19:01:03,448 p=26479 u=snrj n=ansible INFO| PLAY [Configure OpenTelemetry Collector and Prometheus] ******************************************************************************************************
2025-02-20 19:01:03,457 p=26479 u=snrj n=ansible INFO| TASK [Gathering Facts] ***************************************************************************************************************************************
2025-02-20 19:01:04,787 p=26479 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 4.180.254.0 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-20 19:01:04,787 p=26479 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:01:04,792 p=26479 u=snrj n=ansible INFO| TASK [otel_collector : Update apt repository] ****************************************************************************************************************
2025-02-20 19:01:08,440 p=26479 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:01:08,450 p=26479 u=snrj n=ansible INFO| TASK [otel_collector : Install wget] *************************************************************************************************************************
2025-02-20 19:01:09,712 p=26479 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:01:09,720 p=26479 u=snrj n=ansible INFO| TASK [otel_collector : Download OpenTelemetry Collector .deb package] ****************************************************************************************
2025-02-20 19:01:10,627 p=26479 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:01:10,641 p=26479 u=snrj n=ansible INFO| TASK [otel_collector : Install OpenTelemetry Collector .deb package] *****************************************************************************************
2025-02-20 19:01:14,130 p=26479 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:01:14,141 p=26479 u=snrj n=ansible INFO| TASK [otel_collector : Template OpenTelemetry Collector config] **********************************************************************************************
2025-02-20 19:01:15,119 p=26479 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:01:15,127 p=26479 u=snrj n=ansible INFO| TASK [otel_collector : Get otelcol service status] ***********************************************************************************************************
2025-02-20 19:01:15,757 p=26479 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:01:15,767 p=26479 u=snrj n=ansible INFO| TASK [otel_collector : Debug if service is inactive] *********************************************************************************************************
2025-02-20 19:01:15,781 p=26479 u=snrj n=ansible INFO| skipping: [4.180.254.0]
2025-02-20 19:01:15,786 p=26479 u=snrj n=ansible INFO| TASK [otel_collector : Start otelcol service if not running] *************************************************************************************************
2025-02-20 19:01:15,797 p=26479 u=snrj n=ansible INFO| skipping: [4.180.254.0]
2025-02-20 19:01:15,801 p=26479 u=snrj n=ansible INFO| TASK [otel_collector : Print otelcol service status] *********************************************************************************************************
2025-02-20 19:01:16,108 p=26479 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:01:16,116 p=26479 u=snrj n=ansible INFO| TASK [otel_collector : Display otelcol service status] *******************************************************************************************************
2025-02-20 19:01:16,134 p=26479 u=snrj n=ansible INFO| ok: [4.180.254.0] => {
    "msg": "active"
}
2025-02-20 19:01:16,140 p=26479 u=snrj n=ansible INFO| PLAY RECAP ***************************************************************************************************************************************************
2025-02-20 19:01:16,140 p=26479 u=snrj n=ansible INFO| 4.180.254.0                : ok=9    changed=2    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2025-02-20 19:01:34,560 p=26555 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-20 19:01:35,013 p=26555 u=snrj n=ansible INFO| PLAY [Configure OpenTelemetry Collector and Prometheus] ******************************************************************************************************
2025-02-20 19:01:35,023 p=26555 u=snrj n=ansible INFO| TASK [Gathering Facts] ***************************************************************************************************************************************
2025-02-20 19:01:36,394 p=26555 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 4.180.254.0 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-20 19:01:36,395 p=26555 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:01:36,399 p=26555 u=snrj n=ansible INFO| TASK [otel_collector : Update apt repository] ****************************************************************************************************************
2025-02-20 19:01:40,132 p=26555 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:01:40,141 p=26555 u=snrj n=ansible INFO| TASK [otel_collector : Install wget] *************************************************************************************************************************
2025-02-20 19:01:41,250 p=26555 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:01:41,262 p=26555 u=snrj n=ansible INFO| TASK [otel_collector : Download OpenTelemetry Collector .deb package] ****************************************************************************************
2025-02-20 19:01:42,072 p=26555 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:01:42,081 p=26555 u=snrj n=ansible INFO| TASK [otel_collector : Install OpenTelemetry Collector .deb package] *****************************************************************************************
2025-02-20 19:01:45,557 p=26555 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:01:45,567 p=26555 u=snrj n=ansible INFO| TASK [otel_collector : Template OpenTelemetry Collector config] **********************************************************************************************
2025-02-20 19:01:46,557 p=26555 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:01:46,566 p=26555 u=snrj n=ansible INFO| TASK [otel_collector : Get otelcol service status] ***********************************************************************************************************
2025-02-20 19:01:47,193 p=26555 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:01:47,202 p=26555 u=snrj n=ansible INFO| TASK [otel_collector : Debug if service is inactive] *********************************************************************************************************
2025-02-20 19:01:47,216 p=26555 u=snrj n=ansible INFO| skipping: [4.180.254.0]
2025-02-20 19:01:47,222 p=26555 u=snrj n=ansible INFO| TASK [otel_collector : Start otelcol service if not running] *************************************************************************************************
2025-02-20 19:01:47,232 p=26555 u=snrj n=ansible INFO| skipping: [4.180.254.0]
2025-02-20 19:01:47,236 p=26555 u=snrj n=ansible INFO| TASK [otel_collector : Print otelcol service status] *********************************************************************************************************
2025-02-20 19:01:47,689 p=26555 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:01:47,697 p=26555 u=snrj n=ansible INFO| TASK [otel_collector : Display otelcol service status] *******************************************************************************************************
2025-02-20 19:01:47,715 p=26555 u=snrj n=ansible INFO| ok: [4.180.254.0] => {
    "msg": "active"
}
2025-02-20 19:01:47,724 p=26555 u=snrj n=ansible INFO| TASK [prometheus : Install Prometheus dependencies] **********************************************************************************************************
2025-02-20 19:01:49,031 p=26555 u=snrj n=ansible INFO| ok: [4.180.254.0] => (item=wget)
2025-02-20 19:01:50,287 p=26555 u=snrj n=ansible INFO| ok: [4.180.254.0] => (item=tar)
2025-02-20 19:01:50,292 p=26555 u=snrj n=ansible INFO| TASK [prometheus : Download Prometheus] **********************************************************************************************************************
2025-02-20 19:01:54,257 p=26555 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:01:54,265 p=26555 u=snrj n=ansible INFO| TASK [prometheus : Extract Prometheus tarball] ***************************************************************************************************************
2025-02-20 19:01:56,382 p=26555 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:01:56,390 p=26555 u=snrj n=ansible INFO| TASK [prometheus : Template Prometheus config] ***************************************************************************************************************
2025-02-20 19:01:58,024 p=26555 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:01:58,032 p=26555 u=snrj n=ansible INFO| TASK [prometheus : Create Prometheus systemd service] ********************************************************************************************************
2025-02-20 19:01:59,330 p=26555 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:01:59,339 p=26555 u=snrj n=ansible INFO| TASK [prometheus : Enable and start Prometheus service] ******************************************************************************************************
2025-02-20 19:02:00,305 p=26555 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:02:00,314 p=26555 u=snrj n=ansible INFO| PLAY RECAP ***************************************************************************************************************************************************
2025-02-20 19:02:00,314 p=26555 u=snrj n=ansible INFO| 4.180.254.0                : ok=15   changed=7    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2025-02-20 19:04:18,851 p=26865 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-20 19:04:19,292 p=26865 u=snrj n=ansible INFO| PLAY [Check status of OpenTelemetry Collector service] *******************************************************************************************************
2025-02-20 19:04:19,301 p=26865 u=snrj n=ansible INFO| TASK [Gathering Facts] ***************************************************************************************************************************************
2025-02-20 19:04:21,568 p=26865 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 4.180.254.0 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-20 19:04:21,569 p=26865 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:04:21,573 p=26865 u=snrj n=ansible INFO| TASK [Get otelcol service status] ****************************************************************************************************************************
2025-02-20 19:04:22,228 p=26865 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:04:22,236 p=26865 u=snrj n=ansible INFO| TASK [Display otelcol service status] ************************************************************************************************************************
2025-02-20 19:04:22,252 p=26865 u=snrj n=ansible INFO| ok: [4.180.254.0] => {
    "msg": "otelcol service is active"
}
2025-02-20 19:04:22,257 p=26865 u=snrj n=ansible INFO| TASK [Debug if service is inactive] **************************************************************************************************************************
2025-02-20 19:04:22,268 p=26865 u=snrj n=ansible INFO| skipping: [4.180.254.0]
2025-02-20 19:04:22,276 p=26865 u=snrj n=ansible INFO| TASK [Print otelcol service status command] ******************************************************************************************************************
2025-02-20 19:04:22,657 p=26865 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:04:22,665 p=26865 u=snrj n=ansible INFO| TASK [Display otelcol service status command output] *********************************************************************************************************
2025-02-20 19:04:22,683 p=26865 u=snrj n=ansible INFO| ok: [4.180.254.0] => {
    "msg": "active"
}
2025-02-20 19:04:22,684 p=26865 u=snrj n=ansible INFO| PLAY RECAP ***************************************************************************************************************************************************
2025-02-20 19:04:22,684 p=26865 u=snrj n=ansible INFO| 4.180.254.0                : ok=5    changed=0    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2025-02-20 19:05:57,787 p=27034 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-20 19:05:58,203 p=27034 u=snrj n=ansible INFO| PLAY [Check status of OpenTelemetry Collector service] *******************************************************************************************************
2025-02-20 19:05:58,211 p=27034 u=snrj n=ansible INFO| TASK [Gathering Facts] ***************************************************************************************************************************************
2025-02-20 19:06:00,504 p=27034 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 4.180.254.0 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-20 19:06:00,504 p=27034 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:06:00,508 p=27034 u=snrj n=ansible INFO| TASK [Get otelcol service status] ****************************************************************************************************************************
2025-02-20 19:06:01,108 p=27034 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:06:01,117 p=27034 u=snrj n=ansible INFO| TASK [Display otelcol service status] ************************************************************************************************************************
2025-02-20 19:06:01,134 p=27034 u=snrj n=ansible INFO| ok: [4.180.254.0] => {
    "msg": "otelcol service is active"
}
2025-02-20 19:06:01,139 p=27034 u=snrj n=ansible INFO| TASK [Debug if otelcol service is inactive] ******************************************************************************************************************
2025-02-20 19:06:01,150 p=27034 u=snrj n=ansible INFO| skipping: [4.180.254.0]
2025-02-20 19:06:01,155 p=27034 u=snrj n=ansible INFO| TASK [Get Prometheus service status] *************************************************************************************************************************
2025-02-20 19:06:01,653 p=27034 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:06:01,661 p=27034 u=snrj n=ansible INFO| TASK [Display prometheus service status] *********************************************************************************************************************
2025-02-20 19:06:01,677 p=27034 u=snrj n=ansible INFO| ok: [4.180.254.0] => {
    "msg": "otelcol service is active"
}
2025-02-20 19:06:01,682 p=27034 u=snrj n=ansible INFO| TASK [Debug if prometheus service is inactive] ***************************************************************************************************************
2025-02-20 19:06:01,693 p=27034 u=snrj n=ansible INFO| skipping: [4.180.254.0]
2025-02-20 19:06:01,694 p=27034 u=snrj n=ansible INFO| PLAY RECAP ***************************************************************************************************************************************************
2025-02-20 19:06:01,694 p=27034 u=snrj n=ansible INFO| 4.180.254.0                : ok=5    changed=0    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2025-02-20 19:06:26,706 p=27093 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-20 19:06:27,096 p=27093 u=snrj n=ansible INFO| PLAY [Check status of OpenTelemetry Collector service] *******************************************************************************************************
2025-02-20 19:06:27,104 p=27093 u=snrj n=ansible INFO| TASK [Gathering Facts] ***************************************************************************************************************************************
2025-02-20 19:06:28,552 p=27093 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 4.180.254.0 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-20 19:06:28,552 p=27093 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:06:28,556 p=27093 u=snrj n=ansible INFO| TASK [Get otelcol service status] ****************************************************************************************************************************
2025-02-20 19:06:29,189 p=27093 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:06:29,198 p=27093 u=snrj n=ansible INFO| TASK [Display otelcol service status] ************************************************************************************************************************
2025-02-20 19:06:29,214 p=27093 u=snrj n=ansible INFO| ok: [4.180.254.0] => {
    "msg": "otelcol service is active"
}
2025-02-20 19:06:29,219 p=27093 u=snrj n=ansible INFO| TASK [Get Prometheus service status] *************************************************************************************************************************
2025-02-20 19:06:29,916 p=27093 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:06:29,926 p=27093 u=snrj n=ansible INFO| TASK [Display prometheus service status] *********************************************************************************************************************
2025-02-20 19:06:29,941 p=27093 u=snrj n=ansible INFO| ok: [4.180.254.0] => {
    "msg": "otelcol service is active"
}
2025-02-20 19:06:29,942 p=27093 u=snrj n=ansible INFO| PLAY RECAP ***************************************************************************************************************************************************
2025-02-20 19:06:29,942 p=27093 u=snrj n=ansible INFO| 4.180.254.0                : ok=5    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-20 19:06:50,060 p=27149 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-20 19:06:50,445 p=27149 u=snrj n=ansible INFO| PLAY [Check status of OpenTelemetry Collector service] *******************************************************************************************************
2025-02-20 19:06:50,452 p=27149 u=snrj n=ansible INFO| TASK [Gathering Facts] ***************************************************************************************************************************************
2025-02-20 19:06:52,001 p=27149 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 4.180.254.0 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-20 19:06:52,001 p=27149 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:06:52,005 p=27149 u=snrj n=ansible INFO| TASK [Get otelcol service status] ****************************************************************************************************************************
2025-02-20 19:06:52,740 p=27149 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:06:52,749 p=27149 u=snrj n=ansible INFO| TASK [Display otelcol service status] ************************************************************************************************************************
2025-02-20 19:06:52,765 p=27149 u=snrj n=ansible INFO| ok: [4.180.254.0] => {
    "msg": "otelcol service is active"
}
2025-02-20 19:06:52,770 p=27149 u=snrj n=ansible INFO| TASK [Get Prometheus service status] *************************************************************************************************************************
2025-02-20 19:06:53,363 p=27149 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:06:53,374 p=27149 u=snrj n=ansible INFO| TASK [Display prometheus service status] *********************************************************************************************************************
2025-02-20 19:06:53,389 p=27149 u=snrj n=ansible INFO| ok: [4.180.254.0] => {
    "msg": "prometheus service is active"
}
2025-02-20 19:06:53,390 p=27149 u=snrj n=ansible INFO| PLAY RECAP ***************************************************************************************************************************************************
2025-02-20 19:06:53,390 p=27149 u=snrj n=ansible INFO| 4.180.254.0                : ok=5    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-20 19:07:36,970 p=27240 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-20 19:07:37,390 p=27240 u=snrj n=ansible INFO| PLAY [Configure OpenTelemetry Collector and Prometheus] ******************************************************************************************************
2025-02-20 19:07:37,399 p=27240 u=snrj n=ansible INFO| TASK [Gathering Facts] ***************************************************************************************************************************************
2025-02-20 19:07:38,836 p=27240 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 4.180.254.0 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-20 19:07:38,836 p=27240 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:07:38,841 p=27240 u=snrj n=ansible INFO| TASK [otel_collector : Update apt repository] ****************************************************************************************************************
2025-02-20 19:07:42,415 p=27240 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:07:42,424 p=27240 u=snrj n=ansible INFO| TASK [otel_collector : Install wget] *************************************************************************************************************************
2025-02-20 19:07:43,548 p=27240 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:07:43,561 p=27240 u=snrj n=ansible INFO| TASK [otel_collector : Download OpenTelemetry Collector .deb package] ****************************************************************************************
2025-02-20 19:07:44,744 p=27240 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:07:44,753 p=27240 u=snrj n=ansible INFO| TASK [otel_collector : Install OpenTelemetry Collector .deb package] *****************************************************************************************
2025-02-20 19:07:48,263 p=27240 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:07:48,280 p=27240 u=snrj n=ansible INFO| TASK [otel_collector : Template OpenTelemetry Collector config] **********************************************************************************************
2025-02-20 19:07:49,351 p=27240 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:07:49,364 p=27240 u=snrj n=ansible INFO| TASK [otel_collector : Get otelcol service status] ***********************************************************************************************************
2025-02-20 19:07:50,296 p=27240 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:07:50,307 p=27240 u=snrj n=ansible INFO| TASK [otel_collector : Debug if service is inactive] *********************************************************************************************************
2025-02-20 19:07:50,316 p=27240 u=snrj n=ansible INFO| skipping: [4.180.254.0]
2025-02-20 19:07:50,318 p=27240 u=snrj n=ansible INFO| TASK [otel_collector : Start otelcol service if not running] *************************************************************************************************
2025-02-20 19:07:50,325 p=27240 u=snrj n=ansible INFO| skipping: [4.180.254.0]
2025-02-20 19:07:50,328 p=27240 u=snrj n=ansible INFO| TASK [otel_collector : Print otelcol service status] *********************************************************************************************************
2025-02-20 19:07:50,862 p=27240 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:07:50,873 p=27240 u=snrj n=ansible INFO| TASK [otel_collector : Display otelcol service status] *******************************************************************************************************
2025-02-20 19:07:50,886 p=27240 u=snrj n=ansible INFO| ok: [4.180.254.0] => {
    "msg": "active"
}
2025-02-20 19:07:50,891 p=27240 u=snrj n=ansible INFO| TASK [prometheus : Install Prometheus dependencies] **********************************************************************************************************
2025-02-20 19:07:52,293 p=27240 u=snrj n=ansible INFO| ok: [4.180.254.0] => (item=wget)
2025-02-20 19:07:53,380 p=27240 u=snrj n=ansible INFO| ok: [4.180.254.0] => (item=tar)
2025-02-20 19:07:53,395 p=27240 u=snrj n=ansible INFO| TASK [prometheus : Download Prometheus] **********************************************************************************************************************
2025-02-20 19:07:54,340 p=27240 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:07:54,351 p=27240 u=snrj n=ansible INFO| TASK [prometheus : Extract Prometheus tarball] ***************************************************************************************************************
2025-02-20 19:07:56,412 p=27240 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:07:56,423 p=27240 u=snrj n=ansible INFO| TASK [prometheus : Template Prometheus config] ***************************************************************************************************************
2025-02-20 19:07:57,798 p=27240 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:07:57,810 p=27240 u=snrj n=ansible INFO| TASK [prometheus : Create Prometheus systemd service] ********************************************************************************************************
2025-02-20 19:07:58,713 p=27240 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:07:58,723 p=27240 u=snrj n=ansible INFO| TASK [prometheus : Enable and start Prometheus service] ******************************************************************************************************
2025-02-20 19:07:59,205 p=27240 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:07:59,216 p=27240 u=snrj n=ansible INFO| PLAY RECAP ***************************************************************************************************************************************************
2025-02-20 19:07:59,216 p=27240 u=snrj n=ansible INFO| 4.180.254.0                : ok=15   changed=4    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2025-02-20 19:08:39,043 p=27389 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-20 19:08:39,422 p=27389 u=snrj n=ansible INFO| PLAY [Configure OpenTelemetry Collector and Prometheus] ******************************************************************************************************
2025-02-20 19:08:39,431 p=27389 u=snrj n=ansible INFO| TASK [Gathering Facts] ***************************************************************************************************************************************
2025-02-20 19:08:40,860 p=27389 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 4.180.254.0 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-20 19:08:40,861 p=27389 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:08:40,865 p=27389 u=snrj n=ansible INFO| TASK [common : Check if Python 3 exists] *********************************************************************************************************************
2025-02-20 19:08:41,214 p=27389 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:08:41,221 p=27389 u=snrj n=ansible INFO| TASK [common : Check if Python 3.7 exists] *******************************************************************************************************************
2025-02-20 19:08:41,566 p=27389 u=snrj n=ansible INFO| fatal: [4.180.254.0]: FAILED! => {"changed": false, "cmd": "python3.7 --version", "msg": "[Errno 2] No such file or directory: b'python3.7'", "rc": 2, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2025-02-20 19:08:41,566 p=27389 u=snrj n=ansible INFO| ...ignoring
2025-02-20 19:08:41,578 p=27389 u=snrj n=ansible INFO| TASK [common : Print Python 3 version if exists] *************************************************************************************************************
2025-02-20 19:08:41,595 p=27389 u=snrj n=ansible INFO| ok: [4.180.254.0] => {
    "msg": "Python 3 version: Python 3.10.12"
}
2025-02-20 19:08:41,603 p=27389 u=snrj n=ansible INFO| TASK [otel_collector : Update apt repository] ****************************************************************************************************************
2025-02-20 19:08:45,153 p=27389 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:08:45,162 p=27389 u=snrj n=ansible INFO| TASK [otel_collector : Install wget] *************************************************************************************************************************
2025-02-20 19:08:46,299 p=27389 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:08:46,307 p=27389 u=snrj n=ansible INFO| TASK [otel_collector : Download OpenTelemetry Collector .deb package] ****************************************************************************************
2025-02-20 19:08:47,114 p=27389 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:08:47,122 p=27389 u=snrj n=ansible INFO| TASK [otel_collector : Install OpenTelemetry Collector .deb package] *****************************************************************************************
2025-02-20 19:08:50,907 p=27389 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:08:50,919 p=27389 u=snrj n=ansible INFO| TASK [otel_collector : Template OpenTelemetry Collector config] **********************************************************************************************
2025-02-20 19:08:51,987 p=27389 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:08:51,998 p=27389 u=snrj n=ansible INFO| TASK [otel_collector : Get otelcol service status] ***********************************************************************************************************
2025-02-20 19:08:52,591 p=27389 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:08:52,601 p=27389 u=snrj n=ansible INFO| TASK [otel_collector : Debug if service is inactive] *********************************************************************************************************
2025-02-20 19:08:52,617 p=27389 u=snrj n=ansible INFO| skipping: [4.180.254.0]
2025-02-20 19:08:52,623 p=27389 u=snrj n=ansible INFO| TASK [otel_collector : Start otelcol service if not running] *************************************************************************************************
2025-02-20 19:08:52,636 p=27389 u=snrj n=ansible INFO| skipping: [4.180.254.0]
2025-02-20 19:08:52,641 p=27389 u=snrj n=ansible INFO| TASK [otel_collector : Print otelcol service status] *********************************************************************************************************
2025-02-20 19:08:52,947 p=27389 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:08:52,961 p=27389 u=snrj n=ansible INFO| TASK [otel_collector : Display otelcol service status] *******************************************************************************************************
2025-02-20 19:08:52,983 p=27389 u=snrj n=ansible INFO| ok: [4.180.254.0] => {
    "msg": "active"
}
2025-02-20 19:08:52,993 p=27389 u=snrj n=ansible INFO| TASK [prometheus : Install Prometheus dependencies] **********************************************************************************************************
2025-02-20 19:08:54,284 p=27389 u=snrj n=ansible INFO| ok: [4.180.254.0] => (item=wget)
2025-02-20 19:08:55,357 p=27389 u=snrj n=ansible INFO| ok: [4.180.254.0] => (item=tar)
2025-02-20 19:08:55,372 p=27389 u=snrj n=ansible INFO| TASK [prometheus : Download Prometheus] **********************************************************************************************************************
2025-02-20 19:08:56,263 p=27389 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:08:56,274 p=27389 u=snrj n=ansible INFO| TASK [prometheus : Extract Prometheus tarball] ***************************************************************************************************************
2025-02-20 19:08:58,405 p=27389 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:08:58,416 p=27389 u=snrj n=ansible INFO| TASK [prometheus : Template Prometheus config] ***************************************************************************************************************
2025-02-20 19:08:59,834 p=27389 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:08:59,849 p=27389 u=snrj n=ansible INFO| TASK [prometheus : Create Prometheus systemd service] ********************************************************************************************************
2025-02-20 19:09:00,737 p=27389 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:09:00,748 p=27389 u=snrj n=ansible INFO| TASK [prometheus : Enable and start Prometheus service] ******************************************************************************************************
2025-02-20 19:09:01,253 p=27389 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:09:01,264 p=27389 u=snrj n=ansible INFO| PLAY RECAP ***************************************************************************************************************************************************
2025-02-20 19:09:01,265 p=27389 u=snrj n=ansible INFO| 4.180.254.0                : ok=18   changed=5    unreachable=0    failed=0    skipped=2    rescued=0    ignored=1   
2025-02-20 19:09:10,075 p=27499 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-20 19:09:10,499 p=27499 u=snrj n=ansible INFO| PLAY [Configure OpenTelemetry Collector and Prometheus] ******************************************************************************************************
2025-02-20 19:09:10,509 p=27499 u=snrj n=ansible INFO| TASK [Gathering Facts] ***************************************************************************************************************************************
2025-02-20 19:09:11,884 p=27499 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 4.180.254.0 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-20 19:09:11,884 p=27499 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:09:11,888 p=27499 u=snrj n=ansible INFO| TASK [common : Check if Python 3 exists] *********************************************************************************************************************
2025-02-20 19:09:12,207 p=27499 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:09:12,216 p=27499 u=snrj n=ansible INFO| TASK [common : Print Python 3 version if exists] *************************************************************************************************************
2025-02-20 19:09:12,234 p=27499 u=snrj n=ansible INFO| ok: [4.180.254.0] => {
    "msg": "Python 3 version: Python 3.10.12"
}
2025-02-20 19:09:12,246 p=27499 u=snrj n=ansible INFO| TASK [otel_collector : Update apt repository] ****************************************************************************************************************
2025-02-20 19:09:15,792 p=27499 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:09:15,799 p=27499 u=snrj n=ansible INFO| TASK [otel_collector : Install wget] *************************************************************************************************************************
2025-02-20 19:09:16,920 p=27499 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:09:16,929 p=27499 u=snrj n=ansible INFO| TASK [otel_collector : Download OpenTelemetry Collector .deb package] ****************************************************************************************
2025-02-20 19:09:17,913 p=27499 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:09:17,921 p=27499 u=snrj n=ansible INFO| TASK [otel_collector : Install OpenTelemetry Collector .deb package] *****************************************************************************************
2025-02-20 19:09:21,497 p=27499 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:09:21,506 p=27499 u=snrj n=ansible INFO| TASK [otel_collector : Template OpenTelemetry Collector config] **********************************************************************************************
2025-02-20 19:09:22,472 p=27499 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:09:22,481 p=27499 u=snrj n=ansible INFO| TASK [otel_collector : Get otelcol service status] ***********************************************************************************************************
2025-02-20 19:09:23,064 p=27499 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:09:23,072 p=27499 u=snrj n=ansible INFO| TASK [otel_collector : Debug if service is inactive] *********************************************************************************************************
2025-02-20 19:09:23,085 p=27499 u=snrj n=ansible INFO| skipping: [4.180.254.0]
2025-02-20 19:09:23,091 p=27499 u=snrj n=ansible INFO| TASK [otel_collector : Start otelcol service if not running] *************************************************************************************************
2025-02-20 19:09:23,102 p=27499 u=snrj n=ansible INFO| skipping: [4.180.254.0]
2025-02-20 19:09:23,106 p=27499 u=snrj n=ansible INFO| TASK [otel_collector : Print otelcol service status] *********************************************************************************************************
2025-02-20 19:09:23,410 p=27499 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:09:23,419 p=27499 u=snrj n=ansible INFO| TASK [otel_collector : Display otelcol service status] *******************************************************************************************************
2025-02-20 19:09:23,437 p=27499 u=snrj n=ansible INFO| ok: [4.180.254.0] => {
    "msg": "active"
}
2025-02-20 19:09:23,446 p=27499 u=snrj n=ansible INFO| TASK [prometheus : Install Prometheus dependencies] **********************************************************************************************************
2025-02-20 19:09:24,704 p=27499 u=snrj n=ansible INFO| ok: [4.180.254.0] => (item=wget)
2025-02-20 19:09:25,828 p=27499 u=snrj n=ansible INFO| ok: [4.180.254.0] => (item=tar)
2025-02-20 19:09:25,838 p=27499 u=snrj n=ansible INFO| TASK [prometheus : Download Prometheus] **********************************************************************************************************************
2025-02-20 19:09:26,645 p=27499 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:09:26,654 p=27499 u=snrj n=ansible INFO| TASK [prometheus : Extract Prometheus tarball] ***************************************************************************************************************
2025-02-20 19:09:28,795 p=27499 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:09:28,803 p=27499 u=snrj n=ansible INFO| TASK [prometheus : Template Prometheus config] ***************************************************************************************************************
2025-02-20 19:09:30,125 p=27499 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:09:30,133 p=27499 u=snrj n=ansible INFO| TASK [prometheus : Create Prometheus systemd service] ********************************************************************************************************
2025-02-20 19:09:30,999 p=27499 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:09:31,009 p=27499 u=snrj n=ansible INFO| TASK [prometheus : Enable and start Prometheus service] ******************************************************************************************************
2025-02-20 19:09:31,495 p=27499 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:09:31,504 p=27499 u=snrj n=ansible INFO| PLAY RECAP ***************************************************************************************************************************************************
2025-02-20 19:09:31,504 p=27499 u=snrj n=ansible INFO| 4.180.254.0                : ok=17   changed=5    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2025-02-20 19:09:40,343 p=27596 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-20 19:09:40,749 p=27596 u=snrj n=ansible INFO| PLAY [Check status of OpenTelemetry Collector service] *******************************************************************************************************
2025-02-20 19:09:40,757 p=27596 u=snrj n=ansible INFO| TASK [Gathering Facts] ***************************************************************************************************************************************
2025-02-20 19:09:42,065 p=27596 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 4.180.254.0 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-20 19:09:42,065 p=27596 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:09:42,070 p=27596 u=snrj n=ansible INFO| TASK [Get otelcol service status] ****************************************************************************************************************************
2025-02-20 19:09:42,726 p=27596 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:09:42,735 p=27596 u=snrj n=ansible INFO| TASK [Display otelcol service status] ************************************************************************************************************************
2025-02-20 19:09:42,752 p=27596 u=snrj n=ansible INFO| ok: [4.180.254.0] => {
    "msg": "otelcol service is active"
}
2025-02-20 19:09:42,757 p=27596 u=snrj n=ansible INFO| TASK [Get Prometheus service status] *************************************************************************************************************************
2025-02-20 19:09:43,251 p=27596 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:09:43,262 p=27596 u=snrj n=ansible INFO| TASK [Display prometheus service status] *********************************************************************************************************************
2025-02-20 19:09:43,277 p=27596 u=snrj n=ansible INFO| ok: [4.180.254.0] => {
    "msg": "prometheus service is active"
}
2025-02-20 19:09:43,278 p=27596 u=snrj n=ansible INFO| PLAY RECAP ***************************************************************************************************************************************************
2025-02-20 19:09:43,278 p=27596 u=snrj n=ansible INFO| 4.180.254.0                : ok=5    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-20 19:15:22,878 p=28140 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-20 19:15:23,341 p=28140 u=snrj n=ansible INFO| PLAY [Configure OpenTelemetry Collector and Prometheus] ******************************************************************************************************
2025-02-20 19:15:23,351 p=28140 u=snrj n=ansible INFO| TASK [Gathering Facts] ***************************************************************************************************************************************
2025-02-20 19:15:25,746 p=28140 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 4.180.254.0 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-20 19:15:25,746 p=28140 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:15:25,752 p=28140 u=snrj n=ansible INFO| TASK [common : Check if Python 3 exists] *********************************************************************************************************************
2025-02-20 19:15:26,077 p=28140 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:15:26,087 p=28140 u=snrj n=ansible INFO| TASK [common : Print Python 3 version if exists] *************************************************************************************************************
2025-02-20 19:15:26,105 p=28140 u=snrj n=ansible INFO| ok: [4.180.254.0] => {
    "msg": "Python 3 version: Python 3.10.12"
}
2025-02-20 19:15:26,117 p=28140 u=snrj n=ansible INFO| TASK [otel_collector : Update apt repository] ****************************************************************************************************************
2025-02-20 19:15:29,657 p=28140 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:15:29,665 p=28140 u=snrj n=ansible INFO| TASK [otel_collector : Install wget] *************************************************************************************************************************
2025-02-20 19:15:30,984 p=28140 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:15:30,992 p=28140 u=snrj n=ansible INFO| TASK [otel_collector : Download OpenTelemetry Collector .deb package] ****************************************************************************************
2025-02-20 19:15:32,018 p=28140 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:15:32,026 p=28140 u=snrj n=ansible INFO| TASK [otel_collector : Install OpenTelemetry Collector .deb package] *****************************************************************************************
2025-02-20 19:15:35,490 p=28140 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:15:35,501 p=28140 u=snrj n=ansible INFO| TASK [otel_collector : Template OpenTelemetry Collector config] **********************************************************************************************
2025-02-20 19:15:36,885 p=28140 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:15:36,893 p=28140 u=snrj n=ansible INFO| TASK [otel_collector : Get otelcol service status] ***********************************************************************************************************
2025-02-20 19:15:37,545 p=28140 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:15:37,553 p=28140 u=snrj n=ansible INFO| TASK [otel_collector : Debug if service is inactive] *********************************************************************************************************
2025-02-20 19:15:37,566 p=28140 u=snrj n=ansible INFO| skipping: [4.180.254.0]
2025-02-20 19:15:37,572 p=28140 u=snrj n=ansible INFO| TASK [otel_collector : Start otelcol service if not running] *************************************************************************************************
2025-02-20 19:15:37,582 p=28140 u=snrj n=ansible INFO| skipping: [4.180.254.0]
2025-02-20 19:15:37,587 p=28140 u=snrj n=ansible INFO| TASK [otel_collector : Print otelcol service status] *********************************************************************************************************
2025-02-20 19:15:37,899 p=28140 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:15:37,907 p=28140 u=snrj n=ansible INFO| TASK [otel_collector : Display otelcol service status] *******************************************************************************************************
2025-02-20 19:15:37,925 p=28140 u=snrj n=ansible INFO| ok: [4.180.254.0] => {
    "msg": "active"
}
2025-02-20 19:15:37,934 p=28140 u=snrj n=ansible INFO| TASK [prometheus : Install Prometheus dependencies] **********************************************************************************************************
2025-02-20 19:15:39,183 p=28140 u=snrj n=ansible INFO| ok: [4.180.254.0] => (item=wget)
2025-02-20 19:15:40,402 p=28140 u=snrj n=ansible INFO| ok: [4.180.254.0] => (item=tar)
2025-02-20 19:15:40,412 p=28140 u=snrj n=ansible INFO| TASK [prometheus : Download Prometheus] **********************************************************************************************************************
2025-02-20 19:15:41,429 p=28140 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:15:41,438 p=28140 u=snrj n=ansible INFO| TASK [prometheus : Extract Prometheus tarball] ***************************************************************************************************************
2025-02-20 19:15:43,675 p=28140 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:15:43,683 p=28140 u=snrj n=ansible INFO| TASK [prometheus : Template Prometheus config] ***************************************************************************************************************
2025-02-20 19:15:44,209 p=28140 u=snrj n=ansible INFO| An exception occurred during task execution. To see the full traceback, use -vvv. The error was: ansible.errors.AnsibleUndefinedVariable: 'prometheus_scrape_interval' is undefined
2025-02-20 19:15:44,210 p=28140 u=snrj n=ansible INFO| fatal: [4.180.254.0]: FAILED! => {"changed": false, "msg": "AnsibleUndefinedVariable: 'prometheus_scrape_interval' is undefined"}
2025-02-20 19:15:44,211 p=28140 u=snrj n=ansible INFO| PLAY RECAP ***************************************************************************************************************************************************
2025-02-20 19:15:44,211 p=28140 u=snrj n=ansible INFO| 4.180.254.0                : ok=14   changed=5    unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   
2025-02-20 19:18:39,485 p=28636 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-20 19:18:39,949 p=28636 u=snrj n=ansible INFO| PLAY [Configure OpenTelemetry Collector and Prometheus] ******************************************************************************************************
2025-02-20 19:18:39,958 p=28636 u=snrj n=ansible INFO| TASK [Gathering Facts] ***************************************************************************************************************************************
2025-02-20 19:18:42,298 p=28636 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 4.180.254.0 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-20 19:18:42,299 p=28636 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:18:42,306 p=28636 u=snrj n=ansible INFO| TASK [common : Check if Python 3 exists] *********************************************************************************************************************
2025-02-20 19:18:42,661 p=28636 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:18:42,671 p=28636 u=snrj n=ansible INFO| TASK [common : Print Python 3 version if exists] *************************************************************************************************************
2025-02-20 19:18:42,689 p=28636 u=snrj n=ansible INFO| ok: [4.180.254.0] => {
    "msg": "Python 3 version: Python 3.10.12"
}
2025-02-20 19:18:42,701 p=28636 u=snrj n=ansible INFO| TASK [otel_collector : Update apt repository] ****************************************************************************************************************
2025-02-20 19:18:46,371 p=28636 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:18:46,381 p=28636 u=snrj n=ansible INFO| TASK [otel_collector : Install wget] *************************************************************************************************************************
2025-02-20 19:18:47,699 p=28636 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:18:47,708 p=28636 u=snrj n=ansible INFO| TASK [otel_collector : Download OpenTelemetry Collector .deb package] ****************************************************************************************
2025-02-20 19:18:48,699 p=28636 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:18:48,708 p=28636 u=snrj n=ansible INFO| TASK [otel_collector : Install OpenTelemetry Collector .deb package] *****************************************************************************************
2025-02-20 19:18:53,841 p=28636 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:18:53,852 p=28636 u=snrj n=ansible INFO| TASK [otel_collector : Template OpenTelemetry Collector config] **********************************************************************************************
2025-02-20 19:18:55,171 p=28636 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:18:55,181 p=28636 u=snrj n=ansible INFO| TASK [otel_collector : Get otelcol service status] ***********************************************************************************************************
2025-02-20 19:18:55,806 p=28636 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:18:55,814 p=28636 u=snrj n=ansible INFO| TASK [otel_collector : Debug if service is inactive] *********************************************************************************************************
2025-02-20 19:18:55,831 p=28636 u=snrj n=ansible INFO| ok: [4.180.254.0] => {
    "msg": "otelcol is not running"
}
2025-02-20 19:18:55,836 p=28636 u=snrj n=ansible INFO| TASK [otel_collector : Start otelcol service if not running] *************************************************************************************************
2025-02-20 19:18:56,340 p=28636 u=snrj n=ansible INFO| fatal: [4.180.254.0]: FAILED! => {"changed": false, "msg": "Unable to start service otelcol: Job for otelcol.service failed because the control process exited with error code.\nSee \"systemctl status otelcol.service\" and \"journalctl -xeu otelcol.service\" for details.\n"}
2025-02-20 19:18:56,342 p=28636 u=snrj n=ansible INFO| PLAY RECAP ***************************************************************************************************************************************************
2025-02-20 19:18:56,342 p=28636 u=snrj n=ansible INFO| 4.180.254.0                : ok=10   changed=3    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2025-02-20 19:22:11,450 p=28998 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-20 19:22:11,886 p=28998 u=snrj n=ansible INFO| PLAY [Configure OpenTelemetry Collector and Prometheus] ******************************************************************************************************
2025-02-20 19:22:11,895 p=28998 u=snrj n=ansible INFO| TASK [Gathering Facts] ***************************************************************************************************************************************
2025-02-20 19:22:14,213 p=28998 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 4.180.254.0 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-20 19:22:14,213 p=28998 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:22:14,219 p=28998 u=snrj n=ansible INFO| TASK [common : Check if Python 3 exists] *********************************************************************************************************************
2025-02-20 19:22:14,562 p=28998 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:22:14,572 p=28998 u=snrj n=ansible INFO| TASK [common : Print Python 3 version if exists] *************************************************************************************************************
2025-02-20 19:22:14,591 p=28998 u=snrj n=ansible INFO| ok: [4.180.254.0] => {
    "msg": "Python 3 version: Python 3.10.12"
}
2025-02-20 19:22:14,603 p=28998 u=snrj n=ansible INFO| TASK [otel_collector : Update apt repository] ****************************************************************************************************************
2025-02-20 19:22:18,547 p=28998 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:22:18,555 p=28998 u=snrj n=ansible INFO| TASK [otel_collector : Install wget] *************************************************************************************************************************
2025-02-20 19:22:19,667 p=28998 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:22:19,677 p=28998 u=snrj n=ansible INFO| TASK [otel_collector : Download OpenTelemetry Collector .deb package] ****************************************************************************************
2025-02-20 19:22:20,685 p=28998 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:22:20,689 p=28998 u=snrj n=ansible INFO| TASK [otel_collector : Install OpenTelemetry Collector .deb package] *****************************************************************************************
2025-02-20 19:22:24,174 p=28998 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:22:24,184 p=28998 u=snrj n=ansible INFO| TASK [otel_collector : Template OpenTelemetry Collector config] **********************************************************************************************
2025-02-20 19:22:25,743 p=28998 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:22:25,751 p=28998 u=snrj n=ansible INFO| TASK [otel_collector : Get otelcol service status] ***********************************************************************************************************
2025-02-20 19:22:26,359 p=28998 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:22:26,367 p=28998 u=snrj n=ansible INFO| TASK [otel_collector : Debug if service is inactive] *********************************************************************************************************
2025-02-20 19:22:26,384 p=28998 u=snrj n=ansible INFO| ok: [4.180.254.0] => {
    "msg": "otelcol is not running"
}
2025-02-20 19:22:26,390 p=28998 u=snrj n=ansible INFO| TASK [otel_collector : Start otelcol service if not running] *************************************************************************************************
2025-02-20 19:22:26,938 p=28998 u=snrj n=ansible INFO| fatal: [4.180.254.0]: FAILED! => {"changed": false, "msg": "Unable to start service otelcol: Job for otelcol.service failed because the control process exited with error code.\nSee \"systemctl status otelcol.service\" and \"journalctl -xeu otelcol.service\" for details.\n"}
2025-02-20 19:22:26,939 p=28998 u=snrj n=ansible INFO| PLAY RECAP ***************************************************************************************************************************************************
2025-02-20 19:22:26,939 p=28998 u=snrj n=ansible INFO| 4.180.254.0                : ok=10   changed=4    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2025-02-20 19:24:08,341 p=29209 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-20 19:24:08,792 p=29209 u=snrj n=ansible INFO| PLAY [Configure OpenTelemetry Collector and Prometheus] ******************************************************************************************************
2025-02-20 19:24:08,802 p=29209 u=snrj n=ansible INFO| TASK [Gathering Facts] ***************************************************************************************************************************************
2025-02-20 19:24:11,075 p=29209 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 4.180.254.0 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-20 19:24:11,075 p=29209 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:24:11,080 p=29209 u=snrj n=ansible INFO| TASK [common : Check if Python 3 exists] *********************************************************************************************************************
2025-02-20 19:24:11,414 p=29209 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:24:11,426 p=29209 u=snrj n=ansible INFO| TASK [common : Print Python 3 version if exists] *************************************************************************************************************
2025-02-20 19:24:11,444 p=29209 u=snrj n=ansible INFO| ok: [4.180.254.0] => {
    "msg": "Python 3 version: Python 3.10.12"
}
2025-02-20 19:24:11,457 p=29209 u=snrj n=ansible INFO| TASK [otel_collector : Update apt repository] ****************************************************************************************************************
2025-02-20 19:24:15,181 p=29209 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:24:15,189 p=29209 u=snrj n=ansible INFO| TASK [otel_collector : Install wget] *************************************************************************************************************************
2025-02-20 19:24:16,306 p=29209 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:24:16,315 p=29209 u=snrj n=ansible INFO| TASK [otel_collector : Download OpenTelemetry Collector .deb package] ****************************************************************************************
2025-02-20 19:24:17,223 p=29209 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:24:17,231 p=29209 u=snrj n=ansible INFO| TASK [otel_collector : Install OpenTelemetry Collector .deb package] *****************************************************************************************
2025-02-20 19:24:22,247 p=29209 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:24:22,259 p=29209 u=snrj n=ansible INFO| TASK [otel_collector : Template OpenTelemetry Collector config] **********************************************************************************************
2025-02-20 19:24:23,713 p=29209 u=snrj n=ansible INFO| changed: [4.180.254.0]
2025-02-20 19:24:23,721 p=29209 u=snrj n=ansible INFO| TASK [otel_collector : Get otelcol service status] ***********************************************************************************************************
2025-02-20 19:24:24,395 p=29209 u=snrj n=ansible INFO| ok: [4.180.254.0]
2025-02-20 19:24:24,404 p=29209 u=snrj n=ansible INFO| TASK [otel_collector : Debug if service is inactive] *********************************************************************************************************
2025-02-20 19:24:24,421 p=29209 u=snrj n=ansible INFO| ok: [4.180.254.0] => {
    "msg": "otelcol is not running"
}
2025-02-20 19:24:24,426 p=29209 u=snrj n=ansible INFO| TASK [otel_collector : Start otelcol service if not running] *************************************************************************************************
2025-02-20 19:24:24,887 p=29209 u=snrj n=ansible INFO| fatal: [4.180.254.0]: FAILED! => {"changed": false, "msg": "Unable to start service otelcol: Job for otelcol.service failed because the control process exited with error code.\nSee \"systemctl status otelcol.service\" and \"journalctl -xeu otelcol.service\" for details.\n"}
2025-02-20 19:24:24,889 p=29209 u=snrj n=ansible INFO| PLAY RECAP ***************************************************************************************************************************************************
2025-02-20 19:24:24,889 p=29209 u=snrj n=ansible INFO| 4.180.254.0                : ok=10   changed=4    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2025-02-20 21:51:08,161 p=30268 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-20 21:51:11,558 p=30268 u=snrj n=ansible INFO| PLAY [Configure OpenTelemetry Collector and Prometheus] *****************************************************************************************************
2025-02-20 21:51:11,629 p=30268 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-20 21:51:18,221 p=30268 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 52.166.247.191 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another
Python interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for
more information.

2025-02-20 21:51:18,221 p=30268 u=snrj n=ansible INFO| ok: [52.166.247.191]
2025-02-20 21:51:18,236 p=30268 u=snrj n=ansible INFO| TASK [common : Check if Python 3 exists] ********************************************************************************************************************
2025-02-20 21:51:18,631 p=30268 u=snrj n=ansible INFO| changed: [52.166.247.191]
2025-02-20 21:51:18,651 p=30268 u=snrj n=ansible INFO| TASK [common : Print Python 3 version if exists] ************************************************************************************************************
2025-02-20 21:51:18,671 p=30268 u=snrj n=ansible INFO| ok: [52.166.247.191] => {
    "msg": "Python 3 version: Python 3.10.12"
}
2025-02-20 21:51:18,684 p=30268 u=snrj n=ansible INFO| TASK [otel_collector : Update apt repository] ***************************************************************************************************************
2025-02-20 21:51:41,856 p=30268 u=snrj n=ansible INFO| changed: [52.166.247.191]
2025-02-20 21:51:41,865 p=30268 u=snrj n=ansible INFO| TASK [otel_collector : Install wget] ************************************************************************************************************************
2025-02-20 21:51:43,179 p=30268 u=snrj n=ansible INFO| ok: [52.166.247.191]
2025-02-20 21:51:43,189 p=30268 u=snrj n=ansible INFO| TASK [otel_collector : Download OpenTelemetry Collector .deb package] ***************************************************************************************
2025-02-20 21:51:44,923 p=30268 u=snrj n=ansible WARNING| [WARNING]: Module remote_tmp /root/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues when running as another user. To
avoid this, create the remote_tmp dir with the correct permissions manually

2025-02-20 21:51:44,923 p=30268 u=snrj n=ansible INFO| changed: [52.166.247.191]
2025-02-20 21:51:44,931 p=30268 u=snrj n=ansible INFO| TASK [otel_collector : Install OpenTelemetry Collector .deb package] ****************************************************************************************
2025-02-20 21:51:55,779 p=30268 u=snrj n=ansible INFO| changed: [52.166.247.191]
2025-02-20 21:51:55,801 p=30268 u=snrj n=ansible INFO| TASK [otel_collector : Template OpenTelemetry Collector config] *********************************************************************************************
2025-02-20 21:51:57,720 p=30268 u=snrj n=ansible INFO| changed: [52.166.247.191]
2025-02-20 21:51:57,728 p=30268 u=snrj n=ansible INFO| TASK [otel_collector : Get otelcol service status] **********************************************************************************************************
2025-02-20 21:51:58,422 p=30268 u=snrj n=ansible INFO| ok: [52.166.247.191]
2025-02-20 21:51:58,430 p=30268 u=snrj n=ansible INFO| TASK [otel_collector : Debug if service is inactive] ********************************************************************************************************
2025-02-20 21:51:58,443 p=30268 u=snrj n=ansible INFO| skipping: [52.166.247.191]
2025-02-20 21:51:58,449 p=30268 u=snrj n=ansible INFO| TASK [otel_collector : Start otelcol service if not running] ************************************************************************************************
2025-02-20 21:51:58,460 p=30268 u=snrj n=ansible INFO| skipping: [52.166.247.191]
2025-02-20 21:51:58,464 p=30268 u=snrj n=ansible INFO| TASK [otel_collector : Print otelcol service status] ********************************************************************************************************
2025-02-20 21:51:58,805 p=30268 u=snrj n=ansible INFO| ok: [52.166.247.191]
2025-02-20 21:51:58,814 p=30268 u=snrj n=ansible INFO| TASK [otel_collector : Display otelcol service status] ******************************************************************************************************
2025-02-20 21:51:58,831 p=30268 u=snrj n=ansible INFO| ok: [52.166.247.191] => {
    "msg": "active"
}
2025-02-20 21:51:58,841 p=30268 u=snrj n=ansible INFO| TASK [prometheus : Install Prometheus dependencies] *********************************************************************************************************
2025-02-20 21:52:00,190 p=30268 u=snrj n=ansible INFO| ok: [52.166.247.191] => (item=wget)
2025-02-20 21:52:01,467 p=30268 u=snrj n=ansible INFO| ok: [52.166.247.191] => (item=tar)
2025-02-20 21:52:01,477 p=30268 u=snrj n=ansible INFO| TASK [prometheus : Download Prometheus] *********************************************************************************************************************
2025-02-20 21:52:04,378 p=30268 u=snrj n=ansible INFO| changed: [52.166.247.191]
2025-02-20 21:52:04,386 p=30268 u=snrj n=ansible INFO| TASK [prometheus : Extract Prometheus tarball] **************************************************************************************************************
2025-02-20 21:52:07,142 p=30268 u=snrj n=ansible INFO| changed: [52.166.247.191]
2025-02-20 21:52:07,150 p=30268 u=snrj n=ansible INFO| TASK [prometheus : Template Prometheus config] **************************************************************************************************************
2025-02-20 21:52:07,487 p=30268 u=snrj n=ansible INFO| An exception occurred during task execution. To see the full traceback, use -vvv. The error was: ansible.errors.AnsibleUndefinedVariable: 'prometheus_target' is undefined
2025-02-20 21:52:07,488 p=30268 u=snrj n=ansible INFO| fatal: [52.166.247.191]: FAILED! => {"changed": false, "msg": "AnsibleUndefinedVariable: 'prometheus_target' is undefined"}
2025-02-20 21:52:07,489 p=30268 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-20 21:52:07,490 p=30268 u=snrj n=ansible INFO| 52.166.247.191             : ok=14   changed=7    unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   
2025-02-20 21:55:52,491 p=30865 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-20 21:55:52,938 p=30865 u=snrj n=ansible INFO| PLAY [Configure OpenTelemetry Collector and Prometheus] *****************************************************************************************************
2025-02-20 21:55:52,946 p=30865 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-20 21:55:55,757 p=30865 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 52.166.247.191 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another
Python interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for
more information.

2025-02-20 21:55:55,758 p=30865 u=snrj n=ansible INFO| ok: [52.166.247.191]
2025-02-20 21:55:55,764 p=30865 u=snrj n=ansible INFO| TASK [common : Check if Python 3 exists] ********************************************************************************************************************
2025-02-20 21:55:56,146 p=30865 u=snrj n=ansible INFO| changed: [52.166.247.191]
2025-02-20 21:55:56,156 p=30865 u=snrj n=ansible INFO| TASK [common : Print Python 3 version if exists] ************************************************************************************************************
2025-02-20 21:55:56,176 p=30865 u=snrj n=ansible INFO| ok: [52.166.247.191] => {
    "msg": "Python 3 version: Python 3.10.12"
}
2025-02-20 21:55:56,188 p=30865 u=snrj n=ansible INFO| TASK [otel_collector : Update apt repository] ***************************************************************************************************************
2025-02-20 21:56:00,625 p=30865 u=snrj n=ansible INFO| changed: [52.166.247.191]
2025-02-20 21:56:00,637 p=30865 u=snrj n=ansible INFO| TASK [otel_collector : Install wget] ************************************************************************************************************************
2025-02-20 21:56:01,945 p=30865 u=snrj n=ansible INFO| ok: [52.166.247.191]
2025-02-20 21:56:01,958 p=30865 u=snrj n=ansible INFO| TASK [otel_collector : Download OpenTelemetry Collector .deb package] ***************************************************************************************
2025-02-20 21:56:03,032 p=30865 u=snrj n=ansible INFO| ok: [52.166.247.191]
2025-02-20 21:56:03,043 p=30865 u=snrj n=ansible INFO| TASK [otel_collector : Install OpenTelemetry Collector .deb package] ****************************************************************************************
2025-02-20 21:56:06,969 p=30865 u=snrj n=ansible INFO| changed: [52.166.247.191]
2025-02-20 21:56:06,982 p=30865 u=snrj n=ansible INFO| TASK [otel_collector : Template OpenTelemetry Collector config] *********************************************************************************************
2025-02-20 21:56:08,664 p=30865 u=snrj n=ansible INFO| changed: [52.166.247.191]
2025-02-20 21:56:08,676 p=30865 u=snrj n=ansible INFO| TASK [otel_collector : Get otelcol service status] **********************************************************************************************************
2025-02-20 21:56:09,430 p=30865 u=snrj n=ansible INFO| ok: [52.166.247.191]
2025-02-20 21:56:09,441 p=30865 u=snrj n=ansible INFO| TASK [otel_collector : Debug if service is inactive] ********************************************************************************************************
2025-02-20 21:56:09,461 p=30865 u=snrj n=ansible INFO| ok: [52.166.247.191] => {
    "msg": "otelcol is not running"
}
2025-02-20 21:56:09,466 p=30865 u=snrj n=ansible INFO| TASK [otel_collector : Start otelcol service if not running] ************************************************************************************************
2025-02-20 21:56:10,034 p=30865 u=snrj n=ansible INFO| fatal: [52.166.247.191]: FAILED! => {"changed": false, "msg": "Unable to start service otelcol: Job for otelcol.service failed because the control process exited with error code.\nSee \"systemctl status otelcol.service\" and \"journalctl -xeu otelcol.service\" for details.\n"}
2025-02-20 21:56:10,036 p=30865 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-20 21:56:10,036 p=30865 u=snrj n=ansible INFO| 52.166.247.191             : ok=10   changed=4    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2025-02-20 21:56:52,385 p=30995 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-20 21:56:52,806 p=30995 u=snrj n=ansible INFO| PLAY [Configure OpenTelemetry Collector and Prometheus] *****************************************************************************************************
2025-02-20 21:56:52,815 p=30995 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-20 21:56:54,245 p=30995 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 52.166.247.191 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another
Python interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for
more information.

2025-02-20 21:56:54,245 p=30995 u=snrj n=ansible INFO| ok: [52.166.247.191]
2025-02-20 21:56:54,250 p=30995 u=snrj n=ansible INFO| TASK [otel_collector : Update apt repository] ***************************************************************************************************************
2025-02-20 21:56:58,678 p=30995 u=snrj n=ansible INFO| changed: [52.166.247.191]
2025-02-20 21:56:58,689 p=30995 u=snrj n=ansible INFO| TASK [otel_collector : Install wget] ************************************************************************************************************************
2025-02-20 21:57:00,108 p=30995 u=snrj n=ansible INFO| ok: [52.166.247.191]
2025-02-20 21:57:00,117 p=30995 u=snrj n=ansible INFO| TASK [otel_collector : Download OpenTelemetry Collector .deb package] ***************************************************************************************
2025-02-20 21:57:01,060 p=30995 u=snrj n=ansible INFO| ok: [52.166.247.191]
2025-02-20 21:57:01,082 p=30995 u=snrj n=ansible INFO| TASK [otel_collector : Install OpenTelemetry Collector .deb package] ****************************************************************************************
2025-02-20 21:57:05,271 p=30995 u=snrj n=ansible INFO| changed: [52.166.247.191]
2025-02-20 21:57:05,286 p=30995 u=snrj n=ansible INFO| TASK [otel_collector : Template OpenTelemetry Collector config] *********************************************************************************************
2025-02-20 21:57:06,856 p=30995 u=snrj n=ansible INFO| ok: [52.166.247.191]
2025-02-20 21:57:06,868 p=30995 u=snrj n=ansible INFO| TASK [otel_collector : Get otelcol service status] **********************************************************************************************************
2025-02-20 21:57:07,572 p=30995 u=snrj n=ansible INFO| ok: [52.166.247.191]
2025-02-20 21:57:07,586 p=30995 u=snrj n=ansible INFO| TASK [otel_collector : Debug if service is inactive] ********************************************************************************************************
2025-02-20 21:57:07,606 p=30995 u=snrj n=ansible INFO| ok: [52.166.247.191] => {
    "msg": "otelcol is not running"
}
2025-02-20 21:57:07,611 p=30995 u=snrj n=ansible INFO| TASK [otel_collector : Start otelcol service if not running] ************************************************************************************************
2025-02-20 21:57:08,191 p=30995 u=snrj n=ansible INFO| fatal: [52.166.247.191]: FAILED! => {"changed": false, "msg": "Unable to start service otelcol: Job for otelcol.service failed because the control process exited with error code.\nSee \"systemctl status otelcol.service\" and \"journalctl -xeu otelcol.service\" for details.\n"}
2025-02-20 21:57:08,194 p=30995 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-20 21:57:08,194 p=30995 u=snrj n=ansible INFO| 52.166.247.191             : ok=8    changed=2    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2025-02-20 21:57:15,703 p=31056 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-20 21:57:16,122 p=31056 u=snrj n=ansible INFO| PLAY [Configure OpenTelemetry Collector and Prometheus] *****************************************************************************************************
2025-02-20 21:57:16,130 p=31056 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-20 21:57:17,705 p=31056 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 52.166.247.191 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another
Python interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for
more information.

2025-02-20 21:57:17,705 p=31056 u=snrj n=ansible INFO| ok: [52.166.247.191]
2025-02-20 21:57:17,711 p=31056 u=snrj n=ansible INFO| TASK [otel_collector : Template OpenTelemetry Collector config] *********************************************************************************************
2025-02-20 21:57:18,760 p=31056 u=snrj n=ansible INFO| ok: [52.166.247.191]
2025-02-20 21:57:18,767 p=31056 u=snrj n=ansible INFO| TASK [otel_collector : Get otelcol service status] **********************************************************************************************************
2025-02-20 21:57:19,464 p=31056 u=snrj n=ansible INFO| ok: [52.166.247.191]
2025-02-20 21:57:19,477 p=31056 u=snrj n=ansible INFO| TASK [otel_collector : Debug if service is inactive] ********************************************************************************************************
2025-02-20 21:57:19,494 p=31056 u=snrj n=ansible INFO| ok: [52.166.247.191] => {
    "msg": "otelcol is not running"
}
2025-02-20 21:57:19,499 p=31056 u=snrj n=ansible INFO| TASK [otel_collector : Start otelcol service if not running] ************************************************************************************************
2025-02-20 21:57:20,077 p=31056 u=snrj n=ansible INFO| changed: [52.166.247.191]
2025-02-20 21:57:20,086 p=31056 u=snrj n=ansible INFO| TASK [otel_collector : Print otelcol service status] ********************************************************************************************************
2025-02-20 21:57:20,626 p=31056 u=snrj n=ansible INFO| ok: [52.166.247.191]
2025-02-20 21:57:20,635 p=31056 u=snrj n=ansible INFO| TASK [otel_collector : Display otelcol service status] ******************************************************************************************************
2025-02-20 21:57:20,652 p=31056 u=snrj n=ansible INFO| ok: [52.166.247.191] => {
    "msg": "active"
}
2025-02-20 21:57:20,658 p=31056 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-20 21:57:20,658 p=31056 u=snrj n=ansible INFO| 52.166.247.191             : ok=7    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-20 21:57:41,218 p=31114 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-20 21:57:41,358 p=31114 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-20 21:57:41,631 p=31114 u=snrj n=ansible INFO| PLAY [Configure OpenTelemetry Collector and Prometheus] *****************************************************************************************************
2025-02-20 21:57:41,638 p=31114 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-20 21:57:43,068 p=31114 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 52.166.247.191 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another
Python interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for
more information.

2025-02-20 21:57:43,068 p=31114 u=snrj n=ansible INFO| ok: [52.166.247.191]
2025-02-20 21:57:43,072 p=31114 u=snrj n=ansible INFO| TASK [otel_collector : Template OpenTelemetry Collector config] *********************************************************************************************
2025-02-20 21:57:44,190 p=31114 u=snrj n=ansible INFO| ok: [52.166.247.191] => {"changed": false, "checksum": "680d75275849823ed073432538b44546d51bde27", "dest": "/etc/otelcol/config.yaml", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/etc/otelcol/config.yaml", "size": 450, "state": "file", "uid": 0}
2025-02-20 21:57:44,197 p=31114 u=snrj n=ansible INFO| TASK [otel_collector : Get otelcol service status] **********************************************************************************************************
2025-02-20 21:57:44,962 p=31114 u=snrj n=ansible INFO| ok: [52.166.247.191] => {"changed": false, "name": "otelcol", "status": {"ActiveEnterTimestamp": "Thu 2025-02-20 20:57:21 UTC", "ActiveEnterTimestampMonotonic": "1394505934", "ActiveExitTimestamp": "Thu 2025-02-20 20:57:21 UTC", "ActiveExitTimestampMonotonic": "1394567224", "ActiveState": "failed", "After": "network.target sysinit.target system.slice basic.target systemd-journald.socket", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Thu 2025-02-20 20:57:21 UTC", "AssertTimestampMonotonic": "1394749258", "Before": "shutdown.target multi-user.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "55677000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Thu 2025-02-20 20:57:21 UTC", "ConditionTimestampMonotonic": "1394749255", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "OpenTelemetry Collector", "DevicePolicy": "auto", "DynamicUser": "no", "EnvironmentFiles": "/etc/otelcol/otelcol.conf (ignore_errors=no)", "ExecMainCode": "1", "ExecMainExitTimestamp": "Thu 2025-02-20 20:57:21 UTC", "ExecMainExitTimestampMonotonic": "1394567052", "ExecMainPID": "3754", "ExecMainStartTimestamp": "Thu 2025-02-20 20:57:21 UTC", "ExecMainStartTimestampMonotonic": "1394505320", "ExecMainStatus": "1", "ExecStart": "{ path=/usr/bin/otelcol ; argv[]=/usr/bin/otelcol $OTELCOL_OPTIONS ; ignore_errors=no ; start_time=[Thu 2025-02-20 20:57:21 UTC] ; stop_time=[Thu 2025-02-20 20:57:21 UTC] ; pid=3754 ; code=exited ; status=1 }", "ExecStartEx": "{ path=/usr/bin/otelcol ; argv[]=/usr/bin/otelcol $OTELCOL_OPTIONS ; flags= ; start_time=[Thu 2025-02-20 20:57:21 UTC] ; stop_time=[Thu 2025-02-20 20:57:21 UTC] ; pid=3754 ; code=exited ; status=1 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/otelcol.service", "FreezerState": "running", "GID": "[not set]", "Group": "otel", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "otelcol.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Thu 2025-02-20 20:57:21 UTC", "InactiveEnterTimestampMonotonic": "1394749185", "InactiveExitTimestamp": "Thu 2025-02-20 20:57:21 UTC", "InactiveExitTimestampMonotonic": "1394567710", "InvocationID": "90c3d6d2137f4ed584b369e8a2d1f468", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "mixed", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "13611", "LimitNPROCSoft": "13611", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "13611", "LimitSIGPENDINGSoft": "13611", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "5", "NUMAPolicy": "n/a", "Names": "otelcol.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "on-failure", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "exit-code", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Thu 2025-02-20 20:57:21 UTC", "StateChangeTimestampMonotonic": "1394749375", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "failed", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "4083", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "otel", "UtmpMode": "init", "WantedBy": "multi-user.target", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-20 21:57:44,975 p=31114 u=snrj n=ansible INFO| TASK [otel_collector : Debug if service is inactive] ********************************************************************************************************
2025-02-20 21:57:44,992 p=31114 u=snrj n=ansible INFO| ok: [52.166.247.191] => {
    "msg": "otelcol is not running"
}
2025-02-20 21:57:44,997 p=31114 u=snrj n=ansible INFO| TASK [otel_collector : Start otelcol service if not running] ************************************************************************************************
2025-02-20 21:57:45,577 p=31114 u=snrj n=ansible INFO| changed: [52.166.247.191] => {"changed": true, "name": "otelcol", "state": "started", "status": {"ActiveEnterTimestamp": "Thu 2025-02-20 20:57:21 UTC", "ActiveEnterTimestampMonotonic": "1394505934", "ActiveExitTimestamp": "Thu 2025-02-20 20:57:21 UTC", "ActiveExitTimestampMonotonic": "1394567224", "ActiveState": "failed", "After": "network.target sysinit.target system.slice basic.target systemd-journald.socket", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Thu 2025-02-20 20:57:21 UTC", "AssertTimestampMonotonic": "1394749258", "Before": "shutdown.target multi-user.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "55677000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Thu 2025-02-20 20:57:21 UTC", "ConditionTimestampMonotonic": "1394749255", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "OpenTelemetry Collector", "DevicePolicy": "auto", "DynamicUser": "no", "EnvironmentFiles": "/etc/otelcol/otelcol.conf (ignore_errors=no)", "ExecMainCode": "1", "ExecMainExitTimestamp": "Thu 2025-02-20 20:57:21 UTC", "ExecMainExitTimestampMonotonic": "1394567052", "ExecMainPID": "3754", "ExecMainStartTimestamp": "Thu 2025-02-20 20:57:21 UTC", "ExecMainStartTimestampMonotonic": "1394505320", "ExecMainStatus": "1", "ExecStart": "{ path=/usr/bin/otelcol ; argv[]=/usr/bin/otelcol $OTELCOL_OPTIONS ; ignore_errors=no ; start_time=[Thu 2025-02-20 20:57:21 UTC] ; stop_time=[Thu 2025-02-20 20:57:21 UTC] ; pid=3754 ; code=exited ; status=1 }", "ExecStartEx": "{ path=/usr/bin/otelcol ; argv[]=/usr/bin/otelcol $OTELCOL_OPTIONS ; flags= ; start_time=[Thu 2025-02-20 20:57:21 UTC] ; stop_time=[Thu 2025-02-20 20:57:21 UTC] ; pid=3754 ; code=exited ; status=1 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/otelcol.service", "FreezerState": "running", "GID": "[not set]", "Group": "otel", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "otelcol.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Thu 2025-02-20 20:57:21 UTC", "InactiveEnterTimestampMonotonic": "1394749185", "InactiveExitTimestamp": "Thu 2025-02-20 20:57:21 UTC", "InactiveExitTimestampMonotonic": "1394567710", "InvocationID": "90c3d6d2137f4ed584b369e8a2d1f468", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "mixed", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "13611", "LimitNPROCSoft": "13611", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "13611", "LimitSIGPENDINGSoft": "13611", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "5", "NUMAPolicy": "n/a", "Names": "otelcol.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "on-failure", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "exit-code", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Thu 2025-02-20 20:57:21 UTC", "StateChangeTimestampMonotonic": "1394749375", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "failed", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "4083", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "otel", "UtmpMode": "init", "WantedBy": "multi-user.target", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-20 21:57:45,586 p=31114 u=snrj n=ansible INFO| TASK [otel_collector : Print otelcol service status] ********************************************************************************************************
2025-02-20 21:57:46,125 p=31114 u=snrj n=ansible INFO| ok: [52.166.247.191] => {"changed": false, "cmd": ["sudo", "systemctl", "is-active", "otelcol"], "delta": "0:00:00.051052", "end": "2025-02-20 20:57:46.072868", "msg": "", "rc": 0, "start": "2025-02-20 20:57:46.021816", "stderr": "", "stderr_lines": [], "stdout": "active", "stdout_lines": ["active"]}
2025-02-20 21:57:46,133 p=31114 u=snrj n=ansible INFO| TASK [otel_collector : Display otelcol service status] ******************************************************************************************************
2025-02-20 21:57:46,151 p=31114 u=snrj n=ansible INFO| ok: [52.166.247.191] => {
    "msg": "active"
}
2025-02-20 21:57:46,156 p=31114 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-20 21:57:46,156 p=31114 u=snrj n=ansible INFO| 52.166.247.191             : ok=7    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-20 22:03:03,312 p=31726 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-20 22:03:03,472 p=31726 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-20 22:03:03,741 p=31726 u=snrj n=ansible INFO| PLAY [Configure OpenTelemetry Collector and Prometheus] *****************************************************************************************************
2025-02-20 22:03:03,749 p=31726 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-20 22:03:08,544 p=31726 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 52.166.247.191 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another
Python interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for
more information.

2025-02-20 22:03:08,545 p=31726 u=snrj n=ansible INFO| ok: [52.166.247.191]
2025-02-20 22:03:08,551 p=31726 u=snrj n=ansible INFO| TASK [otel_collector : Template OpenTelemetry Collector config] *********************************************************************************************
2025-02-20 22:03:10,234 p=31726 u=snrj n=ansible INFO| changed: [52.166.247.191] => {"changed": true, "checksum": "61db31c34a9b7c18a8d9e0c209976e83b31aea3f", "dest": "/etc/otelcol/config.yaml", "gid": 0, "group": "root", "md5sum": "6fdf1e7a0652e2494011e8a1e9fab810", "mode": "0644", "owner": "root", "size": 444, "src": "/home/azureadmin/.ansible/tmp/ansible-tmp-1740085388.656024-31741-167739365511356/.source.yaml", "state": "file", "uid": 0}
2025-02-20 22:03:10,241 p=31726 u=snrj n=ansible INFO| TASK [otel_collector : Get otelcol service status] **********************************************************************************************************
2025-02-20 22:03:11,109 p=31726 u=snrj n=ansible INFO| ok: [52.166.247.191] => {"changed": false, "name": "otelcol", "status": {"ActiveEnterTimestamp": "Thu 2025-02-20 21:00:30 UTC", "ActiveEnterTimestampMonotonic": "1584004622", "ActiveExitTimestamp": "Thu 2025-02-20 21:00:30 UTC", "ActiveExitTimestampMonotonic": "1584068959", "ActiveState": "failed", "After": "network.target sysinit.target system.slice basic.target systemd-journald.socket", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Thu 2025-02-20 21:00:30 UTC", "AssertTimestampMonotonic": "1584249361", "Before": "shutdown.target multi-user.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "55899000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Thu 2025-02-20 21:00:30 UTC", "ConditionTimestampMonotonic": "1584249358", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "OpenTelemetry Collector", "DevicePolicy": "auto", "DynamicUser": "no", "EnvironmentFiles": "/etc/otelcol/otelcol.conf (ignore_errors=no)", "ExecMainCode": "1", "ExecMainExitTimestamp": "Thu 2025-02-20 21:00:30 UTC", "ExecMainExitTimestampMonotonic": "1584068771", "ExecMainPID": "4013", "ExecMainStartTimestamp": "Thu 2025-02-20 21:00:30 UTC", "ExecMainStartTimestampMonotonic": "1584004312", "ExecMainStatus": "1", "ExecStart": "{ path=/usr/bin/otelcol ; argv[]=/usr/bin/otelcol $OTELCOL_OPTIONS ; ignore_errors=no ; start_time=[Thu 2025-02-20 21:00:30 UTC] ; stop_time=[Thu 2025-02-20 21:00:30 UTC] ; pid=4013 ; code=exited ; status=1 }", "ExecStartEx": "{ path=/usr/bin/otelcol ; argv[]=/usr/bin/otelcol $OTELCOL_OPTIONS ; flags= ; start_time=[Thu 2025-02-20 21:00:30 UTC] ; stop_time=[Thu 2025-02-20 21:00:30 UTC] ; pid=4013 ; code=exited ; status=1 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/otelcol.service", "FreezerState": "running", "GID": "[not set]", "Group": "otel", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "otelcol.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Thu 2025-02-20 21:00:30 UTC", "InactiveEnterTimestampMonotonic": "1584249283", "InactiveExitTimestamp": "Thu 2025-02-20 21:00:30 UTC", "InactiveExitTimestampMonotonic": "1584069614", "InvocationID": "ab5cdc7d0ff64bd299e1dbbbe0877a54", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "mixed", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "13611", "LimitNPROCSoft": "13611", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "13611", "LimitSIGPENDINGSoft": "13611", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "5", "NUMAPolicy": "n/a", "Names": "otelcol.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "on-failure", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "exit-code", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Thu 2025-02-20 21:00:30 UTC", "StateChangeTimestampMonotonic": "1584249491", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "failed", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "4083", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "otel", "UtmpMode": "init", "WantedBy": "multi-user.target", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-20 22:03:11,123 p=31726 u=snrj n=ansible INFO| TASK [otel_collector : Debug if service is inactive] ********************************************************************************************************
2025-02-20 22:03:11,140 p=31726 u=snrj n=ansible INFO| ok: [52.166.247.191] => {
    "msg": "otelcol is not running"
}
2025-02-20 22:03:11,144 p=31726 u=snrj n=ansible INFO| TASK [otel_collector : Start otelcol service if not running] ************************************************************************************************
2025-02-20 22:03:11,867 p=31726 u=snrj n=ansible INFO| changed: [52.166.247.191] => {"changed": true, "name": "otelcol", "state": "started", "status": {"ActiveEnterTimestamp": "Thu 2025-02-20 21:00:30 UTC", "ActiveEnterTimestampMonotonic": "1584004622", "ActiveExitTimestamp": "Thu 2025-02-20 21:00:30 UTC", "ActiveExitTimestampMonotonic": "1584068959", "ActiveState": "failed", "After": "network.target sysinit.target system.slice basic.target systemd-journald.socket", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Thu 2025-02-20 21:00:30 UTC", "AssertTimestampMonotonic": "1584249361", "Before": "shutdown.target multi-user.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "55899000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Thu 2025-02-20 21:00:30 UTC", "ConditionTimestampMonotonic": "1584249358", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "OpenTelemetry Collector", "DevicePolicy": "auto", "DynamicUser": "no", "EnvironmentFiles": "/etc/otelcol/otelcol.conf (ignore_errors=no)", "ExecMainCode": "1", "ExecMainExitTimestamp": "Thu 2025-02-20 21:00:30 UTC", "ExecMainExitTimestampMonotonic": "1584068771", "ExecMainPID": "4013", "ExecMainStartTimestamp": "Thu 2025-02-20 21:00:30 UTC", "ExecMainStartTimestampMonotonic": "1584004312", "ExecMainStatus": "1", "ExecStart": "{ path=/usr/bin/otelcol ; argv[]=/usr/bin/otelcol $OTELCOL_OPTIONS ; ignore_errors=no ; start_time=[Thu 2025-02-20 21:00:30 UTC] ; stop_time=[Thu 2025-02-20 21:00:30 UTC] ; pid=4013 ; code=exited ; status=1 }", "ExecStartEx": "{ path=/usr/bin/otelcol ; argv[]=/usr/bin/otelcol $OTELCOL_OPTIONS ; flags= ; start_time=[Thu 2025-02-20 21:00:30 UTC] ; stop_time=[Thu 2025-02-20 21:00:30 UTC] ; pid=4013 ; code=exited ; status=1 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/otelcol.service", "FreezerState": "running", "GID": "[not set]", "Group": "otel", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "otelcol.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Thu 2025-02-20 21:00:30 UTC", "InactiveEnterTimestampMonotonic": "1584249283", "InactiveExitTimestamp": "Thu 2025-02-20 21:00:30 UTC", "InactiveExitTimestampMonotonic": "1584069614", "InvocationID": "ab5cdc7d0ff64bd299e1dbbbe0877a54", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "mixed", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "13611", "LimitNPROCSoft": "13611", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "13611", "LimitSIGPENDINGSoft": "13611", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "5", "NUMAPolicy": "n/a", "Names": "otelcol.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "on-failure", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "exit-code", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Thu 2025-02-20 21:00:30 UTC", "StateChangeTimestampMonotonic": "1584249491", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "failed", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "4083", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "otel", "UtmpMode": "init", "WantedBy": "multi-user.target", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-20 22:03:11,877 p=31726 u=snrj n=ansible INFO| TASK [otel_collector : Print otelcol service status] ********************************************************************************************************
2025-02-20 22:03:12,434 p=31726 u=snrj n=ansible INFO| fatal: [52.166.247.191]: FAILED! => {"changed": false, "cmd": ["sudo", "systemctl", "is-active", "otelcol"], "delta": "0:00:00.041433", "end": "2025-02-20 21:03:12.414689", "msg": "non-zero return code", "rc": 3, "start": "2025-02-20 21:03:12.373256", "stderr": "", "stderr_lines": [], "stdout": "activating", "stdout_lines": ["activating"]}
2025-02-20 22:03:12,434 p=31726 u=snrj n=ansible INFO| ...ignoring
2025-02-20 22:03:12,442 p=31726 u=snrj n=ansible INFO| TASK [otel_collector : Display otelcol service status] ******************************************************************************************************
2025-02-20 22:03:12,459 p=31726 u=snrj n=ansible INFO| ok: [52.166.247.191] => {
    "msg": "activating"
}
2025-02-20 22:03:12,472 p=31726 u=snrj n=ansible INFO| RUNNING HANDLER [otel_collector : Restart otelcol service] **************************************************************************************************
2025-02-20 22:03:13,214 p=31726 u=snrj n=ansible INFO| fatal: [52.166.247.191]: FAILED! => {"changed": false, "msg": "Unable to restart service otelcol: Job for otelcol.service failed.\nSee \"systemctl status otelcol.service\" and \"journalctl -xeu otelcol.service\" for details.\n"}
2025-02-20 22:03:13,215 p=31726 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-20 22:03:13,215 p=31726 u=snrj n=ansible INFO| 52.166.247.191             : ok=7    changed=2    unreachable=0    failed=1    skipped=0    rescued=0    ignored=1   
2025-02-20 22:32:22,128 p=34751 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-20 22:32:22,287 p=34751 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-20 22:32:22,576 p=34751 u=snrj n=ansible INFO| PLAY [Configure OpenTelemetry Collector and Prometheus] *****************************************************************************************************
2025-02-20 22:32:22,585 p=34751 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-20 22:32:27,117 p=34751 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 52.166.247.191 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another
Python interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for
more information.

2025-02-20 22:32:27,118 p=34751 u=snrj n=ansible INFO| ok: [52.166.247.191]
2025-02-20 22:32:27,124 p=34751 u=snrj n=ansible INFO| TASK [otel_collector : Template OpenTelemetry Collector config] *********************************************************************************************
2025-02-20 22:32:28,539 p=34751 u=snrj n=ansible INFO| changed: [52.166.247.191] => {"changed": true, "checksum": "84c4f4d8901502d79c9de361a0bf99d4f5ef45b7", "dest": "/etc/otelcol/config.yaml", "gid": 0, "group": "root", "md5sum": "9f901417a000596f292021809a16d9df", "mode": "0644", "owner": "root", "size": 437, "src": "/home/azureadmin/.ansible/tmp/ansible-tmp-1740087147.204705-34766-253309403240632/.source.yaml", "state": "file", "uid": 0}
2025-02-20 22:32:28,546 p=34751 u=snrj n=ansible INFO| TASK [otel_collector : Get otelcol service status] **********************************************************************************************************
2025-02-20 22:32:29,212 p=34751 u=snrj n=ansible INFO| ok: [52.166.247.191] => {"changed": false, "name": "otelcol", "status": {"ActiveEnterTimestamp": "Thu 2025-02-20 21:30:38 UTC", "ActiveEnterTimestampMonotonic": "3392004495", "ActiveExitTimestamp": "Thu 2025-02-20 21:30:38 UTC", "ActiveExitTimestampMonotonic": "3392054446", "ActiveState": "failed", "After": "systemd-journald.socket system.slice network.target sysinit.target basic.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Thu 2025-02-20 21:30:38 UTC", "AssertTimestampMonotonic": "3392249446", "Before": "multi-user.target shutdown.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "46098000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Thu 2025-02-20 21:30:38 UTC", "ConditionTimestampMonotonic": "3392249442", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "OpenTelemetry Collector", "DevicePolicy": "auto", "DynamicUser": "no", "EnvironmentFiles": "/etc/otelcol/otelcol.conf (ignore_errors=no)", "ExecMainCode": "1", "ExecMainExitTimestamp": "Thu 2025-02-20 21:30:38 UTC", "ExecMainExitTimestampMonotonic": "3392054292", "ExecMainPID": "5720", "ExecMainStartTimestamp": "Thu 2025-02-20 21:30:38 UTC", "ExecMainStartTimestampMonotonic": "3392004160", "ExecMainStatus": "1", "ExecStart": "{ path=/usr/bin/otelcol ; argv[]=/usr/bin/otelcol $OTELCOL_OPTIONS ; ignore_errors=no ; start_time=[Thu 2025-02-20 21:30:38 UTC] ; stop_time=[Thu 2025-02-20 21:30:38 UTC] ; pid=5720 ; code=exited ; status=1 }", "ExecStartEx": "{ path=/usr/bin/otelcol ; argv[]=/usr/bin/otelcol $OTELCOL_OPTIONS ; flags= ; start_time=[Thu 2025-02-20 21:30:38 UTC] ; stop_time=[Thu 2025-02-20 21:30:38 UTC] ; pid=5720 ; code=exited ; status=1 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/otelcol.service", "FreezerState": "running", "GID": "[not set]", "Group": "otel", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "otelcol.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Thu 2025-02-20 21:30:38 UTC", "InactiveEnterTimestampMonotonic": "3392249324", "InactiveExitTimestamp": "Thu 2025-02-20 21:30:38 UTC", "InactiveExitTimestampMonotonic": "3392055606", "InvocationID": "a35a055640834973b323a278ca463b3b", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "mixed", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "13611", "LimitNPROCSoft": "13611", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "13611", "LimitSIGPENDINGSoft": "13611", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "5", "NUMAPolicy": "n/a", "Names": "otelcol.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "on-failure", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "exit-code", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Thu 2025-02-20 21:30:38 UTC", "StateChangeTimestampMonotonic": "3392249579", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "failed", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "4083", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "otel", "UtmpMode": "init", "WantedBy": "multi-user.target", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-20 22:32:29,226 p=34751 u=snrj n=ansible INFO| TASK [otel_collector : Debug if service is inactive] ********************************************************************************************************
2025-02-20 22:32:29,243 p=34751 u=snrj n=ansible INFO| ok: [52.166.247.191] => {
    "msg": "otelcol is not running"
}
2025-02-20 22:32:29,247 p=34751 u=snrj n=ansible INFO| TASK [otel_collector : Start otelcol service if not running] ************************************************************************************************
2025-02-20 22:32:29,857 p=34751 u=snrj n=ansible INFO| changed: [52.166.247.191] => {"changed": true, "name": "otelcol", "state": "started", "status": {"ActiveEnterTimestamp": "Thu 2025-02-20 21:30:38 UTC", "ActiveEnterTimestampMonotonic": "3392004495", "ActiveExitTimestamp": "Thu 2025-02-20 21:30:38 UTC", "ActiveExitTimestampMonotonic": "3392054446", "ActiveState": "failed", "After": "systemd-journald.socket system.slice network.target sysinit.target basic.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Thu 2025-02-20 21:30:38 UTC", "AssertTimestampMonotonic": "3392249446", "Before": "multi-user.target shutdown.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "46098000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Thu 2025-02-20 21:30:38 UTC", "ConditionTimestampMonotonic": "3392249442", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "OpenTelemetry Collector", "DevicePolicy": "auto", "DynamicUser": "no", "EnvironmentFiles": "/etc/otelcol/otelcol.conf (ignore_errors=no)", "ExecMainCode": "1", "ExecMainExitTimestamp": "Thu 2025-02-20 21:30:38 UTC", "ExecMainExitTimestampMonotonic": "3392054292", "ExecMainPID": "5720", "ExecMainStartTimestamp": "Thu 2025-02-20 21:30:38 UTC", "ExecMainStartTimestampMonotonic": "3392004160", "ExecMainStatus": "1", "ExecStart": "{ path=/usr/bin/otelcol ; argv[]=/usr/bin/otelcol $OTELCOL_OPTIONS ; ignore_errors=no ; start_time=[Thu 2025-02-20 21:30:38 UTC] ; stop_time=[Thu 2025-02-20 21:30:38 UTC] ; pid=5720 ; code=exited ; status=1 }", "ExecStartEx": "{ path=/usr/bin/otelcol ; argv[]=/usr/bin/otelcol $OTELCOL_OPTIONS ; flags= ; start_time=[Thu 2025-02-20 21:30:38 UTC] ; stop_time=[Thu 2025-02-20 21:30:38 UTC] ; pid=5720 ; code=exited ; status=1 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/otelcol.service", "FreezerState": "running", "GID": "[not set]", "Group": "otel", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "otelcol.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Thu 2025-02-20 21:30:38 UTC", "InactiveEnterTimestampMonotonic": "3392249324", "InactiveExitTimestamp": "Thu 2025-02-20 21:30:38 UTC", "InactiveExitTimestampMonotonic": "3392055606", "InvocationID": "a35a055640834973b323a278ca463b3b", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "mixed", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "13611", "LimitNPROCSoft": "13611", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "13611", "LimitSIGPENDINGSoft": "13611", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "5", "NUMAPolicy": "n/a", "Names": "otelcol.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "sysinit.target system.slice", "Restart": "on-failure", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "exit-code", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Thu 2025-02-20 21:30:38 UTC", "StateChangeTimestampMonotonic": "3392249579", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "failed", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "4083", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "otel", "UtmpMode": "init", "WantedBy": "multi-user.target", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-20 22:32:29,866 p=34751 u=snrj n=ansible INFO| TASK [otel_collector : Print otelcol service status] ********************************************************************************************************
2025-02-20 22:32:30,378 p=34751 u=snrj n=ansible INFO| ok: [52.166.247.191] => {"changed": false, "cmd": ["sudo", "systemctl", "is-active", "otelcol"], "delta": "0:00:00.042063", "end": "2025-02-20 21:32:30.359126", "msg": "", "rc": 0, "start": "2025-02-20 21:32:30.317063", "stderr": "", "stderr_lines": [], "stdout": "active", "stdout_lines": ["active"]}
2025-02-20 22:32:30,385 p=34751 u=snrj n=ansible INFO| TASK [otel_collector : Display otelcol service status] ******************************************************************************************************
2025-02-20 22:32:30,403 p=34751 u=snrj n=ansible INFO| ok: [52.166.247.191] => {
    "msg": "active"
}
2025-02-20 22:32:30,417 p=34751 u=snrj n=ansible INFO| RUNNING HANDLER [otel_collector : Restart otelcol service] **************************************************************************************************
2025-02-20 22:32:31,070 p=34751 u=snrj n=ansible INFO| fatal: [52.166.247.191]: FAILED! => {"changed": false, "msg": "Unable to start service otelcol: Job for otelcol.service failed because the control process exited with error code.\nSee \"systemctl status otelcol.service\" and \"journalctl -xeu otelcol.service\" for details.\n"}
2025-02-20 22:32:31,071 p=34751 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-20 22:32:31,072 p=34751 u=snrj n=ansible INFO| 52.166.247.191             : ok=7    changed=2    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2025-02-21 00:18:17,588 p=46476 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 00:18:19,022 p=46476 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-21 00:18:21,170 p=46476 u=snrj n=ansible INFO| PLAY [Configure OpenTelemetry Collector and Prometheus] *****************************************************************************************************
2025-02-21 00:18:21,235 p=46476 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 00:18:29,936 p=46476 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 40.68.93.141 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-21 00:18:29,936 p=46476 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 00:18:29,941 p=46476 u=snrj n=ansible INFO| TASK [prometheus : Install Prometheus dependencies] *********************************************************************************************************
2025-02-21 00:18:34,699 p=46476 u=snrj n=ansible INFO| ok: [40.68.93.141] => (item=wget) => {"ansible_loop_var": "item", "cache_update_time": 1739931437, "cache_updated": false, "changed": false, "item": "wget"}
2025-02-21 00:18:35,412 p=46476 u=snrj n=ansible INFO| ok: [40.68.93.141] => (item=tar) => {"ansible_loop_var": "item", "cache_update_time": 1739931437, "cache_updated": false, "changed": false, "item": "tar"}
2025-02-21 00:18:35,421 p=46476 u=snrj n=ansible INFO| TASK [prometheus : Download Prometheus] *********************************************************************************************************************
2025-02-21 00:18:38,276 p=46476 u=snrj n=ansible WARNING| [WARNING]: Module remote_tmp /root/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues when running as another user. To
avoid this, create the remote_tmp dir with the correct permissions manually

2025-02-21 00:18:38,277 p=46476 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"changed": true, "checksum_dest": null, "checksum_src": "38b6e3b40840d0545ceaa31f86beedb8487e0e6b", "dest": "/opt/prometheus-2.42.0.linux-amd64.tar.gz", "elapsed": 2, "gid": 0, "group": "root", "md5sum": "4fe1ebf1ac60359e870874698d848be3", "mode": "0644", "msg": "OK (90588428 bytes)", "owner": "root", "size": 90588428, "src": "/root/.ansible/tmp/ansible-moduletmp-1740093515.8945868-no85lcao/tmpq49acqob", "state": "file", "status_code": 200, "uid": 0, "url": "https://github.com/prometheus/prometheus/releases/download/v2.42.0/prometheus-2.42.0.linux-amd64.tar.gz"}
2025-02-21 00:18:38,297 p=46476 u=snrj n=ansible INFO| TASK [prometheus : Extract Prometheus tarball] **************************************************************************************************************
2025-02-21 00:18:40,865 p=46476 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"changed": true, "cmd": ["tar", "-xvf", "/opt/prometheus-2.42.0.linux-amd64.tar.gz", "-C", "/opt/"], "delta": "0:00:02.187398", "end": "2025-02-20 23:18:40.879858", "msg": "", "rc": 0, "start": "2025-02-20 23:18:38.692460", "stderr": "", "stderr_lines": [], "stdout": "prometheus-2.42.0.linux-amd64/\nprometheus-2.42.0.linux-amd64/NOTICE\nprometheus-2.42.0.linux-amd64/consoles/\nprometheus-2.42.0.linux-amd64/consoles/index.html.example\nprometheus-2.42.0.linux-amd64/consoles/node.html\nprometheus-2.42.0.linux-amd64/consoles/prometheus-overview.html\nprometheus-2.42.0.linux-amd64/consoles/node-disk.html\nprometheus-2.42.0.linux-amd64/consoles/prometheus.html\nprometheus-2.42.0.linux-amd64/consoles/node-overview.html\nprometheus-2.42.0.linux-amd64/consoles/node-cpu.html\nprometheus-2.42.0.linux-amd64/console_libraries/\nprometheus-2.42.0.linux-amd64/console_libraries/menu.lib\nprometheus-2.42.0.linux-amd64/console_libraries/prom.lib\nprometheus-2.42.0.linux-amd64/prometheus.yml\nprometheus-2.42.0.linux-amd64/LICENSE\nprometheus-2.42.0.linux-amd64/promtool\nprometheus-2.42.0.linux-amd64/prometheus", "stdout_lines": ["prometheus-2.42.0.linux-amd64/", "prometheus-2.42.0.linux-amd64/NOTICE", "prometheus-2.42.0.linux-amd64/consoles/", "prometheus-2.42.0.linux-amd64/consoles/index.html.example", "prometheus-2.42.0.linux-amd64/consoles/node.html", "prometheus-2.42.0.linux-amd64/consoles/prometheus-overview.html", "prometheus-2.42.0.linux-amd64/consoles/node-disk.html", "prometheus-2.42.0.linux-amd64/consoles/prometheus.html", "prometheus-2.42.0.linux-amd64/consoles/node-overview.html", "prometheus-2.42.0.linux-amd64/consoles/node-cpu.html", "prometheus-2.42.0.linux-amd64/console_libraries/", "prometheus-2.42.0.linux-amd64/console_libraries/menu.lib", "prometheus-2.42.0.linux-amd64/console_libraries/prom.lib", "prometheus-2.42.0.linux-amd64/prometheus.yml", "prometheus-2.42.0.linux-amd64/LICENSE", "prometheus-2.42.0.linux-amd64/promtool", "prometheus-2.42.0.linux-amd64/prometheus"]}
2025-02-21 00:18:40,891 p=46476 u=snrj n=ansible INFO| TASK [prometheus : Template Prometheus config] **************************************************************************************************************
2025-02-21 00:18:43,128 p=46476 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"changed": true, "checksum": "75a5462196eecd5c790dbe7b8c5bedc800c8cae3", "dest": "/opt/prometheus-2.42.0.linux-amd64/prometheus.yml", "gid": 123, "group": "123", "md5sum": "b9a9d868b20e59a519fd476a37e71e20", "mode": "0644", "owner": "1001", "size": 142, "src": "/home/azureadmin/.ansible/tmp/ansible-tmp-1740093520.976759-46525-96655091199650/.source.yml", "state": "file", "uid": 1001}
2025-02-21 00:18:43,135 p=46476 u=snrj n=ansible INFO| TASK [prometheus : Create Prometheus systemd service] *******************************************************************************************************
2025-02-21 00:18:44,448 p=46476 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"changed": true, "checksum": "9f2916478a8bd38817d004f13aad3e6229a5c57c", "dest": "/etc/systemd/system/prometheus.service", "gid": 0, "group": "root", "md5sum": "4ff44ece0879012b349248facf6bd1b9", "mode": "0644", "owner": "root", "size": 245, "src": "/home/azureadmin/.ansible/tmp/ansible-tmp-1740093523.2226748-46537-145590410108802/.source.service", "state": "file", "uid": 0}
2025-02-21 00:18:44,455 p=46476 u=snrj n=ansible INFO| TASK [prometheus : Enable and start Prometheus service] *****************************************************************************************************
2025-02-21 00:18:45,591 p=46476 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"changed": true, "enabled": true, "name": "prometheus", "state": "started", "status": {"ActiveEnterTimestamp": "n/a", "ActiveEnterTimestampMonotonic": "0", "ActiveExitTimestamp": "n/a", "ActiveExitTimestampMonotonic": "0", "ActiveState": "inactive", "After": "basic.target systemd-journald.socket system.slice network.target sysinit.target", "AllowIsolate": "no", "AssertResult": "no", "AssertTimestamp": "n/a", "AssertTimestampMonotonic": "0", "Before": "shutdown.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "[not set]", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "no", "ConditionTimestamp": "n/a", "ConditionTimestampMonotonic": "0", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "Prometheus", "DevicePolicy": "auto", "DynamicUser": "no", "ExecMainCode": "0", "ExecMainExitTimestamp": "n/a", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "0", "ExecMainStartTimestamp": "n/a", "ExecMainStartTimestampMonotonic": "0", "ExecMainStatus": "0", "ExecStart": "{ path=/opt/prometheus-2.42.0.linux-amd64/prometheus ; argv[]=/opt/prometheus-2.42.0.linux-amd64/prometheus --config.file=/opt/prometheus-2.42.0.linux-amd64/prometheus.yml ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/opt/prometheus-2.42.0.linux-amd64/prometheus ; argv[]=/opt/prometheus-2.42.0.linux-amd64/prometheus --config.file=/opt/prometheus-2.42.0.linux-amd64/prometheus.yml ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/etc/systemd/system/prometheus.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "prometheus.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "n/a", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "n/a", "InactiveExitTimestampMonotonic": "0", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "13611", "LimitNPROCSoft": "13611", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "13611", "LimitSIGPENDINGSoft": "13611", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "prometheus.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "system.slice sysinit.target", "Restart": "always", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "n/a", "StateChangeTimestampMonotonic": "0", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "dead", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "4083", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "disabled", "User": "root", "UtmpMode": "init", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "infinity"}}
2025-02-21 00:18:45,598 p=46476 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 00:18:45,599 p=46476 u=snrj n=ansible INFO| 40.68.93.141               : ok=7    changed=5    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-21 00:28:14,150 p=47539 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 00:28:14,306 p=47539 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-21 00:28:14,585 p=47539 u=snrj n=ansible INFO| PLAY [Configure OpenTelemetry Collector and Prometheus] *****************************************************************************************************
2025-02-21 00:28:14,593 p=47539 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 00:28:18,963 p=47539 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 40.68.93.141 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-21 00:28:18,963 p=47539 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 00:28:18,968 p=47539 u=snrj n=ansible INFO| TASK [prometheus : Install Prometheus dependencies] *********************************************************************************************************
2025-02-21 00:28:19,724 p=47539 u=snrj n=ansible INFO| ok: [40.68.93.141] => (item=wget) => {"ansible_loop_var": "item", "cache_update_time": 1739931437, "cache_updated": false, "changed": false, "item": "wget"}
2025-02-21 00:28:20,406 p=47539 u=snrj n=ansible INFO| ok: [40.68.93.141] => (item=tar) => {"ansible_loop_var": "item", "cache_update_time": 1739931437, "cache_updated": false, "changed": false, "item": "tar"}
2025-02-21 00:28:20,416 p=47539 u=snrj n=ansible INFO| TASK [prometheus : Download Prometheus] *********************************************************************************************************************
2025-02-21 00:28:21,404 p=47539 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "dest": "/opt/prometheus-2.42.0.linux-amd64.tar.gz", "elapsed": 0, "gid": 0, "group": "root", "mode": "0644", "msg": "HTTP Error 304: Not Modified", "owner": "root", "size": 90588428, "state": "file", "status_code": 304, "uid": 0, "url": "https://github.com/prometheus/prometheus/releases/download/v2.42.0/prometheus-2.42.0.linux-amd64.tar.gz"}
2025-02-21 00:28:21,415 p=47539 u=snrj n=ansible INFO| TASK [prometheus : Extract Prometheus tarball] **************************************************************************************************************
2025-02-21 00:28:24,025 p=47539 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"changed": true, "cmd": ["tar", "-xvf", "/opt/prometheus-2.42.0.linux-amd64.tar.gz", "-C", "/opt/"], "delta": "0:00:02.177165", "end": "2025-02-20 23:28:23.944849", "msg": "", "rc": 0, "start": "2025-02-20 23:28:21.767684", "stderr": "", "stderr_lines": [], "stdout": "prometheus-2.42.0.linux-amd64/\nprometheus-2.42.0.linux-amd64/NOTICE\nprometheus-2.42.0.linux-amd64/consoles/\nprometheus-2.42.0.linux-amd64/consoles/index.html.example\nprometheus-2.42.0.linux-amd64/consoles/node.html\nprometheus-2.42.0.linux-amd64/consoles/prometheus-overview.html\nprometheus-2.42.0.linux-amd64/consoles/node-disk.html\nprometheus-2.42.0.linux-amd64/consoles/prometheus.html\nprometheus-2.42.0.linux-amd64/consoles/node-overview.html\nprometheus-2.42.0.linux-amd64/consoles/node-cpu.html\nprometheus-2.42.0.linux-amd64/console_libraries/\nprometheus-2.42.0.linux-amd64/console_libraries/menu.lib\nprometheus-2.42.0.linux-amd64/console_libraries/prom.lib\nprometheus-2.42.0.linux-amd64/prometheus.yml\nprometheus-2.42.0.linux-amd64/LICENSE\nprometheus-2.42.0.linux-amd64/promtool\nprometheus-2.42.0.linux-amd64/prometheus", "stdout_lines": ["prometheus-2.42.0.linux-amd64/", "prometheus-2.42.0.linux-amd64/NOTICE", "prometheus-2.42.0.linux-amd64/consoles/", "prometheus-2.42.0.linux-amd64/consoles/index.html.example", "prometheus-2.42.0.linux-amd64/consoles/node.html", "prometheus-2.42.0.linux-amd64/consoles/prometheus-overview.html", "prometheus-2.42.0.linux-amd64/consoles/node-disk.html", "prometheus-2.42.0.linux-amd64/consoles/prometheus.html", "prometheus-2.42.0.linux-amd64/consoles/node-overview.html", "prometheus-2.42.0.linux-amd64/consoles/node-cpu.html", "prometheus-2.42.0.linux-amd64/console_libraries/", "prometheus-2.42.0.linux-amd64/console_libraries/menu.lib", "prometheus-2.42.0.linux-amd64/console_libraries/prom.lib", "prometheus-2.42.0.linux-amd64/prometheus.yml", "prometheus-2.42.0.linux-amd64/LICENSE", "prometheus-2.42.0.linux-amd64/promtool", "prometheus-2.42.0.linux-amd64/prometheus"]}
2025-02-21 00:28:24,040 p=47539 u=snrj n=ansible INFO| TASK [prometheus : Template Prometheus config] **************************************************************************************************************
2025-02-21 00:28:25,429 p=47539 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"changed": true, "checksum": "61e1a30f743033f02f64790b7aa245a78326061b", "dest": "/opt/prometheus-2.42.0.linux-amd64/prometheus.yml", "gid": 123, "group": "123", "md5sum": "1f5032903171e48f764921457232d5e8", "mode": "0644", "owner": "1001", "size": 135, "src": "/home/azureadmin/.ansible/tmp/ansible-tmp-1740094104.1203961-47570-16051349189241/.source.yml", "state": "file", "uid": 1001}
2025-02-21 00:28:25,437 p=47539 u=snrj n=ansible INFO| TASK [prometheus : Create Prometheus systemd service] *******************************************************************************************************
2025-02-21 00:28:26,841 p=47539 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "checksum": "9f2916478a8bd38817d004f13aad3e6229a5c57c", "dest": "/etc/systemd/system/prometheus.service", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/etc/systemd/system/prometheus.service", "size": 245, "state": "file", "uid": 0}
2025-02-21 00:28:26,849 p=47539 u=snrj n=ansible INFO| TASK [prometheus : Enable and start Prometheus service] *****************************************************************************************************
2025-02-21 00:28:27,523 p=47539 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"changed": true, "enabled": true, "name": "prometheus", "state": "started", "status": {"ActiveEnterTimestamp": "Thu 2025-02-20 23:23:40 UTC", "ActiveEnterTimestampMonotonic": "3717879260", "ActiveExitTimestamp": "Thu 2025-02-20 23:23:40 UTC", "ActiveExitTimestampMonotonic": "3717920661", "ActiveState": "failed", "After": "systemd-journald.socket system.slice sysinit.target network.target basic.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Thu 2025-02-20 23:23:40 UTC", "AssertTimestampMonotonic": "3718123653", "Before": "multi-user.target shutdown.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "40138000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Thu 2025-02-20 23:23:40 UTC", "ConditionTimestampMonotonic": "3718123649", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "Prometheus", "DevicePolicy": "auto", "DynamicUser": "no", "ExecMainCode": "1", "ExecMainExitTimestamp": "Thu 2025-02-20 23:23:40 UTC", "ExecMainExitTimestampMonotonic": "3717920509", "ExecMainPID": "2081", "ExecMainStartTimestamp": "Thu 2025-02-20 23:23:40 UTC", "ExecMainStartTimestampMonotonic": "3717879060", "ExecMainStatus": "2", "ExecStart": "{ path=/opt/prometheus-2.42.0.linux-amd64/prometheus ; argv[]=/opt/prometheus-2.42.0.linux-amd64/prometheus --config.file=/opt/prometheus-2.42.0.linux-amd64/prometheus.yml ; ignore_errors=no ; start_time=[Thu 2025-02-20 23:23:40 UTC] ; stop_time=[Thu 2025-02-20 23:23:40 UTC] ; pid=2081 ; code=exited ; status=2 }", "ExecStartEx": "{ path=/opt/prometheus-2.42.0.linux-amd64/prometheus ; argv[]=/opt/prometheus-2.42.0.linux-amd64/prometheus --config.file=/opt/prometheus-2.42.0.linux-amd64/prometheus.yml ; flags= ; start_time=[Thu 2025-02-20 23:23:40 UTC] ; stop_time=[Thu 2025-02-20 23:23:40 UTC] ; pid=2081 ; code=exited ; status=2 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/etc/systemd/system/prometheus.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "prometheus.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Thu 2025-02-20 23:23:40 UTC", "InactiveEnterTimestampMonotonic": "3718123308", "InactiveExitTimestamp": "Thu 2025-02-20 23:23:40 UTC", "InactiveExitTimestampMonotonic": "3717921144", "InvocationID": "41199f02025b4aa792110a97efc75b0f", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "13611", "LimitNPROCSoft": "13611", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "13611", "LimitSIGPENDINGSoft": "13611", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "5", "NUMAPolicy": "n/a", "Names": "prometheus.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "system.slice sysinit.target", "Restart": "always", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "exit-code", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Thu 2025-02-20 23:23:40 UTC", "StateChangeTimestampMonotonic": "3718123825", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "failed", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "4083", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "root", "UtmpMode": "init", "WantedBy": "multi-user.target", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2025-02-21 00:28:27,530 p=47539 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 00:28:27,530 p=47539 u=snrj n=ansible INFO| 40.68.93.141               : ok=7    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-21 00:47:48,968 p=49958 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 00:47:50,506 p=49958 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-21 00:47:51,977 p=49958 u=snrj n=ansible ERROR| ERROR! conflicting action statements: hosts, tasks

The error appears to be in '/Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml': line 2, column 3, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

---
- name: Run FastAPI with OpenTelemetry for Azure Application Insights
  ^ here

2025-02-21 00:48:35,177 p=50032 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 00:48:35,319 p=50032 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-21 00:48:35,975 p=50032 u=snrj n=ansible INFO| PLAY [Setup Flask App with OpenTelemetry] *******************************************************************************************************************
2025-02-21 00:48:36,043 p=50032 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 00:48:41,218 p=50032 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 40.68.93.141 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-21 00:48:41,218 p=50032 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 00:48:41,223 p=50032 u=snrj n=ansible INFO| TASK [flask_app : Install required Python packages] *********************************************************************************************************
2025-02-21 00:48:42,117 p=50032 u=snrj n=ansible INFO| fatal: [40.68.93.141]: FAILED! => {"changed": false, "msg": "Unable to find any of pip3 to use.  pip needs to be installed."}
2025-02-21 00:48:42,118 p=50032 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 00:48:42,118 p=50032 u=snrj n=ansible INFO| 40.68.93.141               : ok=1    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2025-02-21 00:50:14,248 p=50196 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 00:50:14,409 p=50196 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-21 00:50:14,711 p=50196 u=snrj n=ansible INFO| PLAY [Setup Flask App with OpenTelemetry] *******************************************************************************************************************
2025-02-21 00:50:14,720 p=50196 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 00:50:19,114 p=50196 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 40.68.93.141 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-21 00:50:19,115 p=50196 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 00:50:19,141 p=50196 u=snrj n=ansible INFO| TASK [flask_app : Ensure python3 and pip are installed] *****************************************************************************************************
2025-02-21 00:50:19,962 p=50196 u=snrj n=ansible INFO| fatal: [40.68.93.141]: FAILED! => {"changed": false, "msg": "No package matching 'python3-pip' is available"}
2025-02-21 00:50:19,963 p=50196 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 00:50:19,963 p=50196 u=snrj n=ansible INFO| 40.68.93.141               : ok=1    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2025-02-21 00:56:47,655 p=50901 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 00:56:47,812 p=50901 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-21 00:56:48,101 p=50901 u=snrj n=ansible INFO| PLAY [Setup Flask App with OpenTelemetry] *******************************************************************************************************************
2025-02-21 00:56:48,110 p=50901 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 00:56:52,746 p=50901 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 40.68.93.141 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-21 00:56:52,747 p=50901 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 00:56:52,753 p=50901 u=snrj n=ansible INFO| TASK [flask_app : Update apt package index] *****************************************************************************************************************
2025-02-21 00:56:55,223 p=50901 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"cache_update_time": 1740095814, "cache_updated": true, "changed": true}
2025-02-21 00:56:55,230 p=50901 u=snrj n=ansible INFO| TASK [flask_app : Ensure the 'universe' repository is enabled] **********************************************************************************************
2025-02-21 00:57:32,006 p=50901 u=snrj n=ansible WARNING| [WARNING]: Failed to update cache after 1 due to E:The repository 'http://archive.ubuntu.com/ubuntu $(lsb_release Release' does not have a Release file.
retry, retrying

2025-02-21 00:57:32,007 p=50901 u=snrj n=ansible WARNING| [WARNING]: Sleeping for 1 seconds, before attempting to update the cache again

2025-02-21 00:57:32,007 p=50901 u=snrj n=ansible WARNING| [WARNING]: Failed to update cache after 2 due to W:Updating from such a repository can't be done securely, and is therefore disabled by default., W:See apt-
secure(8) manpage for repository creation and user configuration details., E:The repository 'http://archive.ubuntu.com/ubuntu $(lsb_release Release' does
not have a Release file. retry, retrying

2025-02-21 00:57:32,007 p=50901 u=snrj n=ansible WARNING| [WARNING]: Sleeping for 2 seconds, before attempting to update the cache again

2025-02-21 00:57:32,007 p=50901 u=snrj n=ansible WARNING| [WARNING]: Failed to update cache after 3 due to W:Updating from such a repository can't be done securely, and is therefore disabled by default., W:See apt-
secure(8) manpage for repository creation and user configuration details., E:The repository 'http://archive.ubuntu.com/ubuntu $(lsb_release Release' does
not have a Release file. retry, retrying

2025-02-21 00:57:32,007 p=50901 u=snrj n=ansible WARNING| [WARNING]: Sleeping for 4 seconds, before attempting to update the cache again

2025-02-21 00:57:32,008 p=50901 u=snrj n=ansible WARNING| [WARNING]: Failed to update cache after 4 due to W:Updating from such a repository can't be done securely, and is therefore disabled by default., W:See apt-
secure(8) manpage for repository creation and user configuration details., E:The repository 'http://archive.ubuntu.com/ubuntu $(lsb_release Release' does
not have a Release file. retry, retrying

2025-02-21 00:57:32,008 p=50901 u=snrj n=ansible WARNING| [WARNING]: Sleeping for 8 seconds, before attempting to update the cache again

2025-02-21 00:57:32,008 p=50901 u=snrj n=ansible WARNING| [WARNING]: Failed to update cache after 5 due to W:Updating from such a repository can't be done securely, and is therefore disabled by default., W:See apt-
secure(8) manpage for repository creation and user configuration details., E:The repository 'http://archive.ubuntu.com/ubuntu $(lsb_release Release' does
not have a Release file. retry, retrying

2025-02-21 00:57:32,008 p=50901 u=snrj n=ansible WARNING| [WARNING]: Sleeping for 12 seconds, before attempting to update the cache again

2025-02-21 00:57:32,009 p=50901 u=snrj n=ansible INFO| fatal: [40.68.93.141]: FAILED! => {"changed": false, "msg": "Failed to update apt cache after 5 retries: W:Updating from such a repository can't be done securely, and is therefore disabled by default., W:See apt-secure(8) manpage for repository creation and user configuration details., E:The repository 'http://archive.ubuntu.com/ubuntu $(lsb_release Release' does not have a Release file."}
2025-02-21 00:57:32,011 p=50901 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 00:57:32,011 p=50901 u=snrj n=ansible INFO| 40.68.93.141               : ok=2    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2025-02-21 00:58:38,590 p=51082 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 00:58:38,727 p=51082 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-21 00:58:39,006 p=51082 u=snrj n=ansible INFO| PLAY [Setup Flask App with OpenTelemetry] *******************************************************************************************************************
2025-02-21 00:58:39,014 p=51082 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 00:58:42,698 p=51082 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 40.68.93.141 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-21 00:58:42,698 p=51082 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 00:58:42,701 p=51082 u=snrj n=ansible INFO| TASK [flask_app : Update apt package index] *****************************************************************************************************************
2025-02-21 00:58:48,095 p=51082 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"cache_update_time": 1740095925, "cache_updated": true, "changed": true}
2025-02-21 00:58:48,103 p=51082 u=snrj n=ansible INFO| TASK [flask_app : Ensure the 'universe' repository is enabled] **********************************************************************************************
2025-02-21 00:59:02,859 p=51082 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"changed": true, "repo": "deb http://archive.ubuntu.com/ubuntu/ jammy universe", "sources_added": ["/etc/apt/sources.list.d/archive_ubuntu_com_ubuntu.list"], "sources_removed": [], "state": "present"}
2025-02-21 00:59:02,868 p=51082 u=snrj n=ansible INFO| TASK [flask_app : Install python3-pip] **********************************************************************************************************************
2025-02-21 00:59:04,164 p=51082 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"cache_update_time": 1740095934, "cache_updated": false, "changed": false}
2025-02-21 00:59:04,177 p=51082 u=snrj n=ansible INFO| TASK [flask_app : Install required Python packages] *********************************************************************************************************
2025-02-21 00:59:13,776 p=51082 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"changed": true, "cmd": ["/usr/bin/python3.10", "-m", "pip.__main__", "install", "fastapi", "uvicorn", "azure-monitor-opentelemetry"], "name": ["fastapi", "uvicorn", "azure-monitor-opentelemetry"], "requirements": null, "state": "present", "stderr": "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n", "stderr_lines": ["WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv"], "stdout": "Collecting fastapi\n  Downloading fastapi-0.115.8-py3-none-any.whl (94 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 94.8/94.8 KB 3.0 MB/s eta 0:00:00\nCollecting uvicorn\n  Downloading uvicorn-0.34.0-py3-none-any.whl (62 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 62.3/62.3 KB 7.2 MB/s eta 0:00:00\nCollecting azure-monitor-opentelemetry\n  Downloading azure_monitor_opentelemetry-1.6.5-py3-none-any.whl (23 kB)\nCollecting typing-extensions>=4.8.0\n  Downloading typing_extensions-4.12.2-py3-none-any.whl (37 kB)\nCollecting pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4\n  Downloading pydantic-2.10.6-py3-none-any.whl (431 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 431.7/431.7 KB 18.9 MB/s eta 0:00:00\nCollecting starlette<0.46.0,>=0.40.0\n  Downloading starlette-0.45.3-py3-none-any.whl (71 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 71.5/71.5 KB 9.6 MB/s eta 0:00:00\nCollecting h11>=0.8\n  Downloading h11-0.14.0-py3-none-any.whl (58 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 58.3/58.3 KB 4.3 MB/s eta 0:00:00\nRequirement already satisfied: click>=7.0 in /usr/lib/python3/dist-packages (from uvicorn) (8.0.3)\nCollecting azure-monitor-opentelemetry-exporter~=1.0.0b31\n  Downloading azure_monitor_opentelemetry_exporter-1.0.0b33-py2.py3-none-any.whl (151 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 151.7/151.7 KB 17.5 MB/s eta 0:00:00\nCollecting azure-core-tracing-opentelemetry~=1.0.0b11\n  Downloading azure_core_tracing_opentelemetry-1.0.0b11-py3-none-any.whl (10 kB)\nCollecting opentelemetry-resource-detector-azure~=0.1.4\n  Downloading opentelemetry_resource_detector_azure-0.1.5-py3-none-any.whl (14 kB)\nCollecting opentelemetry-sdk~=1.28\n  Downloading opentelemetry_sdk-1.30.0-py3-none-any.whl (118 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 118.7/118.7 KB 10.6 MB/s eta 0:00:00\nCollecting opentelemetry-instrumentation-urllib3~=0.49b0\n  Downloading opentelemetry_instrumentation_urllib3-0.51b0-py3-none-any.whl (12 kB)\nCollecting opentelemetry-instrumentation-fastapi~=0.49b0\n  Downloading opentelemetry_instrumentation_fastapi-0.51b0-py3-none-any.whl (12 kB)\nCollecting opentelemetry-instrumentation-urllib~=0.49b0\n  Downloading opentelemetry_instrumentation_urllib-0.51b0-py3-none-any.whl (12 kB)\nCollecting azure-core<2.0.0,>=1.28.0\n  Downloading azure_core-1.32.0-py3-none-any.whl (198 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 198.9/198.9 KB 26.6 MB/s eta 0:00:00\nCollecting opentelemetry-instrumentation-django~=0.49b0\n  Downloading opentelemetry_instrumentation_django-0.51b0-py3-none-any.whl (19 kB)\nCollecting opentelemetry-instrumentation-psycopg2~=0.49b0\n  Downloading opentelemetry_instrumentation_psycopg2-0.51b0-py3-none-any.whl (10 kB)\nCollecting opentelemetry-instrumentation-flask~=0.49b0\n  Downloading opentelemetry_instrumentation_flask-0.51b0-py3-none-any.whl (14 kB)\nCollecting opentelemetry-instrumentation-requests~=0.49b0\n  Downloading opentelemetry_instrumentation_requests-0.51b0-py3-none-any.whl (12 kB)\nRequirement already satisfied: requests>=2.21.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (2.25.1)\nRequirement already satisfied: six>=1.11.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.16.0)\nCollecting opentelemetry-api<2.0.0,>=1.12.0\n  Downloading opentelemetry_api-1.30.0-py3-none-any.whl (64 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 65.0/65.0 KB 8.4 MB/s eta 0:00:00\nCollecting fixedint==0.1.6\n  Downloading fixedint-0.1.6-py3-none-any.whl (12 kB)\nCollecting msrest>=0.6.10\n  Downloading msrest-0.7.1-py3-none-any.whl (85 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 85.4/85.4 KB 13.2 MB/s eta 0:00:00\nCollecting psutil~=5.9\n  Downloading psutil-5.9.8-cp36-abi3-manylinux_2_12_x86_64.manylinux2010_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl (288 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 288.2/288.2 KB 26.5 MB/s eta 0:00:00\nCollecting opentelemetry-instrumentation-wsgi==0.51b0\n  Downloading opentelemetry_instrumentation_wsgi-0.51b0-py3-none-any.whl (14 kB)\nCollecting opentelemetry-util-http==0.51b0\n  Downloading opentelemetry_util_http-0.51b0-py3-none-any.whl (7.3 kB)\nCollecting opentelemetry-semantic-conventions==0.51b0\n  Downloading opentelemetry_semantic_conventions-0.51b0-py3-none-any.whl (177 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 177.4/177.4 KB 15.7 MB/s eta 0:00:00\nCollecting opentelemetry-instrumentation==0.51b0\n  Downloading opentelemetry_instrumentation-0.51b0-py3-none-any.whl (30 kB)\nCollecting wrapt<2.0.0,>=1.0.0\n  Downloading wrapt-1.17.2-cp310-cp310-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl (82 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 82.8/82.8 KB 11.5 MB/s eta 0:00:00\nRequirement already satisfied: packaging>=18.0 in /usr/lib/python3/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (21.3)\nCollecting deprecated>=1.2.6\n  Downloading Deprecated-1.2.18-py2.py3-none-any.whl (10.0 kB)\nCollecting importlib-metadata<=8.5.0,>=6.0\n  Downloading importlib_metadata-8.5.0-py3-none-any.whl (26 kB)\nCollecting opentelemetry-instrumentation-asgi==0.51b0\n  Downloading opentelemetry_instrumentation_asgi-0.51b0-py3-none-any.whl (16 kB)\nCollecting asgiref~=3.0\n  Downloading asgiref-3.8.1-py3-none-any.whl (23 kB)\nCollecting opentelemetry-instrumentation-dbapi==0.51b0\n  Downloading opentelemetry_instrumentation_dbapi-0.51b0-py3-none-any.whl (12 kB)\nCollecting pydantic-core==2.27.2\n  Downloading pydantic_core-2.27.2-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (2.0 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.0/2.0 MB 42.6 MB/s eta 0:00:00\nCollecting annotated-types>=0.6.0\n  Downloading annotated_types-0.7.0-py3-none-any.whl (13 kB)\nCollecting anyio<5,>=3.6.2\n  Downloading anyio-4.8.0-py3-none-any.whl (96 kB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 96.0/96.0 KB 14.5 MB/s eta 0:00:00\nCollecting exceptiongroup>=1.0.2\n  Downloading exceptiongroup-1.2.2-py3-none-any.whl (16 kB)\nCollecting sniffio>=1.1\n  Downloading sniffio-1.3.1-py3-none-any.whl (10 kB)\nRequirement already satisfied: idna>=2.8 in /usr/lib/python3/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (3.3)\nCollecting isodate>=0.6.0\n  Downloading isodate-0.7.2-py3-none-any.whl (22 kB)\nCollecting requests-oauthlib>=0.5.0\n  Downloading requests_oauthlib-2.0.0-py2.py3-none-any.whl (24 kB)\nRequirement already satisfied: certifi>=2017.4.17 in /usr/lib/python3/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2020.6.20)\nCollecting zipp>=3.20\n  Downloading zipp-3.21.0-py3-none-any.whl (9.6 kB)\nRequirement already satisfied: oauthlib>=3.0.0 in /usr/lib/python3/dist-packages (from requests-oauthlib>=0.5.0->msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (3.2.0)\nInstalling collected packages: fixedint, zipp, wrapt, typing-extensions, sniffio, requests-oauthlib, psutil, opentelemetry-util-http, isodate, h11, exceptiongroup, annotated-types, uvicorn, pydantic-core, importlib-metadata, deprecated, azure-core, asgiref, anyio, starlette, pydantic, opentelemetry-api, msrest, opentelemetry-semantic-conventions, fastapi, azure-core-tracing-opentelemetry, opentelemetry-sdk, opentelemetry-instrumentation, opentelemetry-resource-detector-azure, opentelemetry-instrumentation-wsgi, opentelemetry-instrumentation-urllib3, opentelemetry-instrumentation-urllib, opentelemetry-instrumentation-requests, opentelemetry-instrumentation-dbapi, opentelemetry-instrumentation-asgi, azure-monitor-opentelemetry-exporter, opentelemetry-instrumentation-psycopg2, opentelemetry-instrumentation-flask, opentelemetry-instrumentation-fastapi, opentelemetry-instrumentation-django, azure-monitor-opentelemetry\n  Attempting uninstall: zipp\n    Found existing installation: zipp 1.0.0\n    Not uninstalling zipp at /usr/lib/python3/dist-packages, outside environment /usr\n    Can't uninstall 'zipp'. No files were found to uninstall.\n  Attempting uninstall: importlib-metadata\n    Found existing installation: importlib-metadata 4.6.4\n    Not uninstalling importlib-metadata at /usr/lib/python3/dist-packages, outside environment /usr\n    Can't uninstall 'importlib-metadata'. No files were found to uninstall.\nSuccessfully installed annotated-types-0.7.0 anyio-4.8.0 asgiref-3.8.1 azure-core-1.32.0 azure-core-tracing-opentelemetry-1.0.0b11 azure-monitor-opentelemetry-1.6.5 azure-monitor-opentelemetry-exporter-1.0.0b33 deprecated-1.2.18 exceptiongroup-1.2.2 fastapi-0.115.8 fixedint-0.1.6 h11-0.14.0 importlib-metadata-8.5.0 isodate-0.7.2 msrest-0.7.1 opentelemetry-api-1.30.0 opentelemetry-instrumentation-0.51b0 opentelemetry-instrumentation-asgi-0.51b0 opentelemetry-instrumentation-dbapi-0.51b0 opentelemetry-instrumentation-django-0.51b0 opentelemetry-instrumentation-fastapi-0.51b0 opentelemetry-instrumentation-flask-0.51b0 opentelemetry-instrumentation-psycopg2-0.51b0 opentelemetry-instrumentation-requests-0.51b0 opentelemetry-instrumentation-urllib-0.51b0 opentelemetry-instrumentation-urllib3-0.51b0 opentelemetry-instrumentation-wsgi-0.51b0 opentelemetry-resource-detector-azure-0.1.5 opentelemetry-sdk-1.30.0 opentelemetry-semantic-conventions-0.51b0 opentelemetry-util-http-0.51b0 psutil-5.9.8 pydantic-2.10.6 pydantic-core-2.27.2 requests-oauthlib-2.0.0 sniffio-1.3.1 starlette-0.45.3 typing-extensions-4.12.2 uvicorn-0.34.0 wrapt-1.17.2 zipp-3.21.0\n", "stdout_lines": ["Collecting fastapi", "  Downloading fastapi-0.115.8-py3-none-any.whl (94 kB)", "     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 94.8/94.8 KB 3.0 MB/s eta 0:00:00", "Collecting uvicorn", "  Downloading uvicorn-0.34.0-py3-none-any.whl (62 kB)", "     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 62.3/62.3 KB 7.2 MB/s eta 0:00:00", "Collecting azure-monitor-opentelemetry", "  Downloading azure_monitor_opentelemetry-1.6.5-py3-none-any.whl (23 kB)", "Collecting typing-extensions>=4.8.0", "  Downloading typing_extensions-4.12.2-py3-none-any.whl (37 kB)", "Collecting pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4", "  Downloading pydantic-2.10.6-py3-none-any.whl (431 kB)", "     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 431.7/431.7 KB 18.9 MB/s eta 0:00:00", "Collecting starlette<0.46.0,>=0.40.0", "  Downloading starlette-0.45.3-py3-none-any.whl (71 kB)", "     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 71.5/71.5 KB 9.6 MB/s eta 0:00:00", "Collecting h11>=0.8", "  Downloading h11-0.14.0-py3-none-any.whl (58 kB)", "     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 58.3/58.3 KB 4.3 MB/s eta 0:00:00", "Requirement already satisfied: click>=7.0 in /usr/lib/python3/dist-packages (from uvicorn) (8.0.3)", "Collecting azure-monitor-opentelemetry-exporter~=1.0.0b31", "  Downloading azure_monitor_opentelemetry_exporter-1.0.0b33-py2.py3-none-any.whl (151 kB)", "     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 151.7/151.7 KB 17.5 MB/s eta 0:00:00", "Collecting azure-core-tracing-opentelemetry~=1.0.0b11", "  Downloading azure_core_tracing_opentelemetry-1.0.0b11-py3-none-any.whl (10 kB)", "Collecting opentelemetry-resource-detector-azure~=0.1.4", "  Downloading opentelemetry_resource_detector_azure-0.1.5-py3-none-any.whl (14 kB)", "Collecting opentelemetry-sdk~=1.28", "  Downloading opentelemetry_sdk-1.30.0-py3-none-any.whl (118 kB)", "     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 118.7/118.7 KB 10.6 MB/s eta 0:00:00", "Collecting opentelemetry-instrumentation-urllib3~=0.49b0", "  Downloading opentelemetry_instrumentation_urllib3-0.51b0-py3-none-any.whl (12 kB)", "Collecting opentelemetry-instrumentation-fastapi~=0.49b0", "  Downloading opentelemetry_instrumentation_fastapi-0.51b0-py3-none-any.whl (12 kB)", "Collecting opentelemetry-instrumentation-urllib~=0.49b0", "  Downloading opentelemetry_instrumentation_urllib-0.51b0-py3-none-any.whl (12 kB)", "Collecting azure-core<2.0.0,>=1.28.0", "  Downloading azure_core-1.32.0-py3-none-any.whl (198 kB)", "     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 198.9/198.9 KB 26.6 MB/s eta 0:00:00", "Collecting opentelemetry-instrumentation-django~=0.49b0", "  Downloading opentelemetry_instrumentation_django-0.51b0-py3-none-any.whl (19 kB)", "Collecting opentelemetry-instrumentation-psycopg2~=0.49b0", "  Downloading opentelemetry_instrumentation_psycopg2-0.51b0-py3-none-any.whl (10 kB)", "Collecting opentelemetry-instrumentation-flask~=0.49b0", "  Downloading opentelemetry_instrumentation_flask-0.51b0-py3-none-any.whl (14 kB)", "Collecting opentelemetry-instrumentation-requests~=0.49b0", "  Downloading opentelemetry_instrumentation_requests-0.51b0-py3-none-any.whl (12 kB)", "Requirement already satisfied: requests>=2.21.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (2.25.1)", "Requirement already satisfied: six>=1.11.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.16.0)", "Collecting opentelemetry-api<2.0.0,>=1.12.0", "  Downloading opentelemetry_api-1.30.0-py3-none-any.whl (64 kB)", "     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 65.0/65.0 KB 8.4 MB/s eta 0:00:00", "Collecting fixedint==0.1.6", "  Downloading fixedint-0.1.6-py3-none-any.whl (12 kB)", "Collecting msrest>=0.6.10", "  Downloading msrest-0.7.1-py3-none-any.whl (85 kB)", "     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 85.4/85.4 KB 13.2 MB/s eta 0:00:00", "Collecting psutil~=5.9", "  Downloading psutil-5.9.8-cp36-abi3-manylinux_2_12_x86_64.manylinux2010_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl (288 kB)", "     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 288.2/288.2 KB 26.5 MB/s eta 0:00:00", "Collecting opentelemetry-instrumentation-wsgi==0.51b0", "  Downloading opentelemetry_instrumentation_wsgi-0.51b0-py3-none-any.whl (14 kB)", "Collecting opentelemetry-util-http==0.51b0", "  Downloading opentelemetry_util_http-0.51b0-py3-none-any.whl (7.3 kB)", "Collecting opentelemetry-semantic-conventions==0.51b0", "  Downloading opentelemetry_semantic_conventions-0.51b0-py3-none-any.whl (177 kB)", "     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 177.4/177.4 KB 15.7 MB/s eta 0:00:00", "Collecting opentelemetry-instrumentation==0.51b0", "  Downloading opentelemetry_instrumentation-0.51b0-py3-none-any.whl (30 kB)", "Collecting wrapt<2.0.0,>=1.0.0", "  Downloading wrapt-1.17.2-cp310-cp310-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl (82 kB)", "     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 82.8/82.8 KB 11.5 MB/s eta 0:00:00", "Requirement already satisfied: packaging>=18.0 in /usr/lib/python3/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (21.3)", "Collecting deprecated>=1.2.6", "  Downloading Deprecated-1.2.18-py2.py3-none-any.whl (10.0 kB)", "Collecting importlib-metadata<=8.5.0,>=6.0", "  Downloading importlib_metadata-8.5.0-py3-none-any.whl (26 kB)", "Collecting opentelemetry-instrumentation-asgi==0.51b0", "  Downloading opentelemetry_instrumentation_asgi-0.51b0-py3-none-any.whl (16 kB)", "Collecting asgiref~=3.0", "  Downloading asgiref-3.8.1-py3-none-any.whl (23 kB)", "Collecting opentelemetry-instrumentation-dbapi==0.51b0", "  Downloading opentelemetry_instrumentation_dbapi-0.51b0-py3-none-any.whl (12 kB)", "Collecting pydantic-core==2.27.2", "  Downloading pydantic_core-2.27.2-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (2.0 MB)", "     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.0/2.0 MB 42.6 MB/s eta 0:00:00", "Collecting annotated-types>=0.6.0", "  Downloading annotated_types-0.7.0-py3-none-any.whl (13 kB)", "Collecting anyio<5,>=3.6.2", "  Downloading anyio-4.8.0-py3-none-any.whl (96 kB)", "     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 96.0/96.0 KB 14.5 MB/s eta 0:00:00", "Collecting exceptiongroup>=1.0.2", "  Downloading exceptiongroup-1.2.2-py3-none-any.whl (16 kB)", "Collecting sniffio>=1.1", "  Downloading sniffio-1.3.1-py3-none-any.whl (10 kB)", "Requirement already satisfied: idna>=2.8 in /usr/lib/python3/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (3.3)", "Collecting isodate>=0.6.0", "  Downloading isodate-0.7.2-py3-none-any.whl (22 kB)", "Collecting requests-oauthlib>=0.5.0", "  Downloading requests_oauthlib-2.0.0-py2.py3-none-any.whl (24 kB)", "Requirement already satisfied: certifi>=2017.4.17 in /usr/lib/python3/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2020.6.20)", "Collecting zipp>=3.20", "  Downloading zipp-3.21.0-py3-none-any.whl (9.6 kB)", "Requirement already satisfied: oauthlib>=3.0.0 in /usr/lib/python3/dist-packages (from requests-oauthlib>=0.5.0->msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (3.2.0)", "Installing collected packages: fixedint, zipp, wrapt, typing-extensions, sniffio, requests-oauthlib, psutil, opentelemetry-util-http, isodate, h11, exceptiongroup, annotated-types, uvicorn, pydantic-core, importlib-metadata, deprecated, azure-core, asgiref, anyio, starlette, pydantic, opentelemetry-api, msrest, opentelemetry-semantic-conventions, fastapi, azure-core-tracing-opentelemetry, opentelemetry-sdk, opentelemetry-instrumentation, opentelemetry-resource-detector-azure, opentelemetry-instrumentation-wsgi, opentelemetry-instrumentation-urllib3, opentelemetry-instrumentation-urllib, opentelemetry-instrumentation-requests, opentelemetry-instrumentation-dbapi, opentelemetry-instrumentation-asgi, azure-monitor-opentelemetry-exporter, opentelemetry-instrumentation-psycopg2, opentelemetry-instrumentation-flask, opentelemetry-instrumentation-fastapi, opentelemetry-instrumentation-django, azure-monitor-opentelemetry", "  Attempting uninstall: zipp", "    Found existing installation: zipp 1.0.0", "    Not uninstalling zipp at /usr/lib/python3/dist-packages, outside environment /usr", "    Can't uninstall 'zipp'. No files were found to uninstall.", "  Attempting uninstall: importlib-metadata", "    Found existing installation: importlib-metadata 4.6.4", "    Not uninstalling importlib-metadata at /usr/lib/python3/dist-packages, outside environment /usr", "    Can't uninstall 'importlib-metadata'. No files were found to uninstall.", "Successfully installed annotated-types-0.7.0 anyio-4.8.0 asgiref-3.8.1 azure-core-1.32.0 azure-core-tracing-opentelemetry-1.0.0b11 azure-monitor-opentelemetry-1.6.5 azure-monitor-opentelemetry-exporter-1.0.0b33 deprecated-1.2.18 exceptiongroup-1.2.2 fastapi-0.115.8 fixedint-0.1.6 h11-0.14.0 importlib-metadata-8.5.0 isodate-0.7.2 msrest-0.7.1 opentelemetry-api-1.30.0 opentelemetry-instrumentation-0.51b0 opentelemetry-instrumentation-asgi-0.51b0 opentelemetry-instrumentation-dbapi-0.51b0 opentelemetry-instrumentation-django-0.51b0 opentelemetry-instrumentation-fastapi-0.51b0 opentelemetry-instrumentation-flask-0.51b0 opentelemetry-instrumentation-psycopg2-0.51b0 opentelemetry-instrumentation-requests-0.51b0 opentelemetry-instrumentation-urllib-0.51b0 opentelemetry-instrumentation-urllib3-0.51b0 opentelemetry-instrumentation-wsgi-0.51b0 opentelemetry-resource-detector-azure-0.1.5 opentelemetry-sdk-1.30.0 opentelemetry-semantic-conventions-0.51b0 opentelemetry-util-http-0.51b0 psutil-5.9.8 pydantic-2.10.6 pydantic-core-2.27.2 requests-oauthlib-2.0.0 sniffio-1.3.1 starlette-0.45.3 typing-extensions-4.12.2 uvicorn-0.34.0 wrapt-1.17.2 zipp-3.21.0"], "version": null, "virtualenv": null}
2025-02-21 00:59:13,802 p=51082 u=snrj n=ansible INFO| TASK [flask_app : Set Application Insights connection string] ***********************************************************************************************
2025-02-21 00:59:13,818 p=51082 u=snrj n=ansible INFO| fatal: [40.68.93.141]: FAILED! => {"msg": "The task includes an option with an undefined variable.. 'application_insights_connection_string' is undefined\n\nThe error appears to be in '/Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml': line 25, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Set Application Insights connection string\n  ^ here\n"}
2025-02-21 00:59:13,819 p=51082 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 00:59:13,819 p=51082 u=snrj n=ansible INFO| 40.68.93.141               : ok=5    changed=3    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2025-02-21 01:01:32,869 p=51379 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 01:01:34,367 p=51379 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-21 01:01:36,439 p=51379 u=snrj n=ansible INFO| PLAY [Setup Flask App with OpenTelemetry] *******************************************************************************************************************
2025-02-21 01:01:36,510 p=51379 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 01:01:41,699 p=51379 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 40.68.93.141 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-21 01:01:41,699 p=51379 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 01:01:41,702 p=51379 u=snrj n=ansible INFO| TASK [flask_app : Update apt package index] *****************************************************************************************************************
2025-02-21 01:01:44,324 p=51379 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"cache_update_time": 1740096103, "cache_updated": true, "changed": true}
2025-02-21 01:01:44,333 p=51379 u=snrj n=ansible INFO| TASK [flask_app : Ensure the 'universe' repository is enabled] **********************************************************************************************
2025-02-21 01:01:45,035 p=51379 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "repo": "deb http://archive.ubuntu.com/ubuntu/ jammy universe", "sources_added": [], "sources_removed": [], "state": "present"}
2025-02-21 01:01:45,044 p=51379 u=snrj n=ansible INFO| TASK [flask_app : Install python3-pip] **********************************************************************************************************************
2025-02-21 01:01:46,366 p=51379 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"cache_update_time": 1740096103, "cache_updated": false, "changed": false}
2025-02-21 01:01:46,379 p=51379 u=snrj n=ansible INFO| TASK [flask_app : Install required Python packages] *********************************************************************************************************
2025-02-21 01:01:48,024 p=51379 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "cmd": ["/usr/bin/python3.10", "-m", "pip.__main__", "install", "fastapi", "uvicorn", "azure-monitor-opentelemetry"], "name": ["fastapi", "uvicorn", "azure-monitor-opentelemetry"], "requirements": null, "state": "present", "stderr": "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n", "stderr_lines": ["WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv"], "stdout": "Requirement already satisfied: fastapi in /usr/local/lib/python3.10/dist-packages (0.115.8)\nRequirement already satisfied: uvicorn in /usr/local/lib/python3.10/dist-packages (0.34.0)\nRequirement already satisfied: azure-monitor-opentelemetry in /usr/local/lib/python3.10/dist-packages (1.6.5)\nRequirement already satisfied: starlette<0.46.0,>=0.40.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (0.45.3)\nRequirement already satisfied: pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4 in /usr/local/lib/python3.10/dist-packages (from fastapi) (2.10.6)\nRequirement already satisfied: typing-extensions>=4.8.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (4.12.2)\nRequirement already satisfied: click>=7.0 in /usr/lib/python3/dist-packages (from uvicorn) (8.0.3)\nRequirement already satisfied: h11>=0.8 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (0.14.0)\nRequirement already satisfied: opentelemetry-instrumentation-flask~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-resource-detector-azure~=0.1.4 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.1.5)\nRequirement already satisfied: opentelemetry-instrumentation-urllib3~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: azure-monitor-opentelemetry-exporter~=1.0.0b31 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b33)\nRequirement already satisfied: opentelemetry-instrumentation-fastapi~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: azure-core<2.0.0,>=1.28.0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.32.0)\nRequirement already satisfied: azure-core-tracing-opentelemetry~=1.0.0b11 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b11)\nRequirement already satisfied: opentelemetry-instrumentation-psycopg2~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-sdk~=1.28 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.30.0)\nRequirement already satisfied: opentelemetry-instrumentation-urllib~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-requests~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-django~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: six>=1.11.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.16.0)\nRequirement already satisfied: requests>=2.21.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (2.25.1)\nRequirement already satisfied: opentelemetry-api<2.0.0,>=1.12.0 in /usr/local/lib/python3.10/dist-packages (from azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (1.30.0)\nRequirement already satisfied: fixedint==0.1.6 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.1.6)\nRequirement already satisfied: psutil~=5.9 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (5.9.8)\nRequirement already satisfied: msrest>=0.6.10 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.1)\nRequirement already satisfied: opentelemetry-semantic-conventions==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-wsgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-util-http==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: packaging>=18.0 in /usr/lib/python3/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (21.3)\nRequirement already satisfied: wrapt<2.0.0,>=1.0.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.17.2)\nRequirement already satisfied: deprecated>=1.2.6 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-semantic-conventions==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.2.18)\nRequirement already satisfied: importlib-metadata<=8.5.0,>=6.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (8.5.0)\nRequirement already satisfied: opentelemetry-instrumentation-asgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: asgiref~=3.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-asgi==0.51b0->opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (3.8.1)\nRequirement already satisfied: opentelemetry-instrumentation-dbapi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-psycopg2~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: annotated-types>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (0.7.0)\nRequirement already satisfied: pydantic-core==2.27.2 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (2.27.2)\nRequirement already satisfied: anyio<5,>=3.6.2 in /usr/local/lib/python3.10/dist-packages (from starlette<0.46.0,>=0.40.0->fastapi) (4.8.0)\nRequirement already satisfied: sniffio>=1.1 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.3.1)\nRequirement already satisfied: idna>=2.8 in /usr/lib/python3/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (3.3)\nRequirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.2.2)\nRequirement already satisfied: certifi>=2017.4.17 in /usr/lib/python3/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2020.6.20)\nRequirement already satisfied: isodate>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.2)\nRequirement already satisfied: requests-oauthlib>=0.5.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2.0.0)\nRequirement already satisfied: zipp>=3.20 in /usr/local/lib/python3.10/dist-packages (from importlib-metadata<=8.5.0,>=6.0->opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (3.21.0)\nRequirement already satisfied: oauthlib>=3.0.0 in /usr/lib/python3/dist-packages (from requests-oauthlib>=0.5.0->msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (3.2.0)\n", "stdout_lines": ["Requirement already satisfied: fastapi in /usr/local/lib/python3.10/dist-packages (0.115.8)", "Requirement already satisfied: uvicorn in /usr/local/lib/python3.10/dist-packages (0.34.0)", "Requirement already satisfied: azure-monitor-opentelemetry in /usr/local/lib/python3.10/dist-packages (1.6.5)", "Requirement already satisfied: starlette<0.46.0,>=0.40.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (0.45.3)", "Requirement already satisfied: pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4 in /usr/local/lib/python3.10/dist-packages (from fastapi) (2.10.6)", "Requirement already satisfied: typing-extensions>=4.8.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (4.12.2)", "Requirement already satisfied: click>=7.0 in /usr/lib/python3/dist-packages (from uvicorn) (8.0.3)", "Requirement already satisfied: h11>=0.8 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (0.14.0)", "Requirement already satisfied: opentelemetry-instrumentation-flask~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-resource-detector-azure~=0.1.4 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.1.5)", "Requirement already satisfied: opentelemetry-instrumentation-urllib3~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: azure-monitor-opentelemetry-exporter~=1.0.0b31 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b33)", "Requirement already satisfied: opentelemetry-instrumentation-fastapi~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: azure-core<2.0.0,>=1.28.0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.32.0)", "Requirement already satisfied: azure-core-tracing-opentelemetry~=1.0.0b11 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b11)", "Requirement already satisfied: opentelemetry-instrumentation-psycopg2~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-sdk~=1.28 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.30.0)", "Requirement already satisfied: opentelemetry-instrumentation-urllib~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-requests~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-django~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: six>=1.11.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.16.0)", "Requirement already satisfied: requests>=2.21.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (2.25.1)", "Requirement already satisfied: opentelemetry-api<2.0.0,>=1.12.0 in /usr/local/lib/python3.10/dist-packages (from azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (1.30.0)", "Requirement already satisfied: fixedint==0.1.6 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.1.6)", "Requirement already satisfied: psutil~=5.9 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (5.9.8)", "Requirement already satisfied: msrest>=0.6.10 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.1)", "Requirement already satisfied: opentelemetry-semantic-conventions==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-wsgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-util-http==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: packaging>=18.0 in /usr/lib/python3/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (21.3)", "Requirement already satisfied: wrapt<2.0.0,>=1.0.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.17.2)", "Requirement already satisfied: deprecated>=1.2.6 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-semantic-conventions==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.2.18)", "Requirement already satisfied: importlib-metadata<=8.5.0,>=6.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (8.5.0)", "Requirement already satisfied: opentelemetry-instrumentation-asgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: asgiref~=3.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-asgi==0.51b0->opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (3.8.1)", "Requirement already satisfied: opentelemetry-instrumentation-dbapi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-psycopg2~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: annotated-types>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (0.7.0)", "Requirement already satisfied: pydantic-core==2.27.2 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (2.27.2)", "Requirement already satisfied: anyio<5,>=3.6.2 in /usr/local/lib/python3.10/dist-packages (from starlette<0.46.0,>=0.40.0->fastapi) (4.8.0)", "Requirement already satisfied: sniffio>=1.1 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.3.1)", "Requirement already satisfied: idna>=2.8 in /usr/lib/python3/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (3.3)", "Requirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.2.2)", "Requirement already satisfied: certifi>=2017.4.17 in /usr/lib/python3/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2020.6.20)", "Requirement already satisfied: isodate>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.2)", "Requirement already satisfied: requests-oauthlib>=0.5.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2.0.0)", "Requirement already satisfied: zipp>=3.20 in /usr/local/lib/python3.10/dist-packages (from importlib-metadata<=8.5.0,>=6.0->opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (3.21.0)", "Requirement already satisfied: oauthlib>=3.0.0 in /usr/lib/python3/dist-packages (from requests-oauthlib>=0.5.0->msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (3.2.0)"], "version": null, "virtualenv": null}
2025-02-21 01:01:48,044 p=51379 u=snrj n=ansible INFO| TASK [flask_app : Set Application Insights connection string] ***********************************************************************************************
2025-02-21 01:01:48,059 p=51379 u=snrj n=ansible INFO| fatal: [40.68.93.141]: FAILED! => {"msg": "The task includes an option with an undefined variable.. 'application_insights_connection_string' is undefined\n\nThe error appears to be in '/Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml': line 25, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Set Application Insights connection string\n  ^ here\n"}
2025-02-21 01:01:48,060 p=51379 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 01:01:48,061 p=51379 u=snrj n=ansible INFO| 40.68.93.141               : ok=5    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2025-02-21 01:03:29,487 p=51591 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 01:03:29,653 p=51591 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-21 01:03:29,945 p=51591 u=snrj n=ansible ERROR| ERROR! failed at splitting arguments, either an unbalanced jinja2 block or quotes: echo "export OTEL_EXPORTER_ZIPKIN_ENDPOINT=http://localhost:9411/api/v2/spans" >> ~/.bashrc
echo "export APPLICATION_INSIGHTS_CONNECTION_STRING="InstrumentationKey=d920db34-d4ca-442c-9eeb-22dd3bef616d" >> ~/.bashrc
. failed at splitting arguments, either an unbalanced jinja2 block or quotes: echo "export OTEL_EXPORTER_ZIPKIN_ENDPOINT=http://localhost:9411/api/v2/spans" >> ~/.bashrc
echo "export APPLICATION_INSIGHTS_CONNECTION_STRING="InstrumentationKey=d920db34-d4ca-442c-9eeb-22dd3bef616d" >> ~/.bashrc


The error appears to be in '/Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml': line 25, column 3, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


- name: Set Application Insights connection string
  ^ here

2025-02-21 01:04:42,044 p=51737 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 01:04:42,169 p=51737 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-21 01:04:42,442 p=51737 u=snrj n=ansible INFO| PLAY [Setup Flask App with OpenTelemetry] *******************************************************************************************************************
2025-02-21 01:04:42,451 p=51737 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 01:04:46,890 p=51737 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 40.68.93.141 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-21 01:04:46,890 p=51737 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 01:04:46,895 p=51737 u=snrj n=ansible INFO| TASK [flask_app : Update apt package index] *****************************************************************************************************************
2025-02-21 01:04:49,532 p=51737 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"cache_update_time": 1740096288, "cache_updated": true, "changed": true}
2025-02-21 01:04:49,540 p=51737 u=snrj n=ansible INFO| TASK [flask_app : Ensure the 'universe' repository is enabled] **********************************************************************************************
2025-02-21 01:04:50,383 p=51737 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "repo": "deb http://archive.ubuntu.com/ubuntu/ jammy universe", "sources_added": [], "sources_removed": [], "state": "present"}
2025-02-21 01:04:50,391 p=51737 u=snrj n=ansible INFO| TASK [flask_app : Install python3-pip] **********************************************************************************************************************
2025-02-21 01:04:51,611 p=51737 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"cache_update_time": 1740096288, "cache_updated": false, "changed": false}
2025-02-21 01:04:51,624 p=51737 u=snrj n=ansible INFO| TASK [flask_app : Install required Python packages] *********************************************************************************************************
2025-02-21 01:04:53,335 p=51737 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "cmd": ["/usr/bin/python3.10", "-m", "pip.__main__", "install", "fastapi", "uvicorn", "azure-monitor-opentelemetry"], "name": ["fastapi", "uvicorn", "azure-monitor-opentelemetry"], "requirements": null, "state": "present", "stderr": "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n", "stderr_lines": ["WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv"], "stdout": "Requirement already satisfied: fastapi in /usr/local/lib/python3.10/dist-packages (0.115.8)\nRequirement already satisfied: uvicorn in /usr/local/lib/python3.10/dist-packages (0.34.0)\nRequirement already satisfied: azure-monitor-opentelemetry in /usr/local/lib/python3.10/dist-packages (1.6.5)\nRequirement already satisfied: pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4 in /usr/local/lib/python3.10/dist-packages (from fastapi) (2.10.6)\nRequirement already satisfied: typing-extensions>=4.8.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (4.12.2)\nRequirement already satisfied: starlette<0.46.0,>=0.40.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (0.45.3)\nRequirement already satisfied: h11>=0.8 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (0.14.0)\nRequirement already satisfied: click>=7.0 in /usr/lib/python3/dist-packages (from uvicorn) (8.0.3)\nRequirement already satisfied: opentelemetry-instrumentation-urllib3~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-psycopg2~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-resource-detector-azure~=0.1.4 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.1.5)\nRequirement already satisfied: opentelemetry-sdk~=1.28 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.30.0)\nRequirement already satisfied: azure-core<2.0.0,>=1.28.0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.32.0)\nRequirement already satisfied: azure-monitor-opentelemetry-exporter~=1.0.0b31 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b33)\nRequirement already satisfied: opentelemetry-instrumentation-flask~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-requests~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-fastapi~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-urllib~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: azure-core-tracing-opentelemetry~=1.0.0b11 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b11)\nRequirement already satisfied: opentelemetry-instrumentation-django~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: six>=1.11.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.16.0)\nRequirement already satisfied: requests>=2.21.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (2.25.1)\nRequirement already satisfied: opentelemetry-api<2.0.0,>=1.12.0 in /usr/local/lib/python3.10/dist-packages (from azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (1.30.0)\nRequirement already satisfied: fixedint==0.1.6 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.1.6)\nRequirement already satisfied: msrest>=0.6.10 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.1)\nRequirement already satisfied: psutil~=5.9 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (5.9.8)\nRequirement already satisfied: opentelemetry-instrumentation==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-util-http==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-wsgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-semantic-conventions==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: wrapt<2.0.0,>=1.0.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.17.2)\nRequirement already satisfied: packaging>=18.0 in /usr/lib/python3/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (21.3)\nRequirement already satisfied: deprecated>=1.2.6 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-semantic-conventions==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.2.18)\nRequirement already satisfied: importlib-metadata<=8.5.0,>=6.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (8.5.0)\nRequirement already satisfied: opentelemetry-instrumentation-asgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: asgiref~=3.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-asgi==0.51b0->opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (3.8.1)\nRequirement already satisfied: opentelemetry-instrumentation-dbapi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-psycopg2~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: annotated-types>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (0.7.0)\nRequirement already satisfied: pydantic-core==2.27.2 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (2.27.2)\nRequirement already satisfied: anyio<5,>=3.6.2 in /usr/local/lib/python3.10/dist-packages (from starlette<0.46.0,>=0.40.0->fastapi) (4.8.0)\nRequirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.2.2)\nRequirement already satisfied: sniffio>=1.1 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.3.1)\nRequirement already satisfied: idna>=2.8 in /usr/lib/python3/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (3.3)\nRequirement already satisfied: requests-oauthlib>=0.5.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2.0.0)\nRequirement already satisfied: isodate>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.2)\nRequirement already satisfied: certifi>=2017.4.17 in /usr/lib/python3/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2020.6.20)\nRequirement already satisfied: zipp>=3.20 in /usr/local/lib/python3.10/dist-packages (from importlib-metadata<=8.5.0,>=6.0->opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (3.21.0)\nRequirement already satisfied: oauthlib>=3.0.0 in /usr/lib/python3/dist-packages (from requests-oauthlib>=0.5.0->msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (3.2.0)\n", "stdout_lines": ["Requirement already satisfied: fastapi in /usr/local/lib/python3.10/dist-packages (0.115.8)", "Requirement already satisfied: uvicorn in /usr/local/lib/python3.10/dist-packages (0.34.0)", "Requirement already satisfied: azure-monitor-opentelemetry in /usr/local/lib/python3.10/dist-packages (1.6.5)", "Requirement already satisfied: pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4 in /usr/local/lib/python3.10/dist-packages (from fastapi) (2.10.6)", "Requirement already satisfied: typing-extensions>=4.8.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (4.12.2)", "Requirement already satisfied: starlette<0.46.0,>=0.40.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (0.45.3)", "Requirement already satisfied: h11>=0.8 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (0.14.0)", "Requirement already satisfied: click>=7.0 in /usr/lib/python3/dist-packages (from uvicorn) (8.0.3)", "Requirement already satisfied: opentelemetry-instrumentation-urllib3~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-psycopg2~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-resource-detector-azure~=0.1.4 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.1.5)", "Requirement already satisfied: opentelemetry-sdk~=1.28 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.30.0)", "Requirement already satisfied: azure-core<2.0.0,>=1.28.0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.32.0)", "Requirement already satisfied: azure-monitor-opentelemetry-exporter~=1.0.0b31 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b33)", "Requirement already satisfied: opentelemetry-instrumentation-flask~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-requests~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-fastapi~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-urllib~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: azure-core-tracing-opentelemetry~=1.0.0b11 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b11)", "Requirement already satisfied: opentelemetry-instrumentation-django~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: six>=1.11.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.16.0)", "Requirement already satisfied: requests>=2.21.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (2.25.1)", "Requirement already satisfied: opentelemetry-api<2.0.0,>=1.12.0 in /usr/local/lib/python3.10/dist-packages (from azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (1.30.0)", "Requirement already satisfied: fixedint==0.1.6 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.1.6)", "Requirement already satisfied: msrest>=0.6.10 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.1)", "Requirement already satisfied: psutil~=5.9 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (5.9.8)", "Requirement already satisfied: opentelemetry-instrumentation==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-util-http==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-wsgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-semantic-conventions==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: wrapt<2.0.0,>=1.0.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.17.2)", "Requirement already satisfied: packaging>=18.0 in /usr/lib/python3/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (21.3)", "Requirement already satisfied: deprecated>=1.2.6 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-semantic-conventions==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.2.18)", "Requirement already satisfied: importlib-metadata<=8.5.0,>=6.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (8.5.0)", "Requirement already satisfied: opentelemetry-instrumentation-asgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: asgiref~=3.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-asgi==0.51b0->opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (3.8.1)", "Requirement already satisfied: opentelemetry-instrumentation-dbapi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-psycopg2~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: annotated-types>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (0.7.0)", "Requirement already satisfied: pydantic-core==2.27.2 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (2.27.2)", "Requirement already satisfied: anyio<5,>=3.6.2 in /usr/local/lib/python3.10/dist-packages (from starlette<0.46.0,>=0.40.0->fastapi) (4.8.0)", "Requirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.2.2)", "Requirement already satisfied: sniffio>=1.1 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.3.1)", "Requirement already satisfied: idna>=2.8 in /usr/lib/python3/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (3.3)", "Requirement already satisfied: requests-oauthlib>=0.5.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2.0.0)", "Requirement already satisfied: isodate>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.2)", "Requirement already satisfied: certifi>=2017.4.17 in /usr/lib/python3/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2020.6.20)", "Requirement already satisfied: zipp>=3.20 in /usr/local/lib/python3.10/dist-packages (from importlib-metadata<=8.5.0,>=6.0->opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (3.21.0)", "Requirement already satisfied: oauthlib>=3.0.0 in /usr/lib/python3/dist-packages (from requests-oauthlib>=0.5.0->msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (3.2.0)"], "version": null, "virtualenv": null}
2025-02-21 01:04:53,346 p=51737 u=snrj n=ansible INFO| TASK [flask_app : Set Application Insights connection string] ***********************************************************************************************
2025-02-21 01:04:53,753 p=51737 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"changed": true, "cmd": "echo \"export OTEL_EXPORTER_ZIPKIN_ENDPOINT=http://localhost:9411/api/v2/spans\" >> ~/.bashrc\necho \"export APPLICATION_INSIGHTS_CONNECTION_STRING='InstrumentationKey=d920db34-d4ca-442c-9eeb-22dd3bef616d'\" >> ~/.bashrc\n", "delta": "0:00:00.005767", "end": "2025-02-21 00:04:53.748108", "msg": "", "rc": 0, "start": "2025-02-21 00:04:53.742341", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2025-02-21 01:04:53,774 p=51737 u=snrj n=ansible INFO| TASK [flask_app : Copy the sample FastAPI application] ******************************************************************************************************
2025-02-21 01:04:55,327 p=51737 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"changed": true, "checksum": "669b93105adb185a9d179fab2d520ee869e2b33a", "dest": "/home/azureadmin/http_fastapi.py", "gid": 0, "group": "root", "md5sum": "9606f62876a79762550720543bbde3cf", "mode": "0644", "owner": "root", "size": 882, "src": "/home/azureadmin/.ansible/tmp/ansible-tmp-1740096293.863019-51775-264110668747047/.source.py", "state": "file", "uid": 0}
2025-02-21 01:04:55,336 p=51737 u=snrj n=ansible INFO| TASK [flask_app : Start FastAPI application with uvicorn] ***************************************************************************************************
2025-02-21 01:04:56,841 p=51737 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"ansible_job_id": "j508114529483.8916", "changed": true, "finished": 0, "results_file": "/root/.ansible_async/j508114529483.8916", "started": 1}
2025-02-21 01:04:56,851 p=51737 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 01:04:56,851 p=51737 u=snrj n=ansible INFO| 40.68.93.141               : ok=8    changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-21 01:15:21,454 p=53054 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 01:15:21,620 p=53054 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-21 01:15:21,914 p=53054 u=snrj n=ansible INFO| PLAY [Setup Flask App with OpenTelemetry] *******************************************************************************************************************
2025-02-21 01:15:21,923 p=53054 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 01:15:26,478 p=53054 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 40.68.93.141 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-21 01:15:26,478 p=53054 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 01:15:26,482 p=53054 u=snrj n=ansible INFO| TASK [flask_app : Update apt package index] *****************************************************************************************************************
2025-02-21 01:15:29,128 p=53054 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"cache_update_time": 1740096928, "cache_updated": true, "changed": true}
2025-02-21 01:15:29,136 p=53054 u=snrj n=ansible INFO| TASK [flask_app : Ensure the 'universe' repository is enabled] **********************************************************************************************
2025-02-21 01:15:29,702 p=53054 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "repo": "deb http://archive.ubuntu.com/ubuntu/ jammy universe", "sources_added": [], "sources_removed": [], "state": "present"}
2025-02-21 01:15:29,711 p=53054 u=snrj n=ansible INFO| TASK [flask_app : Install python3-pip] **********************************************************************************************************************
2025-02-21 01:15:30,891 p=53054 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"cache_update_time": 1740096928, "cache_updated": false, "changed": false}
2025-02-21 01:15:30,904 p=53054 u=snrj n=ansible INFO| TASK [flask_app : Install required Python packages] *********************************************************************************************************
2025-02-21 01:15:32,561 p=53054 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "cmd": ["/usr/bin/python3.10", "-m", "pip.__main__", "install", "fastapi", "uvicorn", "azure-monitor-opentelemetry"], "name": ["fastapi", "uvicorn", "azure-monitor-opentelemetry"], "requirements": null, "state": "present", "stderr": "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n", "stderr_lines": ["WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv"], "stdout": "Requirement already satisfied: fastapi in /usr/local/lib/python3.10/dist-packages (0.115.8)\nRequirement already satisfied: uvicorn in /usr/local/lib/python3.10/dist-packages (0.34.0)\nRequirement already satisfied: azure-monitor-opentelemetry in /usr/local/lib/python3.10/dist-packages (1.6.5)\nRequirement already satisfied: pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4 in /usr/local/lib/python3.10/dist-packages (from fastapi) (2.10.6)\nRequirement already satisfied: starlette<0.46.0,>=0.40.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (0.45.3)\nRequirement already satisfied: typing-extensions>=4.8.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (4.12.2)\nRequirement already satisfied: h11>=0.8 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (0.14.0)\nRequirement already satisfied: click>=7.0 in /usr/lib/python3/dist-packages (from uvicorn) (8.0.3)\nRequirement already satisfied: opentelemetry-instrumentation-fastapi~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-urllib3~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-urllib~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-psycopg2~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-django~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: azure-core<2.0.0,>=1.28.0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.32.0)\nRequirement already satisfied: azure-core-tracing-opentelemetry~=1.0.0b11 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b11)\nRequirement already satisfied: opentelemetry-resource-detector-azure~=0.1.4 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.1.5)\nRequirement already satisfied: opentelemetry-instrumentation-requests~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: azure-monitor-opentelemetry-exporter~=1.0.0b31 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b33)\nRequirement already satisfied: opentelemetry-instrumentation-flask~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-sdk~=1.28 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.30.0)\nRequirement already satisfied: requests>=2.21.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (2.25.1)\nRequirement already satisfied: six>=1.11.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.16.0)\nRequirement already satisfied: opentelemetry-api<2.0.0,>=1.12.0 in /usr/local/lib/python3.10/dist-packages (from azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (1.30.0)\nRequirement already satisfied: msrest>=0.6.10 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.1)\nRequirement already satisfied: fixedint==0.1.6 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.1.6)\nRequirement already satisfied: psutil~=5.9 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (5.9.8)\nRequirement already satisfied: opentelemetry-instrumentation-wsgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-semantic-conventions==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-util-http==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: wrapt<2.0.0,>=1.0.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.17.2)\nRequirement already satisfied: packaging>=18.0 in /usr/lib/python3/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (21.3)\nRequirement already satisfied: deprecated>=1.2.6 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-semantic-conventions==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.2.18)\nRequirement already satisfied: importlib-metadata<=8.5.0,>=6.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (8.5.0)\nRequirement already satisfied: opentelemetry-instrumentation-asgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: asgiref~=3.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-asgi==0.51b0->opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (3.8.1)\nRequirement already satisfied: opentelemetry-instrumentation-dbapi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-psycopg2~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: annotated-types>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (0.7.0)\nRequirement already satisfied: pydantic-core==2.27.2 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (2.27.2)\nRequirement already satisfied: anyio<5,>=3.6.2 in /usr/local/lib/python3.10/dist-packages (from starlette<0.46.0,>=0.40.0->fastapi) (4.8.0)\nRequirement already satisfied: sniffio>=1.1 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.3.1)\nRequirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.2.2)\nRequirement already satisfied: idna>=2.8 in /usr/lib/python3/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (3.3)\nRequirement already satisfied: requests-oauthlib>=0.5.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2.0.0)\nRequirement already satisfied: isodate>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.2)\nRequirement already satisfied: certifi>=2017.4.17 in /usr/lib/python3/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2020.6.20)\nRequirement already satisfied: zipp>=3.20 in /usr/local/lib/python3.10/dist-packages (from importlib-metadata<=8.5.0,>=6.0->opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (3.21.0)\nRequirement already satisfied: oauthlib>=3.0.0 in /usr/lib/python3/dist-packages (from requests-oauthlib>=0.5.0->msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (3.2.0)\n", "stdout_lines": ["Requirement already satisfied: fastapi in /usr/local/lib/python3.10/dist-packages (0.115.8)", "Requirement already satisfied: uvicorn in /usr/local/lib/python3.10/dist-packages (0.34.0)", "Requirement already satisfied: azure-monitor-opentelemetry in /usr/local/lib/python3.10/dist-packages (1.6.5)", "Requirement already satisfied: pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4 in /usr/local/lib/python3.10/dist-packages (from fastapi) (2.10.6)", "Requirement already satisfied: starlette<0.46.0,>=0.40.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (0.45.3)", "Requirement already satisfied: typing-extensions>=4.8.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (4.12.2)", "Requirement already satisfied: h11>=0.8 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (0.14.0)", "Requirement already satisfied: click>=7.0 in /usr/lib/python3/dist-packages (from uvicorn) (8.0.3)", "Requirement already satisfied: opentelemetry-instrumentation-fastapi~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-urllib3~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-urllib~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-psycopg2~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-django~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: azure-core<2.0.0,>=1.28.0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.32.0)", "Requirement already satisfied: azure-core-tracing-opentelemetry~=1.0.0b11 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b11)", "Requirement already satisfied: opentelemetry-resource-detector-azure~=0.1.4 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.1.5)", "Requirement already satisfied: opentelemetry-instrumentation-requests~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: azure-monitor-opentelemetry-exporter~=1.0.0b31 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b33)", "Requirement already satisfied: opentelemetry-instrumentation-flask~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-sdk~=1.28 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.30.0)", "Requirement already satisfied: requests>=2.21.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (2.25.1)", "Requirement already satisfied: six>=1.11.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.16.0)", "Requirement already satisfied: opentelemetry-api<2.0.0,>=1.12.0 in /usr/local/lib/python3.10/dist-packages (from azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (1.30.0)", "Requirement already satisfied: msrest>=0.6.10 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.1)", "Requirement already satisfied: fixedint==0.1.6 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.1.6)", "Requirement already satisfied: psutil~=5.9 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (5.9.8)", "Requirement already satisfied: opentelemetry-instrumentation-wsgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-semantic-conventions==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-util-http==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: wrapt<2.0.0,>=1.0.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.17.2)", "Requirement already satisfied: packaging>=18.0 in /usr/lib/python3/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (21.3)", "Requirement already satisfied: deprecated>=1.2.6 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-semantic-conventions==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.2.18)", "Requirement already satisfied: importlib-metadata<=8.5.0,>=6.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (8.5.0)", "Requirement already satisfied: opentelemetry-instrumentation-asgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: asgiref~=3.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-asgi==0.51b0->opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (3.8.1)", "Requirement already satisfied: opentelemetry-instrumentation-dbapi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-psycopg2~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: annotated-types>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (0.7.0)", "Requirement already satisfied: pydantic-core==2.27.2 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (2.27.2)", "Requirement already satisfied: anyio<5,>=3.6.2 in /usr/local/lib/python3.10/dist-packages (from starlette<0.46.0,>=0.40.0->fastapi) (4.8.0)", "Requirement already satisfied: sniffio>=1.1 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.3.1)", "Requirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.2.2)", "Requirement already satisfied: idna>=2.8 in /usr/lib/python3/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (3.3)", "Requirement already satisfied: requests-oauthlib>=0.5.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2.0.0)", "Requirement already satisfied: isodate>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.2)", "Requirement already satisfied: certifi>=2017.4.17 in /usr/lib/python3/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2020.6.20)", "Requirement already satisfied: zipp>=3.20 in /usr/local/lib/python3.10/dist-packages (from importlib-metadata<=8.5.0,>=6.0->opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (3.21.0)", "Requirement already satisfied: oauthlib>=3.0.0 in /usr/lib/python3/dist-packages (from requests-oauthlib>=0.5.0->msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (3.2.0)"], "version": null, "virtualenv": null}
2025-02-21 01:15:32,570 p=53054 u=snrj n=ansible INFO| TASK [flask_app : Set Application Insights connection string] ***********************************************************************************************
2025-02-21 01:15:32,946 p=53054 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"changed": true, "cmd": "echo \"export OTEL_EXPORTER_ZIPKIN_ENDPOINT=http://localhost:9411/api/v2/spans\" >> /home/azureadmin/.bashrc\necho \"export APPLICATION_INSIGHTS_CONNECTION_STRING='InstrumentationKey=d920db34-d4ca-442c-9eeb-22dd3bef616d'\" >> /home/azureadmin/.bashrc\n", "delta": "0:00:00.005036", "end": "2025-02-21 00:15:32.938951", "msg": "", "rc": 0, "start": "2025-02-21 00:15:32.933915", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2025-02-21 01:15:32,957 p=53054 u=snrj n=ansible INFO| TASK [flask_app : Copy the sample FastAPI application] ******************************************************************************************************
2025-02-21 01:15:33,997 p=53054 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "checksum": "669b93105adb185a9d179fab2d520ee869e2b33a", "dest": "/home/azureadmin/http_fastapi.py", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/home/azureadmin/http_fastapi.py", "size": 882, "state": "file", "uid": 0}
2025-02-21 01:15:34,006 p=53054 u=snrj n=ansible INFO| TASK [flask_app : Start FastAPI application with uvicorn] ***************************************************************************************************
2025-02-21 01:15:35,451 p=53054 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"ansible_job_id": "j836179643673.9615", "changed": true, "finished": 0, "results_file": "/root/.ansible_async/j836179643673.9615", "started": 1}
2025-02-21 01:15:35,460 p=53054 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 01:15:35,460 p=53054 u=snrj n=ansible INFO| 40.68.93.141               : ok=8    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-21 01:23:09,796 p=53814 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 01:23:09,963 p=53814 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-21 01:23:10,258 p=53814 u=snrj n=ansible INFO| PLAY [Setup Flask App with OpenTelemetry] *******************************************************************************************************************
2025-02-21 01:23:10,266 p=53814 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 01:23:14,826 p=53814 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 40.68.93.141 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-21 01:23:14,826 p=53814 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 01:23:14,832 p=53814 u=snrj n=ansible INFO| TASK [flask_app : Update apt package index] *****************************************************************************************************************
2025-02-21 01:23:17,425 p=53814 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"cache_update_time": 1740097396, "cache_updated": true, "changed": true}
2025-02-21 01:23:17,433 p=53814 u=snrj n=ansible INFO| TASK [flask_app : Ensure the 'universe' repository is enabled] **********************************************************************************************
2025-02-21 01:23:18,050 p=53814 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "repo": "deb http://archive.ubuntu.com/ubuntu/ jammy universe", "sources_added": [], "sources_removed": [], "state": "present"}
2025-02-21 01:23:18,063 p=53814 u=snrj n=ansible INFO| TASK [flask_app : Install python3-pip] **********************************************************************************************************************
2025-02-21 01:23:19,377 p=53814 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"cache_update_time": 1740097396, "cache_updated": false, "changed": false}
2025-02-21 01:23:19,397 p=53814 u=snrj n=ansible INFO| TASK [flask_app : Install required Python packages] *********************************************************************************************************
2025-02-21 01:23:21,234 p=53814 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "cmd": ["/usr/bin/python3.10", "-m", "pip.__main__", "install", "fastapi", "uvicorn", "azure-monitor-opentelemetry"], "name": ["fastapi", "uvicorn", "azure-monitor-opentelemetry"], "requirements": null, "state": "present", "stderr": "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n", "stderr_lines": ["WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv"], "stdout": "Requirement already satisfied: fastapi in /usr/local/lib/python3.10/dist-packages (0.115.8)\nRequirement already satisfied: uvicorn in /usr/local/lib/python3.10/dist-packages (0.34.0)\nRequirement already satisfied: azure-monitor-opentelemetry in /usr/local/lib/python3.10/dist-packages (1.6.5)\nRequirement already satisfied: starlette<0.46.0,>=0.40.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (0.45.3)\nRequirement already satisfied: typing-extensions>=4.8.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (4.12.2)\nRequirement already satisfied: pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4 in /usr/local/lib/python3.10/dist-packages (from fastapi) (2.10.6)\nRequirement already satisfied: h11>=0.8 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (0.14.0)\nRequirement already satisfied: click>=7.0 in /usr/lib/python3/dist-packages (from uvicorn) (8.0.3)\nRequirement already satisfied: azure-monitor-opentelemetry-exporter~=1.0.0b31 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b33)\nRequirement already satisfied: opentelemetry-instrumentation-django~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-psycopg2~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: azure-core<2.0.0,>=1.28.0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.32.0)\nRequirement already satisfied: azure-core-tracing-opentelemetry~=1.0.0b11 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b11)\nRequirement already satisfied: opentelemetry-instrumentation-requests~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-sdk~=1.28 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.30.0)\nRequirement already satisfied: opentelemetry-instrumentation-urllib3~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-fastapi~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-flask~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-urllib~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-resource-detector-azure~=0.1.4 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.1.5)\nRequirement already satisfied: six>=1.11.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.16.0)\nRequirement already satisfied: requests>=2.21.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (2.25.1)\nRequirement already satisfied: opentelemetry-api<2.0.0,>=1.12.0 in /usr/local/lib/python3.10/dist-packages (from azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (1.30.0)\nRequirement already satisfied: fixedint==0.1.6 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.1.6)\nRequirement already satisfied: msrest>=0.6.10 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.1)\nRequirement already satisfied: psutil~=5.9 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (5.9.8)\nRequirement already satisfied: opentelemetry-semantic-conventions==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-wsgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-util-http==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: wrapt<2.0.0,>=1.0.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.17.2)\nRequirement already satisfied: packaging>=18.0 in /usr/lib/python3/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (21.3)\nRequirement already satisfied: deprecated>=1.2.6 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-semantic-conventions==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.2.18)\nRequirement already satisfied: importlib-metadata<=8.5.0,>=6.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (8.5.0)\nRequirement already satisfied: opentelemetry-instrumentation-asgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: asgiref~=3.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-asgi==0.51b0->opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (3.8.1)\nRequirement already satisfied: opentelemetry-instrumentation-dbapi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-psycopg2~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: annotated-types>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (0.7.0)\nRequirement already satisfied: pydantic-core==2.27.2 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (2.27.2)\nRequirement already satisfied: anyio<5,>=3.6.2 in /usr/local/lib/python3.10/dist-packages (from starlette<0.46.0,>=0.40.0->fastapi) (4.8.0)\nRequirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.2.2)\nRequirement already satisfied: sniffio>=1.1 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.3.1)\nRequirement already satisfied: idna>=2.8 in /usr/lib/python3/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (3.3)\nRequirement already satisfied: isodate>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.2)\nRequirement already satisfied: certifi>=2017.4.17 in /usr/lib/python3/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2020.6.20)\nRequirement already satisfied: requests-oauthlib>=0.5.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2.0.0)\nRequirement already satisfied: zipp>=3.20 in /usr/local/lib/python3.10/dist-packages (from importlib-metadata<=8.5.0,>=6.0->opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (3.21.0)\nRequirement already satisfied: oauthlib>=3.0.0 in /usr/lib/python3/dist-packages (from requests-oauthlib>=0.5.0->msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (3.2.0)\n", "stdout_lines": ["Requirement already satisfied: fastapi in /usr/local/lib/python3.10/dist-packages (0.115.8)", "Requirement already satisfied: uvicorn in /usr/local/lib/python3.10/dist-packages (0.34.0)", "Requirement already satisfied: azure-monitor-opentelemetry in /usr/local/lib/python3.10/dist-packages (1.6.5)", "Requirement already satisfied: starlette<0.46.0,>=0.40.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (0.45.3)", "Requirement already satisfied: typing-extensions>=4.8.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (4.12.2)", "Requirement already satisfied: pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4 in /usr/local/lib/python3.10/dist-packages (from fastapi) (2.10.6)", "Requirement already satisfied: h11>=0.8 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (0.14.0)", "Requirement already satisfied: click>=7.0 in /usr/lib/python3/dist-packages (from uvicorn) (8.0.3)", "Requirement already satisfied: azure-monitor-opentelemetry-exporter~=1.0.0b31 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b33)", "Requirement already satisfied: opentelemetry-instrumentation-django~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-psycopg2~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: azure-core<2.0.0,>=1.28.0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.32.0)", "Requirement already satisfied: azure-core-tracing-opentelemetry~=1.0.0b11 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b11)", "Requirement already satisfied: opentelemetry-instrumentation-requests~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-sdk~=1.28 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.30.0)", "Requirement already satisfied: opentelemetry-instrumentation-urllib3~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-fastapi~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-flask~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-urllib~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-resource-detector-azure~=0.1.4 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.1.5)", "Requirement already satisfied: six>=1.11.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.16.0)", "Requirement already satisfied: requests>=2.21.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (2.25.1)", "Requirement already satisfied: opentelemetry-api<2.0.0,>=1.12.0 in /usr/local/lib/python3.10/dist-packages (from azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (1.30.0)", "Requirement already satisfied: fixedint==0.1.6 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.1.6)", "Requirement already satisfied: msrest>=0.6.10 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.1)", "Requirement already satisfied: psutil~=5.9 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (5.9.8)", "Requirement already satisfied: opentelemetry-semantic-conventions==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-wsgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-util-http==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: wrapt<2.0.0,>=1.0.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.17.2)", "Requirement already satisfied: packaging>=18.0 in /usr/lib/python3/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (21.3)", "Requirement already satisfied: deprecated>=1.2.6 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-semantic-conventions==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.2.18)", "Requirement already satisfied: importlib-metadata<=8.5.0,>=6.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (8.5.0)", "Requirement already satisfied: opentelemetry-instrumentation-asgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: asgiref~=3.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-asgi==0.51b0->opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (3.8.1)", "Requirement already satisfied: opentelemetry-instrumentation-dbapi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-psycopg2~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: annotated-types>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (0.7.0)", "Requirement already satisfied: pydantic-core==2.27.2 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (2.27.2)", "Requirement already satisfied: anyio<5,>=3.6.2 in /usr/local/lib/python3.10/dist-packages (from starlette<0.46.0,>=0.40.0->fastapi) (4.8.0)", "Requirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.2.2)", "Requirement already satisfied: sniffio>=1.1 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.3.1)", "Requirement already satisfied: idna>=2.8 in /usr/lib/python3/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (3.3)", "Requirement already satisfied: isodate>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.2)", "Requirement already satisfied: certifi>=2017.4.17 in /usr/lib/python3/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2020.6.20)", "Requirement already satisfied: requests-oauthlib>=0.5.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2.0.0)", "Requirement already satisfied: zipp>=3.20 in /usr/local/lib/python3.10/dist-packages (from importlib-metadata<=8.5.0,>=6.0->opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (3.21.0)", "Requirement already satisfied: oauthlib>=3.0.0 in /usr/lib/python3/dist-packages (from requests-oauthlib>=0.5.0->msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (3.2.0)"], "version": null, "virtualenv": null}
2025-02-21 01:23:21,248 p=53814 u=snrj n=ansible INFO| TASK [flask_app : Copy the sample FastAPI application] ******************************************************************************************************
2025-02-21 01:23:22,743 p=53814 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"changed": true, "checksum": "52c1427fbcabbc82a4f5ff659e1db0a5c67914a4", "dest": "/home/azureadmin/http_fastapi.py", "gid": 0, "group": "root", "md5sum": "681148a096483452d21b572b811b4ed8", "mode": "0644", "owner": "root", "size": 1710, "src": "/home/azureadmin/.ansible/tmp/ansible-tmp-1740097401.343372-53851-50364847129185/.source.py", "state": "file", "uid": 0}
2025-02-21 01:23:22,754 p=53814 u=snrj n=ansible INFO| TASK [flask_app : Start FastAPI application with uvicorn] ***************************************************************************************************
2025-02-21 01:23:24,337 p=53814 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"ansible_job_id": "j633009915233.10320", "changed": true, "finished": 0, "results_file": "/root/.ansible_async/j633009915233.10320", "started": 1}
2025-02-21 01:23:24,349 p=53814 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 01:23:24,349 p=53814 u=snrj n=ansible INFO| 40.68.93.141               : ok=7    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-21 01:39:12,581 p=55462 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 01:39:15,451 p=55462 u=snrj n=ansible ERROR| ERROR! conflicting action statements: hosts, tasks

The error appears to be in '/Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/locust/tasks/main.yml': line 2, column 3, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

---
- name: Install and configure Locust for traffic generation
  ^ here

2025-02-21 01:39:30,960 p=55496 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 01:39:31,905 p=55496 u=snrj n=ansible INFO| PLAY [Setup Locust Traffic Generator] ***********************************************************************************************************************
2025-02-21 01:39:31,992 p=55496 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 01:39:36,533 p=55496 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 40.68.93.141 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-21 01:39:36,534 p=55496 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 01:39:36,538 p=55496 u=snrj n=ansible INFO| TASK [locust : Install pip] *********************************************************************************************************************************
2025-02-21 01:39:38,624 p=55496 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 01:39:38,633 p=55496 u=snrj n=ansible INFO| TASK [locust : Install locust using pip] ********************************************************************************************************************
2025-02-21 01:39:56,167 p=55496 u=snrj n=ansible INFO| changed: [40.68.93.141]
2025-02-21 01:39:56,175 p=55496 u=snrj n=ansible INFO| TASK [locust : Create locustfile directory] *****************************************************************************************************************
2025-02-21 01:39:56,757 p=55496 u=snrj n=ansible INFO| changed: [40.68.93.141]
2025-02-21 01:39:56,777 p=55496 u=snrj n=ansible INFO| TASK [locust : Copy locust file for traffic generation] *****************************************************************************************************
2025-02-21 01:39:58,747 p=55496 u=snrj n=ansible INFO| changed: [40.68.93.141]
2025-02-21 01:39:58,762 p=55496 u=snrj n=ansible INFO| TASK [locust : Install required Python dependencies for locustfile] *****************************************************************************************
2025-02-21 01:40:01,970 p=55496 u=snrj n=ansible INFO| fatal: [40.68.93.141]: FAILED! => {"changed": false, "cmd": ["/usr/bin/pip3", "install", "-r", "/home/azureadmin/locustfiles/requirements.txt"], "msg": "\n:stderr: ERROR: Could not open requirements file: [Errno 2] No such file or directory: '/home/azureadmin/locustfiles/requirements.txt'\n"}
2025-02-21 01:40:01,971 p=55496 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 01:40:01,971 p=55496 u=snrj n=ansible INFO| 40.68.93.141               : ok=5    changed=3    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2025-02-21 01:41:42,280 p=55725 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 01:41:42,659 p=55725 u=snrj n=ansible INFO| PLAY [Setup Locust Traffic Generator] ***********************************************************************************************************************
2025-02-21 01:41:42,667 p=55725 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 01:41:45,359 p=55725 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 40.68.93.141 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-21 01:41:45,359 p=55725 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 01:41:45,364 p=55725 u=snrj n=ansible INFO| TASK [locust : Install pip] *********************************************************************************************************************************
2025-02-21 01:41:47,517 p=55725 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 01:41:47,525 p=55725 u=snrj n=ansible INFO| TASK [locust : Install locust using pip] ********************************************************************************************************************
2025-02-21 01:41:50,756 p=55725 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 01:41:50,764 p=55725 u=snrj n=ansible INFO| TASK [locust : Create locustfile directory] *****************************************************************************************************************
2025-02-21 01:41:51,337 p=55725 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 01:41:51,346 p=55725 u=snrj n=ansible INFO| TASK [locust : Copy locust files for traffic generation] ****************************************************************************************************
2025-02-21 01:41:54,899 p=55725 u=snrj n=ansible INFO| changed: [40.68.93.141]
2025-02-21 01:41:54,912 p=55725 u=snrj n=ansible INFO| TASK [locust : Install required Python dependencies for locustfile] *****************************************************************************************
2025-02-21 01:42:00,959 p=55725 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 01:42:00,981 p=55725 u=snrj n=ansible INFO| TASK [locust : Run locust] **********************************************************************************************************************************
2025-02-21 01:42:03,240 p=55725 u=snrj n=ansible INFO| changed: [40.68.93.141]
2025-02-21 01:42:03,250 p=55725 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 01:42:03,250 p=55725 u=snrj n=ansible INFO| 40.68.93.141               : ok=7    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-21 01:42:46,639 p=55860 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 01:42:47,050 p=55860 u=snrj n=ansible INFO| PLAY [Setup Locust Traffic Generator] ***********************************************************************************************************************
2025-02-21 01:42:47,058 p=55860 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 01:42:49,762 p=55860 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 40.68.93.141 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-21 01:42:49,762 p=55860 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 01:42:49,767 p=55860 u=snrj n=ansible INFO| TASK [locust : Install pip] *********************************************************************************************************************************
2025-02-21 01:42:52,266 p=55860 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 01:42:52,275 p=55860 u=snrj n=ansible INFO| TASK [locust : Install locust using pip] ********************************************************************************************************************
2025-02-21 01:42:55,831 p=55860 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 01:42:55,837 p=55860 u=snrj n=ansible INFO| TASK [locust : Create locustfile directory] *****************************************************************************************************************
2025-02-21 01:42:56,680 p=55860 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 01:42:56,691 p=55860 u=snrj n=ansible INFO| TASK [locust : Copy locust files for traffic generation] ****************************************************************************************************
2025-02-21 01:42:59,721 p=55860 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 01:42:59,734 p=55860 u=snrj n=ansible INFO| TASK [locust : Install required Python dependencies for locustfile] *****************************************************************************************
2025-02-21 01:43:06,090 p=55860 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 01:43:06,100 p=55860 u=snrj n=ansible INFO| TASK [locust : Run locust] **********************************************************************************************************************************
2025-02-21 01:43:08,191 p=55860 u=snrj n=ansible INFO| changed: [40.68.93.141]
2025-02-21 01:43:08,200 p=55860 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 01:43:08,200 p=55860 u=snrj n=ansible INFO| 40.68.93.141               : ok=7    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-21 02:16:37,977 p=59423 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 02:16:41,299 p=59423 u=snrj n=ansible INFO| PLAY [Setup Flask App with OpenTelemetry] *******************************************************************************************************************
2025-02-21 02:16:41,368 p=59423 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 02:16:44,843 p=59423 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 40.68.93.141 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-21 02:16:44,843 p=59423 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:16:44,849 p=59423 u=snrj n=ansible INFO| TASK [flask_app : Update apt package index] *****************************************************************************************************************
2025-02-21 02:16:49,583 p=59423 u=snrj n=ansible INFO| changed: [40.68.93.141]
2025-02-21 02:16:49,592 p=59423 u=snrj n=ansible INFO| TASK [flask_app : Ensure the 'universe' repository is enabled] **********************************************************************************************
2025-02-21 02:16:50,604 p=59423 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:16:50,617 p=59423 u=snrj n=ansible INFO| TASK [flask_app : Install python3-pip] **********************************************************************************************************************
2025-02-21 02:16:52,978 p=59423 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:16:52,999 p=59423 u=snrj n=ansible INFO| TASK [flask_app : Install required Python packages] *********************************************************************************************************
2025-02-21 02:16:56,722 p=59423 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:16:56,740 p=59423 u=snrj n=ansible INFO| TASK [flask_app : Run terraform to get the application insights connection string] **************************************************************************
2025-02-21 02:16:56,935 p=59423 u=snrj n=ansible INFO| fatal: [40.68.93.141 -> localhost]: FAILED! => {"changed": false, "module_stderr": "sudo: a password is required\n", "module_stdout": "", "msg": "MODULE FAILURE: No start of json char found\nSee stdout/stderr for the exact error", "rc": 1}
2025-02-21 02:16:56,936 p=59423 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 02:16:56,936 p=59423 u=snrj n=ansible INFO| 40.68.93.141               : ok=5    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2025-02-21 02:18:11,491 p=59698 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 02:18:11,883 p=59698 u=snrj n=ansible INFO| PLAY [Setup Flask App with OpenTelemetry] *******************************************************************************************************************
2025-02-21 02:18:11,890 p=59698 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 02:18:15,469 p=59698 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 40.68.93.141 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-21 02:18:15,470 p=59698 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:18:15,475 p=59698 u=snrj n=ansible INFO| TASK [flask_app : Update apt package index] *****************************************************************************************************************
2025-02-21 02:18:19,856 p=59698 u=snrj n=ansible INFO| changed: [40.68.93.141]
2025-02-21 02:18:19,864 p=59698 u=snrj n=ansible INFO| TASK [flask_app : Ensure the 'universe' repository is enabled] **********************************************************************************************
2025-02-21 02:18:20,785 p=59698 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:18:20,795 p=59698 u=snrj n=ansible INFO| TASK [flask_app : Install python3-pip] **********************************************************************************************************************
2025-02-21 02:18:23,124 p=59698 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:18:23,137 p=59698 u=snrj n=ansible INFO| TASK [flask_app : Install required Python packages] *********************************************************************************************************
2025-02-21 02:18:26,558 p=59698 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:18:26,568 p=59698 u=snrj n=ansible INFO| TASK [flask_app : Run terraform to get the application insights connection string] **************************************************************************
2025-02-21 02:18:26,670 p=59698 u=snrj n=ansible INFO| fatal: [40.68.93.141 -> localhost]: FAILED! => {"changed": false, "module_stderr": "sudo: a password is required\n", "module_stdout": "", "msg": "MODULE FAILURE: No start of json char found\nSee stdout/stderr for the exact error", "rc": 1}
2025-02-21 02:18:26,671 p=59698 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 02:18:26,671 p=59698 u=snrj n=ansible INFO| 40.68.93.141               : ok=5    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2025-02-21 02:18:37,000 p=59755 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 02:18:37,143 p=59755 u=snrj n=ansible INFO| ansible-playbook [core 2.18.2]
  config file = /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg
  configured module search path = ['/Users/snrj/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /opt/homebrew/Cellar/ansible/11.2.0/libexec/lib/python3.13/site-packages/ansible
  ansible collection location = /Users/snrj/Desktop/terraform-azure-demo/configure_vm/collections
  executable location = /opt/homebrew/bin/ansible-playbook
  python version = 3.13.2 (main, Feb  4 2025, 14:51:09) [Clang 16.0.0 (clang-1600.0.26.6)] (/opt/homebrew/Cellar/ansible/11.2.0/libexec/bin/python)
  jinja version = 3.1.5
  libyaml = True
2025-02-21 02:18:37,143 p=59755 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-21 02:18:37,203 p=59755 u=snrj n=ansible INFO| host_list declined parsing /Users/snrj/Desktop/terraform-azure-demo/configure_vm/inventory/hosts.ini as it did not pass its verify_file() method
2025-02-21 02:18:37,207 p=59755 u=snrj n=ansible INFO| auto declined parsing /Users/snrj/Desktop/terraform-azure-demo/configure_vm/inventory/hosts.ini as it did not pass its verify_file() method
2025-02-21 02:18:37,207 p=59755 u=snrj n=ansible INFO| yaml declined parsing /Users/snrj/Desktop/terraform-azure-demo/configure_vm/inventory/hosts.ini as it did not pass its verify_file() method
2025-02-21 02:18:37,208 p=59755 u=snrj n=ansible INFO| Parsed /Users/snrj/Desktop/terraform-azure-demo/configure_vm/inventory/hosts.ini inventory source with ini plugin
2025-02-21 02:18:37,356 p=59755 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/vars.yml'
2025-02-21 02:18:37,418 p=59755 u=snrj n=ansible INFO| Skipping callback 'default', as we already have a stdout callback.
2025-02-21 02:18:37,418 p=59755 u=snrj n=ansible INFO| Skipping callback 'minimal', as we already have a stdout callback.
2025-02-21 02:18:37,418 p=59755 u=snrj n=ansible INFO| Skipping callback 'oneline', as we already have a stdout callback.
2025-02-21 02:18:37,418 p=59755 u=snrj n=ansible INFO| PLAYBOOK: flask_app.yml *************************************************************************************************************************************
2025-02-21 02:18:37,418 p=59755 u=snrj n=ansible INFO| 1 plays in playbooks/flask_app.yml
2025-02-21 02:18:37,418 p=59755 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/vars.yml'
2025-02-21 02:18:37,419 p=59755 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/vars.yml'
2025-02-21 02:18:37,419 p=59755 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/vars.yml'
2025-02-21 02:18:37,419 p=59755 u=snrj n=ansible INFO| PLAY [Setup Flask App with OpenTelemetry] *******************************************************************************************************************
2025-02-21 02:18:37,427 p=59755 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/vars.yml'
2025-02-21 02:18:37,428 p=59755 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 02:18:37,428 p=59755 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/playbooks/flask_app.yml:2
2025-02-21 02:18:37,570 p=59755 u=snrj n=ansible INFO| <40.68.93.141> Attempting python interpreter discovery
2025-02-21 02:18:37,570 p=59755 u=snrj n=ansible INFO| <40.68.93.141> ESTABLISH SSH CONNECTION FOR USER: azureadmin
2025-02-21 02:18:37,570 p=59755 u=snrj n=ansible INFO| <40.68.93.141> SSH: EXEC ssh -vvv -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o 'IdentityFile="/Users/snrj/.ssh/id_rsa"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User="azureadmin"' -o ConnectTimeout=30 -o StrictHostKeyChecking=no -o 'ControlPath="/Users/snrj/.ansible/cp/1da56dae57"' 40.68.93.141 '/bin/sh -c '"'"'echo PLATFORM; uname; echo FOUND; command -v '"'"'"'"'"'"'"'"'python3.13'"'"'"'"'"'"'"'"'; command -v '"'"'"'"'"'"'"'"'python3.12'"'"'"'"'"'"'"'"'; command -v '"'"'"'"'"'"'"'"'python3.11'"'"'"'"'"'"'"'"'; command -v '"'"'"'"'"'"'"'"'python3.10'"'"'"'"'"'"'"'"'; command -v '"'"'"'"'"'"'"'"'python3.9'"'"'"'"'"'"'"'"'; command -v '"'"'"'"'"'"'"'"'python3.8'"'"'"'"'"'"'"'"'; command -v '"'"'"'"'"'"'"'"'/usr/bin/python3'"'"'"'"'"'"'"'"'; command -v '"'"'"'"'"'"'"'"'python3'"'"'"'"'"'"'"'"'; echo ENDFOUND && sleep 0'"'"''
2025-02-21 02:18:37,646 p=59755 u=snrj n=ansible INFO| <40.68.93.141> (0, b'PLATFORM\nLinux\nFOUND\n/usr/bin/python3.10\n/usr/bin/python3\n/usr/bin/python3\nENDFOUND\n', b"OpenSSH_9.8p1, LibreSSL 3.3.6\r\ndebug1: Reading configuration data /etc/ssh/ssh_config\r\ndebug1: /etc/ssh/ssh_config line 21: include /etc/ssh/ssh_config.d/* matched no files\r\ndebug1: /etc/ssh/ssh_config line 54: Applying options for *\r\ndebug2: resolve_canonicalize: hostname 40.68.93.141 is address\r\ndebug3: expanded UserKnownHostsFile '~/.ssh/known_hosts' -> '/Users/snrj/.ssh/known_hosts'\r\ndebug3: expanded UserKnownHostsFile '~/.ssh/known_hosts2' -> '/Users/snrj/.ssh/known_hosts2'\r\ndebug1: Authenticator provider $SSH_SK_PROVIDER did not resolve; disabling\r\ndebug1: auto-mux: Trying existing master at '/Users/snrj/.ansible/cp/1da56dae57'\r\ndebug2: fd 3 setting O_NONBLOCK\r\ndebug2: mux_client_hello_exchange: master version 4\r\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\r\ndebug3: mux_client_request_session: entering\r\ndebug3: mux_client_request_alive: entering\r\ndebug3: mux_client_request_alive: done pid = 59707\r\ndebug3: mux_client_request_session: session request sent\r\ndebug1: mux_client_request_session: master session id: 2\r\ndebug3: mux_client_read_packet_timeout: read header failed: Broken pipe\r\ndebug2: Received exit status from master 0\r\n")
2025-02-21 02:18:37,647 p=59755 u=snrj n=ansible INFO| <40.68.93.141> ESTABLISH SSH CONNECTION FOR USER: azureadmin
2025-02-21 02:18:37,648 p=59755 u=snrj n=ansible INFO| <40.68.93.141> SSH: EXEC ssh -vvv -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o 'IdentityFile="/Users/snrj/.ssh/id_rsa"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User="azureadmin"' -o ConnectTimeout=30 -o StrictHostKeyChecking=no -o 'ControlPath="/Users/snrj/.ansible/cp/1da56dae57"' 40.68.93.141 '/bin/sh -c '"'"'/usr/bin/python3.10 && sleep 0'"'"''
2025-02-21 02:18:37,796 p=59755 u=snrj n=ansible INFO| <40.68.93.141> (0, b'{"platform_dist_result": [], "osrelease_content": "PRETTY_NAME=\\"Ubuntu 22.04.5 LTS\\"\\nNAME=\\"Ubuntu\\"\\nVERSION_ID=\\"22.04\\"\\nVERSION=\\"22.04.5 LTS (Jammy Jellyfish)\\"\\nVERSION_CODENAME=jammy\\nID=ubuntu\\nID_LIKE=debian\\nHOME_URL=\\"https://www.ubuntu.com/\\"\\nSUPPORT_URL=\\"https://help.ubuntu.com/\\"\\nBUG_REPORT_URL=\\"https://bugs.launchpad.net/ubuntu/\\"\\nPRIVACY_POLICY_URL=\\"https://www.ubuntu.com/legal/terms-and-policies/privacy-policy\\"\\nUBUNTU_CODENAME=jammy\\n"}\n', b"OpenSSH_9.8p1, LibreSSL 3.3.6\r\ndebug1: Reading configuration data /etc/ssh/ssh_config\r\ndebug1: /etc/ssh/ssh_config line 21: include /etc/ssh/ssh_config.d/* matched no files\r\ndebug1: /etc/ssh/ssh_config line 54: Applying options for *\r\ndebug2: resolve_canonicalize: hostname 40.68.93.141 is address\r\ndebug3: expanded UserKnownHostsFile '~/.ssh/known_hosts' -> '/Users/snrj/.ssh/known_hosts'\r\ndebug3: expanded UserKnownHostsFile '~/.ssh/known_hosts2' -> '/Users/snrj/.ssh/known_hosts2'\r\ndebug1: Authenticator provider $SSH_SK_PROVIDER did not resolve; disabling\r\ndebug1: auto-mux: Trying existing master at '/Users/snrj/.ansible/cp/1da56dae57'\r\ndebug2: fd 3 setting O_NONBLOCK\r\ndebug2: mux_client_hello_exchange: master version 4\r\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\r\ndebug3: mux_client_request_session: entering\r\ndebug3: mux_client_request_alive: entering\r\ndebug3: mux_client_request_alive: done pid = 59707\r\ndebug3: mux_client_request_session: session request sent\r\ndebug1: mux_client_request_session: master session id: 2\r\ndebug3: mux_client_read_packet_timeout: read header failed: Broken pipe\r\ndebug2: Received exit status from master 0\r\n")
2025-02-21 02:18:37,797 p=59755 u=snrj n=ansible INFO| <40.68.93.141> Python interpreter discovery fallback (unsupported Linux distribution: ubuntu)
2025-02-21 02:18:37,829 p=59755 u=snrj n=ansible INFO| Using module file /opt/homebrew/Cellar/ansible/11.2.0/libexec/lib/python3.13/site-packages/ansible/modules/setup.py
2025-02-21 02:18:37,830 p=59755 u=snrj n=ansible INFO| Pipelining is enabled.
2025-02-21 02:18:37,830 p=59755 u=snrj n=ansible INFO| <40.68.93.141> ESTABLISH SSH CONNECTION FOR USER: azureadmin
2025-02-21 02:18:37,831 p=59755 u=snrj n=ansible INFO| <40.68.93.141> SSH: EXEC ssh -vvv -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o 'IdentityFile="/Users/snrj/.ssh/id_rsa"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User="azureadmin"' -o ConnectTimeout=30 -o StrictHostKeyChecking=no -o 'ControlPath="/Users/snrj/.ansible/cp/1da56dae57"' 40.68.93.141 '/bin/sh -c '"'"'sudo -H -S -n  -u root /bin/sh -c '"'"'"'"'"'"'"'"'echo BECOME-SUCCESS-pwwzhlfscsjxmimyyzfnsbvjqnamjvqg ; /usr/bin/python3.10'"'"'"'"'"'"'"'"' && sleep 0'"'"''
2025-02-21 02:18:37,926 p=59755 u=snrj n=ansible INFO| Escalation succeeded
2025-02-21 02:18:39,480 p=59755 u=snrj n=ansible INFO| <40.68.93.141> (0, b'\n{"ansible_facts": {"ansible_dns": {"nameservers": ["127.0.0.53"], "options": {"edns0": true, "trust-ad": true}, "search": ["vk4c3odc1pkejafju2hla4lgha.ax.internal.cloudapp.net"]}, "ansible_virtualization_role": "guest", "ansible_virtualization_type": "VirtualPC", "ansible_virtualization_tech_guest": ["VirtualPC"], "ansible_virtualization_tech_host": [], "ansible_system": "Linux", "ansible_kernel": "6.8.0-1021-azure", "ansible_kernel_version": "#25~22.04.1-Ubuntu SMP Thu Jan 16 21:37:09 UTC 2025", "ansible_machine": "x86_64", "ansible_python_version": "3.10.12", "ansible_fqdn": "otel-collector.internal.cloudapp.net", "ansible_hostname": "otel-collector", "ansible_nodename": "otel-collector", "ansible_domain": "internal.cloudapp.net", "ansible_userspace_bits": "64", "ansible_architecture": "x86_64", "ansible_userspace_architecture": "x86_64", "ansible_machine_id": "7c9d2540e46c4b8fbce30446aa58519b", "ansible_python": {"version": {"major": 3, "minor": 10, "micro": 12, "releaselevel": "final", "serial": 0}, "version_info": [3, 10, 12, "final", 0], "executable": "/usr/bin/python3.10", "has_sslcontext": true, "type": "cpython"}, "ansible_ssh_host_key_rsa_public": "AAAAB3NzaC1yc2EAAAADAQABAAABgQDC5AEeLU+XN1nuLjs7GsfGj5rNaU/OzDaON0nLx7YYMKHxXxPHC0mLfiTcR0KQ96Lh1Ya+WhZKn9JKZhv5duu8ljPaSmmDTlCQnG5ulFkIKN5qOGEdIpcWxLO0lZP8TswerWFhtyejNjOaqiriRP/BpiLhpcMMpWthfE5SRpKSSTTB3g1hGcQ3me9a4Yus+e/Cj5qa+FBpJWn/XtNGlQbFjLR8XFAgd7Ju/dTCEU21LQgAv2vbCsCOa/N2pjEBte9u6r9BMkm6TVSZS1RpThS27SDRD1J64+MhYoHhIPp4zoUM5/CY9XMXZUBtNMZUvNkMQLdCC/i2pPI2tFogdUOG7tY1/6Xqn0SG9a+N49yeHucykolRvdQNxeCSSb8vJZt3rTtjIvKntIibvSeXPuAxtS9q8RSWFywDJOuNWaNyfykowDdtIDF2RI8JGmo3pD/cvE+4VA1uUPncOF+2ah397ongM2waP36kUWJ6E4DoyEoyriGVRsEcsMpYgfoGXTk=", "ansible_ssh_host_key_rsa_public_keytype": "ssh-rsa", "ansible_ssh_host_key_ecdsa_public": "AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBMPcw5woizS3Z4lcqPiGjQXyNGK8aNwgiVNFB1kpSN1FCALHv3Om5528HH2owtPauzmIQsaZuo4ZMnjbQBHxU90=", "ansible_ssh_host_key_ecdsa_public_keytype": "ecdsa-sha2-nistp256", "ansible_ssh_host_key_ed25519_public": "AAAAC3NzaC1lZDI1NTE5AAAAIGaiYFEIbgPyFndFPQ2PkxXzr1DzlUI9zes1lqCmO9xG", "ansible_ssh_host_key_ed25519_public_keytype": "ssh-ed25519", "ansible_cmdline": {"BOOT_IMAGE": "/boot/vmlinuz-6.8.0-1021-azure", "root": "PARTUUID=0c7009ca-205b-4723-96bf-fb427a929a45", "ro": true, "console": "ttyS0", "earlyprintk": "ttyS0", "nvme_core.io_timeout": "240", "panic": "-1"}, "ansible_proc_cmdline": {"BOOT_IMAGE": "/boot/vmlinuz-6.8.0-1021-azure", "root": "PARTUUID=0c7009ca-205b-4723-96bf-fb427a929a45", "ro": true, "console": ["tty1", "ttyS0"], "earlyprintk": "ttyS0", "nvme_core.io_timeout": "240", "panic": "-1"}, "ansible_systemd": {"features": "+PAM +AUDIT +SELINUX +APPARMOR +IMA +SMACK +SECCOMP +GCRYPT +GNUTLS +OPENSSL +ACL +BLKID +CURL +ELFUTILS +FIDO2 +IDN2 -IDN +IPTC +KMOD +LIBCRYPTSETUP +LIBFDISK +PCRE2 -PWQUALITY -P11KIT -QRENCODE +BZIP2 +LZ4 +XZ +ZLIB +ZSTD -XKBCOMMON +UTMP +SYSVINIT default-hierarchy=unified", "version": 249}, "ansible_user_id": "root", "ansible_user_uid": 0, "ansible_user_gid": 0, "ansible_user_gecos": "root", "ansible_user_dir": "/root", "ansible_user_shell": "/bin/bash", "ansible_real_user_id": 0, "ansible_effective_user_id": 0, "ansible_real_group_id": 0, "ansible_effective_group_id": 0, "ansible_distribution": "Ubuntu", "ansible_distribution_release": "jammy", "ansible_distribution_version": "22.04", "ansible_distribution_major_version": "22", "ansible_distribution_file_path": "/etc/os-release", "ansible_distribution_file_variety": "Debian", "ansible_distribution_file_parsed": true, "ansible_os_family": "Debian", "ansible_system_capabilities_enforced": "False", "ansible_system_capabilities": [], "ansible_is_chroot": false, "ansible_local": {}, "ansible_fibre_channel_wwn": [], "ansible_fips": false, "ansible_selinux_python_present": true, "ansible_selinux": {"status": "disabled"}, "ansible_date_time": {"year": "2025", "month": "02", "weekday": "Friday", "weekday_number": "5", "weeknumber": "07", "day": "21", "hour": "01", "minute": "18", "second": "38", "epoch": "1740100718", "epoch_int": "1740100718", "date": "2025-02-21", "time": "01:18:38", "iso8601_micro": "2025-02-21T01:18:38.783017Z", "iso8601": "2025-02-21T01:18:38Z", "iso8601_basic": "20250221T011838783017", "iso8601_basic_short": "20250221T011838", "tz": "UTC", "tz_dst": "UTC", "tz_offset": "+0000"}, "ansible_apparmor": {"status": "enabled"}, "ansible_lsb": {"id": "Ubuntu", "description": "Ubuntu 22.04.5 LTS", "release": "22.04", "codename": "jammy", "major_release": "22"}, "ansible_loadavg": {"1m": 1.10546875, "5m": 1.033203125, "15m": 0.99560546875}, "ansible_iscsi_iqn": "", "ansible_hostnqn": "nqn.2014-08.org.nvmexpress:uuid:963c90c2-4099-4a3a-8e0a-9a02618794a6", "ansible_env": {"SUDO_GID": "1000", "MAIL": "/var/mail/root", "USER": "root", "HOME": "/root", "LC_CTYPE": "C.UTF-8", "SUDO_UID": "1000", "LOGNAME": "root", "TERM": "unknown", "PATH": "/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin", "LANG": "C.UTF-8", "SUDO_COMMAND": "/bin/sh -c echo BECOME-SUCCESS-pwwzhlfscsjxmimyyzfnsbvjqnamjvqg ; /usr/bin/python3.10", "SHELL": "/bin/bash", "SUDO_USER": "azureadmin", "PWD": "/home/azureadmin"}, "ansible_processor": ["0", "GenuineIntel", "Intel(R) Xeon(R) Platinum 8171M CPU @ 2.60GHz"], "ansible_flags": ["fpu", "vme", "de", "pse", "tsc", "msr", "pae", "mce", "cx8", "apic", "sep", "mtrr", "pge", "mca", "cmov", "pat", "pse36", "clflush", "mmx", "fxsr", "sse", "sse2", "ss", "syscall", "nx", "pdpe1gb", "rdtscp", "lm", "constant_tsc", "rep_good", "nopl", "xtopology", "cpuid", "pni", "pclmulqdq", "ssse3", "fma", "cx16", "pcid", "sse4_1", "sse4_2", "movbe", "popcnt", "aes", "xsave", "avx", "f16c", "rdrand", "hypervisor", "lahf_lm", "abm", "3dnowprefetch", "pti", "fsgsbase", "bmi1", "hle", "avx2", "smep", "bmi2", "erms", "invpcid", "rtm", "avx512f", "avx512dq", "rdseed", "adx", "smap", "clflushopt", "avx512cd", "avx512bw", "avx512vl", "xsaveopt", "xsavec", "xsaves", "md_clear"], "ansible_processor_count": 1, "ansible_processor_cores": 1, "ansible_processor_threads_per_core": 1, "ansible_processor_vcpus": 1, "ansible_processor_nproc": 1, "ansible_memtotal_mb": 3408, "ansible_memfree_mb": 255, "ansible_swaptotal_mb": 0, "ansible_swapfree_mb": 0, "ansible_memory_mb": {"real": {"total": 3408, "used": 3153, "free": 255}, "nocache": {"free": 2624, "used": 784}, "swap": {"total": 0, "free": 0, "used": 0, "cached": 0}}, "ansible_bios_date": "03/08/2024", "ansible_bios_vendor": "Microsoft Corporation", "ansible_bios_version": "Hyper-V UEFI Release v4.1", "ansible_board_asset_tag": "None", "ansible_board_name": "Virtual Machine", "ansible_board_serial": "0000-0012-4010-4225-9822-0877-53", "ansible_board_vendor": "Microsoft Corporation", "ansible_board_version": "Hyper-V UEFI Release v4.1", "ansible_chassis_asset_tag": "7783-7084-3265-9085-8269-3286-77", "ansible_chassis_serial": "2640-4444-9798-0224-1281-7765-05", "ansible_chassis_vendor": "Microsoft Corporation", "ansible_chassis_version": "Hyper-V UEFI Release v4.1", "ansible_form_factor": "Desktop", "ansible_product_name": "Virtual Machine", "ansible_product_serial": "0000-0007-9933-6904-1670-2593-55", "ansible_product_uuid": "6eee26ca-ef5c-429b-ac19-5a3b554d8e49", "ansible_product_version": "Hyper-V UEFI Release v4.1", "ansible_system_vendor": "Microsoft Corporation", "ansible_devices": {"loop1": {"virtual": 1, "links": {"ids": [], "uuids": [], "labels": [], "masters": []}, "vendor": null, "model": null, "sas_address": null, "sas_device_handle": null, "removable": "0", "support_discard": "4096", "partitions": {}, "rotational": "1", "scheduler_mode": "none", "sectorsize": "512", "sectors": 183096, "size": "89.40 MB", "host": "", "holders": []}, "sdb": {"virtual": 1, "links": {"ids": ["scsi-14d534654202020205c1e8b20c977084a8d1522c90366bdce", "scsi-3600224805c1e8b20c97722c90366bdce", "wwn-0x600224805c1e8b20c97722c90366bdce"], "uuids": [], "labels": [], "masters": []}, "vendor": "Msft", "model": "Virtual Disk", "sas_address": null, "sas_device_handle": null, "removable": "0", "support_discard": "2097152", "wwn": "0x600224805c1e8b20c97722c90366bdce", "partitions": {"sdb1": {"links": {"ids": ["scsi-14d534654202020205c1e8b20c977084a8d1522c90366bdce-part1", "scsi-3600224805c1e8b20c97722c90366bdce-part1", "wwn-0x600224805c1e8b20c97722c90366bdce-part1"], "uuids": ["5fbb754a-dd42-4ad8-8bdb-41feb2a25b98"], "labels": [], "masters": []}, "start": "2048", "sectorsize": 512, "sectors": 14675968, "size": "7.00 GB", "uuid": "5fbb754a-dd42-4ad8-8bdb-41feb2a25b98", "holders": []}}, "rotational": "1", "scheduler_mode": "mq-deadline", "sectorsize": "512", "sectors": 14680064, "size": "7.00 GB", "host": "", "holders": []}, "loop6": {"virtual": 1, "links": {"ids": [], "uuids": [], "labels": [], "masters": []}, "vendor": null, "model": null, "sas_address": null, "sas_device_handle": null, "removable": "0", "support_discard": "0", "partitions": {}, "rotational": "1", "scheduler_mode": "none", "sectorsize": "512", "sectors": 0, "size": "0.00 Bytes", "host": "", "holders": []}, "loop4": {"virtual": 1, "links": {"ids": [], "uuids": [], "labels": [], "masters": []}, "vendor": null, "model": null, "sas_address": null, "sas_device_handle": null, "removable": "0", "support_discard": "0", "partitions": {}, "rotational": "1", "scheduler_mode": "none", "sectorsize": "512", "sectors": 0, "size": "0.00 Bytes", "host": "", "holders": []}, "sr0": {"virtual": 1, "links": {"ids": ["scsi-14d534654202020207305e3437703544694957d7ced624a7d"], "uuids": [], "labels": [], "masters": []}, "vendor": "Msft", "model": "Virtual DVD-ROM", "sas_address": null, "sas_device_handle": null, "removable": "1", "support_discard": "0", "partitions": {}, "rotational": "1", "scheduler_mode": "mq-deadline", "sectorsize": "2048", "sectors": 314, "size": "628.00 KB", "host": "", "holders": []}, "loop2": {"virtual": 1, "links": {"ids": [], "uuids": [], "labels": [], "masters": []}, "vendor": null, "model": null, "sas_address": null, "sas_device_handle": null, "removable": "0", "support_discard": "4096", "partitions": {}, "rotational": "1", "scheduler_mode": "none", "sectorsize": "512", "sectors": 91008, "size": "44.44 MB", "host": "", "holders": []}, "loop0": {"virtual": 1, "links": {"ids": [], "uuids": [], "labels": [], "masters": []}, "vendor": null, "model": null, "sas_address": null, "sas_device_handle": null, "removable": "0", "support_discard": "4096", "partitions": {}, "rotational": "1", "scheduler_mode": "none", "sectorsize": "512", "sectors": 130448, "size": "63.70 MB", "host": "", "holders": []}, "loop7": {"virtual": 1, "links": {"ids": [], "uuids": [], "labels": [], "masters": []}, "vendor": null, "model": null, "sas_address": null, "sas_device_handle": null, "removable": "0", "support_discard": "0", "partitions": {}, "rotational": "1", "scheduler_mode": "none", "sectorsize": "512", "sectors": 0, "size": "0.00 Bytes", "host": "", "holders": []}, "sda": {"virtual": 1, "links": {"ids": ["scsi-14d534654202020209c519212543a8f4783142ca3cf480d32", "scsi-3600224809c519212543a2ca3cf480d32", "wwn-0x600224809c519212543a2ca3cf480d32"], "uuids": [], "labels": [], "masters": []}, "vendor": "Msft", "model": "Virtual Disk", "sas_address": null, "sas_device_handle": null, "removable": "0", "support_discard": "2097152", "wwn": "0x600224809c519212543a2ca3cf480d32", "partitions": {"sda14": {"links": {"ids": ["scsi-14d534654202020209c519212543a8f4783142ca3cf480d32-part14", "scsi-3600224809c519212543a2ca3cf480d32-part14", "wwn-0x600224809c519212543a2ca3cf480d32-part14"], "uuids": [], "labels": [], "masters": []}, "start": "2048", "sectorsize": 512, "sectors": 8192, "size": "4.00 MB", "uuid": null, "holders": []}, "sda15": {"links": {"ids": ["scsi-14d534654202020209c519212543a8f4783142ca3cf480d32-part15", "scsi-3600224809c519212543a2ca3cf480d32-part15", "wwn-0x600224809c519212543a2ca3cf480d32-part15"], "uuids": ["E8AE-90AB"], "labels": ["UEFI"], "masters": []}, "start": "10240", "sectorsize": 512, "sectors": 217088, "size": "106.00 MB", "uuid": "E8AE-90AB", "holders": []}, "sda1": {"links": {"ids": ["scsi-14d534654202020209c519212543a8f4783142ca3cf480d32-part1", "scsi-3600224809c519212543a2ca3cf480d32-part1", "wwn-0x600224809c519212543a2ca3cf480d32-part1"], "uuids": ["721ea9a7-9d5f-4501-82e8-5ba059b492e5"], "labels": ["cloudimg-rootfs"], "masters": []}, "start": "227328", "sectorsize": 512, "sectors": 62689247, "size": "29.89 GB", "uuid": "721ea9a7-9d5f-4501-82e8-5ba059b492e5", "holders": []}}, "rotational": "1", "scheduler_mode": "mq-deadline", "sectorsize": "512", "sectors": 62916608, "size": "30.00 GB", "host": "", "holders": []}, "loop5": {"virtual": 1, "links": {"ids": [], "uuids": [], "labels": [], "masters": []}, "vendor": null, "model": null, "sas_address": null, "sas_device_handle": null, "removable": "0", "support_discard": "0", "partitions": {}, "rotational": "1", "scheduler_mode": "none", "sectorsize": "512", "sectors": 0, "size": "0.00 Bytes", "host": "", "holders": []}, "loop3": {"virtual": 1, "links": {"ids": [], "uuids": [], "labels": [], "masters": []}, "vendor": null, "model": null, "sas_address": null, "sas_device_handle": null, "removable": "0", "support_discard": "4096", "partitions": {}, "rotational": "1", "scheduler_mode": "none", "sectorsize": "512", "sectors": 0, "size": "0.00 Bytes", "host": "", "holders": []}}, "ansible_device_links": {"ids": {"sr0": ["scsi-14d534654202020207305e3437703544694957d7ced624a7d"], "sda": ["scsi-14d534654202020209c519212543a8f4783142ca3cf480d32", "scsi-3600224809c519212543a2ca3cf480d32", "wwn-0x600224809c519212543a2ca3cf480d32"], "sdb": ["scsi-14d534654202020205c1e8b20c977084a8d1522c90366bdce", "scsi-3600224805c1e8b20c97722c90366bdce", "wwn-0x600224805c1e8b20c97722c90366bdce"], "sda14": ["scsi-14d534654202020209c519212543a8f4783142ca3cf480d32-part14", "scsi-3600224809c519212543a2ca3cf480d32-part14", "wwn-0x600224809c519212543a2ca3cf480d32-part14"], "sda15": ["scsi-14d534654202020209c519212543a8f4783142ca3cf480d32-part15", "scsi-3600224809c519212543a2ca3cf480d32-part15", "wwn-0x600224809c519212543a2ca3cf480d32-part15"], "sda1": ["scsi-14d534654202020209c519212543a8f4783142ca3cf480d32-part1", "scsi-3600224809c519212543a2ca3cf480d32-part1", "wwn-0x600224809c519212543a2ca3cf480d32-part1"], "sdb1": ["scsi-14d534654202020205c1e8b20c977084a8d1522c90366bdce-part1", "scsi-3600224805c1e8b20c97722c90366bdce-part1", "wwn-0x600224805c1e8b20c97722c90366bdce-part1"]}, "uuids": {"sda1": ["721ea9a7-9d5f-4501-82e8-5ba059b492e5"], "sda15": ["E8AE-90AB"], "sdb1": ["5fbb754a-dd42-4ad8-8bdb-41feb2a25b98"]}, "labels": {"sda15": ["UEFI"], "sda1": ["cloudimg-rootfs"]}, "masters": {}}, "ansible_uptime_seconds": 10616, "ansible_lvm": {"lvs": {}, "vgs": {}, "pvs": {}}, "ansible_mounts": [{"mount": "/", "device": "/dev/root", "fstype": "ext4", "options": "rw,relatime,discard,errors=remount-ro", "dump": 0, "passno": 0, "size_total": 31025332224, "size_available": 26600288256, "block_size": 4096, "block_total": 7574544, "block_available": 6494211, "block_used": 1080333, "inode_total": 3870720, "inode_available": 3723336, "inode_used": 147384, "uuid": "721ea9a7-9d5f-4501-82e8-5ba059b492e5"}, {"mount": "/snap/core20/2434", "device": "/dev/loop0", "fstype": "squashfs", "options": "ro,nodev,relatime,errors=continue,threads=single", "dump": 0, "passno": 0, "size_total": 66846720, "size_available": 0, "block_size": 131072, "block_total": 510, "block_available": 0, "block_used": 510, "inode_total": 11851, "inode_available": 0, "inode_used": 11851, "uuid": "N/A"}, {"mount": "/snap/lxd/31333", "device": "/dev/loop1", "fstype": "squashfs", "options": "ro,nodev,relatime,errors=continue,threads=single", "dump": 0, "passno": 0, "size_total": 93847552, "size_available": 0, "block_size": 131072, "block_total": 716, "block_available": 0, "block_used": 716, "inode_total": 961, "inode_available": 0, "inode_used": 961, "uuid": "N/A"}, {"mount": "/snap/snapd/23545", "device": "/dev/loop2", "fstype": "squashfs", "options": "ro,nodev,relatime,errors=continue,threads=single", "dump": 0, "passno": 0, "size_total": 46661632, "size_available": 0, "block_size": 131072, "block_total": 356, "block_available": 0, "block_used": 356, "inode_total": 608, "inode_available": 0, "inode_used": 608, "uuid": "N/A"}, {"mount": "/boot/efi", "device": "/dev/sda15", "fstype": "vfat", "options": "rw,relatime,fmask=0077,dmask=0077,codepage=437,iocharset=iso8859-1,shortname=mixed,errors=remount-ro", "dump": 0, "passno": 0, "size_total": 109395456, "size_available": 103057408, "block_size": 512, "block_total": 213663, "block_available": 201284, "block_used": 12379, "inode_total": 0, "inode_available": 0, "inode_used": 0, "uuid": "E8AE-90AB"}, {"mount": "/mnt", "device": "/dev/sdb1", "fstype": "ext4", "options": "rw,relatime", "dump": 0, "passno": 0, "size_total": 7296020480, "size_available": 6903513088, "block_size": 4096, "block_total": 1781255, "block_available": 1685428, "block_used": 95827, "inode_total": 458752, "inode_available": 458740, "inode_used": 12, "uuid": "5fbb754a-dd42-4ad8-8bdb-41feb2a25b98"}], "ansible_interfaces": ["lo", "eth0"], "ansible_lo": {"device": "lo", "mtu": 65536, "active": true, "type": "loopback", "promisc": false, "ipv4": {"address": "127.0.0.1", "broadcast": "", "netmask": "255.0.0.0", "network": "127.0.0.0", "prefix": "8"}, "ipv6": [{"address": "::1", "prefix": "128", "scope": "host"}], "features": {"rx_checksumming": "on [fixed]", "tx_checksumming": "on", "tx_checksum_ipv4": "off [fixed]", "tx_checksum_ip_generic": "on [fixed]", "tx_checksum_ipv6": "off [fixed]", "tx_checksum_fcoe_crc": "off [fixed]", "tx_checksum_sctp": "on [fixed]", "scatter_gather": "on", "tx_scatter_gather": "on [fixed]", "tx_scatter_gather_fraglist": "on [fixed]", "tcp_segmentation_offload": "on", "tx_tcp_segmentation": "on", "tx_tcp_ecn_segmentation": "on", "tx_tcp_mangleid_segmentation": "on", "tx_tcp6_segmentation": "on", "generic_segmentation_offload": "on", "generic_receive_offload": "on", "large_receive_offload": "off [fixed]", "rx_vlan_offload": "off [fixed]", "tx_vlan_offload": "off [fixed]", "ntuple_filters": "off [fixed]", "receive_hashing": "off [fixed]", "highdma": "on [fixed]", "rx_vlan_filter": "off [fixed]", "vlan_challenged": "on [fixed]", "tx_lockless": "on [fixed]", "netns_local": "on [fixed]", "tx_gso_robust": "off [fixed]", "tx_fcoe_segmentation": "off [fixed]", "tx_gre_segmentation": "off [fixed]", "tx_gre_csum_segmentation": "off [fixed]", "tx_ipxip4_segmentation": "off [fixed]", "tx_ipxip6_segmentation": "off [fixed]", "tx_udp_tnl_segmentation": "off [fixed]", "tx_udp_tnl_csum_segmentation": "off [fixed]", "tx_gso_partial": "off [fixed]", "tx_tunnel_remcsum_segmentation": "off [fixed]", "tx_sctp_segmentation": "on", "tx_esp_segmentation": "off [fixed]", "tx_udp_segmentation": "on", "tx_gso_list": "on", "fcoe_mtu": "off [fixed]", "tx_nocache_copy": "off [fixed]", "loopback": "on [fixed]", "rx_fcs": "off [fixed]", "rx_all": "off [fixed]", "tx_vlan_stag_hw_insert": "off [fixed]", "rx_vlan_stag_hw_parse": "off [fixed]", "rx_vlan_stag_filter": "off [fixed]", "l2_fwd_offload": "off [fixed]", "hw_tc_offload": "off [fixed]", "esp_hw_offload": "off [fixed]", "esp_tx_csum_hw_offload": "off [fixed]", "rx_udp_tunnel_port_offload": "off [fixed]", "tls_hw_tx_offload": "off [fixed]", "tls_hw_rx_offload": "off [fixed]", "rx_gro_hw": "off [fixed]", "tls_hw_record": "off [fixed]", "rx_gro_list": "off", "macsec_hw_offload": "off [fixed]", "rx_udp_gro_forwarding": "off", "hsr_tag_ins_offload": "off [fixed]", "hsr_tag_rm_offload": "off [fixed]", "hsr_fwd_offload": "off [fixed]", "hsr_dup_offload": "off [fixed]"}, "timestamping": [], "hw_timestamp_filters": []}, "ansible_eth0": {"device": "eth0", "macaddress": "60:45:bd:f2:cb:07", "mtu": 1500, "active": true, "module": "hv_netvsc", "type": "ether", "pciid": "6045bdf2-cb07-6045-bdf2-cb076045bdf2", "speed": 50000, "promisc": false, "ipv4": {"address": "10.0.1.4", "broadcast": "", "netmask": "255.255.255.0", "network": "10.0.1.0", "prefix": "24"}, "ipv6": [{"address": "fe80::6245:bdff:fef2:cb07", "prefix": "64", "scope": "link"}], "features": {"rx_checksumming": "on", "tx_checksumming": "on", "tx_checksum_ipv4": "on", "tx_checksum_ip_generic": "off [fixed]", "tx_checksum_ipv6": "on", "tx_checksum_fcoe_crc": "off [fixed]", "tx_checksum_sctp": "off [fixed]", "scatter_gather": "on", "tx_scatter_gather": "on", "tx_scatter_gather_fraglist": "off [fixed]", "tcp_segmentation_offload": "on", "tx_tcp_segmentation": "on", "tx_tcp_ecn_segmentation": "off [fixed]", "tx_tcp_mangleid_segmentation": "off", "tx_tcp6_segmentation": "on", "generic_segmentation_offload": "on", "generic_receive_offload": "on", "large_receive_offload": "on", "rx_vlan_offload": "on [fixed]", "tx_vlan_offload": "on [fixed]", "ntuple_filters": "off [fixed]", "receive_hashing": "on", "highdma": "on [fixed]", "rx_vlan_filter": "off [fixed]", "vlan_challenged": "off [fixed]", "tx_lockless": "off [fixed]", "netns_local": "off [fixed]", "tx_gso_robust": "off [fixed]", "tx_fcoe_segmentation": "off [fixed]", "tx_gre_segmentation": "off [fixed]", "tx_gre_csum_segmentation": "off [fixed]", "tx_ipxip4_segmentation": "off [fixed]", "tx_ipxip6_segmentation": "off [fixed]", "tx_udp_tnl_segmentation": "off [fixed]", "tx_udp_tnl_csum_segmentation": "off [fixed]", "tx_gso_partial": "off [fixed]", "tx_tunnel_remcsum_segmentation": "off [fixed]", "tx_sctp_segmentation": "off [fixed]", "tx_esp_segmentation": "off [fixed]", "tx_udp_segmentation": "off [fixed]", "tx_gso_list": "off [fixed]", "fcoe_mtu": "off [fixed]", "tx_nocache_copy": "off", "loopback": "off [fixed]", "rx_fcs": "off [fixed]", "rx_all": "off [fixed]", "tx_vlan_stag_hw_insert": "off [fixed]", "rx_vlan_stag_hw_parse": "off [fixed]", "rx_vlan_stag_filter": "off [fixed]", "l2_fwd_offload": "off [fixed]", "hw_tc_offload": "off [fixed]", "esp_hw_offload": "off [fixed]", "esp_tx_csum_hw_offload": "off [fixed]", "rx_udp_tunnel_port_offload": "off [fixed]", "tls_hw_tx_offload": "off [fixed]", "tls_hw_rx_offload": "off [fixed]", "rx_gro_hw": "off [fixed]", "tls_hw_record": "off [fixed]", "rx_gro_list": "off", "macsec_hw_offload": "off [fixed]", "rx_udp_gro_forwarding": "off", "hsr_tag_ins_offload": "off [fixed]", "hsr_tag_rm_offload": "off [fixed]", "hsr_fwd_offload": "off [fixed]", "hsr_dup_offload": "off [fixed]"}, "timestamping": [], "hw_timestamp_filters": []}, "ansible_default_ipv4": {"gateway": "10.0.1.1", "interface": "eth0", "address": "10.0.1.4", "broadcast": "", "netmask": "255.255.255.0", "network": "10.0.1.0", "prefix": "24", "macaddress": "60:45:bd:f2:cb:07", "mtu": 1500, "type": "ether", "alias": "eth0"}, "ansible_default_ipv6": {}, "ansible_all_ipv4_addresses": ["10.0.1.4"], "ansible_all_ipv6_addresses": ["fe80::6245:bdff:fef2:cb07"], "ansible_locally_reachable_ips": {"ipv4": ["10.0.1.4", "127.0.0.0/8", "127.0.0.1"], "ipv6": ["::1", "fe80::6245:bdff:fef2:cb07"]}, "ansible_service_mgr": "systemd", "ansible_pkg_mgr": "apt", "gather_subset": ["all"], "module_setup": true}, "invocation": {"module_args": {"gather_subset": ["all"], "gather_timeout": 10, "filter": [], "fact_path": "/etc/ansible/facts.d"}}}\n', b"OpenSSH_9.8p1, LibreSSL 3.3.6\r\ndebug1: Reading configuration data /etc/ssh/ssh_config\r\ndebug1: /etc/ssh/ssh_config line 21: include /etc/ssh/ssh_config.d/* matched no files\r\ndebug1: /etc/ssh/ssh_config line 54: Applying options for *\r\ndebug2: resolve_canonicalize: hostname 40.68.93.141 is address\r\ndebug3: expanded UserKnownHostsFile '~/.ssh/known_hosts' -> '/Users/snrj/.ssh/known_hosts'\r\ndebug3: expanded UserKnownHostsFile '~/.ssh/known_hosts2' -> '/Users/snrj/.ssh/known_hosts2'\r\ndebug1: Authenticator provider $SSH_SK_PROVIDER did not resolve; disabling\r\ndebug1: auto-mux: Trying existing master at '/Users/snrj/.ansible/cp/1da56dae57'\r\ndebug2: fd 3 setting O_NONBLOCK\r\ndebug2: mux_client_hello_exchange: master version 4\r\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\r\ndebug3: mux_client_request_session: entering\r\ndebug3: mux_client_request_alive: entering\r\ndebug3: mux_client_request_alive: done pid = 59707\r\ndebug3: mux_client_request_session: session request sent\r\ndebug1: mux_client_request_session: master session id: 2\r\ndebug3: mux_client_read_packet_timeout: read header failed: Broken pipe\r\ndebug2: Received exit status from master 0\r\n")
2025-02-21 02:18:39,517 p=59755 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 40.68.93.141 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-21 02:18:39,518 p=59755 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:18:39,523 p=59755 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/vars.yml'
2025-02-21 02:18:39,523 p=59755 u=snrj n=ansible INFO| TASK [flask_app : Update apt package index] *****************************************************************************************************************
2025-02-21 02:18:39,523 p=59755 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:3
2025-02-21 02:18:39,600 p=59755 u=snrj n=ansible INFO| Using module file /opt/homebrew/Cellar/ansible/11.2.0/libexec/lib/python3.13/site-packages/ansible/modules/apt.py
2025-02-21 02:18:39,601 p=59755 u=snrj n=ansible INFO| Pipelining is enabled.
2025-02-21 02:18:39,601 p=59755 u=snrj n=ansible INFO| <40.68.93.141> ESTABLISH SSH CONNECTION FOR USER: azureadmin
2025-02-21 02:18:39,601 p=59755 u=snrj n=ansible INFO| <40.68.93.141> SSH: EXEC ssh -vvv -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o 'IdentityFile="/Users/snrj/.ssh/id_rsa"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User="azureadmin"' -o ConnectTimeout=30 -o StrictHostKeyChecking=no -o 'ControlPath="/Users/snrj/.ansible/cp/1da56dae57"' 40.68.93.141 '/bin/sh -c '"'"'sudo -H -S -n  -u root /bin/sh -c '"'"'"'"'"'"'"'"'echo BECOME-SUCCESS-fqxlvhxlqronryvaelyrnkvbkuahhueg ; /usr/bin/python3.10'"'"'"'"'"'"'"'"' && sleep 0'"'"''
2025-02-21 02:18:39,687 p=59755 u=snrj n=ansible INFO| Escalation succeeded
2025-02-21 02:18:43,780 p=59755 u=snrj n=ansible INFO| <40.68.93.141> (0, b'\n{"changed": true, "cache_updated": true, "cache_update_time": 1740100722, "invocation": {"module_args": {"update_cache": true, "state": "present", "update_cache_retries": 5, "update_cache_retry_max_delay": 12, "cache_valid_time": 0, "purge": false, "force": false, "upgrade": null, "dpkg_options": "force-confdef,force-confold", "autoremove": false, "autoclean": false, "fail_on_autoremove": false, "only_upgrade": false, "force_apt_get": false, "clean": false, "allow_unauthenticated": false, "allow_downgrade": false, "allow_change_held_packages": false, "lock_timeout": 60, "package": null, "deb": null, "default_release": null, "install_recommends": null, "policy_rc_d": null}}}\n', b"OpenSSH_9.8p1, LibreSSL 3.3.6\r\ndebug1: Reading configuration data /etc/ssh/ssh_config\r\ndebug1: /etc/ssh/ssh_config line 21: include /etc/ssh/ssh_config.d/* matched no files\r\ndebug1: /etc/ssh/ssh_config line 54: Applying options for *\r\ndebug2: resolve_canonicalize: hostname 40.68.93.141 is address\r\ndebug3: expanded UserKnownHostsFile '~/.ssh/known_hosts' -> '/Users/snrj/.ssh/known_hosts'\r\ndebug3: expanded UserKnownHostsFile '~/.ssh/known_hosts2' -> '/Users/snrj/.ssh/known_hosts2'\r\ndebug1: Authenticator provider $SSH_SK_PROVIDER did not resolve; disabling\r\ndebug1: auto-mux: Trying existing master at '/Users/snrj/.ansible/cp/1da56dae57'\r\ndebug2: fd 3 setting O_NONBLOCK\r\ndebug2: mux_client_hello_exchange: master version 4\r\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\r\ndebug3: mux_client_request_session: entering\r\ndebug3: mux_client_request_alive: entering\r\ndebug3: mux_client_request_alive: done pid = 59707\r\ndebug3: mux_client_request_session: session request sent\r\ndebug1: mux_client_request_session: master session id: 2\r\ndebug3: mux_client_read_packet_timeout: read header failed: Broken pipe\r\ndebug2: Received exit status from master 0\r\n")
2025-02-21 02:18:43,786 p=59755 u=snrj n=ansible INFO| changed: [40.68.93.141] => {
    "cache_update_time": 1740100722,
    "cache_updated": true,
    "changed": true,
    "invocation": {
        "module_args": {
            "allow_change_held_packages": false,
            "allow_downgrade": false,
            "allow_unauthenticated": false,
            "autoclean": false,
            "autoremove": false,
            "cache_valid_time": 0,
            "clean": false,
            "deb": null,
            "default_release": null,
            "dpkg_options": "force-confdef,force-confold",
            "fail_on_autoremove": false,
            "force": false,
            "force_apt_get": false,
            "install_recommends": null,
            "lock_timeout": 60,
            "only_upgrade": false,
            "package": null,
            "policy_rc_d": null,
            "purge": false,
            "state": "present",
            "update_cache": true,
            "update_cache_retries": 5,
            "update_cache_retry_max_delay": 12,
            "upgrade": null
        }
    }
}
2025-02-21 02:18:43,794 p=59755 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/vars.yml'
2025-02-21 02:18:43,795 p=59755 u=snrj n=ansible INFO| TASK [flask_app : Ensure the 'universe' repository is enabled] **********************************************************************************************
2025-02-21 02:18:43,795 p=59755 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:7
2025-02-21 02:18:43,885 p=59755 u=snrj n=ansible INFO| Using module file /opt/homebrew/Cellar/ansible/11.2.0/libexec/lib/python3.13/site-packages/ansible/modules/apt_repository.py
2025-02-21 02:18:43,885 p=59755 u=snrj n=ansible INFO| Pipelining is enabled.
2025-02-21 02:18:43,885 p=59755 u=snrj n=ansible INFO| <40.68.93.141> ESTABLISH SSH CONNECTION FOR USER: azureadmin
2025-02-21 02:18:43,885 p=59755 u=snrj n=ansible INFO| <40.68.93.141> SSH: EXEC ssh -vvv -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o 'IdentityFile="/Users/snrj/.ssh/id_rsa"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User="azureadmin"' -o ConnectTimeout=30 -o StrictHostKeyChecking=no -o 'ControlPath="/Users/snrj/.ansible/cp/1da56dae57"' 40.68.93.141 '/bin/sh -c '"'"'sudo -H -S -n  -u root /bin/sh -c '"'"'"'"'"'"'"'"'echo BECOME-SUCCESS-bdrmwppeyuosqdhjoapkpwicuibytsrb ; /usr/bin/python3.10'"'"'"'"'"'"'"'"' && sleep 0'"'"''
2025-02-21 02:18:43,973 p=59755 u=snrj n=ansible INFO| Escalation succeeded
2025-02-21 02:18:44,696 p=59755 u=snrj n=ansible INFO| <40.68.93.141> (0, b'\n{"changed": false, "repo": "deb http://archive.ubuntu.com/ubuntu/ jammy universe", "sources_added": [], "sources_removed": [], "state": "present", "diff": [], "invocation": {"module_args": {"repo": "deb http://archive.ubuntu.com/ubuntu/ jammy universe", "state": "present", "update_cache": true, "update_cache_retries": 5, "update_cache_retry_max_delay": 12, "install_python_apt": true, "validate_certs": true, "mode": null, "filename": null, "codename": null}}}\n', b"OpenSSH_9.8p1, LibreSSL 3.3.6\r\ndebug1: Reading configuration data /etc/ssh/ssh_config\r\ndebug1: /etc/ssh/ssh_config line 21: include /etc/ssh/ssh_config.d/* matched no files\r\ndebug1: /etc/ssh/ssh_config line 54: Applying options for *\r\ndebug2: resolve_canonicalize: hostname 40.68.93.141 is address\r\ndebug3: expanded UserKnownHostsFile '~/.ssh/known_hosts' -> '/Users/snrj/.ssh/known_hosts'\r\ndebug3: expanded UserKnownHostsFile '~/.ssh/known_hosts2' -> '/Users/snrj/.ssh/known_hosts2'\r\ndebug1: Authenticator provider $SSH_SK_PROVIDER did not resolve; disabling\r\ndebug1: auto-mux: Trying existing master at '/Users/snrj/.ansible/cp/1da56dae57'\r\ndebug2: fd 3 setting O_NONBLOCK\r\ndebug2: mux_client_hello_exchange: master version 4\r\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\r\ndebug3: mux_client_request_session: entering\r\ndebug3: mux_client_request_alive: entering\r\ndebug3: mux_client_request_alive: done pid = 59707\r\ndebug3: mux_client_request_session: session request sent\r\ndebug1: mux_client_request_session: master session id: 2\r\ndebug3: mux_client_read_packet_timeout: read header failed: Broken pipe\r\ndebug2: Received exit status from master 0\r\n")
2025-02-21 02:18:44,700 p=59755 u=snrj n=ansible INFO| ok: [40.68.93.141] => {
    "changed": false,
    "diff": [],
    "invocation": {
        "module_args": {
            "codename": null,
            "filename": null,
            "install_python_apt": true,
            "mode": null,
            "repo": "deb http://archive.ubuntu.com/ubuntu/ jammy universe",
            "state": "present",
            "update_cache": true,
            "update_cache_retries": 5,
            "update_cache_retry_max_delay": 12,
            "validate_certs": true
        }
    },
    "repo": "deb http://archive.ubuntu.com/ubuntu/ jammy universe",
    "sources_added": [],
    "sources_removed": [],
    "state": "present"
}
2025-02-21 02:18:44,709 p=59755 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/vars.yml'
2025-02-21 02:18:44,710 p=59755 u=snrj n=ansible INFO| TASK [flask_app : Install python3-pip] **********************************************************************************************************************
2025-02-21 02:18:44,710 p=59755 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:12
2025-02-21 02:18:44,746 p=59755 u=snrj n=ansible INFO| Using module file /opt/homebrew/Cellar/ansible/11.2.0/libexec/lib/python3.13/site-packages/ansible/modules/apt.py
2025-02-21 02:18:44,746 p=59755 u=snrj n=ansible INFO| Pipelining is enabled.
2025-02-21 02:18:44,747 p=59755 u=snrj n=ansible INFO| <40.68.93.141> ESTABLISH SSH CONNECTION FOR USER: azureadmin
2025-02-21 02:18:44,747 p=59755 u=snrj n=ansible INFO| <40.68.93.141> SSH: EXEC ssh -vvv -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o 'IdentityFile="/Users/snrj/.ssh/id_rsa"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User="azureadmin"' -o ConnectTimeout=30 -o StrictHostKeyChecking=no -o 'ControlPath="/Users/snrj/.ansible/cp/1da56dae57"' 40.68.93.141 '/bin/sh -c '"'"'sudo -H -S -n  -u root /bin/sh -c '"'"'"'"'"'"'"'"'echo BECOME-SUCCESS-hqbacvkpayclueiveetyqxphshtffooi ; /usr/bin/python3.10'"'"'"'"'"'"'"'"' && sleep 0'"'"''
2025-02-21 02:18:44,826 p=59755 u=snrj n=ansible INFO| Escalation succeeded
2025-02-21 02:18:46,979 p=59755 u=snrj n=ansible INFO| <40.68.93.141> (0, b'\n{"changed": false, "cache_updated": false, "cache_update_time": 1740100722, "invocation": {"module_args": {"name": "python3-pip", "state": "present", "package": ["python3-pip"], "update_cache_retries": 5, "update_cache_retry_max_delay": 12, "cache_valid_time": 0, "purge": false, "force": false, "upgrade": null, "dpkg_options": "force-confdef,force-confold", "autoremove": false, "autoclean": false, "fail_on_autoremove": false, "only_upgrade": false, "force_apt_get": false, "clean": false, "allow_unauthenticated": false, "allow_downgrade": false, "allow_change_held_packages": false, "lock_timeout": 60, "update_cache": null, "deb": null, "default_release": null, "install_recommends": null, "policy_rc_d": null}}}\n', b"OpenSSH_9.8p1, LibreSSL 3.3.6\r\ndebug1: Reading configuration data /etc/ssh/ssh_config\r\ndebug1: /etc/ssh/ssh_config line 21: include /etc/ssh/ssh_config.d/* matched no files\r\ndebug1: /etc/ssh/ssh_config line 54: Applying options for *\r\ndebug2: resolve_canonicalize: hostname 40.68.93.141 is address\r\ndebug3: expanded UserKnownHostsFile '~/.ssh/known_hosts' -> '/Users/snrj/.ssh/known_hosts'\r\ndebug3: expanded UserKnownHostsFile '~/.ssh/known_hosts2' -> '/Users/snrj/.ssh/known_hosts2'\r\ndebug1: Authenticator provider $SSH_SK_PROVIDER did not resolve; disabling\r\ndebug1: auto-mux: Trying existing master at '/Users/snrj/.ansible/cp/1da56dae57'\r\ndebug2: fd 3 setting O_NONBLOCK\r\ndebug2: mux_client_hello_exchange: master version 4\r\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\r\ndebug3: mux_client_request_session: entering\r\ndebug3: mux_client_request_alive: entering\r\ndebug3: mux_client_request_alive: done pid = 59707\r\ndebug3: mux_client_request_session: session request sent\r\ndebug1: mux_client_request_session: master session id: 2\r\ndebug3: mux_client_read_packet_timeout: read header failed: Broken pipe\r\ndebug2: Received exit status from master 0\r\n")
2025-02-21 02:18:46,985 p=59755 u=snrj n=ansible INFO| ok: [40.68.93.141] => {
    "cache_update_time": 1740100722,
    "cache_updated": false,
    "changed": false,
    "invocation": {
        "module_args": {
            "allow_change_held_packages": false,
            "allow_downgrade": false,
            "allow_unauthenticated": false,
            "autoclean": false,
            "autoremove": false,
            "cache_valid_time": 0,
            "clean": false,
            "deb": null,
            "default_release": null,
            "dpkg_options": "force-confdef,force-confold",
            "fail_on_autoremove": false,
            "force": false,
            "force_apt_get": false,
            "install_recommends": null,
            "lock_timeout": 60,
            "name": "python3-pip",
            "only_upgrade": false,
            "package": [
                "python3-pip"
            ],
            "policy_rc_d": null,
            "purge": false,
            "state": "present",
            "update_cache": null,
            "update_cache_retries": 5,
            "update_cache_retry_max_delay": 12,
            "upgrade": null
        }
    }
}
2025-02-21 02:18:46,998 p=59755 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/vars.yml'
2025-02-21 02:18:46,998 p=59755 u=snrj n=ansible INFO| TASK [flask_app : Install required Python packages] *********************************************************************************************************
2025-02-21 02:18:46,998 p=59755 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:17
2025-02-21 02:18:47,073 p=59755 u=snrj n=ansible INFO| Using module file /opt/homebrew/Cellar/ansible/11.2.0/libexec/lib/python3.13/site-packages/ansible/modules/pip.py
2025-02-21 02:18:47,073 p=59755 u=snrj n=ansible INFO| Pipelining is enabled.
2025-02-21 02:18:47,073 p=59755 u=snrj n=ansible INFO| <40.68.93.141> ESTABLISH SSH CONNECTION FOR USER: azureadmin
2025-02-21 02:18:47,073 p=59755 u=snrj n=ansible INFO| <40.68.93.141> SSH: EXEC ssh -vvv -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o 'IdentityFile="/Users/snrj/.ssh/id_rsa"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User="azureadmin"' -o ConnectTimeout=30 -o StrictHostKeyChecking=no -o 'ControlPath="/Users/snrj/.ansible/cp/1da56dae57"' 40.68.93.141 '/bin/sh -c '"'"'sudo -H -S -n  -u root /bin/sh -c '"'"'"'"'"'"'"'"'echo BECOME-SUCCESS-uzpjemwrxttgaouopaolpwfnlwsdsecb ; /usr/bin/python3.10'"'"'"'"'"'"'"'"' && sleep 0'"'"''
2025-02-21 02:18:47,162 p=59755 u=snrj n=ansible INFO| Escalation succeeded
2025-02-21 02:18:50,715 p=59755 u=snrj n=ansible INFO| <40.68.93.141> (0, b'\n{"changed": false, "cmd": ["/usr/bin/python3.10", "-m", "pip.__main__", "install", "fastapi", "uvicorn", "azure-monitor-opentelemetry"], "name": ["fastapi", "uvicorn", "azure-monitor-opentelemetry"], "version": null, "state": "present", "requirements": null, "virtualenv": null, "stdout": "Requirement already satisfied: fastapi in /usr/local/lib/python3.10/dist-packages (0.115.8)\\nRequirement already satisfied: uvicorn in /usr/local/lib/python3.10/dist-packages (0.34.0)\\nRequirement already satisfied: azure-monitor-opentelemetry in /usr/local/lib/python3.10/dist-packages (1.6.5)\\nRequirement already satisfied: starlette<0.46.0,>=0.40.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (0.45.3)\\nRequirement already satisfied: pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4 in /usr/local/lib/python3.10/dist-packages (from fastapi) (2.10.6)\\nRequirement already satisfied: typing-extensions>=4.8.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (4.12.2)\\nRequirement already satisfied: click>=7.0 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (8.1.8)\\nRequirement already satisfied: h11>=0.8 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (0.14.0)\\nRequirement already satisfied: opentelemetry-instrumentation-urllib3~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\\nRequirement already satisfied: opentelemetry-resource-detector-azure~=0.1.4 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.1.5)\\nRequirement already satisfied: opentelemetry-instrumentation-requests~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\\nRequirement already satisfied: opentelemetry-instrumentation-fastapi~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\\nRequirement already satisfied: opentelemetry-instrumentation-flask~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\\nRequirement already satisfied: opentelemetry-sdk~=1.28 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.30.0)\\nRequirement already satisfied: azure-monitor-opentelemetry-exporter~=1.0.0b31 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b33)\\nRequirement already satisfied: opentelemetry-instrumentation-psycopg2~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\\nRequirement already satisfied: opentelemetry-instrumentation-urllib~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\\nRequirement already satisfied: azure-core<2.0.0,>=1.28.0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.32.0)\\nRequirement already satisfied: azure-core-tracing-opentelemetry~=1.0.0b11 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b11)\\nRequirement already satisfied: opentelemetry-instrumentation-django~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\\nRequirement already satisfied: requests>=2.21.0 in /usr/local/lib/python3.10/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (2.32.3)\\nRequirement already satisfied: six>=1.11.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.16.0)\\nRequirement already satisfied: opentelemetry-api<2.0.0,>=1.12.0 in /usr/local/lib/python3.10/dist-packages (from azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (1.30.0)\\nRequirement already satisfied: fixedint==0.1.6 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.1.6)\\nRequirement already satisfied: msrest>=0.6.10 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.1)\\nRequirement already satisfied: psutil~=5.9 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (5.9.8)\\nRequirement already satisfied: opentelemetry-semantic-conventions==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\\nRequirement already satisfied: opentelemetry-util-http==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\\nRequirement already satisfied: opentelemetry-instrumentation==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\\nRequirement already satisfied: opentelemetry-instrumentation-wsgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\\nRequirement already satisfied: wrapt<2.0.0,>=1.0.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.17.2)\\nRequirement already satisfied: packaging>=18.0 in /usr/lib/python3/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (21.3)\\nRequirement already satisfied: deprecated>=1.2.6 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-semantic-conventions==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.2.18)\\nRequirement already satisfied: importlib-metadata<=8.5.0,>=6.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (8.5.0)\\nRequirement already satisfied: opentelemetry-instrumentation-asgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\\nRequirement already satisfied: asgiref~=3.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-asgi==0.51b0->opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (3.8.1)\\nRequirement already satisfied: opentelemetry-instrumentation-dbapi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-psycopg2~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\\nRequirement already satisfied: pydantic-core==2.27.2 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (2.27.2)\\nRequirement already satisfied: annotated-types>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (0.7.0)\\nRequirement already satisfied: anyio<5,>=3.6.2 in /usr/local/lib/python3.10/dist-packages (from starlette<0.46.0,>=0.40.0->fastapi) (4.8.0)\\nRequirement already satisfied: sniffio>=1.1 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.3.1)\\nRequirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.2.2)\\nRequirement already satisfied: idna>=2.8 in /usr/lib/python3/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (3.3)\\nRequirement already satisfied: requests-oauthlib>=0.5.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2.0.0)\\nRequirement already satisfied: isodate>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.2)\\nRequirement already satisfied: certifi>=2017.4.17 in /usr/lib/python3/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2020.6.20)\\nRequirement already satisfied: urllib3<3,>=1.21.1 in /usr/lib/python3/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.26.5)\\nRequirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (3.4.1)\\nRequirement already satisfied: zipp>=3.20 in /usr/local/lib/python3.10/dist-packages (from importlib-metadata<=8.5.0,>=6.0->opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (3.21.0)\\nRequirement already satisfied: oauthlib>=3.0.0 in /usr/lib/python3/dist-packages (from requests-oauthlib>=0.5.0->msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (3.2.0)\\n", "stderr": "WARNING: Running pip as the \'root\' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\\n", "invocation": {"module_args": {"name": ["fastapi", "uvicorn", "azure-monitor-opentelemetry"], "state": "present", "virtualenv_site_packages": false, "virtualenv_command": "virtualenv", "editable": false, "break_system_packages": false, "version": null, "requirements": null, "virtualenv": null, "virtualenv_python": null, "extra_args": null, "chdir": null, "executable": null, "umask": null}}}\n', b"OpenSSH_9.8p1, LibreSSL 3.3.6\r\ndebug1: Reading configuration data /etc/ssh/ssh_config\r\ndebug1: /etc/ssh/ssh_config line 21: include /etc/ssh/ssh_config.d/* matched no files\r\ndebug1: /etc/ssh/ssh_config line 54: Applying options for *\r\ndebug2: resolve_canonicalize: hostname 40.68.93.141 is address\r\ndebug3: expanded UserKnownHostsFile '~/.ssh/known_hosts' -> '/Users/snrj/.ssh/known_hosts'\r\ndebug3: expanded UserKnownHostsFile '~/.ssh/known_hosts2' -> '/Users/snrj/.ssh/known_hosts2'\r\ndebug1: Authenticator provider $SSH_SK_PROVIDER did not resolve; disabling\r\ndebug1: auto-mux: Trying existing master at '/Users/snrj/.ansible/cp/1da56dae57'\r\ndebug2: fd 3 setting O_NONBLOCK\r\ndebug2: mux_client_hello_exchange: master version 4\r\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\r\ndebug3: mux_client_request_session: entering\r\ndebug3: mux_client_request_alive: entering\r\ndebug3: mux_client_request_alive: done pid = 59707\r\ndebug3: mux_client_request_session: session request sent\r\ndebug1: mux_client_request_session: master session id: 2\r\ndebug3: mux_client_read_packet_timeout: read header failed: Broken pipe\r\ndebug2: Received exit status from master 0\r\n")
2025-02-21 02:18:50,722 p=59755 u=snrj n=ansible INFO| ok: [40.68.93.141] => {
    "changed": false,
    "cmd": [
        "/usr/bin/python3.10",
        "-m",
        "pip.__main__",
        "install",
        "fastapi",
        "uvicorn",
        "azure-monitor-opentelemetry"
    ],
    "invocation": {
        "module_args": {
            "break_system_packages": false,
            "chdir": null,
            "editable": false,
            "executable": null,
            "extra_args": null,
            "name": [
                "fastapi",
                "uvicorn",
                "azure-monitor-opentelemetry"
            ],
            "requirements": null,
            "state": "present",
            "umask": null,
            "version": null,
            "virtualenv": null,
            "virtualenv_command": "virtualenv",
            "virtualenv_python": null,
            "virtualenv_site_packages": false
        }
    },
    "name": [
        "fastapi",
        "uvicorn",
        "azure-monitor-opentelemetry"
    ],
    "requirements": null,
    "state": "present",
    "stderr": "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n",
    "stderr_lines": [
        "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv"
    ],
    "stdout": "Requirement already satisfied: fastapi in /usr/local/lib/python3.10/dist-packages (0.115.8)\nRequirement already satisfied: uvicorn in /usr/local/lib/python3.10/dist-packages (0.34.0)\nRequirement already satisfied: azure-monitor-opentelemetry in /usr/local/lib/python3.10/dist-packages (1.6.5)\nRequirement already satisfied: starlette<0.46.0,>=0.40.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (0.45.3)\nRequirement already satisfied: pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4 in /usr/local/lib/python3.10/dist-packages (from fastapi) (2.10.6)\nRequirement already satisfied: typing-extensions>=4.8.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (4.12.2)\nRequirement already satisfied: click>=7.0 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (8.1.8)\nRequirement already satisfied: h11>=0.8 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (0.14.0)\nRequirement already satisfied: opentelemetry-instrumentation-urllib3~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-resource-detector-azure~=0.1.4 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.1.5)\nRequirement already satisfied: opentelemetry-instrumentation-requests~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-fastapi~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-flask~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-sdk~=1.28 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.30.0)\nRequirement already satisfied: azure-monitor-opentelemetry-exporter~=1.0.0b31 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b33)\nRequirement already satisfied: opentelemetry-instrumentation-psycopg2~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-urllib~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: azure-core<2.0.0,>=1.28.0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.32.0)\nRequirement already satisfied: azure-core-tracing-opentelemetry~=1.0.0b11 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b11)\nRequirement already satisfied: opentelemetry-instrumentation-django~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: requests>=2.21.0 in /usr/local/lib/python3.10/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (2.32.3)\nRequirement already satisfied: six>=1.11.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.16.0)\nRequirement already satisfied: opentelemetry-api<2.0.0,>=1.12.0 in /usr/local/lib/python3.10/dist-packages (from azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (1.30.0)\nRequirement already satisfied: fixedint==0.1.6 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.1.6)\nRequirement already satisfied: msrest>=0.6.10 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.1)\nRequirement already satisfied: psutil~=5.9 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (5.9.8)\nRequirement already satisfied: opentelemetry-semantic-conventions==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-util-http==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-wsgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: wrapt<2.0.0,>=1.0.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.17.2)\nRequirement already satisfied: packaging>=18.0 in /usr/lib/python3/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (21.3)\nRequirement already satisfied: deprecated>=1.2.6 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-semantic-conventions==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.2.18)\nRequirement already satisfied: importlib-metadata<=8.5.0,>=6.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (8.5.0)\nRequirement already satisfied: opentelemetry-instrumentation-asgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: asgiref~=3.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-asgi==0.51b0->opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (3.8.1)\nRequirement already satisfied: opentelemetry-instrumentation-dbapi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-psycopg2~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: pydantic-core==2.27.2 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (2.27.2)\nRequirement already satisfied: annotated-types>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (0.7.0)\nRequirement already satisfied: anyio<5,>=3.6.2 in /usr/local/lib/python3.10/dist-packages (from starlette<0.46.0,>=0.40.0->fastapi) (4.8.0)\nRequirement already satisfied: sniffio>=1.1 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.3.1)\nRequirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.2.2)\nRequirement already satisfied: idna>=2.8 in /usr/lib/python3/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (3.3)\nRequirement already satisfied: requests-oauthlib>=0.5.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2.0.0)\nRequirement already satisfied: isodate>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.2)\nRequirement already satisfied: certifi>=2017.4.17 in /usr/lib/python3/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2020.6.20)\nRequirement already satisfied: urllib3<3,>=1.21.1 in /usr/lib/python3/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.26.5)\nRequirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (3.4.1)\nRequirement already satisfied: zipp>=3.20 in /usr/local/lib/python3.10/dist-packages (from importlib-metadata<=8.5.0,>=6.0->opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (3.21.0)\nRequirement already satisfied: oauthlib>=3.0.0 in /usr/lib/python3/dist-packages (from requests-oauthlib>=0.5.0->msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (3.2.0)\n",
    "stdout_lines": [
        "Requirement already satisfied: fastapi in /usr/local/lib/python3.10/dist-packages (0.115.8)",
        "Requirement already satisfied: uvicorn in /usr/local/lib/python3.10/dist-packages (0.34.0)",
        "Requirement already satisfied: azure-monitor-opentelemetry in /usr/local/lib/python3.10/dist-packages (1.6.5)",
        "Requirement already satisfied: starlette<0.46.0,>=0.40.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (0.45.3)",
        "Requirement already satisfied: pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4 in /usr/local/lib/python3.10/dist-packages (from fastapi) (2.10.6)",
        "Requirement already satisfied: typing-extensions>=4.8.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (4.12.2)",
        "Requirement already satisfied: click>=7.0 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (8.1.8)",
        "Requirement already satisfied: h11>=0.8 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (0.14.0)",
        "Requirement already satisfied: opentelemetry-instrumentation-urllib3~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)",
        "Requirement already satisfied: opentelemetry-resource-detector-azure~=0.1.4 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.1.5)",
        "Requirement already satisfied: opentelemetry-instrumentation-requests~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)",
        "Requirement already satisfied: opentelemetry-instrumentation-fastapi~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)",
        "Requirement already satisfied: opentelemetry-instrumentation-flask~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)",
        "Requirement already satisfied: opentelemetry-sdk~=1.28 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.30.0)",
        "Requirement already satisfied: azure-monitor-opentelemetry-exporter~=1.0.0b31 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b33)",
        "Requirement already satisfied: opentelemetry-instrumentation-psycopg2~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)",
        "Requirement already satisfied: opentelemetry-instrumentation-urllib~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)",
        "Requirement already satisfied: azure-core<2.0.0,>=1.28.0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.32.0)",
        "Requirement already satisfied: azure-core-tracing-opentelemetry~=1.0.0b11 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b11)",
        "Requirement already satisfied: opentelemetry-instrumentation-django~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)",
        "Requirement already satisfied: requests>=2.21.0 in /usr/local/lib/python3.10/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (2.32.3)",
        "Requirement already satisfied: six>=1.11.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.16.0)",
        "Requirement already satisfied: opentelemetry-api<2.0.0,>=1.12.0 in /usr/local/lib/python3.10/dist-packages (from azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (1.30.0)",
        "Requirement already satisfied: fixedint==0.1.6 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.1.6)",
        "Requirement already satisfied: msrest>=0.6.10 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.1)",
        "Requirement already satisfied: psutil~=5.9 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (5.9.8)",
        "Requirement already satisfied: opentelemetry-semantic-conventions==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)",
        "Requirement already satisfied: opentelemetry-util-http==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)",
        "Requirement already satisfied: opentelemetry-instrumentation==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)",
        "Requirement already satisfied: opentelemetry-instrumentation-wsgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)",
        "Requirement already satisfied: wrapt<2.0.0,>=1.0.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.17.2)",
        "Requirement already satisfied: packaging>=18.0 in /usr/lib/python3/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (21.3)",
        "Requirement already satisfied: deprecated>=1.2.6 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-semantic-conventions==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.2.18)",
        "Requirement already satisfied: importlib-metadata<=8.5.0,>=6.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (8.5.0)",
        "Requirement already satisfied: opentelemetry-instrumentation-asgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (0.51b0)",
        "Requirement already satisfied: asgiref~=3.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-asgi==0.51b0->opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (3.8.1)",
        "Requirement already satisfied: opentelemetry-instrumentation-dbapi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-psycopg2~=0.49b0->azure-monitor-opentelemetry) (0.51b0)",
        "Requirement already satisfied: pydantic-core==2.27.2 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (2.27.2)",
        "Requirement already satisfied: annotated-types>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (0.7.0)",
        "Requirement already satisfied: anyio<5,>=3.6.2 in /usr/local/lib/python3.10/dist-packages (from starlette<0.46.0,>=0.40.0->fastapi) (4.8.0)",
        "Requirement already satisfied: sniffio>=1.1 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.3.1)",
        "Requirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.2.2)",
        "Requirement already satisfied: idna>=2.8 in /usr/lib/python3/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (3.3)",
        "Requirement already satisfied: requests-oauthlib>=0.5.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2.0.0)",
        "Requirement already satisfied: isodate>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.2)",
        "Requirement already satisfied: certifi>=2017.4.17 in /usr/lib/python3/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2020.6.20)",
        "Requirement already satisfied: urllib3<3,>=1.21.1 in /usr/lib/python3/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.26.5)",
        "Requirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (3.4.1)",
        "Requirement already satisfied: zipp>=3.20 in /usr/local/lib/python3.10/dist-packages (from importlib-metadata<=8.5.0,>=6.0->opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (3.21.0)",
        "Requirement already satisfied: oauthlib>=3.0.0 in /usr/lib/python3/dist-packages (from requests-oauthlib>=0.5.0->msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (3.2.0)"
    ],
    "version": null,
    "virtualenv": null
}
2025-02-21 02:18:50,729 p=59755 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/vars.yml'
2025-02-21 02:18:50,731 p=59755 u=snrj n=ansible INFO| TASK [flask_app : Run terraform to get the application insights connection string] **************************************************************************
2025-02-21 02:18:50,731 p=59755 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:25
2025-02-21 02:18:50,741 p=59755 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/vars.yml'
2025-02-21 02:18:50,808 p=59755 u=snrj n=ansible INFO| Using module file /opt/homebrew/Cellar/ansible/11.2.0/libexec/lib/python3.13/site-packages/ansible/modules/command.py
2025-02-21 02:18:50,808 p=59755 u=snrj n=ansible INFO| Pipelining is enabled.
2025-02-21 02:18:50,808 p=59755 u=snrj n=ansible INFO| <localhost> ESTABLISH LOCAL CONNECTION FOR USER: snrj
2025-02-21 02:18:50,808 p=59755 u=snrj n=ansible INFO| <localhost> EXEC /bin/sh -c 'sudo -H -S -n  -u root /bin/sh -c '"'"'echo BECOME-SUCCESS-vjwjjkrnopvwopjnyhjjvafkalxcsmeh ; /opt/homebrew/Cellar/ansible/11.2.0/libexec/bin/python'"'"' && sleep 0'
2025-02-21 02:18:50,830 p=59755 u=snrj n=ansible INFO| fatal: [40.68.93.141 -> localhost]: FAILED! => {
    "changed": false,
    "module_stderr": "sudo: a password is required\n",
    "module_stdout": "",
    "msg": "MODULE FAILURE: No start of json char found\nSee stdout/stderr for the exact error",
    "rc": 1
}
2025-02-21 02:18:50,830 p=59755 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 02:18:50,830 p=59755 u=snrj n=ansible INFO| 40.68.93.141               : ok=5    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2025-02-21 02:20:17,911 p=59924 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 02:20:18,025 p=59924 u=snrj n=ansible INFO| ansible-playbook [core 2.18.2]
  config file = /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg
  configured module search path = ['/Users/snrj/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /opt/homebrew/Cellar/ansible/11.2.0/libexec/lib/python3.13/site-packages/ansible
  ansible collection location = /Users/snrj/Desktop/terraform-azure-demo/configure_vm/collections
  executable location = /opt/homebrew/bin/ansible-playbook
  python version = 3.13.2 (main, Feb  4 2025, 14:51:09) [Clang 16.0.0 (clang-1600.0.26.6)] (/opt/homebrew/Cellar/ansible/11.2.0/libexec/bin/python)
  jinja version = 3.1.5
  libyaml = True
2025-02-21 02:20:18,026 p=59924 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-21 02:20:18,080 p=59924 u=snrj n=ansible INFO| host_list declined parsing /Users/snrj/Desktop/terraform-azure-demo/configure_vm/inventory/hosts.ini as it did not pass its verify_file() method
2025-02-21 02:20:18,084 p=59924 u=snrj n=ansible INFO| auto declined parsing /Users/snrj/Desktop/terraform-azure-demo/configure_vm/inventory/hosts.ini as it did not pass its verify_file() method
2025-02-21 02:20:18,085 p=59924 u=snrj n=ansible INFO| yaml declined parsing /Users/snrj/Desktop/terraform-azure-demo/configure_vm/inventory/hosts.ini as it did not pass its verify_file() method
2025-02-21 02:20:18,085 p=59924 u=snrj n=ansible INFO| Parsed /Users/snrj/Desktop/terraform-azure-demo/configure_vm/inventory/hosts.ini inventory source with ini plugin
2025-02-21 02:20:18,216 p=59924 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/vars.yml'
2025-02-21 02:20:18,268 p=59924 u=snrj n=ansible INFO| Skipping callback 'default', as we already have a stdout callback.
2025-02-21 02:20:18,268 p=59924 u=snrj n=ansible INFO| Skipping callback 'minimal', as we already have a stdout callback.
2025-02-21 02:20:18,268 p=59924 u=snrj n=ansible INFO| Skipping callback 'oneline', as we already have a stdout callback.
2025-02-21 02:20:18,268 p=59924 u=snrj n=ansible INFO| PLAYBOOK: flask_app.yml *************************************************************************************************************************************
2025-02-21 02:20:18,268 p=59924 u=snrj n=ansible INFO| 1 plays in playbooks/flask_app.yml
2025-02-21 02:20:18,268 p=59924 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/vars.yml'
2025-02-21 02:20:18,269 p=59924 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/vars.yml'
2025-02-21 02:20:18,269 p=59924 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/vars.yml'
2025-02-21 02:20:18,269 p=59924 u=snrj n=ansible INFO| PLAY [Setup Flask App with OpenTelemetry] *******************************************************************************************************************
2025-02-21 02:20:18,276 p=59924 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/vars.yml'
2025-02-21 02:20:18,277 p=59924 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 02:20:18,277 p=59924 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/playbooks/flask_app.yml:2
2025-02-21 02:20:18,411 p=59924 u=snrj n=ansible INFO| <40.68.93.141> Attempting python interpreter discovery
2025-02-21 02:20:18,411 p=59924 u=snrj n=ansible INFO| <40.68.93.141> ESTABLISH SSH CONNECTION FOR USER: azureadmin
2025-02-21 02:20:18,411 p=59924 u=snrj n=ansible INFO| <40.68.93.141> SSH: EXEC ssh -vvv -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o 'IdentityFile="/Users/snrj/.ssh/id_rsa"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User="azureadmin"' -o ConnectTimeout=30 -o StrictHostKeyChecking=no -o 'ControlPath="/Users/snrj/.ansible/cp/1da56dae57"' 40.68.93.141 '/bin/sh -c '"'"'echo PLATFORM; uname; echo FOUND; command -v '"'"'"'"'"'"'"'"'python3.13'"'"'"'"'"'"'"'"'; command -v '"'"'"'"'"'"'"'"'python3.12'"'"'"'"'"'"'"'"'; command -v '"'"'"'"'"'"'"'"'python3.11'"'"'"'"'"'"'"'"'; command -v '"'"'"'"'"'"'"'"'python3.10'"'"'"'"'"'"'"'"'; command -v '"'"'"'"'"'"'"'"'python3.9'"'"'"'"'"'"'"'"'; command -v '"'"'"'"'"'"'"'"'python3.8'"'"'"'"'"'"'"'"'; command -v '"'"'"'"'"'"'"'"'/usr/bin/python3'"'"'"'"'"'"'"'"'; command -v '"'"'"'"'"'"'"'"'python3'"'"'"'"'"'"'"'"'; echo ENDFOUND && sleep 0'"'"''
2025-02-21 02:20:21,050 p=59924 u=snrj n=ansible INFO| <40.68.93.141> (0, b'PLATFORM\nLinux\nFOUND\n/usr/bin/python3.10\n/usr/bin/python3\n/usr/bin/python3\nENDFOUND\n', b'OpenSSH_9.8p1, LibreSSL 3.3.6\r\ndebug1: Reading configuration data /etc/ssh/ssh_config\r\ndebug1: /etc/ssh/ssh_config line 21: include /etc/ssh/ssh_config.d/* matched no files\r\ndebug1: /etc/ssh/ssh_config line 54: Applying options for *\r\ndebug2: resolve_canonicalize: hostname 40.68.93.141 is address\r\ndebug3: expanded UserKnownHostsFile \'~/.ssh/known_hosts\' -> \'/Users/snrj/.ssh/known_hosts\'\r\ndebug3: expanded UserKnownHostsFile \'~/.ssh/known_hosts2\' -> \'/Users/snrj/.ssh/known_hosts2\'\r\ndebug1: Authenticator provider $SSH_SK_PROVIDER did not resolve; disabling\r\ndebug1: auto-mux: Trying existing master at \'/Users/snrj/.ansible/cp/1da56dae57\'\r\ndebug1: Control socket "/Users/snrj/.ansible/cp/1da56dae57" does not exist\r\ndebug3: channel_clear_timeouts: clearing\r\ndebug3: ssh_connect_direct: entering\r\ndebug1: Connecting to 40.68.93.141 [40.68.93.141] port 22.\r\ndebug3: set_sock_tos: set socket 3 IP_TOS 0x48\r\ndebug2: fd 3 setting O_NONBLOCK\r\ndebug1: fd 3 clearing O_NONBLOCK\r\ndebug1: Connection established.\r\ndebug3: timeout: 30000 ms remain after connect\r\ndebug1: identity file /Users/snrj/.ssh/id_rsa type 0\r\ndebug1: identity file /Users/snrj/.ssh/id_rsa-cert type -1\r\ndebug1: Local version string SSH-2.0-OpenSSH_9.8\r\ndebug1: Remote protocol version 2.0, remote software version OpenSSH_8.9p1 Ubuntu-3ubuntu0.11\r\ndebug1: compat_banner: match: OpenSSH_8.9p1 Ubuntu-3ubuntu0.11 pat OpenSSH* compat 0x04000000\r\ndebug2: fd 3 setting O_NONBLOCK\r\ndebug1: Authenticating to 40.68.93.141:22 as \'azureadmin\'\r\ndebug3: record_hostkey: found key type ED25519 in file /Users/snrj/.ssh/known_hosts:14\r\ndebug3: record_hostkey: found key type RSA in file /Users/snrj/.ssh/known_hosts:15\r\ndebug3: record_hostkey: found key type ECDSA in file /Users/snrj/.ssh/known_hosts:16\r\ndebug3: load_hostkeys_file: loaded 3 keys from 40.68.93.141\r\ndebug1: load_hostkeys: fopen /Users/snrj/.ssh/known_hosts2: No such file or directory\r\ndebug1: load_hostkeys: fopen /etc/ssh/ssh_known_hosts: No such file or directory\r\ndebug1: load_hostkeys: fopen /etc/ssh/ssh_known_hosts2: No such file or directory\r\ndebug3: order_hostkeyalgs: have matching best-preference key type ssh-ed25519-cert-v01@openssh.com, using HostkeyAlgorithms verbatim\r\ndebug3: send packet: type 20\r\ndebug1: SSH2_MSG_KEXINIT sent\r\ndebug3: receive packet: type 20\r\ndebug1: SSH2_MSG_KEXINIT received\r\ndebug2: local client KEXINIT proposal\r\ndebug2: KEX algorithms: sntrup761x25519-sha512@openssh.com,curve25519-sha256,curve25519-sha256@libssh.org,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,diffie-hellman-group14-sha256,ext-info-c,kex-strict-c-v00@openssh.com\r\ndebug2: host key algorithms: ssh-ed25519-cert-v01@openssh.com,ecdsa-sha2-nistp256-cert-v01@openssh.com,ecdsa-sha2-nistp384-cert-v01@openssh.com,ecdsa-sha2-nistp521-cert-v01@openssh.com,sk-ssh-ed25519-cert-v01@openssh.com,sk-ecdsa-sha2-nistp256-cert-v01@openssh.com,rsa-sha2-512-cert-v01@openssh.com,rsa-sha2-256-cert-v01@openssh.com,ssh-ed25519,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521,sk-ssh-ed25519@openssh.com,sk-ecdsa-sha2-nistp256@openssh.com,rsa-sha2-512,rsa-sha2-256\r\ndebug2: ciphers ctos: chacha20-poly1305@openssh.com,aes128-ctr,aes192-ctr,aes256-ctr,aes128-gcm@openssh.com,aes256-gcm@openssh.com\r\ndebug2: ciphers stoc: chacha20-poly1305@openssh.com,aes128-ctr,aes192-ctr,aes256-ctr,aes128-gcm@openssh.com,aes256-gcm@openssh.com\r\ndebug2: MACs ctos: umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-sha1\r\ndebug2: MACs stoc: umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-sha1\r\ndebug2: compression ctos: none,zlib@openssh.com,zlib\r\ndebug2: compression stoc: none,zlib@openssh.com,zlib\r\ndebug2: languages ctos: \r\ndebug2: languages stoc: \r\ndebug2: first_kex_follows 0 \r\ndebug2: reserved 0 \r\ndebug2: peer server KEXINIT proposal\r\ndebug2: KEX algorithms: curve25519-sha256,curve25519-sha256@libssh.org,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,sntrup761x25519-sha512@openssh.com,diffie-hellman-group-exchange-sha256,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,diffie-hellman-group14-sha256,kex-strict-s-v00@openssh.com\r\ndebug2: host key algorithms: rsa-sha2-512,rsa-sha2-256,ecdsa-sha2-nistp256,ssh-ed25519\r\ndebug2: ciphers ctos: chacha20-poly1305@openssh.com,aes128-ctr,aes192-ctr,aes256-ctr,aes128-gcm@openssh.com,aes256-gcm@openssh.com\r\ndebug2: ciphers stoc: chacha20-poly1305@openssh.com,aes128-ctr,aes192-ctr,aes256-ctr,aes128-gcm@openssh.com,aes256-gcm@openssh.com\r\ndebug2: MACs ctos: umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-sha1\r\ndebug2: MACs stoc: umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-sha1\r\ndebug2: compression ctos: none,zlib@openssh.com\r\ndebug2: compression stoc: none,zlib@openssh.com\r\ndebug2: languages ctos: \r\ndebug2: languages stoc: \r\ndebug2: first_kex_follows 0 \r\ndebug2: reserved 0 \r\ndebug3: kex_choose_conf: will use strict KEX ordering\r\ndebug1: kex: algorithm: sntrup761x25519-sha512@openssh.com\r\ndebug1: kex: host key algorithm: ssh-ed25519\r\ndebug1: kex: server->client cipher: chacha20-poly1305@openssh.com MAC: <implicit> compression: none\r\ndebug1: kex: client->server cipher: chacha20-poly1305@openssh.com MAC: <implicit> compression: none\r\ndebug3: send packet: type 30\r\ndebug1: expecting SSH2_MSG_KEX_ECDH_REPLY\r\ndebug3: receive packet: type 31\r\ndebug1: SSH2_MSG_KEX_ECDH_REPLY received\r\ndebug1: Server host key: ssh-ed25519 SHA256:4juZMlPyTLr59GSXsLHOKDrR52QmBWH7q77jVuyrrnU\r\ndebug3: record_hostkey: found key type ED25519 in file /Users/snrj/.ssh/known_hosts:14\r\ndebug3: record_hostkey: found key type RSA in file /Users/snrj/.ssh/known_hosts:15\r\ndebug3: record_hostkey: found key type ECDSA in file /Users/snrj/.ssh/known_hosts:16\r\ndebug3: load_hostkeys_file: loaded 3 keys from 40.68.93.141\r\ndebug1: load_hostkeys: fopen /Users/snrj/.ssh/known_hosts2: No such file or directory\r\ndebug1: load_hostkeys: fopen /etc/ssh/ssh_known_hosts: No such file or directory\r\ndebug1: load_hostkeys: fopen /etc/ssh/ssh_known_hosts2: No such file or directory\r\ndebug1: Host \'40.68.93.141\' is known and matches the ED25519 host key.\r\ndebug1: Found key in /Users/snrj/.ssh/known_hosts:14\r\ndebug3: send packet: type 21\r\ndebug1: ssh_packet_send2_wrapped: resetting send seqnr 3\r\ndebug2: ssh_set_newkeys: mode 1\r\ndebug1: rekey out after 134217728 blocks\r\ndebug1: SSH2_MSG_NEWKEYS sent\r\ndebug1: expecting SSH2_MSG_NEWKEYS\r\ndebug3: receive packet: type 21\r\ndebug1: ssh_packet_read_poll2: resetting read seqnr 3\r\ndebug1: SSH2_MSG_NEWKEYS received\r\ndebug2: ssh_set_newkeys: mode 0\r\ndebug1: rekey in after 134217728 blocks\r\ndebug2: KEX algorithms: sntrup761x25519-sha512@openssh.com,curve25519-sha256,curve25519-sha256@libssh.org,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,diffie-hellman-group14-sha256,ext-info-c,kex-strict-c-v00@openssh.com\r\ndebug2: host key algorithms: ssh-ed25519-cert-v01@openssh.com,ecdsa-sha2-nistp256-cert-v01@openssh.com,ecdsa-sha2-nistp384-cert-v01@openssh.com,ecdsa-sha2-nistp521-cert-v01@openssh.com,sk-ssh-ed25519-cert-v01@openssh.com,sk-ecdsa-sha2-nistp256-cert-v01@openssh.com,rsa-sha2-512-cert-v01@openssh.com,rsa-sha2-256-cert-v01@openssh.com,ssh-ed25519,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521,sk-ssh-ed25519@openssh.com,sk-ecdsa-sha2-nistp256@openssh.com,rsa-sha2-512,rsa-sha2-256\r\ndebug2: ciphers ctos: chacha20-poly1305@openssh.com,aes128-ctr,aes192-ctr,aes256-ctr,aes128-gcm@openssh.com,aes256-gcm@openssh.com\r\ndebug2: ciphers stoc: chacha20-poly1305@openssh.com,aes128-ctr,aes192-ctr,aes256-ctr,aes128-gcm@openssh.com,aes256-gcm@openssh.com\r\ndebug2: MACs ctos: umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-sha1\r\ndebug2: MACs stoc: umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-sha1\r\ndebug2: compression ctos: none,zlib@openssh.com,zlib\r\ndebug2: compression stoc: none,zlib@openssh.com,zlib\r\ndebug2: languages ctos: \r\ndebug2: languages stoc: \r\ndebug2: first_kex_follows 0 \r\ndebug2: reserved 0 \r\ndebug3: send packet: type 5\r\ndebug3: receive packet: type 7\r\ndebug1: SSH2_MSG_EXT_INFO received\r\ndebug3: kex_input_ext_info: extension server-sig-algs\r\ndebug1: kex_ext_info_client_parse: server-sig-algs=<ssh-ed25519,sk-ssh-ed25519@openssh.com,ssh-rsa,rsa-sha2-256,rsa-sha2-512,ssh-dss,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521,sk-ecdsa-sha2-nistp256@openssh.com,webauthn-sk-ecdsa-sha2-nistp256@openssh.com>\r\ndebug3: kex_input_ext_info: extension publickey-hostbound@openssh.com\r\ndebug1: kex_ext_info_check_ver: publickey-hostbound@openssh.com=<0>\r\ndebug3: receive packet: type 6\r\ndebug2: service_accept: ssh-userauth\r\ndebug1: SSH2_MSG_SERVICE_ACCEPT received\r\ndebug3: send packet: type 50\r\ndebug3: receive packet: type 51\r\ndebug1: Authentications that can continue: publickey\r\ndebug3: start over, passed a different list publickey\r\ndebug3: preferred gssapi-with-mic,gssapi-keyex,hostbased,publickey\r\ndebug3: authmethod_lookup publickey\r\ndebug3: remaining preferred: ,gssapi-keyex,hostbased,publickey\r\ndebug3: authmethod_is_enabled publickey\r\ndebug1: Next authentication method: publickey\r\ndebug3: ssh_get_authentication_socket_path: path \'/private/tmp/com.apple.launchd.Yndssrn3q4/Listeners\'\r\ndebug1: get_agent_identities: bound agent to hostkey\r\ndebug1: get_agent_identities: ssh_fetch_identitylist: agent contains no identities\r\ndebug1: Will attempt key: /Users/snrj/.ssh/id_rsa RSA SHA256:dle3OjXmkM6G8DFNCBPq/44NojHKa2l5j5F0Ni2LbT0 explicit\r\ndebug2: pubkey_prepare: done\r\ndebug1: Offering public key: /Users/snrj/.ssh/id_rsa RSA SHA256:dle3OjXmkM6G8DFNCBPq/44NojHKa2l5j5F0Ni2LbT0 explicit\r\ndebug3: send packet: type 50\r\ndebug2: we sent a publickey packet, wait for reply\r\ndebug3: receive packet: type 60\r\ndebug1: Server accepts key: /Users/snrj/.ssh/id_rsa RSA SHA256:dle3OjXmkM6G8DFNCBPq/44NojHKa2l5j5F0Ni2LbT0 explicit\r\ndebug3: sign_and_send_pubkey: using publickey-hostbound-v00@openssh.com with RSA SHA256:dle3OjXmkM6G8DFNCBPq/44NojHKa2l5j5F0Ni2LbT0\r\ndebug3: sign_and_send_pubkey: signing using rsa-sha2-512 SHA256:dle3OjXmkM6G8DFNCBPq/44NojHKa2l5j5F0Ni2LbT0\r\ndebug3: send packet: type 50\r\ndebug3: receive packet: type 52\r\nAuthenticated to 40.68.93.141 ([40.68.93.141]:22) using "publickey".\r\ndebug1: setting up multiplex master socket\r\ndebug3: muxserver_listen: temporary control path /Users/snrj/.ansible/cp/1da56dae57.gwDUrHqiBdM69SZZ\r\ndebug2: fd 4 setting O_NONBLOCK\r\ndebug3: fd 4 is O_NONBLOCK\r\ndebug3: fd 4 is O_NONBLOCK\r\ndebug1: channel 0: new mux listener [/Users/snrj/.ansible/cp/1da56dae57] (inactive timeout: 0)\r\ndebug3: muxserver_listen: mux listener channel 0 fd 4\r\ndebug2: fd 3 setting TCP_NODELAY\r\ndebug3: set_sock_tos: set socket 3 IP_TOS 0x20\r\ndebug1: control_persist_detach: backgrounding master process\r\ndebug2: control_persist_detach: background process is 59931\r\ndebug2: fd 4 setting O_NONBLOCK\r\ndebug1: forking to background\r\ndebug1: Entering interactive session.\r\ndebug1: pledge: id\r\ndebug3: client_repledge: enter\r\ndebug2: set_control_persist_exit_time: schedule exit in 60 seconds\r\ndebug1: multiplexing control connection\r\ndebug3: fd 5 is O_NONBLOCK\r\ndebug3: fd 5 is O_NONBLOCK\r\ndebug1: channel 1: new mux-control [mux-control] (inactive timeout: 0)\r\ndebug3: channel_post_mux_listener: new mux channel 1 fd 5\r\ndebug3: mux_master_read_cb: channel 1: hello sent\r\ndebug2: set_control_persist_exit_time: cancel scheduled exit\r\ndebug3: mux_master_read_cb: channel 1 packet type 0x00000001 len 4\r\ndebug2: mux_master_process_hello: channel 1 client version 4\r\ndebug2: mux_client_hello_exchange: master version 4\r\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\r\ndebug3: mux_client_request_session: entering\r\ndebug3: mux_client_request_alive: entering\r\ndebug3: mux_master_read_cb: channel 1 packet type 0x10000004 len 4\r\ndebug2: mux_master_process_alive_check: channel 1: alive check\r\ndebug3: mux_client_request_alive: done pid = 59933\r\ndebug3: mux_client_request_session: session request sent\r\ndebug3: mux_master_read_cb: channel 1 packet type 0x10000002 len 404\r\ndebug2: mux_master_process_new_session: channel 1: request tty 0, X 0, agent 0, subsys 0, term "xterm-256color", cmd "/bin/sh -c \'echo PLATFORM; uname; echo FOUND; command -v \'"\'"\'python3.13\'"\'"\'; command -v \'"\'"\'python3.12\'"\'"\'; command -v \'"\'"\'python3.11\'"\'"\'; command -v \'"\'"\'python3.10\'"\'"\'; command -v \'"\'"\'python3.9\'"\'"\'; command -v \'"\'"\'python3.8\'"\'"\'; command -v \'"\'"\'/usr/bin/python3\'"\'"\'; command -v \'"\'"\'python3\'"\'"\'; echo ENDFOUND && sleep 0\'", env 1\r\ndebug3: mux_master_process_new_session: got fds stdin 6, stdout 7, stderr 8\r\ndebug2: fd 7 setting O_NONBLOCK\r\ndebug2: fd 8 setting O_NONBLOCK\r\ndebug1: channel 2: new session [client-session] (inactive timeout: 0)\r\ndebug2: mux_master_process_new_session: channel_new: 2 linked to control channel 1\r\ndebug2: channel 2: send open\r\ndebug3: send packet: type 90\r\ndebug3: receive packet: type 80\r\ndebug1: client_input_global_request: rtype hostkeys-00@openssh.com want_reply 0\r\ndebug3: client_input_hostkeys: received RSA key SHA256:bbcTUXuiYOw35BnF5YFaQw12HcP4MmC932dC/MLk73s\r\ndebug3: client_input_hostkeys: received ECDSA key SHA256:jXEoCUzOvRde0Z4CrahpFRkHpiQOqHFGIad8IOKSVV8\r\ndebug3: client_input_hostkeys: received ED25519 key SHA256:4juZMlPyTLr59GSXsLHOKDrR52QmBWH7q77jVuyrrnU\r\ndebug1: client_input_hostkeys: searching /Users/snrj/.ssh/known_hosts for 40.68.93.141 / (none)\r\ndebug3: hostkeys_foreach: reading file "/Users/snrj/.ssh/known_hosts"\r\ndebug3: hostkeys_find: found ssh-ed25519 key at /Users/snrj/.ssh/known_hosts:14\r\ndebug3: hostkeys_find: found ssh-rsa key at /Users/snrj/.ssh/known_hosts:15\r\ndebug3: hostkeys_find: found ecdsa-sha2-nistp256 key at /Users/snrj/.ssh/known_hosts:16\r\ndebug1: client_input_hostkeys: searching /Users/snrj/.ssh/known_hosts2 for 40.68.93.141 / (none)\r\ndebug1: client_input_hostkeys: hostkeys file /Users/snrj/.ssh/known_hosts2 does not exist\r\ndebug3: client_input_hostkeys: 3 server keys: 0 new, 3 retained, 0 incomplete match. 0 to remove\r\ndebug1: client_input_hostkeys: no new or deprecated keys from server\r\ndebug3: client_repledge: enter\r\ndebug3: receive packet: type 4\r\ndebug1: Remote: /home/azureadmin/.ssh/authorized_keys:1: key options: agent-forwarding port-forwarding pty user-rc x11-forwarding\r\ndebug3: receive packet: type 4\r\ndebug1: Remote: /home/azureadmin/.ssh/authorized_keys:1: key options: agent-forwarding port-forwarding pty user-rc x11-forwarding\r\ndebug3: receive packet: type 91\r\ndebug2: channel_input_open_confirmation: channel 2: callback start\r\ndebug2: client_session2_setup: id 2\r\ndebug1: Sending environment.\r\ndebug1: channel 2: setting env LC_CTYPE = "UTF-8"\r\ndebug2: channel 2: request env confirm 0\r\ndebug3: send packet: type 98\r\ndebug1: Sending command: /bin/sh -c \'echo PLATFORM; uname; echo FOUND; command -v \'"\'"\'python3.13\'"\'"\'; command -v \'"\'"\'python3.12\'"\'"\'; command -v \'"\'"\'python3.11\'"\'"\'; command -v \'"\'"\'python3.10\'"\'"\'; command -v \'"\'"\'python3.9\'"\'"\'; command -v \'"\'"\'python3.8\'"\'"\'; command -v \'"\'"\'/usr/bin/python3\'"\'"\'; command -v \'"\'"\'python3\'"\'"\'; echo ENDFOUND && sleep 0\'\r\ndebug2: channel 2: request exec confirm 1\r\ndebug3: send packet: type 98\r\ndebug3: client_repledge: enter\r\ndebug3: mux_session_confirm: sending success reply\r\ndebug2: channel_input_open_confirmation: channel 2: callback done\r\ndebug2: channel 2: open confirm rwindow 0 rmax 32768\r\ndebug1: mux_client_request_session: master session id: 2\r\ndebug2: channel 2: rcvd adjust 2097152\r\ndebug3: receive packet: type 99\r\ndebug2: channel_input_status_confirm: type 99 id 2\r\ndebug2: exec request accepted on channel 2\r\ndebug3: receive packet: type 96\r\ndebug2: channel 2: rcvd eof\r\ndebug2: channel 2: output open -> drain\r\ndebug2: channel 2: obuf empty\r\ndebug2: chan_shutdown_write: channel 2: (i0 o1 sock -1 wfd 7 efd 8 [write])\r\ndebug2: channel 2: output drain -> closed\r\ndebug3: receive packet: type 98\r\ndebug1: client_input_channel_req: channel 2 rtype exit-status reply 0\r\ndebug3: mux_exit_message: channel 2: exit message, exitval 0\r\ndebug3: receive packet: type 98\r\ndebug1: client_input_channel_req: channel 2 rtype eow@openssh.com reply 0\r\ndebug2: channel 2: rcvd eow\r\ndebug2: chan_shutdown_read: channel 2: (i0 o3 sock -1 wfd 6 efd 8 [write])\r\ndebug2: channel 2: input open -> closed\r\ndebug3: receive packet: type 97\r\ndebug2: channel 2: rcvd close\r\ndebug3: channel 2: will not send data after close\r\ndebug2: channel 2: send close\r\ndebug3: send packet: type 97\r\ndebug2: channel 2: is dead\r\ndebug2: channel 2: gc: notify user\r\ndebug3: mux_master_session_cleanup_cb: entering for channel 2\r\ndebug2: channel 1: rcvd close\r\ndebug2: channel 1: output open -> drain\r\ndebug2: chan_shutdown_read: channel 1: (i0 o1 sock 5 wfd 5 efd -1 [closed])\r\ndebug2: channel 1: input open -> closed\r\ndebug2: channel 2: gc: user detached\r\ndebug2: channel 2: is dead\r\ndebug2: channel 2: garbage collecting\r\ndebug1: channel 2: free: client-session, nchannels 3\r\ndebug3: channel 2: status: The following connections are open:\r\n  #1 mux-control (t16 [mux-control] nr0 i3/0 o1/16 e[closed]/0 fd 5/5/-1 sock 5 cc -1 io 0x03/0x00)\r\n  #2 client-session (t4 [session] r0 i3/0 o3/0 e[write]/0 fd -1/-1/8 sock -1 cc -1 io 0x00/0x00)\r\n\r\ndebug2: channel 1: obuf empty\r\ndebug2: chan_shutdown_write: channel 1: (i3 o1 sock 5 wfd 5 efd -1 [closed])\r\ndebug2: channel 1: output drain -> closed\r\ndebug2: channel 1: is dead (local)\r\ndebug2: channel 1: gc: notify user\r\ndebug3: mux_master_control_cleanup_cb: entering for channel 1\r\ndebug2: channel 1: gc: user detached\r\ndebug2: channel 1: is dead (local)\r\ndebug2: channel 1: garbage collecting\r\ndebug1: channel 1: free: mux-control, nchannels 2\r\ndebug3: channel 1: status: The following connections are open:\r\n  #1 mux-control (t16 [mux-control] nr0 i3/0 o3/0 e[closed]/0 fd 5/5/-1 sock 5 cc -1 io 0x00/0x00)\r\n\r\ndebug3: mux_client_read_packet_timeout: read header failed: Broken pipe\r\ndebug2: set_control_persist_exit_time: schedule exit in 60 seconds\r\ndebug2: Received exit status from master 0\r\n')
2025-02-21 02:20:21,052 p=59924 u=snrj n=ansible INFO| <40.68.93.141> ESTABLISH SSH CONNECTION FOR USER: azureadmin
2025-02-21 02:20:21,053 p=59924 u=snrj n=ansible INFO| <40.68.93.141> SSH: EXEC ssh -vvv -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o 'IdentityFile="/Users/snrj/.ssh/id_rsa"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User="azureadmin"' -o ConnectTimeout=30 -o StrictHostKeyChecking=no -o 'ControlPath="/Users/snrj/.ansible/cp/1da56dae57"' 40.68.93.141 '/bin/sh -c '"'"'/usr/bin/python3.10 && sleep 0'"'"''
2025-02-21 02:20:21,180 p=59924 u=snrj n=ansible INFO| <40.68.93.141> (0, b'{"platform_dist_result": [], "osrelease_content": "PRETTY_NAME=\\"Ubuntu 22.04.5 LTS\\"\\nNAME=\\"Ubuntu\\"\\nVERSION_ID=\\"22.04\\"\\nVERSION=\\"22.04.5 LTS (Jammy Jellyfish)\\"\\nVERSION_CODENAME=jammy\\nID=ubuntu\\nID_LIKE=debian\\nHOME_URL=\\"https://www.ubuntu.com/\\"\\nSUPPORT_URL=\\"https://help.ubuntu.com/\\"\\nBUG_REPORT_URL=\\"https://bugs.launchpad.net/ubuntu/\\"\\nPRIVACY_POLICY_URL=\\"https://www.ubuntu.com/legal/terms-and-policies/privacy-policy\\"\\nUBUNTU_CODENAME=jammy\\n"}\n', b"OpenSSH_9.8p1, LibreSSL 3.3.6\r\ndebug1: Reading configuration data /etc/ssh/ssh_config\r\ndebug1: /etc/ssh/ssh_config line 21: include /etc/ssh/ssh_config.d/* matched no files\r\ndebug1: /etc/ssh/ssh_config line 54: Applying options for *\r\ndebug2: resolve_canonicalize: hostname 40.68.93.141 is address\r\ndebug3: expanded UserKnownHostsFile '~/.ssh/known_hosts' -> '/Users/snrj/.ssh/known_hosts'\r\ndebug3: expanded UserKnownHostsFile '~/.ssh/known_hosts2' -> '/Users/snrj/.ssh/known_hosts2'\r\ndebug1: Authenticator provider $SSH_SK_PROVIDER did not resolve; disabling\r\ndebug1: auto-mux: Trying existing master at '/Users/snrj/.ansible/cp/1da56dae57'\r\ndebug2: fd 3 setting O_NONBLOCK\r\ndebug2: mux_client_hello_exchange: master version 4\r\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\r\ndebug3: mux_client_request_session: entering\r\ndebug3: mux_client_request_alive: entering\r\ndebug3: mux_client_request_alive: done pid = 59933\r\ndebug3: mux_client_request_session: session request sent\r\ndebug1: mux_client_request_session: master session id: 2\r\ndebug3: mux_client_read_packet_timeout: read header failed: Broken pipe\r\ndebug2: Received exit status from master 0\r\n")
2025-02-21 02:20:21,181 p=59924 u=snrj n=ansible INFO| <40.68.93.141> Python interpreter discovery fallback (unsupported Linux distribution: ubuntu)
2025-02-21 02:20:21,210 p=59924 u=snrj n=ansible INFO| Using module file /opt/homebrew/Cellar/ansible/11.2.0/libexec/lib/python3.13/site-packages/ansible/modules/setup.py
2025-02-21 02:20:21,210 p=59924 u=snrj n=ansible INFO| Pipelining is enabled.
2025-02-21 02:20:21,210 p=59924 u=snrj n=ansible INFO| <40.68.93.141> ESTABLISH SSH CONNECTION FOR USER: azureadmin
2025-02-21 02:20:21,212 p=59924 u=snrj n=ansible INFO| <40.68.93.141> SSH: EXEC ssh -vvv -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o 'IdentityFile="/Users/snrj/.ssh/id_rsa"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User="azureadmin"' -o ConnectTimeout=30 -o StrictHostKeyChecking=no -o 'ControlPath="/Users/snrj/.ansible/cp/1da56dae57"' 40.68.93.141 '/bin/sh -c '"'"'sudo -H -S -n  -u root /bin/sh -c '"'"'"'"'"'"'"'"'echo BECOME-SUCCESS-xbraqniokfcqxpsosfrftggglyiauqnu ; /usr/bin/python3.10'"'"'"'"'"'"'"'"' && sleep 0'"'"''
2025-02-21 02:20:21,334 p=59924 u=snrj n=ansible INFO| Escalation succeeded
2025-02-21 02:20:23,006 p=59924 u=snrj n=ansible INFO| <40.68.93.141> (0, b'\n{"ansible_facts": {"ansible_system_capabilities_enforced": "False", "ansible_system_capabilities": [], "ansible_virtualization_role": "guest", "ansible_virtualization_type": "VirtualPC", "ansible_virtualization_tech_guest": ["VirtualPC"], "ansible_virtualization_tech_host": [], "ansible_apparmor": {"status": "enabled"}, "ansible_distribution": "Ubuntu", "ansible_distribution_release": "jammy", "ansible_distribution_version": "22.04", "ansible_distribution_major_version": "22", "ansible_distribution_file_path": "/etc/os-release", "ansible_distribution_file_variety": "Debian", "ansible_distribution_file_parsed": true, "ansible_os_family": "Debian", "ansible_loadavg": {"1m": 1.04443359375, "5m": 1.044921875, "15m": 1.0}, "ansible_dns": {"nameservers": ["127.0.0.53"], "options": {"edns0": true, "trust-ad": true}, "search": ["vk4c3odc1pkejafju2hla4lgha.ax.internal.cloudapp.net"]}, "ansible_user_id": "root", "ansible_user_uid": 0, "ansible_user_gid": 0, "ansible_user_gecos": "root", "ansible_user_dir": "/root", "ansible_user_shell": "/bin/bash", "ansible_real_user_id": 0, "ansible_effective_user_id": 0, "ansible_real_group_id": 0, "ansible_effective_group_id": 0, "ansible_is_chroot": false, "ansible_hostnqn": "nqn.2014-08.org.nvmexpress:uuid:963c90c2-4099-4a3a-8e0a-9a02618794a6", "ansible_system": "Linux", "ansible_kernel": "6.8.0-1021-azure", "ansible_kernel_version": "#25~22.04.1-Ubuntu SMP Thu Jan 16 21:37:09 UTC 2025", "ansible_machine": "x86_64", "ansible_python_version": "3.10.12", "ansible_fqdn": "otel-collector.internal.cloudapp.net", "ansible_hostname": "otel-collector", "ansible_nodename": "otel-collector", "ansible_domain": "internal.cloudapp.net", "ansible_userspace_bits": "64", "ansible_architecture": "x86_64", "ansible_userspace_architecture": "x86_64", "ansible_machine_id": "7c9d2540e46c4b8fbce30446aa58519b", "ansible_ssh_host_key_rsa_public": "AAAAB3NzaC1yc2EAAAADAQABAAABgQDC5AEeLU+XN1nuLjs7GsfGj5rNaU/OzDaON0nLx7YYMKHxXxPHC0mLfiTcR0KQ96Lh1Ya+WhZKn9JKZhv5duu8ljPaSmmDTlCQnG5ulFkIKN5qOGEdIpcWxLO0lZP8TswerWFhtyejNjOaqiriRP/BpiLhpcMMpWthfE5SRpKSSTTB3g1hGcQ3me9a4Yus+e/Cj5qa+FBpJWn/XtNGlQbFjLR8XFAgd7Ju/dTCEU21LQgAv2vbCsCOa/N2pjEBte9u6r9BMkm6TVSZS1RpThS27SDRD1J64+MhYoHhIPp4zoUM5/CY9XMXZUBtNMZUvNkMQLdCC/i2pPI2tFogdUOG7tY1/6Xqn0SG9a+N49yeHucykolRvdQNxeCSSb8vJZt3rTtjIvKntIibvSeXPuAxtS9q8RSWFywDJOuNWaNyfykowDdtIDF2RI8JGmo3pD/cvE+4VA1uUPncOF+2ah397ongM2waP36kUWJ6E4DoyEoyriGVRsEcsMpYgfoGXTk=", "ansible_ssh_host_key_rsa_public_keytype": "ssh-rsa", "ansible_ssh_host_key_ecdsa_public": "AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBMPcw5woizS3Z4lcqPiGjQXyNGK8aNwgiVNFB1kpSN1FCALHv3Om5528HH2owtPauzmIQsaZuo4ZMnjbQBHxU90=", "ansible_ssh_host_key_ecdsa_public_keytype": "ecdsa-sha2-nistp256", "ansible_ssh_host_key_ed25519_public": "AAAAC3NzaC1lZDI1NTE5AAAAIGaiYFEIbgPyFndFPQ2PkxXzr1DzlUI9zes1lqCmO9xG", "ansible_ssh_host_key_ed25519_public_keytype": "ssh-ed25519", "ansible_lsb": {"id": "Ubuntu", "description": "Ubuntu 22.04.5 LTS", "release": "22.04", "codename": "jammy", "major_release": "22"}, "ansible_local": {}, "ansible_systemd": {"features": "+PAM +AUDIT +SELINUX +APPARMOR +IMA +SMACK +SECCOMP +GCRYPT +GNUTLS +OPENSSL +ACL +BLKID +CURL +ELFUTILS +FIDO2 +IDN2 -IDN +IPTC +KMOD +LIBCRYPTSETUP +LIBFDISK +PCRE2 -PWQUALITY -P11KIT -QRENCODE +BZIP2 +LZ4 +XZ +ZLIB +ZSTD -XKBCOMMON +UTMP +SYSVINIT default-hierarchy=unified", "version": 249}, "ansible_date_time": {"year": "2025", "month": "02", "weekday": "Friday", "weekday_number": "5", "weeknumber": "07", "day": "21", "hour": "01", "minute": "20", "second": "22", "epoch": "1740100822", "epoch_int": "1740100822", "date": "2025-02-21", "time": "01:20:22", "iso8601_micro": "2025-02-21T01:20:22.419072Z", "iso8601": "2025-02-21T01:20:22Z", "iso8601_basic": "20250221T012022419072", "iso8601_basic_short": "20250221T012022", "tz": "UTC", "tz_dst": "UTC", "tz_offset": "+0000"}, "ansible_env": {"SUDO_GID": "1000", "MAIL": "/var/mail/root", "USER": "root", "HOME": "/root", "LC_CTYPE": "C.UTF-8", "SUDO_UID": "1000", "LOGNAME": "root", "TERM": "unknown", "PATH": "/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin", "LANG": "C.UTF-8", "SUDO_COMMAND": "/bin/sh -c echo BECOME-SUCCESS-xbraqniokfcqxpsosfrftggglyiauqnu ; /usr/bin/python3.10", "SHELL": "/bin/bash", "SUDO_USER": "azureadmin", "PWD": "/home/azureadmin"}, "ansible_fips": false, "ansible_python": {"version": {"major": 3, "minor": 10, "micro": 12, "releaselevel": "final", "serial": 0}, "version_info": [3, 10, 12, "final", 0], "executable": "/usr/bin/python3.10", "has_sslcontext": true, "type": "cpython"}, "ansible_cmdline": {"BOOT_IMAGE": "/boot/vmlinuz-6.8.0-1021-azure", "root": "PARTUUID=0c7009ca-205b-4723-96bf-fb427a929a45", "ro": true, "console": "ttyS0", "earlyprintk": "ttyS0", "nvme_core.io_timeout": "240", "panic": "-1"}, "ansible_proc_cmdline": {"BOOT_IMAGE": "/boot/vmlinuz-6.8.0-1021-azure", "root": "PARTUUID=0c7009ca-205b-4723-96bf-fb427a929a45", "ro": true, "console": ["tty1", "ttyS0"], "earlyprintk": "ttyS0", "nvme_core.io_timeout": "240", "panic": "-1"}, "ansible_iscsi_iqn": "", "ansible_pkg_mgr": "apt", "ansible_selinux_python_present": true, "ansible_selinux": {"status": "disabled"}, "ansible_fibre_channel_wwn": [], "ansible_interfaces": ["lo", "eth0"], "ansible_lo": {"device": "lo", "mtu": 65536, "active": true, "type": "loopback", "promisc": false, "ipv4": {"address": "127.0.0.1", "broadcast": "", "netmask": "255.0.0.0", "network": "127.0.0.0", "prefix": "8"}, "ipv6": [{"address": "::1", "prefix": "128", "scope": "host"}], "features": {"rx_checksumming": "on [fixed]", "tx_checksumming": "on", "tx_checksum_ipv4": "off [fixed]", "tx_checksum_ip_generic": "on [fixed]", "tx_checksum_ipv6": "off [fixed]", "tx_checksum_fcoe_crc": "off [fixed]", "tx_checksum_sctp": "on [fixed]", "scatter_gather": "on", "tx_scatter_gather": "on [fixed]", "tx_scatter_gather_fraglist": "on [fixed]", "tcp_segmentation_offload": "on", "tx_tcp_segmentation": "on", "tx_tcp_ecn_segmentation": "on", "tx_tcp_mangleid_segmentation": "on", "tx_tcp6_segmentation": "on", "generic_segmentation_offload": "on", "generic_receive_offload": "on", "large_receive_offload": "off [fixed]", "rx_vlan_offload": "off [fixed]", "tx_vlan_offload": "off [fixed]", "ntuple_filters": "off [fixed]", "receive_hashing": "off [fixed]", "highdma": "on [fixed]", "rx_vlan_filter": "off [fixed]", "vlan_challenged": "on [fixed]", "tx_lockless": "on [fixed]", "netns_local": "on [fixed]", "tx_gso_robust": "off [fixed]", "tx_fcoe_segmentation": "off [fixed]", "tx_gre_segmentation": "off [fixed]", "tx_gre_csum_segmentation": "off [fixed]", "tx_ipxip4_segmentation": "off [fixed]", "tx_ipxip6_segmentation": "off [fixed]", "tx_udp_tnl_segmentation": "off [fixed]", "tx_udp_tnl_csum_segmentation": "off [fixed]", "tx_gso_partial": "off [fixed]", "tx_tunnel_remcsum_segmentation": "off [fixed]", "tx_sctp_segmentation": "on", "tx_esp_segmentation": "off [fixed]", "tx_udp_segmentation": "on", "tx_gso_list": "on", "fcoe_mtu": "off [fixed]", "tx_nocache_copy": "off [fixed]", "loopback": "on [fixed]", "rx_fcs": "off [fixed]", "rx_all": "off [fixed]", "tx_vlan_stag_hw_insert": "off [fixed]", "rx_vlan_stag_hw_parse": "off [fixed]", "rx_vlan_stag_filter": "off [fixed]", "l2_fwd_offload": "off [fixed]", "hw_tc_offload": "off [fixed]", "esp_hw_offload": "off [fixed]", "esp_tx_csum_hw_offload": "off [fixed]", "rx_udp_tunnel_port_offload": "off [fixed]", "tls_hw_tx_offload": "off [fixed]", "tls_hw_rx_offload": "off [fixed]", "rx_gro_hw": "off [fixed]", "tls_hw_record": "off [fixed]", "rx_gro_list": "off", "macsec_hw_offload": "off [fixed]", "rx_udp_gro_forwarding": "off", "hsr_tag_ins_offload": "off [fixed]", "hsr_tag_rm_offload": "off [fixed]", "hsr_fwd_offload": "off [fixed]", "hsr_dup_offload": "off [fixed]"}, "timestamping": [], "hw_timestamp_filters": []}, "ansible_eth0": {"device": "eth0", "macaddress": "60:45:bd:f2:cb:07", "mtu": 1500, "active": true, "module": "hv_netvsc", "type": "ether", "pciid": "6045bdf2-cb07-6045-bdf2-cb076045bdf2", "speed": 50000, "promisc": false, "ipv4": {"address": "10.0.1.4", "broadcast": "", "netmask": "255.255.255.0", "network": "10.0.1.0", "prefix": "24"}, "ipv6": [{"address": "fe80::6245:bdff:fef2:cb07", "prefix": "64", "scope": "link"}], "features": {"rx_checksumming": "on", "tx_checksumming": "on", "tx_checksum_ipv4": "on", "tx_checksum_ip_generic": "off [fixed]", "tx_checksum_ipv6": "on", "tx_checksum_fcoe_crc": "off [fixed]", "tx_checksum_sctp": "off [fixed]", "scatter_gather": "on", "tx_scatter_gather": "on", "tx_scatter_gather_fraglist": "off [fixed]", "tcp_segmentation_offload": "on", "tx_tcp_segmentation": "on", "tx_tcp_ecn_segmentation": "off [fixed]", "tx_tcp_mangleid_segmentation": "off", "tx_tcp6_segmentation": "on", "generic_segmentation_offload": "on", "generic_receive_offload": "on", "large_receive_offload": "on", "rx_vlan_offload": "on [fixed]", "tx_vlan_offload": "on [fixed]", "ntuple_filters": "off [fixed]", "receive_hashing": "on", "highdma": "on [fixed]", "rx_vlan_filter": "off [fixed]", "vlan_challenged": "off [fixed]", "tx_lockless": "off [fixed]", "netns_local": "off [fixed]", "tx_gso_robust": "off [fixed]", "tx_fcoe_segmentation": "off [fixed]", "tx_gre_segmentation": "off [fixed]", "tx_gre_csum_segmentation": "off [fixed]", "tx_ipxip4_segmentation": "off [fixed]", "tx_ipxip6_segmentation": "off [fixed]", "tx_udp_tnl_segmentation": "off [fixed]", "tx_udp_tnl_csum_segmentation": "off [fixed]", "tx_gso_partial": "off [fixed]", "tx_tunnel_remcsum_segmentation": "off [fixed]", "tx_sctp_segmentation": "off [fixed]", "tx_esp_segmentation": "off [fixed]", "tx_udp_segmentation": "off [fixed]", "tx_gso_list": "off [fixed]", "fcoe_mtu": "off [fixed]", "tx_nocache_copy": "off", "loopback": "off [fixed]", "rx_fcs": "off [fixed]", "rx_all": "off [fixed]", "tx_vlan_stag_hw_insert": "off [fixed]", "rx_vlan_stag_hw_parse": "off [fixed]", "rx_vlan_stag_filter": "off [fixed]", "l2_fwd_offload": "off [fixed]", "hw_tc_offload": "off [fixed]", "esp_hw_offload": "off [fixed]", "esp_tx_csum_hw_offload": "off [fixed]", "rx_udp_tunnel_port_offload": "off [fixed]", "tls_hw_tx_offload": "off [fixed]", "tls_hw_rx_offload": "off [fixed]", "rx_gro_hw": "off [fixed]", "tls_hw_record": "off [fixed]", "rx_gro_list": "off", "macsec_hw_offload": "off [fixed]", "rx_udp_gro_forwarding": "off", "hsr_tag_ins_offload": "off [fixed]", "hsr_tag_rm_offload": "off [fixed]", "hsr_fwd_offload": "off [fixed]", "hsr_dup_offload": "off [fixed]"}, "timestamping": [], "hw_timestamp_filters": []}, "ansible_default_ipv4": {"gateway": "10.0.1.1", "interface": "eth0", "address": "10.0.1.4", "broadcast": "", "netmask": "255.255.255.0", "network": "10.0.1.0", "prefix": "24", "macaddress": "60:45:bd:f2:cb:07", "mtu": 1500, "type": "ether", "alias": "eth0"}, "ansible_default_ipv6": {}, "ansible_all_ipv4_addresses": ["10.0.1.4"], "ansible_all_ipv6_addresses": ["fe80::6245:bdff:fef2:cb07"], "ansible_locally_reachable_ips": {"ipv4": ["10.0.1.4", "127.0.0.0/8", "127.0.0.1"], "ipv6": ["::1", "fe80::6245:bdff:fef2:cb07"]}, "ansible_processor": ["0", "GenuineIntel", "Intel(R) Xeon(R) Platinum 8171M CPU @ 2.60GHz"], "ansible_flags": ["fpu", "vme", "de", "pse", "tsc", "msr", "pae", "mce", "cx8", "apic", "sep", "mtrr", "pge", "mca", "cmov", "pat", "pse36", "clflush", "mmx", "fxsr", "sse", "sse2", "ss", "syscall", "nx", "pdpe1gb", "rdtscp", "lm", "constant_tsc", "rep_good", "nopl", "xtopology", "cpuid", "pni", "pclmulqdq", "ssse3", "fma", "cx16", "pcid", "sse4_1", "sse4_2", "movbe", "popcnt", "aes", "xsave", "avx", "f16c", "rdrand", "hypervisor", "lahf_lm", "abm", "3dnowprefetch", "pti", "fsgsbase", "bmi1", "hle", "avx2", "smep", "bmi2", "erms", "invpcid", "rtm", "avx512f", "avx512dq", "rdseed", "adx", "smap", "clflushopt", "avx512cd", "avx512bw", "avx512vl", "xsaveopt", "xsavec", "xsaves", "md_clear"], "ansible_processor_count": 1, "ansible_processor_cores": 1, "ansible_processor_threads_per_core": 1, "ansible_processor_vcpus": 1, "ansible_processor_nproc": 1, "ansible_memtotal_mb": 3408, "ansible_memfree_mb": 263, "ansible_swaptotal_mb": 0, "ansible_swapfree_mb": 0, "ansible_memory_mb": {"real": {"total": 3408, "used": 3145, "free": 263}, "nocache": {"free": 2632, "used": 776}, "swap": {"total": 0, "free": 0, "used": 0, "cached": 0}}, "ansible_bios_date": "03/08/2024", "ansible_bios_vendor": "Microsoft Corporation", "ansible_bios_version": "Hyper-V UEFI Release v4.1", "ansible_board_asset_tag": "None", "ansible_board_name": "Virtual Machine", "ansible_board_serial": "0000-0012-4010-4225-9822-0877-53", "ansible_board_vendor": "Microsoft Corporation", "ansible_board_version": "Hyper-V UEFI Release v4.1", "ansible_chassis_asset_tag": "7783-7084-3265-9085-8269-3286-77", "ansible_chassis_serial": "2640-4444-9798-0224-1281-7765-05", "ansible_chassis_vendor": "Microsoft Corporation", "ansible_chassis_version": "Hyper-V UEFI Release v4.1", "ansible_form_factor": "Desktop", "ansible_product_name": "Virtual Machine", "ansible_product_serial": "0000-0007-9933-6904-1670-2593-55", "ansible_product_uuid": "6eee26ca-ef5c-429b-ac19-5a3b554d8e49", "ansible_product_version": "Hyper-V UEFI Release v4.1", "ansible_system_vendor": "Microsoft Corporation", "ansible_devices": {"loop1": {"virtual": 1, "links": {"ids": [], "uuids": [], "labels": [], "masters": []}, "vendor": null, "model": null, "sas_address": null, "sas_device_handle": null, "removable": "0", "support_discard": "4096", "partitions": {}, "rotational": "1", "scheduler_mode": "none", "sectorsize": "512", "sectors": 183096, "size": "89.40 MB", "host": "", "holders": []}, "sdb": {"virtual": 1, "links": {"ids": ["scsi-14d534654202020205c1e8b20c977084a8d1522c90366bdce", "scsi-3600224805c1e8b20c97722c90366bdce", "wwn-0x600224805c1e8b20c97722c90366bdce"], "uuids": [], "labels": [], "masters": []}, "vendor": "Msft", "model": "Virtual Disk", "sas_address": null, "sas_device_handle": null, "removable": "0", "support_discard": "2097152", "wwn": "0x600224805c1e8b20c97722c90366bdce", "partitions": {"sdb1": {"links": {"ids": ["scsi-14d534654202020205c1e8b20c977084a8d1522c90366bdce-part1", "scsi-3600224805c1e8b20c97722c90366bdce-part1", "wwn-0x600224805c1e8b20c97722c90366bdce-part1"], "uuids": ["5fbb754a-dd42-4ad8-8bdb-41feb2a25b98"], "labels": [], "masters": []}, "start": "2048", "sectorsize": 512, "sectors": 14675968, "size": "7.00 GB", "uuid": "5fbb754a-dd42-4ad8-8bdb-41feb2a25b98", "holders": []}}, "rotational": "1", "scheduler_mode": "mq-deadline", "sectorsize": "512", "sectors": 14680064, "size": "7.00 GB", "host": "", "holders": []}, "loop6": {"virtual": 1, "links": {"ids": [], "uuids": [], "labels": [], "masters": []}, "vendor": null, "model": null, "sas_address": null, "sas_device_handle": null, "removable": "0", "support_discard": "0", "partitions": {}, "rotational": "1", "scheduler_mode": "none", "sectorsize": "512", "sectors": 0, "size": "0.00 Bytes", "host": "", "holders": []}, "loop4": {"virtual": 1, "links": {"ids": [], "uuids": [], "labels": [], "masters": []}, "vendor": null, "model": null, "sas_address": null, "sas_device_handle": null, "removable": "0", "support_discard": "0", "partitions": {}, "rotational": "1", "scheduler_mode": "none", "sectorsize": "512", "sectors": 0, "size": "0.00 Bytes", "host": "", "holders": []}, "sr0": {"virtual": 1, "links": {"ids": ["scsi-14d534654202020207305e3437703544694957d7ced624a7d"], "uuids": [], "labels": [], "masters": []}, "vendor": "Msft", "model": "Virtual DVD-ROM", "sas_address": null, "sas_device_handle": null, "removable": "1", "support_discard": "0", "partitions": {}, "rotational": "1", "scheduler_mode": "mq-deadline", "sectorsize": "2048", "sectors": 314, "size": "628.00 KB", "host": "", "holders": []}, "loop2": {"virtual": 1, "links": {"ids": [], "uuids": [], "labels": [], "masters": []}, "vendor": null, "model": null, "sas_address": null, "sas_device_handle": null, "removable": "0", "support_discard": "4096", "partitions": {}, "rotational": "1", "scheduler_mode": "none", "sectorsize": "512", "sectors": 91008, "size": "44.44 MB", "host": "", "holders": []}, "loop0": {"virtual": 1, "links": {"ids": [], "uuids": [], "labels": [], "masters": []}, "vendor": null, "model": null, "sas_address": null, "sas_device_handle": null, "removable": "0", "support_discard": "4096", "partitions": {}, "rotational": "1", "scheduler_mode": "none", "sectorsize": "512", "sectors": 130448, "size": "63.70 MB", "host": "", "holders": []}, "loop7": {"virtual": 1, "links": {"ids": [], "uuids": [], "labels": [], "masters": []}, "vendor": null, "model": null, "sas_address": null, "sas_device_handle": null, "removable": "0", "support_discard": "0", "partitions": {}, "rotational": "1", "scheduler_mode": "none", "sectorsize": "512", "sectors": 0, "size": "0.00 Bytes", "host": "", "holders": []}, "sda": {"virtual": 1, "links": {"ids": ["scsi-14d534654202020209c519212543a8f4783142ca3cf480d32", "scsi-3600224809c519212543a2ca3cf480d32", "wwn-0x600224809c519212543a2ca3cf480d32"], "uuids": [], "labels": [], "masters": []}, "vendor": "Msft", "model": "Virtual Disk", "sas_address": null, "sas_device_handle": null, "removable": "0", "support_discard": "2097152", "wwn": "0x600224809c519212543a2ca3cf480d32", "partitions": {"sda14": {"links": {"ids": ["scsi-14d534654202020209c519212543a8f4783142ca3cf480d32-part14", "scsi-3600224809c519212543a2ca3cf480d32-part14", "wwn-0x600224809c519212543a2ca3cf480d32-part14"], "uuids": [], "labels": [], "masters": []}, "start": "2048", "sectorsize": 512, "sectors": 8192, "size": "4.00 MB", "uuid": null, "holders": []}, "sda15": {"links": {"ids": ["scsi-14d534654202020209c519212543a8f4783142ca3cf480d32-part15", "scsi-3600224809c519212543a2ca3cf480d32-part15", "wwn-0x600224809c519212543a2ca3cf480d32-part15"], "uuids": ["E8AE-90AB"], "labels": ["UEFI"], "masters": []}, "start": "10240", "sectorsize": 512, "sectors": 217088, "size": "106.00 MB", "uuid": "E8AE-90AB", "holders": []}, "sda1": {"links": {"ids": ["scsi-14d534654202020209c519212543a8f4783142ca3cf480d32-part1", "scsi-3600224809c519212543a2ca3cf480d32-part1", "wwn-0x600224809c519212543a2ca3cf480d32-part1"], "uuids": ["721ea9a7-9d5f-4501-82e8-5ba059b492e5"], "labels": ["cloudimg-rootfs"], "masters": []}, "start": "227328", "sectorsize": 512, "sectors": 62689247, "size": "29.89 GB", "uuid": "721ea9a7-9d5f-4501-82e8-5ba059b492e5", "holders": []}}, "rotational": "1", "scheduler_mode": "mq-deadline", "sectorsize": "512", "sectors": 62916608, "size": "30.00 GB", "host": "", "holders": []}, "loop5": {"virtual": 1, "links": {"ids": [], "uuids": [], "labels": [], "masters": []}, "vendor": null, "model": null, "sas_address": null, "sas_device_handle": null, "removable": "0", "support_discard": "0", "partitions": {}, "rotational": "1", "scheduler_mode": "none", "sectorsize": "512", "sectors": 0, "size": "0.00 Bytes", "host": "", "holders": []}, "loop3": {"virtual": 1, "links": {"ids": [], "uuids": [], "labels": [], "masters": []}, "vendor": null, "model": null, "sas_address": null, "sas_device_handle": null, "removable": "0", "support_discard": "4096", "partitions": {}, "rotational": "1", "scheduler_mode": "none", "sectorsize": "512", "sectors": 0, "size": "0.00 Bytes", "host": "", "holders": []}}, "ansible_device_links": {"ids": {"sr0": ["scsi-14d534654202020207305e3437703544694957d7ced624a7d"], "sda": ["scsi-14d534654202020209c519212543a8f4783142ca3cf480d32", "scsi-3600224809c519212543a2ca3cf480d32", "wwn-0x600224809c519212543a2ca3cf480d32"], "sdb": ["scsi-14d534654202020205c1e8b20c977084a8d1522c90366bdce", "scsi-3600224805c1e8b20c97722c90366bdce", "wwn-0x600224805c1e8b20c97722c90366bdce"], "sda14": ["scsi-14d534654202020209c519212543a8f4783142ca3cf480d32-part14", "scsi-3600224809c519212543a2ca3cf480d32-part14", "wwn-0x600224809c519212543a2ca3cf480d32-part14"], "sda15": ["scsi-14d534654202020209c519212543a8f4783142ca3cf480d32-part15", "scsi-3600224809c519212543a2ca3cf480d32-part15", "wwn-0x600224809c519212543a2ca3cf480d32-part15"], "sda1": ["scsi-14d534654202020209c519212543a8f4783142ca3cf480d32-part1", "scsi-3600224809c519212543a2ca3cf480d32-part1", "wwn-0x600224809c519212543a2ca3cf480d32-part1"], "sdb1": ["scsi-14d534654202020205c1e8b20c977084a8d1522c90366bdce-part1", "scsi-3600224805c1e8b20c97722c90366bdce-part1", "wwn-0x600224805c1e8b20c97722c90366bdce-part1"]}, "uuids": {"sda1": ["721ea9a7-9d5f-4501-82e8-5ba059b492e5"], "sda15": ["E8AE-90AB"], "sdb1": ["5fbb754a-dd42-4ad8-8bdb-41feb2a25b98"]}, "labels": {"sda15": ["UEFI"], "sda1": ["cloudimg-rootfs"]}, "masters": {}}, "ansible_uptime_seconds": 10720, "ansible_lvm": {"lvs": {}, "vgs": {}, "pvs": {}}, "ansible_mounts": [{"mount": "/", "device": "/dev/root", "fstype": "ext4", "options": "rw,relatime,discard,errors=remount-ro", "dump": 0, "passno": 0, "size_total": 31025332224, "size_available": 26600275968, "block_size": 4096, "block_total": 7574544, "block_available": 6494208, "block_used": 1080336, "inode_total": 3870720, "inode_available": 3723336, "inode_used": 147384, "uuid": "721ea9a7-9d5f-4501-82e8-5ba059b492e5"}, {"mount": "/snap/core20/2434", "device": "/dev/loop0", "fstype": "squashfs", "options": "ro,nodev,relatime,errors=continue,threads=single", "dump": 0, "passno": 0, "size_total": 66846720, "size_available": 0, "block_size": 131072, "block_total": 510, "block_available": 0, "block_used": 510, "inode_total": 11851, "inode_available": 0, "inode_used": 11851, "uuid": "N/A"}, {"mount": "/snap/lxd/31333", "device": "/dev/loop1", "fstype": "squashfs", "options": "ro,nodev,relatime,errors=continue,threads=single", "dump": 0, "passno": 0, "size_total": 93847552, "size_available": 0, "block_size": 131072, "block_total": 716, "block_available": 0, "block_used": 716, "inode_total": 961, "inode_available": 0, "inode_used": 961, "uuid": "N/A"}, {"mount": "/snap/snapd/23545", "device": "/dev/loop2", "fstype": "squashfs", "options": "ro,nodev,relatime,errors=continue,threads=single", "dump": 0, "passno": 0, "size_total": 46661632, "size_available": 0, "block_size": 131072, "block_total": 356, "block_available": 0, "block_used": 356, "inode_total": 608, "inode_available": 0, "inode_used": 608, "uuid": "N/A"}, {"mount": "/boot/efi", "device": "/dev/sda15", "fstype": "vfat", "options": "rw,relatime,fmask=0077,dmask=0077,codepage=437,iocharset=iso8859-1,shortname=mixed,errors=remount-ro", "dump": 0, "passno": 0, "size_total": 109395456, "size_available": 103057408, "block_size": 512, "block_total": 213663, "block_available": 201284, "block_used": 12379, "inode_total": 0, "inode_available": 0, "inode_used": 0, "uuid": "E8AE-90AB"}, {"mount": "/mnt", "device": "/dev/sdb1", "fstype": "ext4", "options": "rw,relatime", "dump": 0, "passno": 0, "size_total": 7296020480, "size_available": 6903513088, "block_size": 4096, "block_total": 1781255, "block_available": 1685428, "block_used": 95827, "inode_total": 458752, "inode_available": 458740, "inode_used": 12, "uuid": "5fbb754a-dd42-4ad8-8bdb-41feb2a25b98"}], "ansible_service_mgr": "systemd", "gather_subset": ["all"], "module_setup": true}, "invocation": {"module_args": {"gather_subset": ["all"], "gather_timeout": 10, "filter": [], "fact_path": "/etc/ansible/facts.d"}}}\n', b"OpenSSH_9.8p1, LibreSSL 3.3.6\r\ndebug1: Reading configuration data /etc/ssh/ssh_config\r\ndebug1: /etc/ssh/ssh_config line 21: include /etc/ssh/ssh_config.d/* matched no files\r\ndebug1: /etc/ssh/ssh_config line 54: Applying options for *\r\ndebug2: resolve_canonicalize: hostname 40.68.93.141 is address\r\ndebug3: expanded UserKnownHostsFile '~/.ssh/known_hosts' -> '/Users/snrj/.ssh/known_hosts'\r\ndebug3: expanded UserKnownHostsFile '~/.ssh/known_hosts2' -> '/Users/snrj/.ssh/known_hosts2'\r\ndebug1: Authenticator provider $SSH_SK_PROVIDER did not resolve; disabling\r\ndebug1: auto-mux: Trying existing master at '/Users/snrj/.ansible/cp/1da56dae57'\r\ndebug2: fd 3 setting O_NONBLOCK\r\ndebug2: mux_client_hello_exchange: master version 4\r\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\r\ndebug3: mux_client_request_session: entering\r\ndebug3: mux_client_request_alive: entering\r\ndebug3: mux_client_request_alive: done pid = 59933\r\ndebug3: mux_client_request_session: session request sent\r\ndebug1: mux_client_request_session: master session id: 2\r\ndebug3: mux_client_read_packet_timeout: read header failed: Broken pipe\r\ndebug2: Received exit status from master 0\r\n")
2025-02-21 02:20:23,043 p=59924 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 40.68.93.141 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-21 02:20:23,043 p=59924 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:20:23,048 p=59924 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/vars.yml'
2025-02-21 02:20:23,049 p=59924 u=snrj n=ansible INFO| TASK [flask_app : Update apt package index] *****************************************************************************************************************
2025-02-21 02:20:23,049 p=59924 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:3
2025-02-21 02:20:23,127 p=59924 u=snrj n=ansible INFO| Using module file /opt/homebrew/Cellar/ansible/11.2.0/libexec/lib/python3.13/site-packages/ansible/modules/apt.py
2025-02-21 02:20:23,127 p=59924 u=snrj n=ansible INFO| Pipelining is enabled.
2025-02-21 02:20:23,127 p=59924 u=snrj n=ansible INFO| <40.68.93.141> ESTABLISH SSH CONNECTION FOR USER: azureadmin
2025-02-21 02:20:23,128 p=59924 u=snrj n=ansible INFO| <40.68.93.141> SSH: EXEC ssh -vvv -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o 'IdentityFile="/Users/snrj/.ssh/id_rsa"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User="azureadmin"' -o ConnectTimeout=30 -o StrictHostKeyChecking=no -o 'ControlPath="/Users/snrj/.ansible/cp/1da56dae57"' 40.68.93.141 '/bin/sh -c '"'"'sudo -H -S -n  -u root /bin/sh -c '"'"'"'"'"'"'"'"'echo BECOME-SUCCESS-ljysdrgutdzdofsoubrnuuftppigvcso ; /usr/bin/python3.10'"'"'"'"'"'"'"'"' && sleep 0'"'"''
2025-02-21 02:20:23,217 p=59924 u=snrj n=ansible INFO| Escalation succeeded
2025-02-21 02:20:27,330 p=59924 u=snrj n=ansible INFO| <40.68.93.141> (0, b'\n{"changed": true, "cache_updated": true, "cache_update_time": 1740100826, "invocation": {"module_args": {"update_cache": true, "state": "present", "update_cache_retries": 5, "update_cache_retry_max_delay": 12, "cache_valid_time": 0, "purge": false, "force": false, "upgrade": null, "dpkg_options": "force-confdef,force-confold", "autoremove": false, "autoclean": false, "fail_on_autoremove": false, "only_upgrade": false, "force_apt_get": false, "clean": false, "allow_unauthenticated": false, "allow_downgrade": false, "allow_change_held_packages": false, "lock_timeout": 60, "package": null, "deb": null, "default_release": null, "install_recommends": null, "policy_rc_d": null}}}\n', b"OpenSSH_9.8p1, LibreSSL 3.3.6\r\ndebug1: Reading configuration data /etc/ssh/ssh_config\r\ndebug1: /etc/ssh/ssh_config line 21: include /etc/ssh/ssh_config.d/* matched no files\r\ndebug1: /etc/ssh/ssh_config line 54: Applying options for *\r\ndebug2: resolve_canonicalize: hostname 40.68.93.141 is address\r\ndebug3: expanded UserKnownHostsFile '~/.ssh/known_hosts' -> '/Users/snrj/.ssh/known_hosts'\r\ndebug3: expanded UserKnownHostsFile '~/.ssh/known_hosts2' -> '/Users/snrj/.ssh/known_hosts2'\r\ndebug1: Authenticator provider $SSH_SK_PROVIDER did not resolve; disabling\r\ndebug1: auto-mux: Trying existing master at '/Users/snrj/.ansible/cp/1da56dae57'\r\ndebug2: fd 3 setting O_NONBLOCK\r\ndebug2: mux_client_hello_exchange: master version 4\r\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\r\ndebug3: mux_client_request_session: entering\r\ndebug3: mux_client_request_alive: entering\r\ndebug3: mux_client_request_alive: done pid = 59933\r\ndebug3: mux_client_request_session: session request sent\r\ndebug1: mux_client_request_session: master session id: 2\r\ndebug3: mux_client_read_packet_timeout: read header failed: Broken pipe\r\ndebug2: Received exit status from master 0\r\n")
2025-02-21 02:20:27,335 p=59924 u=snrj n=ansible INFO| changed: [40.68.93.141] => {
    "cache_update_time": 1740100826,
    "cache_updated": true,
    "changed": true,
    "invocation": {
        "module_args": {
            "allow_change_held_packages": false,
            "allow_downgrade": false,
            "allow_unauthenticated": false,
            "autoclean": false,
            "autoremove": false,
            "cache_valid_time": 0,
            "clean": false,
            "deb": null,
            "default_release": null,
            "dpkg_options": "force-confdef,force-confold",
            "fail_on_autoremove": false,
            "force": false,
            "force_apt_get": false,
            "install_recommends": null,
            "lock_timeout": 60,
            "only_upgrade": false,
            "package": null,
            "policy_rc_d": null,
            "purge": false,
            "state": "present",
            "update_cache": true,
            "update_cache_retries": 5,
            "update_cache_retry_max_delay": 12,
            "upgrade": null
        }
    }
}
2025-02-21 02:20:27,344 p=59924 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/vars.yml'
2025-02-21 02:20:27,345 p=59924 u=snrj n=ansible INFO| TASK [flask_app : Ensure the 'universe' repository is enabled] **********************************************************************************************
2025-02-21 02:20:27,345 p=59924 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:7
2025-02-21 02:20:27,433 p=59924 u=snrj n=ansible INFO| Using module file /opt/homebrew/Cellar/ansible/11.2.0/libexec/lib/python3.13/site-packages/ansible/modules/apt_repository.py
2025-02-21 02:20:27,433 p=59924 u=snrj n=ansible INFO| Pipelining is enabled.
2025-02-21 02:20:27,433 p=59924 u=snrj n=ansible INFO| <40.68.93.141> ESTABLISH SSH CONNECTION FOR USER: azureadmin
2025-02-21 02:20:27,433 p=59924 u=snrj n=ansible INFO| <40.68.93.141> SSH: EXEC ssh -vvv -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o 'IdentityFile="/Users/snrj/.ssh/id_rsa"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User="azureadmin"' -o ConnectTimeout=30 -o StrictHostKeyChecking=no -o 'ControlPath="/Users/snrj/.ansible/cp/1da56dae57"' 40.68.93.141 '/bin/sh -c '"'"'sudo -H -S -n  -u root /bin/sh -c '"'"'"'"'"'"'"'"'echo BECOME-SUCCESS-tlsqtctyxzpsxcmfcgcjcnadjrjqospr ; /usr/bin/python3.10'"'"'"'"'"'"'"'"' && sleep 0'"'"''
2025-02-21 02:20:27,557 p=59924 u=snrj n=ansible INFO| Escalation succeeded
2025-02-21 02:20:28,310 p=59924 u=snrj n=ansible INFO| <40.68.93.141> (0, b'\n{"changed": false, "repo": "deb http://archive.ubuntu.com/ubuntu/ jammy universe", "sources_added": [], "sources_removed": [], "state": "present", "diff": [], "invocation": {"module_args": {"repo": "deb http://archive.ubuntu.com/ubuntu/ jammy universe", "state": "present", "update_cache": true, "update_cache_retries": 5, "update_cache_retry_max_delay": 12, "install_python_apt": true, "validate_certs": true, "mode": null, "filename": null, "codename": null}}}\n', b"OpenSSH_9.8p1, LibreSSL 3.3.6\r\ndebug1: Reading configuration data /etc/ssh/ssh_config\r\ndebug1: /etc/ssh/ssh_config line 21: include /etc/ssh/ssh_config.d/* matched no files\r\ndebug1: /etc/ssh/ssh_config line 54: Applying options for *\r\ndebug2: resolve_canonicalize: hostname 40.68.93.141 is address\r\ndebug3: expanded UserKnownHostsFile '~/.ssh/known_hosts' -> '/Users/snrj/.ssh/known_hosts'\r\ndebug3: expanded UserKnownHostsFile '~/.ssh/known_hosts2' -> '/Users/snrj/.ssh/known_hosts2'\r\ndebug1: Authenticator provider $SSH_SK_PROVIDER did not resolve; disabling\r\ndebug1: auto-mux: Trying existing master at '/Users/snrj/.ansible/cp/1da56dae57'\r\ndebug2: fd 3 setting O_NONBLOCK\r\ndebug2: mux_client_hello_exchange: master version 4\r\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\r\ndebug3: mux_client_request_session: entering\r\ndebug3: mux_client_request_alive: entering\r\ndebug3: mux_client_request_alive: done pid = 59933\r\ndebug3: mux_client_request_session: session request sent\r\ndebug1: mux_client_request_session: master session id: 2\r\ndebug3: mux_client_read_packet_timeout: read header failed: Broken pipe\r\ndebug2: Received exit status from master 0\r\n")
2025-02-21 02:20:28,315 p=59924 u=snrj n=ansible INFO| ok: [40.68.93.141] => {
    "changed": false,
    "diff": [],
    "invocation": {
        "module_args": {
            "codename": null,
            "filename": null,
            "install_python_apt": true,
            "mode": null,
            "repo": "deb http://archive.ubuntu.com/ubuntu/ jammy universe",
            "state": "present",
            "update_cache": true,
            "update_cache_retries": 5,
            "update_cache_retry_max_delay": 12,
            "validate_certs": true
        }
    },
    "repo": "deb http://archive.ubuntu.com/ubuntu/ jammy universe",
    "sources_added": [],
    "sources_removed": [],
    "state": "present"
}
2025-02-21 02:20:28,325 p=59924 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/vars.yml'
2025-02-21 02:20:28,326 p=59924 u=snrj n=ansible INFO| TASK [flask_app : Install python3-pip] **********************************************************************************************************************
2025-02-21 02:20:28,326 p=59924 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:12
2025-02-21 02:20:28,367 p=59924 u=snrj n=ansible INFO| Using module file /opt/homebrew/Cellar/ansible/11.2.0/libexec/lib/python3.13/site-packages/ansible/modules/apt.py
2025-02-21 02:20:28,368 p=59924 u=snrj n=ansible INFO| Pipelining is enabled.
2025-02-21 02:20:28,368 p=59924 u=snrj n=ansible INFO| <40.68.93.141> ESTABLISH SSH CONNECTION FOR USER: azureadmin
2025-02-21 02:20:28,368 p=59924 u=snrj n=ansible INFO| <40.68.93.141> SSH: EXEC ssh -vvv -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o 'IdentityFile="/Users/snrj/.ssh/id_rsa"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User="azureadmin"' -o ConnectTimeout=30 -o StrictHostKeyChecking=no -o 'ControlPath="/Users/snrj/.ansible/cp/1da56dae57"' 40.68.93.141 '/bin/sh -c '"'"'sudo -H -S -n  -u root /bin/sh -c '"'"'"'"'"'"'"'"'echo BECOME-SUCCESS-hysjafjhycawwgcvvavvyyvzfpopdrdz ; /usr/bin/python3.10'"'"'"'"'"'"'"'"' && sleep 0'"'"''
2025-02-21 02:20:28,473 p=59924 u=snrj n=ansible INFO| Escalation succeeded
2025-02-21 02:20:30,396 p=59924 u=snrj n=ansible INFO| <40.68.93.141> (0, b'\n{"changed": false, "cache_updated": false, "cache_update_time": 1740100826, "invocation": {"module_args": {"name": "python3-pip", "state": "present", "package": ["python3-pip"], "update_cache_retries": 5, "update_cache_retry_max_delay": 12, "cache_valid_time": 0, "purge": false, "force": false, "upgrade": null, "dpkg_options": "force-confdef,force-confold", "autoremove": false, "autoclean": false, "fail_on_autoremove": false, "only_upgrade": false, "force_apt_get": false, "clean": false, "allow_unauthenticated": false, "allow_downgrade": false, "allow_change_held_packages": false, "lock_timeout": 60, "update_cache": null, "deb": null, "default_release": null, "install_recommends": null, "policy_rc_d": null}}}\n', b"OpenSSH_9.8p1, LibreSSL 3.3.6\r\ndebug1: Reading configuration data /etc/ssh/ssh_config\r\ndebug1: /etc/ssh/ssh_config line 21: include /etc/ssh/ssh_config.d/* matched no files\r\ndebug1: /etc/ssh/ssh_config line 54: Applying options for *\r\ndebug2: resolve_canonicalize: hostname 40.68.93.141 is address\r\ndebug3: expanded UserKnownHostsFile '~/.ssh/known_hosts' -> '/Users/snrj/.ssh/known_hosts'\r\ndebug3: expanded UserKnownHostsFile '~/.ssh/known_hosts2' -> '/Users/snrj/.ssh/known_hosts2'\r\ndebug1: Authenticator provider $SSH_SK_PROVIDER did not resolve; disabling\r\ndebug1: auto-mux: Trying existing master at '/Users/snrj/.ansible/cp/1da56dae57'\r\ndebug2: fd 3 setting O_NONBLOCK\r\ndebug2: mux_client_hello_exchange: master version 4\r\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\r\ndebug3: mux_client_request_session: entering\r\ndebug3: mux_client_request_alive: entering\r\ndebug3: mux_client_request_alive: done pid = 59933\r\ndebug3: mux_client_request_session: session request sent\r\ndebug1: mux_client_request_session: master session id: 2\r\ndebug3: mux_client_read_packet_timeout: read header failed: Broken pipe\r\ndebug2: Received exit status from master 0\r\n")
2025-02-21 02:20:30,401 p=59924 u=snrj n=ansible INFO| ok: [40.68.93.141] => {
    "cache_update_time": 1740100826,
    "cache_updated": false,
    "changed": false,
    "invocation": {
        "module_args": {
            "allow_change_held_packages": false,
            "allow_downgrade": false,
            "allow_unauthenticated": false,
            "autoclean": false,
            "autoremove": false,
            "cache_valid_time": 0,
            "clean": false,
            "deb": null,
            "default_release": null,
            "dpkg_options": "force-confdef,force-confold",
            "fail_on_autoremove": false,
            "force": false,
            "force_apt_get": false,
            "install_recommends": null,
            "lock_timeout": 60,
            "name": "python3-pip",
            "only_upgrade": false,
            "package": [
                "python3-pip"
            ],
            "policy_rc_d": null,
            "purge": false,
            "state": "present",
            "update_cache": null,
            "update_cache_retries": 5,
            "update_cache_retry_max_delay": 12,
            "upgrade": null
        }
    }
}
2025-02-21 02:20:30,415 p=59924 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/vars.yml'
2025-02-21 02:20:30,416 p=59924 u=snrj n=ansible INFO| TASK [flask_app : Install required Python packages] *********************************************************************************************************
2025-02-21 02:20:30,416 p=59924 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:17
2025-02-21 02:20:30,493 p=59924 u=snrj n=ansible INFO| Using module file /opt/homebrew/Cellar/ansible/11.2.0/libexec/lib/python3.13/site-packages/ansible/modules/pip.py
2025-02-21 02:20:30,493 p=59924 u=snrj n=ansible INFO| Pipelining is enabled.
2025-02-21 02:20:30,493 p=59924 u=snrj n=ansible INFO| <40.68.93.141> ESTABLISH SSH CONNECTION FOR USER: azureadmin
2025-02-21 02:20:30,493 p=59924 u=snrj n=ansible INFO| <40.68.93.141> SSH: EXEC ssh -vvv -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o 'IdentityFile="/Users/snrj/.ssh/id_rsa"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User="azureadmin"' -o ConnectTimeout=30 -o StrictHostKeyChecking=no -o 'ControlPath="/Users/snrj/.ansible/cp/1da56dae57"' 40.68.93.141 '/bin/sh -c '"'"'sudo -H -S -n  -u root /bin/sh -c '"'"'"'"'"'"'"'"'echo BECOME-SUCCESS-kufyflqlltjeuxldyttugnbcnwovzvke ; /usr/bin/python3.10'"'"'"'"'"'"'"'"' && sleep 0'"'"''
2025-02-21 02:20:30,581 p=59924 u=snrj n=ansible INFO| Escalation succeeded
2025-02-21 02:20:34,037 p=59924 u=snrj n=ansible INFO| <40.68.93.141> (0, b'\n{"changed": false, "cmd": ["/usr/bin/python3.10", "-m", "pip.__main__", "install", "fastapi", "uvicorn", "azure-monitor-opentelemetry"], "name": ["fastapi", "uvicorn", "azure-monitor-opentelemetry"], "version": null, "state": "present", "requirements": null, "virtualenv": null, "stdout": "Requirement already satisfied: fastapi in /usr/local/lib/python3.10/dist-packages (0.115.8)\\nRequirement already satisfied: uvicorn in /usr/local/lib/python3.10/dist-packages (0.34.0)\\nRequirement already satisfied: azure-monitor-opentelemetry in /usr/local/lib/python3.10/dist-packages (1.6.5)\\nRequirement already satisfied: pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4 in /usr/local/lib/python3.10/dist-packages (from fastapi) (2.10.6)\\nRequirement already satisfied: typing-extensions>=4.8.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (4.12.2)\\nRequirement already satisfied: starlette<0.46.0,>=0.40.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (0.45.3)\\nRequirement already satisfied: h11>=0.8 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (0.14.0)\\nRequirement already satisfied: click>=7.0 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (8.1.8)\\nRequirement already satisfied: azure-monitor-opentelemetry-exporter~=1.0.0b31 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b33)\\nRequirement already satisfied: azure-core<2.0.0,>=1.28.0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.32.0)\\nRequirement already satisfied: opentelemetry-instrumentation-urllib3~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\\nRequirement already satisfied: opentelemetry-sdk~=1.28 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.30.0)\\nRequirement already satisfied: opentelemetry-instrumentation-fastapi~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\\nRequirement already satisfied: opentelemetry-resource-detector-azure~=0.1.4 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.1.5)\\nRequirement already satisfied: opentelemetry-instrumentation-flask~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\\nRequirement already satisfied: opentelemetry-instrumentation-requests~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\\nRequirement already satisfied: opentelemetry-instrumentation-django~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\\nRequirement already satisfied: azure-core-tracing-opentelemetry~=1.0.0b11 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b11)\\nRequirement already satisfied: opentelemetry-instrumentation-psycopg2~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\\nRequirement already satisfied: opentelemetry-instrumentation-urllib~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\\nRequirement already satisfied: requests>=2.21.0 in /usr/local/lib/python3.10/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (2.32.3)\\nRequirement already satisfied: six>=1.11.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.16.0)\\nRequirement already satisfied: opentelemetry-api<2.0.0,>=1.12.0 in /usr/local/lib/python3.10/dist-packages (from azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (1.30.0)\\nRequirement already satisfied: msrest>=0.6.10 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.1)\\nRequirement already satisfied: fixedint==0.1.6 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.1.6)\\nRequirement already satisfied: psutil~=5.9 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (5.9.8)\\nRequirement already satisfied: opentelemetry-instrumentation==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\\nRequirement already satisfied: opentelemetry-util-http==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\\nRequirement already satisfied: opentelemetry-instrumentation-wsgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\\nRequirement already satisfied: opentelemetry-semantic-conventions==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\\nRequirement already satisfied: packaging>=18.0 in /usr/lib/python3/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (21.3)\\nRequirement already satisfied: wrapt<2.0.0,>=1.0.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.17.2)\\nRequirement already satisfied: deprecated>=1.2.6 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-semantic-conventions==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.2.18)\\nRequirement already satisfied: importlib-metadata<=8.5.0,>=6.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (8.5.0)\\nRequirement already satisfied: opentelemetry-instrumentation-asgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\\nRequirement already satisfied: asgiref~=3.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-asgi==0.51b0->opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (3.8.1)\\nRequirement already satisfied: opentelemetry-instrumentation-dbapi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-psycopg2~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\\nRequirement already satisfied: pydantic-core==2.27.2 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (2.27.2)\\nRequirement already satisfied: annotated-types>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (0.7.0)\\nRequirement already satisfied: anyio<5,>=3.6.2 in /usr/local/lib/python3.10/dist-packages (from starlette<0.46.0,>=0.40.0->fastapi) (4.8.0)\\nRequirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.2.2)\\nRequirement already satisfied: sniffio>=1.1 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.3.1)\\nRequirement already satisfied: idna>=2.8 in /usr/lib/python3/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (3.3)\\nRequirement already satisfied: isodate>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.2)\\nRequirement already satisfied: requests-oauthlib>=0.5.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2.0.0)\\nRequirement already satisfied: certifi>=2017.4.17 in /usr/lib/python3/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2020.6.20)\\nRequirement already satisfied: urllib3<3,>=1.21.1 in /usr/lib/python3/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.26.5)\\nRequirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (3.4.1)\\nRequirement already satisfied: zipp>=3.20 in /usr/local/lib/python3.10/dist-packages (from importlib-metadata<=8.5.0,>=6.0->opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (3.21.0)\\nRequirement already satisfied: oauthlib>=3.0.0 in /usr/lib/python3/dist-packages (from requests-oauthlib>=0.5.0->msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (3.2.0)\\n", "stderr": "WARNING: Running pip as the \'root\' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\\n", "invocation": {"module_args": {"name": ["fastapi", "uvicorn", "azure-monitor-opentelemetry"], "state": "present", "virtualenv_site_packages": false, "virtualenv_command": "virtualenv", "editable": false, "break_system_packages": false, "version": null, "requirements": null, "virtualenv": null, "virtualenv_python": null, "extra_args": null, "chdir": null, "executable": null, "umask": null}}}\n', b"OpenSSH_9.8p1, LibreSSL 3.3.6\r\ndebug1: Reading configuration data /etc/ssh/ssh_config\r\ndebug1: /etc/ssh/ssh_config line 21: include /etc/ssh/ssh_config.d/* matched no files\r\ndebug1: /etc/ssh/ssh_config line 54: Applying options for *\r\ndebug2: resolve_canonicalize: hostname 40.68.93.141 is address\r\ndebug3: expanded UserKnownHostsFile '~/.ssh/known_hosts' -> '/Users/snrj/.ssh/known_hosts'\r\ndebug3: expanded UserKnownHostsFile '~/.ssh/known_hosts2' -> '/Users/snrj/.ssh/known_hosts2'\r\ndebug1: Authenticator provider $SSH_SK_PROVIDER did not resolve; disabling\r\ndebug1: auto-mux: Trying existing master at '/Users/snrj/.ansible/cp/1da56dae57'\r\ndebug2: fd 3 setting O_NONBLOCK\r\ndebug2: mux_client_hello_exchange: master version 4\r\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\r\ndebug3: mux_client_request_session: entering\r\ndebug3: mux_client_request_alive: entering\r\ndebug3: mux_client_request_alive: done pid = 59933\r\ndebug3: mux_client_request_session: session request sent\r\ndebug1: mux_client_request_session: master session id: 2\r\ndebug3: mux_client_read_packet_timeout: read header failed: Broken pipe\r\ndebug2: Received exit status from master 0\r\n")
2025-02-21 02:20:34,044 p=59924 u=snrj n=ansible INFO| ok: [40.68.93.141] => {
    "changed": false,
    "cmd": [
        "/usr/bin/python3.10",
        "-m",
        "pip.__main__",
        "install",
        "fastapi",
        "uvicorn",
        "azure-monitor-opentelemetry"
    ],
    "invocation": {
        "module_args": {
            "break_system_packages": false,
            "chdir": null,
            "editable": false,
            "executable": null,
            "extra_args": null,
            "name": [
                "fastapi",
                "uvicorn",
                "azure-monitor-opentelemetry"
            ],
            "requirements": null,
            "state": "present",
            "umask": null,
            "version": null,
            "virtualenv": null,
            "virtualenv_command": "virtualenv",
            "virtualenv_python": null,
            "virtualenv_site_packages": false
        }
    },
    "name": [
        "fastapi",
        "uvicorn",
        "azure-monitor-opentelemetry"
    ],
    "requirements": null,
    "state": "present",
    "stderr": "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n",
    "stderr_lines": [
        "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv"
    ],
    "stdout": "Requirement already satisfied: fastapi in /usr/local/lib/python3.10/dist-packages (0.115.8)\nRequirement already satisfied: uvicorn in /usr/local/lib/python3.10/dist-packages (0.34.0)\nRequirement already satisfied: azure-monitor-opentelemetry in /usr/local/lib/python3.10/dist-packages (1.6.5)\nRequirement already satisfied: pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4 in /usr/local/lib/python3.10/dist-packages (from fastapi) (2.10.6)\nRequirement already satisfied: typing-extensions>=4.8.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (4.12.2)\nRequirement already satisfied: starlette<0.46.0,>=0.40.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (0.45.3)\nRequirement already satisfied: h11>=0.8 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (0.14.0)\nRequirement already satisfied: click>=7.0 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (8.1.8)\nRequirement already satisfied: azure-monitor-opentelemetry-exporter~=1.0.0b31 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b33)\nRequirement already satisfied: azure-core<2.0.0,>=1.28.0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.32.0)\nRequirement already satisfied: opentelemetry-instrumentation-urllib3~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-sdk~=1.28 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.30.0)\nRequirement already satisfied: opentelemetry-instrumentation-fastapi~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-resource-detector-azure~=0.1.4 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.1.5)\nRequirement already satisfied: opentelemetry-instrumentation-flask~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-requests~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-django~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: azure-core-tracing-opentelemetry~=1.0.0b11 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b11)\nRequirement already satisfied: opentelemetry-instrumentation-psycopg2~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-urllib~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: requests>=2.21.0 in /usr/local/lib/python3.10/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (2.32.3)\nRequirement already satisfied: six>=1.11.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.16.0)\nRequirement already satisfied: opentelemetry-api<2.0.0,>=1.12.0 in /usr/local/lib/python3.10/dist-packages (from azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (1.30.0)\nRequirement already satisfied: msrest>=0.6.10 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.1)\nRequirement already satisfied: fixedint==0.1.6 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.1.6)\nRequirement already satisfied: psutil~=5.9 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (5.9.8)\nRequirement already satisfied: opentelemetry-instrumentation==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-util-http==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-wsgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-semantic-conventions==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: packaging>=18.0 in /usr/lib/python3/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (21.3)\nRequirement already satisfied: wrapt<2.0.0,>=1.0.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.17.2)\nRequirement already satisfied: deprecated>=1.2.6 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-semantic-conventions==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.2.18)\nRequirement already satisfied: importlib-metadata<=8.5.0,>=6.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (8.5.0)\nRequirement already satisfied: opentelemetry-instrumentation-asgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: asgiref~=3.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-asgi==0.51b0->opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (3.8.1)\nRequirement already satisfied: opentelemetry-instrumentation-dbapi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-psycopg2~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: pydantic-core==2.27.2 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (2.27.2)\nRequirement already satisfied: annotated-types>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (0.7.0)\nRequirement already satisfied: anyio<5,>=3.6.2 in /usr/local/lib/python3.10/dist-packages (from starlette<0.46.0,>=0.40.0->fastapi) (4.8.0)\nRequirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.2.2)\nRequirement already satisfied: sniffio>=1.1 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.3.1)\nRequirement already satisfied: idna>=2.8 in /usr/lib/python3/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (3.3)\nRequirement already satisfied: isodate>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.2)\nRequirement already satisfied: requests-oauthlib>=0.5.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2.0.0)\nRequirement already satisfied: certifi>=2017.4.17 in /usr/lib/python3/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2020.6.20)\nRequirement already satisfied: urllib3<3,>=1.21.1 in /usr/lib/python3/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.26.5)\nRequirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (3.4.1)\nRequirement already satisfied: zipp>=3.20 in /usr/local/lib/python3.10/dist-packages (from importlib-metadata<=8.5.0,>=6.0->opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (3.21.0)\nRequirement already satisfied: oauthlib>=3.0.0 in /usr/lib/python3/dist-packages (from requests-oauthlib>=0.5.0->msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (3.2.0)\n",
    "stdout_lines": [
        "Requirement already satisfied: fastapi in /usr/local/lib/python3.10/dist-packages (0.115.8)",
        "Requirement already satisfied: uvicorn in /usr/local/lib/python3.10/dist-packages (0.34.0)",
        "Requirement already satisfied: azure-monitor-opentelemetry in /usr/local/lib/python3.10/dist-packages (1.6.5)",
        "Requirement already satisfied: pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4 in /usr/local/lib/python3.10/dist-packages (from fastapi) (2.10.6)",
        "Requirement already satisfied: typing-extensions>=4.8.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (4.12.2)",
        "Requirement already satisfied: starlette<0.46.0,>=0.40.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (0.45.3)",
        "Requirement already satisfied: h11>=0.8 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (0.14.0)",
        "Requirement already satisfied: click>=7.0 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (8.1.8)",
        "Requirement already satisfied: azure-monitor-opentelemetry-exporter~=1.0.0b31 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b33)",
        "Requirement already satisfied: azure-core<2.0.0,>=1.28.0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.32.0)",
        "Requirement already satisfied: opentelemetry-instrumentation-urllib3~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)",
        "Requirement already satisfied: opentelemetry-sdk~=1.28 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.30.0)",
        "Requirement already satisfied: opentelemetry-instrumentation-fastapi~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)",
        "Requirement already satisfied: opentelemetry-resource-detector-azure~=0.1.4 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.1.5)",
        "Requirement already satisfied: opentelemetry-instrumentation-flask~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)",
        "Requirement already satisfied: opentelemetry-instrumentation-requests~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)",
        "Requirement already satisfied: opentelemetry-instrumentation-django~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)",
        "Requirement already satisfied: azure-core-tracing-opentelemetry~=1.0.0b11 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b11)",
        "Requirement already satisfied: opentelemetry-instrumentation-psycopg2~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)",
        "Requirement already satisfied: opentelemetry-instrumentation-urllib~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)",
        "Requirement already satisfied: requests>=2.21.0 in /usr/local/lib/python3.10/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (2.32.3)",
        "Requirement already satisfied: six>=1.11.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.16.0)",
        "Requirement already satisfied: opentelemetry-api<2.0.0,>=1.12.0 in /usr/local/lib/python3.10/dist-packages (from azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (1.30.0)",
        "Requirement already satisfied: msrest>=0.6.10 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.1)",
        "Requirement already satisfied: fixedint==0.1.6 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.1.6)",
        "Requirement already satisfied: psutil~=5.9 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (5.9.8)",
        "Requirement already satisfied: opentelemetry-instrumentation==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)",
        "Requirement already satisfied: opentelemetry-util-http==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)",
        "Requirement already satisfied: opentelemetry-instrumentation-wsgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)",
        "Requirement already satisfied: opentelemetry-semantic-conventions==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)",
        "Requirement already satisfied: packaging>=18.0 in /usr/lib/python3/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (21.3)",
        "Requirement already satisfied: wrapt<2.0.0,>=1.0.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.17.2)",
        "Requirement already satisfied: deprecated>=1.2.6 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-semantic-conventions==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.2.18)",
        "Requirement already satisfied: importlib-metadata<=8.5.0,>=6.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (8.5.0)",
        "Requirement already satisfied: opentelemetry-instrumentation-asgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (0.51b0)",
        "Requirement already satisfied: asgiref~=3.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-asgi==0.51b0->opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (3.8.1)",
        "Requirement already satisfied: opentelemetry-instrumentation-dbapi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-psycopg2~=0.49b0->azure-monitor-opentelemetry) (0.51b0)",
        "Requirement already satisfied: pydantic-core==2.27.2 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (2.27.2)",
        "Requirement already satisfied: annotated-types>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (0.7.0)",
        "Requirement already satisfied: anyio<5,>=3.6.2 in /usr/local/lib/python3.10/dist-packages (from starlette<0.46.0,>=0.40.0->fastapi) (4.8.0)",
        "Requirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.2.2)",
        "Requirement already satisfied: sniffio>=1.1 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.3.1)",
        "Requirement already satisfied: idna>=2.8 in /usr/lib/python3/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (3.3)",
        "Requirement already satisfied: isodate>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.2)",
        "Requirement already satisfied: requests-oauthlib>=0.5.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2.0.0)",
        "Requirement already satisfied: certifi>=2017.4.17 in /usr/lib/python3/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2020.6.20)",
        "Requirement already satisfied: urllib3<3,>=1.21.1 in /usr/lib/python3/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.26.5)",
        "Requirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (3.4.1)",
        "Requirement already satisfied: zipp>=3.20 in /usr/local/lib/python3.10/dist-packages (from importlib-metadata<=8.5.0,>=6.0->opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (3.21.0)",
        "Requirement already satisfied: oauthlib>=3.0.0 in /usr/lib/python3/dist-packages (from requests-oauthlib>=0.5.0->msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (3.2.0)"
    ],
    "version": null,
    "virtualenv": null
}
2025-02-21 02:20:34,052 p=59924 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/vars.yml'
2025-02-21 02:20:34,054 p=59924 u=snrj n=ansible INFO| TASK [flask_app : Run terraform to get the application insights connection string] **************************************************************************
2025-02-21 02:20:34,054 p=59924 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:25
2025-02-21 02:20:34,064 p=59924 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/vars.yml'
2025-02-21 02:20:34,130 p=59924 u=snrj n=ansible INFO| Using module file /opt/homebrew/Cellar/ansible/11.2.0/libexec/lib/python3.13/site-packages/ansible/modules/command.py
2025-02-21 02:20:34,130 p=59924 u=snrj n=ansible INFO| Pipelining is enabled.
2025-02-21 02:20:34,130 p=59924 u=snrj n=ansible INFO| <localhost> ESTABLISH LOCAL CONNECTION FOR USER: snrj
2025-02-21 02:20:34,130 p=59924 u=snrj n=ansible INFO| <localhost> EXEC /bin/sh -c 'sudo -H -S -n  -u root /bin/sh -c '"'"'echo BECOME-SUCCESS-xrzrseywpocjqaygfzwwphnyubyuymie ; /opt/homebrew/Cellar/ansible/11.2.0/libexec/bin/python'"'"' && sleep 0'
2025-02-21 02:20:34,152 p=59924 u=snrj n=ansible INFO| fatal: [40.68.93.141 -> localhost]: FAILED! => {
    "changed": false,
    "module_stderr": "sudo: a password is required\n",
    "module_stdout": "",
    "msg": "MODULE FAILURE: No start of json char found\nSee stdout/stderr for the exact error",
    "rc": 1
}
2025-02-21 02:20:34,152 p=59924 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 02:20:34,152 p=59924 u=snrj n=ansible INFO| 40.68.93.141               : ok=5    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2025-02-21 02:52:15,436 p=64208 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 02:52:16,831 p=64208 u=snrj n=ansible INFO| ansible-playbook [core 2.18.2]
  config file = /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg
  configured module search path = ['/Users/snrj/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /opt/homebrew/Cellar/ansible/11.2.0/libexec/lib/python3.13/site-packages/ansible
  ansible collection location = /Users/snrj/Desktop/terraform-azure-demo/configure_vm/collections
  executable location = /opt/homebrew/bin/ansible-playbook
  python version = 3.13.2 (main, Feb  4 2025, 14:51:09) [Clang 16.0.0 (clang-1600.0.26.6)] (/opt/homebrew/Cellar/ansible/11.2.0/libexec/bin/python)
  jinja version = 3.1.5
  libyaml = True
2025-02-21 02:52:16,831 p=64208 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-21 02:52:17,012 p=64208 u=snrj n=ansible INFO| host_list declined parsing /Users/snrj/Desktop/terraform-azure-demo/configure_vm/inventory/hosts.ini as it did not pass its verify_file() method
2025-02-21 02:52:17,044 p=64208 u=snrj n=ansible INFO| auto declined parsing /Users/snrj/Desktop/terraform-azure-demo/configure_vm/inventory/hosts.ini as it did not pass its verify_file() method
2025-02-21 02:52:17,044 p=64208 u=snrj n=ansible INFO| yaml declined parsing /Users/snrj/Desktop/terraform-azure-demo/configure_vm/inventory/hosts.ini as it did not pass its verify_file() method
2025-02-21 02:52:17,046 p=64208 u=snrj n=ansible INFO| Parsed /Users/snrj/Desktop/terraform-azure-demo/configure_vm/inventory/hosts.ini inventory source with ini plugin
2025-02-21 02:52:18,355 p=64208 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/app_vars.yml'
2025-02-21 02:52:18,355 p=64208 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/vars.yml'
2025-02-21 02:52:18,901 p=64208 u=snrj n=ansible INFO| Skipping callback 'default', as we already have a stdout callback.
2025-02-21 02:52:18,902 p=64208 u=snrj n=ansible INFO| Skipping callback 'minimal', as we already have a stdout callback.
2025-02-21 02:52:18,902 p=64208 u=snrj n=ansible INFO| Skipping callback 'oneline', as we already have a stdout callback.
2025-02-21 02:52:18,902 p=64208 u=snrj n=ansible INFO| PLAYBOOK: flask_app.yml *************************************************************************************************************************************
2025-02-21 02:52:18,902 p=64208 u=snrj n=ansible INFO| 1 plays in playbooks/flask_app.yml
2025-02-21 02:52:18,903 p=64208 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/app_vars.yml'
2025-02-21 02:52:18,904 p=64208 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/vars.yml'
2025-02-21 02:52:18,905 p=64208 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/app_vars.yml'
2025-02-21 02:52:18,906 p=64208 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/vars.yml'
2025-02-21 02:52:18,907 p=64208 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/app_vars.yml'
2025-02-21 02:52:18,907 p=64208 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/vars.yml'
2025-02-21 02:52:18,908 p=64208 u=snrj n=ansible INFO| PLAY [Setup Flask App with OpenTelemetry] *******************************************************************************************************************
2025-02-21 02:52:18,990 p=64208 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/app_vars.yml'
2025-02-21 02:52:18,991 p=64208 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/vars.yml'
2025-02-21 02:52:18,998 p=64208 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 02:52:18,998 p=64208 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/playbooks/flask_app.yml:2
2025-02-21 02:52:19,839 p=64208 u=snrj n=ansible INFO| <40.68.93.141> Attempting python interpreter discovery
2025-02-21 02:52:19,839 p=64208 u=snrj n=ansible INFO| <40.68.93.141> ESTABLISH SSH CONNECTION FOR USER: azureadmin
2025-02-21 02:52:19,839 p=64208 u=snrj n=ansible INFO| <40.68.93.141> SSH: EXEC ssh -vvv -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o 'IdentityFile="/Users/snrj/.ssh/id_rsa"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User="azureadmin"' -o ConnectTimeout=30 -o StrictHostKeyChecking=no -o 'ControlPath="/Users/snrj/.ansible/cp/1da56dae57"' 40.68.93.141 '/bin/sh -c '"'"'echo PLATFORM; uname; echo FOUND; command -v '"'"'"'"'"'"'"'"'python3.13'"'"'"'"'"'"'"'"'; command -v '"'"'"'"'"'"'"'"'python3.12'"'"'"'"'"'"'"'"'; command -v '"'"'"'"'"'"'"'"'python3.11'"'"'"'"'"'"'"'"'; command -v '"'"'"'"'"'"'"'"'python3.10'"'"'"'"'"'"'"'"'; command -v '"'"'"'"'"'"'"'"'python3.9'"'"'"'"'"'"'"'"'; command -v '"'"'"'"'"'"'"'"'python3.8'"'"'"'"'"'"'"'"'; command -v '"'"'"'"'"'"'"'"'/usr/bin/python3'"'"'"'"'"'"'"'"'; command -v '"'"'"'"'"'"'"'"'python3'"'"'"'"'"'"'"'"'; echo ENDFOUND && sleep 0'"'"''
2025-02-21 02:52:23,205 p=64208 u=snrj n=ansible INFO| <40.68.93.141> (0, b'PLATFORM\nLinux\nFOUND\n/usr/bin/python3.10\n/usr/bin/python3\n/usr/bin/python3\nENDFOUND\n', b'OpenSSH_9.8p1, LibreSSL 3.3.6\r\ndebug1: Reading configuration data /etc/ssh/ssh_config\r\ndebug1: /etc/ssh/ssh_config line 21: include /etc/ssh/ssh_config.d/* matched no files\r\ndebug1: /etc/ssh/ssh_config line 54: Applying options for *\r\ndebug2: resolve_canonicalize: hostname 40.68.93.141 is address\r\ndebug3: expanded UserKnownHostsFile \'~/.ssh/known_hosts\' -> \'/Users/snrj/.ssh/known_hosts\'\r\ndebug3: expanded UserKnownHostsFile \'~/.ssh/known_hosts2\' -> \'/Users/snrj/.ssh/known_hosts2\'\r\ndebug1: Authenticator provider $SSH_SK_PROVIDER did not resolve; disabling\r\ndebug1: auto-mux: Trying existing master at \'/Users/snrj/.ansible/cp/1da56dae57\'\r\ndebug1: Control socket "/Users/snrj/.ansible/cp/1da56dae57" does not exist\r\ndebug3: channel_clear_timeouts: clearing\r\ndebug3: ssh_connect_direct: entering\r\ndebug1: Connecting to 40.68.93.141 [40.68.93.141] port 22.\r\ndebug3: set_sock_tos: set socket 3 IP_TOS 0x48\r\ndebug2: fd 3 setting O_NONBLOCK\r\ndebug1: fd 3 clearing O_NONBLOCK\r\ndebug1: Connection established.\r\ndebug3: timeout: 30000 ms remain after connect\r\ndebug1: identity file /Users/snrj/.ssh/id_rsa type 0\r\ndebug1: identity file /Users/snrj/.ssh/id_rsa-cert type -1\r\ndebug1: Local version string SSH-2.0-OpenSSH_9.8\r\ndebug1: Remote protocol version 2.0, remote software version OpenSSH_8.9p1 Ubuntu-3ubuntu0.11\r\ndebug1: compat_banner: match: OpenSSH_8.9p1 Ubuntu-3ubuntu0.11 pat OpenSSH* compat 0x04000000\r\ndebug2: fd 3 setting O_NONBLOCK\r\ndebug1: Authenticating to 40.68.93.141:22 as \'azureadmin\'\r\ndebug3: record_hostkey: found key type ED25519 in file /Users/snrj/.ssh/known_hosts:14\r\ndebug3: record_hostkey: found key type RSA in file /Users/snrj/.ssh/known_hosts:15\r\ndebug3: record_hostkey: found key type ECDSA in file /Users/snrj/.ssh/known_hosts:16\r\ndebug3: load_hostkeys_file: loaded 3 keys from 40.68.93.141\r\ndebug1: load_hostkeys: fopen /Users/snrj/.ssh/known_hosts2: No such file or directory\r\ndebug1: load_hostkeys: fopen /etc/ssh/ssh_known_hosts: No such file or directory\r\ndebug1: load_hostkeys: fopen /etc/ssh/ssh_known_hosts2: No such file or directory\r\ndebug3: order_hostkeyalgs: have matching best-preference key type ssh-ed25519-cert-v01@openssh.com, using HostkeyAlgorithms verbatim\r\ndebug3: send packet: type 20\r\ndebug1: SSH2_MSG_KEXINIT sent\r\ndebug3: receive packet: type 20\r\ndebug1: SSH2_MSG_KEXINIT received\r\ndebug2: local client KEXINIT proposal\r\ndebug2: KEX algorithms: sntrup761x25519-sha512@openssh.com,curve25519-sha256,curve25519-sha256@libssh.org,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,diffie-hellman-group14-sha256,ext-info-c,kex-strict-c-v00@openssh.com\r\ndebug2: host key algorithms: ssh-ed25519-cert-v01@openssh.com,ecdsa-sha2-nistp256-cert-v01@openssh.com,ecdsa-sha2-nistp384-cert-v01@openssh.com,ecdsa-sha2-nistp521-cert-v01@openssh.com,sk-ssh-ed25519-cert-v01@openssh.com,sk-ecdsa-sha2-nistp256-cert-v01@openssh.com,rsa-sha2-512-cert-v01@openssh.com,rsa-sha2-256-cert-v01@openssh.com,ssh-ed25519,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521,sk-ssh-ed25519@openssh.com,sk-ecdsa-sha2-nistp256@openssh.com,rsa-sha2-512,rsa-sha2-256\r\ndebug2: ciphers ctos: chacha20-poly1305@openssh.com,aes128-ctr,aes192-ctr,aes256-ctr,aes128-gcm@openssh.com,aes256-gcm@openssh.com\r\ndebug2: ciphers stoc: chacha20-poly1305@openssh.com,aes128-ctr,aes192-ctr,aes256-ctr,aes128-gcm@openssh.com,aes256-gcm@openssh.com\r\ndebug2: MACs ctos: umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-sha1\r\ndebug2: MACs stoc: umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-sha1\r\ndebug2: compression ctos: none,zlib@openssh.com,zlib\r\ndebug2: compression stoc: none,zlib@openssh.com,zlib\r\ndebug2: languages ctos: \r\ndebug2: languages stoc: \r\ndebug2: first_kex_follows 0 \r\ndebug2: reserved 0 \r\ndebug2: peer server KEXINIT proposal\r\ndebug2: KEX algorithms: curve25519-sha256,curve25519-sha256@libssh.org,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,sntrup761x25519-sha512@openssh.com,diffie-hellman-group-exchange-sha256,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,diffie-hellman-group14-sha256,kex-strict-s-v00@openssh.com\r\ndebug2: host key algorithms: rsa-sha2-512,rsa-sha2-256,ecdsa-sha2-nistp256,ssh-ed25519\r\ndebug2: ciphers ctos: chacha20-poly1305@openssh.com,aes128-ctr,aes192-ctr,aes256-ctr,aes128-gcm@openssh.com,aes256-gcm@openssh.com\r\ndebug2: ciphers stoc: chacha20-poly1305@openssh.com,aes128-ctr,aes192-ctr,aes256-ctr,aes128-gcm@openssh.com,aes256-gcm@openssh.com\r\ndebug2: MACs ctos: umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-sha1\r\ndebug2: MACs stoc: umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-sha1\r\ndebug2: compression ctos: none,zlib@openssh.com\r\ndebug2: compression stoc: none,zlib@openssh.com\r\ndebug2: languages ctos: \r\ndebug2: languages stoc: \r\ndebug2: first_kex_follows 0 \r\ndebug2: reserved 0 \r\ndebug3: kex_choose_conf: will use strict KEX ordering\r\ndebug1: kex: algorithm: sntrup761x25519-sha512@openssh.com\r\ndebug1: kex: host key algorithm: ssh-ed25519\r\ndebug1: kex: server->client cipher: chacha20-poly1305@openssh.com MAC: <implicit> compression: none\r\ndebug1: kex: client->server cipher: chacha20-poly1305@openssh.com MAC: <implicit> compression: none\r\ndebug3: send packet: type 30\r\ndebug1: expecting SSH2_MSG_KEX_ECDH_REPLY\r\ndebug3: receive packet: type 31\r\ndebug1: SSH2_MSG_KEX_ECDH_REPLY received\r\ndebug1: Server host key: ssh-ed25519 SHA256:4juZMlPyTLr59GSXsLHOKDrR52QmBWH7q77jVuyrrnU\r\ndebug3: record_hostkey: found key type ED25519 in file /Users/snrj/.ssh/known_hosts:14\r\ndebug3: record_hostkey: found key type RSA in file /Users/snrj/.ssh/known_hosts:15\r\ndebug3: record_hostkey: found key type ECDSA in file /Users/snrj/.ssh/known_hosts:16\r\ndebug3: load_hostkeys_file: loaded 3 keys from 40.68.93.141\r\ndebug1: load_hostkeys: fopen /Users/snrj/.ssh/known_hosts2: No such file or directory\r\ndebug1: load_hostkeys: fopen /etc/ssh/ssh_known_hosts: No such file or directory\r\ndebug1: load_hostkeys: fopen /etc/ssh/ssh_known_hosts2: No such file or directory\r\ndebug1: Host \'40.68.93.141\' is known and matches the ED25519 host key.\r\ndebug1: Found key in /Users/snrj/.ssh/known_hosts:14\r\ndebug3: send packet: type 21\r\ndebug1: ssh_packet_send2_wrapped: resetting send seqnr 3\r\ndebug2: ssh_set_newkeys: mode 1\r\ndebug1: rekey out after 134217728 blocks\r\ndebug1: SSH2_MSG_NEWKEYS sent\r\ndebug1: expecting SSH2_MSG_NEWKEYS\r\ndebug3: receive packet: type 21\r\ndebug1: ssh_packet_read_poll2: resetting read seqnr 3\r\ndebug1: SSH2_MSG_NEWKEYS received\r\ndebug2: ssh_set_newkeys: mode 0\r\ndebug1: rekey in after 134217728 blocks\r\ndebug2: KEX algorithms: sntrup761x25519-sha512@openssh.com,curve25519-sha256,curve25519-sha256@libssh.org,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,diffie-hellman-group14-sha256,ext-info-c,kex-strict-c-v00@openssh.com\r\ndebug2: host key algorithms: ssh-ed25519-cert-v01@openssh.com,ecdsa-sha2-nistp256-cert-v01@openssh.com,ecdsa-sha2-nistp384-cert-v01@openssh.com,ecdsa-sha2-nistp521-cert-v01@openssh.com,sk-ssh-ed25519-cert-v01@openssh.com,sk-ecdsa-sha2-nistp256-cert-v01@openssh.com,rsa-sha2-512-cert-v01@openssh.com,rsa-sha2-256-cert-v01@openssh.com,ssh-ed25519,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521,sk-ssh-ed25519@openssh.com,sk-ecdsa-sha2-nistp256@openssh.com,rsa-sha2-512,rsa-sha2-256\r\ndebug2: ciphers ctos: chacha20-poly1305@openssh.com,aes128-ctr,aes192-ctr,aes256-ctr,aes128-gcm@openssh.com,aes256-gcm@openssh.com\r\ndebug2: ciphers stoc: chacha20-poly1305@openssh.com,aes128-ctr,aes192-ctr,aes256-ctr,aes128-gcm@openssh.com,aes256-gcm@openssh.com\r\ndebug2: MACs ctos: umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-sha1\r\ndebug2: MACs stoc: umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-sha1\r\ndebug2: compression ctos: none,zlib@openssh.com,zlib\r\ndebug2: compression stoc: none,zlib@openssh.com,zlib\r\ndebug2: languages ctos: \r\ndebug2: languages stoc: \r\ndebug2: first_kex_follows 0 \r\ndebug2: reserved 0 \r\ndebug3: send packet: type 5\r\ndebug3: receive packet: type 7\r\ndebug1: SSH2_MSG_EXT_INFO received\r\ndebug3: kex_input_ext_info: extension server-sig-algs\r\ndebug1: kex_ext_info_client_parse: server-sig-algs=<ssh-ed25519,sk-ssh-ed25519@openssh.com,ssh-rsa,rsa-sha2-256,rsa-sha2-512,ssh-dss,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521,sk-ecdsa-sha2-nistp256@openssh.com,webauthn-sk-ecdsa-sha2-nistp256@openssh.com>\r\ndebug3: kex_input_ext_info: extension publickey-hostbound@openssh.com\r\ndebug1: kex_ext_info_check_ver: publickey-hostbound@openssh.com=<0>\r\ndebug3: receive packet: type 6\r\ndebug2: service_accept: ssh-userauth\r\ndebug1: SSH2_MSG_SERVICE_ACCEPT received\r\ndebug3: send packet: type 50\r\ndebug3: receive packet: type 51\r\ndebug1: Authentications that can continue: publickey\r\ndebug3: start over, passed a different list publickey\r\ndebug3: preferred gssapi-with-mic,gssapi-keyex,hostbased,publickey\r\ndebug3: authmethod_lookup publickey\r\ndebug3: remaining preferred: ,gssapi-keyex,hostbased,publickey\r\ndebug3: authmethod_is_enabled publickey\r\ndebug1: Next authentication method: publickey\r\ndebug3: ssh_get_authentication_socket_path: path \'/private/tmp/com.apple.launchd.Yndssrn3q4/Listeners\'\r\ndebug1: get_agent_identities: bound agent to hostkey\r\ndebug1: get_agent_identities: ssh_fetch_identitylist: agent contains no identities\r\ndebug1: Will attempt key: /Users/snrj/.ssh/id_rsa RSA SHA256:dle3OjXmkM6G8DFNCBPq/44NojHKa2l5j5F0Ni2LbT0 explicit\r\ndebug2: pubkey_prepare: done\r\ndebug1: Offering public key: /Users/snrj/.ssh/id_rsa RSA SHA256:dle3OjXmkM6G8DFNCBPq/44NojHKa2l5j5F0Ni2LbT0 explicit\r\ndebug3: send packet: type 50\r\ndebug2: we sent a publickey packet, wait for reply\r\ndebug3: receive packet: type 60\r\ndebug1: Server accepts key: /Users/snrj/.ssh/id_rsa RSA SHA256:dle3OjXmkM6G8DFNCBPq/44NojHKa2l5j5F0Ni2LbT0 explicit\r\ndebug3: sign_and_send_pubkey: using publickey-hostbound-v00@openssh.com with RSA SHA256:dle3OjXmkM6G8DFNCBPq/44NojHKa2l5j5F0Ni2LbT0\r\ndebug3: sign_and_send_pubkey: signing using rsa-sha2-512 SHA256:dle3OjXmkM6G8DFNCBPq/44NojHKa2l5j5F0Ni2LbT0\r\ndebug3: send packet: type 50\r\ndebug3: receive packet: type 52\r\nAuthenticated to 40.68.93.141 ([40.68.93.141]:22) using "publickey".\r\ndebug1: setting up multiplex master socket\r\ndebug3: muxserver_listen: temporary control path /Users/snrj/.ansible/cp/1da56dae57.VG8QzZEjSuPoyfZn\r\ndebug2: fd 4 setting O_NONBLOCK\r\ndebug3: fd 4 is O_NONBLOCK\r\ndebug3: fd 4 is O_NONBLOCK\r\ndebug1: channel 0: new mux listener [/Users/snrj/.ansible/cp/1da56dae57] (inactive timeout: 0)\r\ndebug3: muxserver_listen: mux listener channel 0 fd 4\r\ndebug2: fd 3 setting TCP_NODELAY\r\ndebug3: set_sock_tos: set socket 3 IP_TOS 0x20\r\ndebug1: control_persist_detach: backgrounding master process\r\ndebug2: control_persist_detach: background process is 64221\r\ndebug2: fd 4 setting O_NONBLOCK\r\ndebug1: forking to background\r\ndebug1: Entering interactive session.\r\ndebug1: pledge: id\r\ndebug3: client_repledge: enter\r\ndebug2: set_control_persist_exit_time: schedule exit in 60 seconds\r\ndebug1: multiplexing control connection\r\ndebug3: fd 5 is O_NONBLOCK\r\ndebug3: fd 5 is O_NONBLOCK\r\ndebug1: channel 1: new mux-control [mux-control] (inactive timeout: 0)\r\ndebug3: channel_post_mux_listener: new mux channel 1 fd 5\r\ndebug3: mux_master_read_cb: channel 1: hello sent\r\ndebug2: set_control_persist_exit_time: cancel scheduled exit\r\ndebug3: mux_master_read_cb: channel 1 packet type 0x00000001 len 4\r\ndebug2: mux_master_process_hello: channel 1 client version 4\r\ndebug2: mux_client_hello_exchange: master version 4\r\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\r\ndebug3: mux_client_request_session: entering\r\ndebug3: mux_client_request_alive: entering\r\ndebug3: mux_master_read_cb: channel 1 packet type 0x10000004 len 4\r\ndebug2: mux_master_process_alive_check: channel 1: alive check\r\ndebug3: mux_client_request_alive: done pid = 64223\r\ndebug3: mux_client_request_session: session request sent\r\ndebug3: mux_master_read_cb: channel 1 packet type 0x10000002 len 404\r\ndebug2: mux_master_process_new_session: channel 1: request tty 0, X 0, agent 0, subsys 0, term "xterm-256color", cmd "/bin/sh -c \'echo PLATFORM; uname; echo FOUND; command -v \'"\'"\'python3.13\'"\'"\'; command -v \'"\'"\'python3.12\'"\'"\'; command -v \'"\'"\'python3.11\'"\'"\'; command -v \'"\'"\'python3.10\'"\'"\'; command -v \'"\'"\'python3.9\'"\'"\'; command -v \'"\'"\'python3.8\'"\'"\'; command -v \'"\'"\'/usr/bin/python3\'"\'"\'; command -v \'"\'"\'python3\'"\'"\'; echo ENDFOUND && sleep 0\'", env 1\r\ndebug3: mux_master_process_new_session: got fds stdin 6, stdout 7, stderr 8\r\ndebug2: fd 7 setting O_NONBLOCK\r\ndebug2: fd 8 setting O_NONBLOCK\r\ndebug1: channel 2: new session [client-session] (inactive timeout: 0)\r\ndebug2: mux_master_process_new_session: channel_new: 2 linked to control channel 1\r\ndebug2: channel 2: send open\r\ndebug3: send packet: type 90\r\ndebug3: receive packet: type 80\r\ndebug1: client_input_global_request: rtype hostkeys-00@openssh.com want_reply 0\r\ndebug3: client_input_hostkeys: received RSA key SHA256:bbcTUXuiYOw35BnF5YFaQw12HcP4MmC932dC/MLk73s\r\ndebug3: client_input_hostkeys: received ECDSA key SHA256:jXEoCUzOvRde0Z4CrahpFRkHpiQOqHFGIad8IOKSVV8\r\ndebug3: client_input_hostkeys: received ED25519 key SHA256:4juZMlPyTLr59GSXsLHOKDrR52QmBWH7q77jVuyrrnU\r\ndebug1: client_input_hostkeys: searching /Users/snrj/.ssh/known_hosts for 40.68.93.141 / (none)\r\ndebug3: hostkeys_foreach: reading file "/Users/snrj/.ssh/known_hosts"\r\ndebug3: hostkeys_find: found ssh-ed25519 key at /Users/snrj/.ssh/known_hosts:14\r\ndebug3: hostkeys_find: found ssh-rsa key at /Users/snrj/.ssh/known_hosts:15\r\ndebug3: hostkeys_find: found ecdsa-sha2-nistp256 key at /Users/snrj/.ssh/known_hosts:16\r\ndebug1: client_input_hostkeys: searching /Users/snrj/.ssh/known_hosts2 for 40.68.93.141 / (none)\r\ndebug1: client_input_hostkeys: hostkeys file /Users/snrj/.ssh/known_hosts2 does not exist\r\ndebug3: client_input_hostkeys: 3 server keys: 0 new, 3 retained, 0 incomplete match. 0 to remove\r\ndebug1: client_input_hostkeys: no new or deprecated keys from server\r\ndebug3: client_repledge: enter\r\ndebug3: receive packet: type 4\r\ndebug1: Remote: /home/azureadmin/.ssh/authorized_keys:1: key options: agent-forwarding port-forwarding pty user-rc x11-forwarding\r\ndebug3: receive packet: type 4\r\ndebug1: Remote: /home/azureadmin/.ssh/authorized_keys:1: key options: agent-forwarding port-forwarding pty user-rc x11-forwarding\r\ndebug3: receive packet: type 91\r\ndebug2: channel_input_open_confirmation: channel 2: callback start\r\ndebug2: client_session2_setup: id 2\r\ndebug1: Sending environment.\r\ndebug1: channel 2: setting env LC_CTYPE = "UTF-8"\r\ndebug2: channel 2: request env confirm 0\r\ndebug3: send packet: type 98\r\ndebug1: Sending command: /bin/sh -c \'echo PLATFORM; uname; echo FOUND; command -v \'"\'"\'python3.13\'"\'"\'; command -v \'"\'"\'python3.12\'"\'"\'; command -v \'"\'"\'python3.11\'"\'"\'; command -v \'"\'"\'python3.10\'"\'"\'; command -v \'"\'"\'python3.9\'"\'"\'; command -v \'"\'"\'python3.8\'"\'"\'; command -v \'"\'"\'/usr/bin/python3\'"\'"\'; command -v \'"\'"\'python3\'"\'"\'; echo ENDFOUND && sleep 0\'\r\ndebug2: channel 2: request exec confirm 1\r\ndebug3: send packet: type 98\r\ndebug3: client_repledge: enter\r\ndebug3: mux_session_confirm: sending success reply\r\ndebug2: channel_input_open_confirmation: channel 2: callback done\r\ndebug2: channel 2: open confirm rwindow 0 rmax 32768\r\ndebug1: mux_client_request_session: master session id: 2\r\ndebug2: channel 2: rcvd adjust 2097152\r\ndebug3: receive packet: type 99\r\ndebug2: channel_input_status_confirm: type 99 id 2\r\ndebug2: exec request accepted on channel 2\r\ndebug3: receive packet: type 96\r\ndebug2: channel 2: rcvd eof\r\ndebug2: channel 2: output open -> drain\r\ndebug2: channel 2: obuf empty\r\ndebug2: chan_shutdown_write: channel 2: (i0 o1 sock -1 wfd 7 efd 8 [write])\r\ndebug2: channel 2: output drain -> closed\r\ndebug3: receive packet: type 98\r\ndebug1: client_input_channel_req: channel 2 rtype exit-status reply 0\r\ndebug3: mux_exit_message: channel 2: exit message, exitval 0\r\ndebug3: receive packet: type 98\r\ndebug1: client_input_channel_req: channel 2 rtype eow@openssh.com reply 0\r\ndebug2: channel 2: rcvd eow\r\ndebug2: chan_shutdown_read: channel 2: (i0 o3 sock -1 wfd 6 efd 8 [write])\r\ndebug2: channel 2: input open -> closed\r\ndebug3: receive packet: type 97\r\ndebug2: channel 2: rcvd close\r\ndebug3: channel 2: will not send data after close\r\ndebug2: channel 2: send close\r\ndebug3: send packet: type 97\r\ndebug2: channel 2: is dead\r\ndebug2: channel 2: gc: notify user\r\ndebug3: mux_master_session_cleanup_cb: entering for channel 2\r\ndebug2: channel 1: rcvd close\r\ndebug2: channel 1: output open -> drain\r\ndebug2: chan_shutdown_read: channel 1: (i0 o1 sock 5 wfd 5 efd -1 [closed])\r\ndebug2: channel 1: input open -> closed\r\ndebug2: channel 2: gc: user detached\r\ndebug2: channel 2: is dead\r\ndebug2: channel 2: garbage collecting\r\ndebug1: channel 2: free: client-session, nchannels 3\r\ndebug3: channel 2: status: The following connections are open:\r\n  #1 mux-control (t16 [mux-control] nr0 i3/0 o1/16 e[closed]/0 fd 5/5/-1 sock 5 cc -1 io 0x03/0x00)\r\n  #2 client-session (t4 [session] r0 i3/0 o3/0 e[write]/0 fd -1/-1/8 sock -1 cc -1 io 0x00/0x00)\r\n\r\ndebug2: channel 1: obuf empty\r\ndebug2: chan_shutdown_write: channel 1: (i3 o1 sock 5 wfd 5 efd -1 [closed])\r\ndebug2: channel 1: output drain -> closed\r\ndebug2: channel 1: is dead (local)\r\ndebug2: channel 1: gc: notify user\r\ndebug3: mux_client_read_packet_timeout: read header failed: Broken pipe\r\ndebug3: mux_master_control_cleanup_cb: entering for channel 1\r\ndebug2: Received exit status from master 0\r\ndebug2: channel 1: gc: user detached\r\ndebug2: channel 1: is dead (local)\r\ndebug2: channel 1: garbage collecting\r\ndebug1: channel 1: free: mux-control, nchannels 2\r\ndebug3: channel 1: status: The following connections are open:\r\n  #1 mux-control (t16 [mux-control] nr0 i3/0 o3/0 e[closed]/0 fd 5/5/-1 sock 5 cc -1 io 0x00/0x00)\r\n\r\ndebug2: set_control_persist_exit_time: schedule exit in 60 seconds\r\n')
2025-02-21 02:52:23,227 p=64208 u=snrj n=ansible INFO| <40.68.93.141> ESTABLISH SSH CONNECTION FOR USER: azureadmin
2025-02-21 02:52:23,229 p=64208 u=snrj n=ansible INFO| <40.68.93.141> SSH: EXEC ssh -vvv -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o 'IdentityFile="/Users/snrj/.ssh/id_rsa"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User="azureadmin"' -o ConnectTimeout=30 -o StrictHostKeyChecking=no -o 'ControlPath="/Users/snrj/.ansible/cp/1da56dae57"' 40.68.93.141 '/bin/sh -c '"'"'/usr/bin/python3.10 && sleep 0'"'"''
2025-02-21 02:52:23,394 p=64208 u=snrj n=ansible INFO| <40.68.93.141> (0, b'{"platform_dist_result": [], "osrelease_content": "PRETTY_NAME=\\"Ubuntu 22.04.5 LTS\\"\\nNAME=\\"Ubuntu\\"\\nVERSION_ID=\\"22.04\\"\\nVERSION=\\"22.04.5 LTS (Jammy Jellyfish)\\"\\nVERSION_CODENAME=jammy\\nID=ubuntu\\nID_LIKE=debian\\nHOME_URL=\\"https://www.ubuntu.com/\\"\\nSUPPORT_URL=\\"https://help.ubuntu.com/\\"\\nBUG_REPORT_URL=\\"https://bugs.launchpad.net/ubuntu/\\"\\nPRIVACY_POLICY_URL=\\"https://www.ubuntu.com/legal/terms-and-policies/privacy-policy\\"\\nUBUNTU_CODENAME=jammy\\n"}\n', b"OpenSSH_9.8p1, LibreSSL 3.3.6\r\ndebug1: Reading configuration data /etc/ssh/ssh_config\r\ndebug1: /etc/ssh/ssh_config line 21: include /etc/ssh/ssh_config.d/* matched no files\r\ndebug1: /etc/ssh/ssh_config line 54: Applying options for *\r\ndebug2: resolve_canonicalize: hostname 40.68.93.141 is address\r\ndebug3: expanded UserKnownHostsFile '~/.ssh/known_hosts' -> '/Users/snrj/.ssh/known_hosts'\r\ndebug3: expanded UserKnownHostsFile '~/.ssh/known_hosts2' -> '/Users/snrj/.ssh/known_hosts2'\r\ndebug1: Authenticator provider $SSH_SK_PROVIDER did not resolve; disabling\r\ndebug1: auto-mux: Trying existing master at '/Users/snrj/.ansible/cp/1da56dae57'\r\ndebug2: fd 3 setting O_NONBLOCK\r\ndebug2: mux_client_hello_exchange: master version 4\r\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\r\ndebug3: mux_client_request_session: entering\r\ndebug3: mux_client_request_alive: entering\r\ndebug3: mux_client_request_alive: done pid = 64223\r\ndebug3: mux_client_request_session: session request sent\r\ndebug1: mux_client_request_session: master session id: 2\r\ndebug3: mux_client_read_packet_timeout: read header failed: Broken pipe\r\ndebug2: Received exit status from master 0\r\n")
2025-02-21 02:52:23,396 p=64208 u=snrj n=ansible INFO| <40.68.93.141> Python interpreter discovery fallback (unsupported Linux distribution: ubuntu)
2025-02-21 02:52:23,421 p=64208 u=snrj n=ansible INFO| Using module file /opt/homebrew/Cellar/ansible/11.2.0/libexec/lib/python3.13/site-packages/ansible/modules/setup.py
2025-02-21 02:52:23,421 p=64208 u=snrj n=ansible INFO| Pipelining is enabled.
2025-02-21 02:52:23,421 p=64208 u=snrj n=ansible INFO| <40.68.93.141> ESTABLISH SSH CONNECTION FOR USER: azureadmin
2025-02-21 02:52:23,422 p=64208 u=snrj n=ansible INFO| <40.68.93.141> SSH: EXEC ssh -vvv -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o 'IdentityFile="/Users/snrj/.ssh/id_rsa"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User="azureadmin"' -o ConnectTimeout=30 -o StrictHostKeyChecking=no -o 'ControlPath="/Users/snrj/.ansible/cp/1da56dae57"' 40.68.93.141 '/bin/sh -c '"'"'sudo -H -S -n  -u root /bin/sh -c '"'"'"'"'"'"'"'"'echo BECOME-SUCCESS-lvftffqxvvzyhhqisupcrhlqfqwlualu ; /usr/bin/python3.10'"'"'"'"'"'"'"'"' && sleep 0'"'"''
2025-02-21 02:52:23,520 p=64208 u=snrj n=ansible INFO| Escalation succeeded
2025-02-21 02:52:25,174 p=64208 u=snrj n=ansible INFO| <40.68.93.141> (0, b'\n{"ansible_facts": {"ansible_ssh_host_key_rsa_public": "AAAAB3NzaC1yc2EAAAADAQABAAABgQDC5AEeLU+XN1nuLjs7GsfGj5rNaU/OzDaON0nLx7YYMKHxXxPHC0mLfiTcR0KQ96Lh1Ya+WhZKn9JKZhv5duu8ljPaSmmDTlCQnG5ulFkIKN5qOGEdIpcWxLO0lZP8TswerWFhtyejNjOaqiriRP/BpiLhpcMMpWthfE5SRpKSSTTB3g1hGcQ3me9a4Yus+e/Cj5qa+FBpJWn/XtNGlQbFjLR8XFAgd7Ju/dTCEU21LQgAv2vbCsCOa/N2pjEBte9u6r9BMkm6TVSZS1RpThS27SDRD1J64+MhYoHhIPp4zoUM5/CY9XMXZUBtNMZUvNkMQLdCC/i2pPI2tFogdUOG7tY1/6Xqn0SG9a+N49yeHucykolRvdQNxeCSSb8vJZt3rTtjIvKntIibvSeXPuAxtS9q8RSWFywDJOuNWaNyfykowDdtIDF2RI8JGmo3pD/cvE+4VA1uUPncOF+2ah397ongM2waP36kUWJ6E4DoyEoyriGVRsEcsMpYgfoGXTk=", "ansible_ssh_host_key_rsa_public_keytype": "ssh-rsa", "ansible_ssh_host_key_ecdsa_public": "AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBMPcw5woizS3Z4lcqPiGjQXyNGK8aNwgiVNFB1kpSN1FCALHv3Om5528HH2owtPauzmIQsaZuo4ZMnjbQBHxU90=", "ansible_ssh_host_key_ecdsa_public_keytype": "ecdsa-sha2-nistp256", "ansible_ssh_host_key_ed25519_public": "AAAAC3NzaC1lZDI1NTE5AAAAIGaiYFEIbgPyFndFPQ2PkxXzr1DzlUI9zes1lqCmO9xG", "ansible_ssh_host_key_ed25519_public_keytype": "ssh-ed25519", "ansible_system": "Linux", "ansible_kernel": "6.8.0-1021-azure", "ansible_kernel_version": "#25~22.04.1-Ubuntu SMP Thu Jan 16 21:37:09 UTC 2025", "ansible_machine": "x86_64", "ansible_python_version": "3.10.12", "ansible_fqdn": "otel-collector.internal.cloudapp.net", "ansible_hostname": "otel-collector", "ansible_nodename": "otel-collector", "ansible_domain": "internal.cloudapp.net", "ansible_userspace_bits": "64", "ansible_architecture": "x86_64", "ansible_userspace_architecture": "x86_64", "ansible_machine_id": "7c9d2540e46c4b8fbce30446aa58519b", "ansible_user_id": "root", "ansible_user_uid": 0, "ansible_user_gid": 0, "ansible_user_gecos": "root", "ansible_user_dir": "/root", "ansible_user_shell": "/bin/bash", "ansible_real_user_id": 0, "ansible_effective_user_id": 0, "ansible_real_group_id": 0, "ansible_effective_group_id": 0, "ansible_distribution": "Ubuntu", "ansible_distribution_release": "jammy", "ansible_distribution_version": "22.04", "ansible_distribution_major_version": "22", "ansible_distribution_file_path": "/etc/os-release", "ansible_distribution_file_variety": "Debian", "ansible_distribution_file_parsed": true, "ansible_os_family": "Debian", "ansible_is_chroot": false, "ansible_iscsi_iqn": "", "ansible_date_time": {"year": "2025", "month": "02", "weekday": "Friday", "weekday_number": "5", "weeknumber": "07", "day": "21", "hour": "01", "minute": "52", "second": "24", "epoch": "1740102744", "epoch_int": "1740102744", "date": "2025-02-21", "time": "01:52:24", "iso8601_micro": "2025-02-21T01:52:24.372621Z", "iso8601": "2025-02-21T01:52:24Z", "iso8601_basic": "20250221T015224372621", "iso8601_basic_short": "20250221T015224", "tz": "UTC", "tz_dst": "UTC", "tz_offset": "+0000"}, "ansible_hostnqn": "nqn.2014-08.org.nvmexpress:uuid:963c90c2-4099-4a3a-8e0a-9a02618794a6", "ansible_system_capabilities_enforced": "False", "ansible_system_capabilities": [], "ansible_lsb": {"id": "Ubuntu", "description": "Ubuntu 22.04.5 LTS", "release": "22.04", "codename": "jammy", "major_release": "22"}, "ansible_python": {"version": {"major": 3, "minor": 10, "micro": 12, "releaselevel": "final", "serial": 0}, "version_info": [3, 10, 12, "final", 0], "executable": "/usr/bin/python3.10", "has_sslcontext": true, "type": "cpython"}, "ansible_env": {"SUDO_GID": "1000", "MAIL": "/var/mail/root", "USER": "root", "HOME": "/root", "LC_CTYPE": "C.UTF-8", "SUDO_UID": "1000", "LOGNAME": "root", "TERM": "unknown", "PATH": "/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin", "LANG": "C.UTF-8", "SUDO_COMMAND": "/bin/sh -c echo BECOME-SUCCESS-lvftffqxvvzyhhqisupcrhlqfqwlualu ; /usr/bin/python3.10", "SHELL": "/bin/bash", "SUDO_USER": "azureadmin", "PWD": "/home/azureadmin"}, "ansible_fibre_channel_wwn": [], "ansible_cmdline": {"BOOT_IMAGE": "/boot/vmlinuz-6.8.0-1021-azure", "root": "PARTUUID=0c7009ca-205b-4723-96bf-fb427a929a45", "ro": true, "console": "ttyS0", "earlyprintk": "ttyS0", "nvme_core.io_timeout": "240", "panic": "-1"}, "ansible_proc_cmdline": {"BOOT_IMAGE": "/boot/vmlinuz-6.8.0-1021-azure", "root": "PARTUUID=0c7009ca-205b-4723-96bf-fb427a929a45", "ro": true, "console": ["tty1", "ttyS0"], "earlyprintk": "ttyS0", "nvme_core.io_timeout": "240", "panic": "-1"}, "ansible_fips": false, "ansible_virtualization_role": "guest", "ansible_virtualization_type": "VirtualPC", "ansible_virtualization_tech_guest": ["VirtualPC"], "ansible_virtualization_tech_host": [], "ansible_loadavg": {"1m": 0.9873046875, "5m": 0.966796875, "15m": 1.0}, "ansible_apparmor": {"status": "enabled"}, "ansible_systemd": {"features": "+PAM +AUDIT +SELINUX +APPARMOR +IMA +SMACK +SECCOMP +GCRYPT +GNUTLS +OPENSSL +ACL +BLKID +CURL +ELFUTILS +FIDO2 +IDN2 -IDN +IPTC +KMOD +LIBCRYPTSETUP +LIBFDISK +PCRE2 -PWQUALITY -P11KIT -QRENCODE +BZIP2 +LZ4 +XZ +ZLIB +ZSTD -XKBCOMMON +UTMP +SYSVINIT default-hierarchy=unified", "version": 249}, "ansible_selinux_python_present": true, "ansible_selinux": {"status": "disabled"}, "ansible_local": {}, "ansible_dns": {"nameservers": ["127.0.0.53"], "options": {"edns0": true, "trust-ad": true}, "search": ["vk4c3odc1pkejafju2hla4lgha.ax.internal.cloudapp.net"]}, "ansible_interfaces": ["lo", "eth0"], "ansible_lo": {"device": "lo", "mtu": 65536, "active": true, "type": "loopback", "promisc": false, "ipv4": {"address": "127.0.0.1", "broadcast": "", "netmask": "255.0.0.0", "network": "127.0.0.0", "prefix": "8"}, "ipv6": [{"address": "::1", "prefix": "128", "scope": "host"}], "features": {"rx_checksumming": "on [fixed]", "tx_checksumming": "on", "tx_checksum_ipv4": "off [fixed]", "tx_checksum_ip_generic": "on [fixed]", "tx_checksum_ipv6": "off [fixed]", "tx_checksum_fcoe_crc": "off [fixed]", "tx_checksum_sctp": "on [fixed]", "scatter_gather": "on", "tx_scatter_gather": "on [fixed]", "tx_scatter_gather_fraglist": "on [fixed]", "tcp_segmentation_offload": "on", "tx_tcp_segmentation": "on", "tx_tcp_ecn_segmentation": "on", "tx_tcp_mangleid_segmentation": "on", "tx_tcp6_segmentation": "on", "generic_segmentation_offload": "on", "generic_receive_offload": "on", "large_receive_offload": "off [fixed]", "rx_vlan_offload": "off [fixed]", "tx_vlan_offload": "off [fixed]", "ntuple_filters": "off [fixed]", "receive_hashing": "off [fixed]", "highdma": "on [fixed]", "rx_vlan_filter": "off [fixed]", "vlan_challenged": "on [fixed]", "tx_lockless": "on [fixed]", "netns_local": "on [fixed]", "tx_gso_robust": "off [fixed]", "tx_fcoe_segmentation": "off [fixed]", "tx_gre_segmentation": "off [fixed]", "tx_gre_csum_segmentation": "off [fixed]", "tx_ipxip4_segmentation": "off [fixed]", "tx_ipxip6_segmentation": "off [fixed]", "tx_udp_tnl_segmentation": "off [fixed]", "tx_udp_tnl_csum_segmentation": "off [fixed]", "tx_gso_partial": "off [fixed]", "tx_tunnel_remcsum_segmentation": "off [fixed]", "tx_sctp_segmentation": "on", "tx_esp_segmentation": "off [fixed]", "tx_udp_segmentation": "on", "tx_gso_list": "on", "fcoe_mtu": "off [fixed]", "tx_nocache_copy": "off [fixed]", "loopback": "on [fixed]", "rx_fcs": "off [fixed]", "rx_all": "off [fixed]", "tx_vlan_stag_hw_insert": "off [fixed]", "rx_vlan_stag_hw_parse": "off [fixed]", "rx_vlan_stag_filter": "off [fixed]", "l2_fwd_offload": "off [fixed]", "hw_tc_offload": "off [fixed]", "esp_hw_offload": "off [fixed]", "esp_tx_csum_hw_offload": "off [fixed]", "rx_udp_tunnel_port_offload": "off [fixed]", "tls_hw_tx_offload": "off [fixed]", "tls_hw_rx_offload": "off [fixed]", "rx_gro_hw": "off [fixed]", "tls_hw_record": "off [fixed]", "rx_gro_list": "off", "macsec_hw_offload": "off [fixed]", "rx_udp_gro_forwarding": "off", "hsr_tag_ins_offload": "off [fixed]", "hsr_tag_rm_offload": "off [fixed]", "hsr_fwd_offload": "off [fixed]", "hsr_dup_offload": "off [fixed]"}, "timestamping": [], "hw_timestamp_filters": []}, "ansible_eth0": {"device": "eth0", "macaddress": "60:45:bd:f2:cb:07", "mtu": 1500, "active": true, "module": "hv_netvsc", "type": "ether", "pciid": "6045bdf2-cb07-6045-bdf2-cb076045bdf2", "speed": 50000, "promisc": false, "ipv4": {"address": "10.0.1.4", "broadcast": "", "netmask": "255.255.255.0", "network": "10.0.1.0", "prefix": "24"}, "ipv6": [{"address": "fe80::6245:bdff:fef2:cb07", "prefix": "64", "scope": "link"}], "features": {"rx_checksumming": "on", "tx_checksumming": "on", "tx_checksum_ipv4": "on", "tx_checksum_ip_generic": "off [fixed]", "tx_checksum_ipv6": "on", "tx_checksum_fcoe_crc": "off [fixed]", "tx_checksum_sctp": "off [fixed]", "scatter_gather": "on", "tx_scatter_gather": "on", "tx_scatter_gather_fraglist": "off [fixed]", "tcp_segmentation_offload": "on", "tx_tcp_segmentation": "on", "tx_tcp_ecn_segmentation": "off [fixed]", "tx_tcp_mangleid_segmentation": "off", "tx_tcp6_segmentation": "on", "generic_segmentation_offload": "on", "generic_receive_offload": "on", "large_receive_offload": "on", "rx_vlan_offload": "on [fixed]", "tx_vlan_offload": "on [fixed]", "ntuple_filters": "off [fixed]", "receive_hashing": "on", "highdma": "on [fixed]", "rx_vlan_filter": "off [fixed]", "vlan_challenged": "off [fixed]", "tx_lockless": "off [fixed]", "netns_local": "off [fixed]", "tx_gso_robust": "off [fixed]", "tx_fcoe_segmentation": "off [fixed]", "tx_gre_segmentation": "off [fixed]", "tx_gre_csum_segmentation": "off [fixed]", "tx_ipxip4_segmentation": "off [fixed]", "tx_ipxip6_segmentation": "off [fixed]", "tx_udp_tnl_segmentation": "off [fixed]", "tx_udp_tnl_csum_segmentation": "off [fixed]", "tx_gso_partial": "off [fixed]", "tx_tunnel_remcsum_segmentation": "off [fixed]", "tx_sctp_segmentation": "off [fixed]", "tx_esp_segmentation": "off [fixed]", "tx_udp_segmentation": "off [fixed]", "tx_gso_list": "off [fixed]", "fcoe_mtu": "off [fixed]", "tx_nocache_copy": "off", "loopback": "off [fixed]", "rx_fcs": "off [fixed]", "rx_all": "off [fixed]", "tx_vlan_stag_hw_insert": "off [fixed]", "rx_vlan_stag_hw_parse": "off [fixed]", "rx_vlan_stag_filter": "off [fixed]", "l2_fwd_offload": "off [fixed]", "hw_tc_offload": "off [fixed]", "esp_hw_offload": "off [fixed]", "esp_tx_csum_hw_offload": "off [fixed]", "rx_udp_tunnel_port_offload": "off [fixed]", "tls_hw_tx_offload": "off [fixed]", "tls_hw_rx_offload": "off [fixed]", "rx_gro_hw": "off [fixed]", "tls_hw_record": "off [fixed]", "rx_gro_list": "off", "macsec_hw_offload": "off [fixed]", "rx_udp_gro_forwarding": "off", "hsr_tag_ins_offload": "off [fixed]", "hsr_tag_rm_offload": "off [fixed]", "hsr_fwd_offload": "off [fixed]", "hsr_dup_offload": "off [fixed]"}, "timestamping": [], "hw_timestamp_filters": []}, "ansible_default_ipv4": {"gateway": "10.0.1.1", "interface": "eth0", "address": "10.0.1.4", "broadcast": "", "netmask": "255.255.255.0", "network": "10.0.1.0", "prefix": "24", "macaddress": "60:45:bd:f2:cb:07", "mtu": 1500, "type": "ether", "alias": "eth0"}, "ansible_default_ipv6": {}, "ansible_all_ipv4_addresses": ["10.0.1.4"], "ansible_all_ipv6_addresses": ["fe80::6245:bdff:fef2:cb07"], "ansible_locally_reachable_ips": {"ipv4": ["10.0.1.4", "127.0.0.0/8", "127.0.0.1"], "ipv6": ["::1", "fe80::6245:bdff:fef2:cb07"]}, "ansible_processor": ["0", "GenuineIntel", "Intel(R) Xeon(R) Platinum 8171M CPU @ 2.60GHz"], "ansible_flags": ["fpu", "vme", "de", "pse", "tsc", "msr", "pae", "mce", "cx8", "apic", "sep", "mtrr", "pge", "mca", "cmov", "pat", "pse36", "clflush", "mmx", "fxsr", "sse", "sse2", "ss", "syscall", "nx", "pdpe1gb", "rdtscp", "lm", "constant_tsc", "rep_good", "nopl", "xtopology", "cpuid", "pni", "pclmulqdq", "ssse3", "fma", "cx16", "pcid", "sse4_1", "sse4_2", "movbe", "popcnt", "aes", "xsave", "avx", "f16c", "rdrand", "hypervisor", "lahf_lm", "abm", "3dnowprefetch", "pti", "fsgsbase", "bmi1", "hle", "avx2", "smep", "bmi2", "erms", "invpcid", "rtm", "avx512f", "avx512dq", "rdseed", "adx", "smap", "clflushopt", "avx512cd", "avx512bw", "avx512vl", "xsaveopt", "xsavec", "xsaves", "md_clear"], "ansible_processor_count": 1, "ansible_processor_cores": 1, "ansible_processor_threads_per_core": 1, "ansible_processor_vcpus": 1, "ansible_processor_nproc": 1, "ansible_memtotal_mb": 3408, "ansible_memfree_mb": 265, "ansible_swaptotal_mb": 0, "ansible_swapfree_mb": 0, "ansible_memory_mb": {"real": {"total": 3408, "used": 3143, "free": 265}, "nocache": {"free": 2636, "used": 772}, "swap": {"total": 0, "free": 0, "used": 0, "cached": 0}}, "ansible_bios_date": "03/08/2024", "ansible_bios_vendor": "Microsoft Corporation", "ansible_bios_version": "Hyper-V UEFI Release v4.1", "ansible_board_asset_tag": "None", "ansible_board_name": "Virtual Machine", "ansible_board_serial": "0000-0012-4010-4225-9822-0877-53", "ansible_board_vendor": "Microsoft Corporation", "ansible_board_version": "Hyper-V UEFI Release v4.1", "ansible_chassis_asset_tag": "7783-7084-3265-9085-8269-3286-77", "ansible_chassis_serial": "2640-4444-9798-0224-1281-7765-05", "ansible_chassis_vendor": "Microsoft Corporation", "ansible_chassis_version": "Hyper-V UEFI Release v4.1", "ansible_form_factor": "Desktop", "ansible_product_name": "Virtual Machine", "ansible_product_serial": "0000-0007-9933-6904-1670-2593-55", "ansible_product_uuid": "6eee26ca-ef5c-429b-ac19-5a3b554d8e49", "ansible_product_version": "Hyper-V UEFI Release v4.1", "ansible_system_vendor": "Microsoft Corporation", "ansible_devices": {"loop1": {"virtual": 1, "links": {"ids": [], "uuids": [], "labels": [], "masters": []}, "vendor": null, "model": null, "sas_address": null, "sas_device_handle": null, "removable": "0", "support_discard": "4096", "partitions": {}, "rotational": "1", "scheduler_mode": "none", "sectorsize": "512", "sectors": 183096, "size": "89.40 MB", "host": "", "holders": []}, "sdb": {"virtual": 1, "links": {"ids": ["scsi-14d534654202020205c1e8b20c977084a8d1522c90366bdce", "scsi-3600224805c1e8b20c97722c90366bdce", "wwn-0x600224805c1e8b20c97722c90366bdce"], "uuids": [], "labels": [], "masters": []}, "vendor": "Msft", "model": "Virtual Disk", "sas_address": null, "sas_device_handle": null, "removable": "0", "support_discard": "2097152", "wwn": "0x600224805c1e8b20c97722c90366bdce", "partitions": {"sdb1": {"links": {"ids": ["scsi-14d534654202020205c1e8b20c977084a8d1522c90366bdce-part1", "scsi-3600224805c1e8b20c97722c90366bdce-part1", "wwn-0x600224805c1e8b20c97722c90366bdce-part1"], "uuids": ["5fbb754a-dd42-4ad8-8bdb-41feb2a25b98"], "labels": [], "masters": []}, "start": "2048", "sectorsize": 512, "sectors": 14675968, "size": "7.00 GB", "uuid": "5fbb754a-dd42-4ad8-8bdb-41feb2a25b98", "holders": []}}, "rotational": "1", "scheduler_mode": "mq-deadline", "sectorsize": "512", "sectors": 14680064, "size": "7.00 GB", "host": "", "holders": []}, "loop6": {"virtual": 1, "links": {"ids": [], "uuids": [], "labels": [], "masters": []}, "vendor": null, "model": null, "sas_address": null, "sas_device_handle": null, "removable": "0", "support_discard": "0", "partitions": {}, "rotational": "1", "scheduler_mode": "none", "sectorsize": "512", "sectors": 0, "size": "0.00 Bytes", "host": "", "holders": []}, "loop4": {"virtual": 1, "links": {"ids": [], "uuids": [], "labels": [], "masters": []}, "vendor": null, "model": null, "sas_address": null, "sas_device_handle": null, "removable": "0", "support_discard": "0", "partitions": {}, "rotational": "1", "scheduler_mode": "none", "sectorsize": "512", "sectors": 0, "size": "0.00 Bytes", "host": "", "holders": []}, "sr0": {"virtual": 1, "links": {"ids": ["scsi-14d534654202020207305e3437703544694957d7ced624a7d"], "uuids": [], "labels": [], "masters": []}, "vendor": "Msft", "model": "Virtual DVD-ROM", "sas_address": null, "sas_device_handle": null, "removable": "1", "support_discard": "0", "partitions": {}, "rotational": "1", "scheduler_mode": "mq-deadline", "sectorsize": "2048", "sectors": 314, "size": "628.00 KB", "host": "", "holders": []}, "loop2": {"virtual": 1, "links": {"ids": [], "uuids": [], "labels": [], "masters": []}, "vendor": null, "model": null, "sas_address": null, "sas_device_handle": null, "removable": "0", "support_discard": "4096", "partitions": {}, "rotational": "1", "scheduler_mode": "none", "sectorsize": "512", "sectors": 91008, "size": "44.44 MB", "host": "", "holders": []}, "loop0": {"virtual": 1, "links": {"ids": [], "uuids": [], "labels": [], "masters": []}, "vendor": null, "model": null, "sas_address": null, "sas_device_handle": null, "removable": "0", "support_discard": "4096", "partitions": {}, "rotational": "1", "scheduler_mode": "none", "sectorsize": "512", "sectors": 130448, "size": "63.70 MB", "host": "", "holders": []}, "loop7": {"virtual": 1, "links": {"ids": [], "uuids": [], "labels": [], "masters": []}, "vendor": null, "model": null, "sas_address": null, "sas_device_handle": null, "removable": "0", "support_discard": "0", "partitions": {}, "rotational": "1", "scheduler_mode": "none", "sectorsize": "512", "sectors": 0, "size": "0.00 Bytes", "host": "", "holders": []}, "sda": {"virtual": 1, "links": {"ids": ["scsi-14d534654202020209c519212543a8f4783142ca3cf480d32", "scsi-3600224809c519212543a2ca3cf480d32", "wwn-0x600224809c519212543a2ca3cf480d32"], "uuids": [], "labels": [], "masters": []}, "vendor": "Msft", "model": "Virtual Disk", "sas_address": null, "sas_device_handle": null, "removable": "0", "support_discard": "2097152", "wwn": "0x600224809c519212543a2ca3cf480d32", "partitions": {"sda14": {"links": {"ids": ["scsi-14d534654202020209c519212543a8f4783142ca3cf480d32-part14", "scsi-3600224809c519212543a2ca3cf480d32-part14", "wwn-0x600224809c519212543a2ca3cf480d32-part14"], "uuids": [], "labels": [], "masters": []}, "start": "2048", "sectorsize": 512, "sectors": 8192, "size": "4.00 MB", "uuid": null, "holders": []}, "sda15": {"links": {"ids": ["scsi-14d534654202020209c519212543a8f4783142ca3cf480d32-part15", "scsi-3600224809c519212543a2ca3cf480d32-part15", "wwn-0x600224809c519212543a2ca3cf480d32-part15"], "uuids": ["E8AE-90AB"], "labels": ["UEFI"], "masters": []}, "start": "10240", "sectorsize": 512, "sectors": 217088, "size": "106.00 MB", "uuid": "E8AE-90AB", "holders": []}, "sda1": {"links": {"ids": ["scsi-14d534654202020209c519212543a8f4783142ca3cf480d32-part1", "scsi-3600224809c519212543a2ca3cf480d32-part1", "wwn-0x600224809c519212543a2ca3cf480d32-part1"], "uuids": ["721ea9a7-9d5f-4501-82e8-5ba059b492e5"], "labels": ["cloudimg-rootfs"], "masters": []}, "start": "227328", "sectorsize": 512, "sectors": 62689247, "size": "29.89 GB", "uuid": "721ea9a7-9d5f-4501-82e8-5ba059b492e5", "holders": []}}, "rotational": "1", "scheduler_mode": "mq-deadline", "sectorsize": "512", "sectors": 62916608, "size": "30.00 GB", "host": "", "holders": []}, "loop5": {"virtual": 1, "links": {"ids": [], "uuids": [], "labels": [], "masters": []}, "vendor": null, "model": null, "sas_address": null, "sas_device_handle": null, "removable": "0", "support_discard": "0", "partitions": {}, "rotational": "1", "scheduler_mode": "none", "sectorsize": "512", "sectors": 0, "size": "0.00 Bytes", "host": "", "holders": []}, "loop3": {"virtual": 1, "links": {"ids": [], "uuids": [], "labels": [], "masters": []}, "vendor": null, "model": null, "sas_address": null, "sas_device_handle": null, "removable": "0", "support_discard": "4096", "partitions": {}, "rotational": "1", "scheduler_mode": "none", "sectorsize": "512", "sectors": 0, "size": "0.00 Bytes", "host": "", "holders": []}}, "ansible_device_links": {"ids": {"sr0": ["scsi-14d534654202020207305e3437703544694957d7ced624a7d"], "sda": ["scsi-14d534654202020209c519212543a8f4783142ca3cf480d32", "scsi-3600224809c519212543a2ca3cf480d32", "wwn-0x600224809c519212543a2ca3cf480d32"], "sdb": ["scsi-14d534654202020205c1e8b20c977084a8d1522c90366bdce", "scsi-3600224805c1e8b20c97722c90366bdce", "wwn-0x600224805c1e8b20c97722c90366bdce"], "sda14": ["scsi-14d534654202020209c519212543a8f4783142ca3cf480d32-part14", "scsi-3600224809c519212543a2ca3cf480d32-part14", "wwn-0x600224809c519212543a2ca3cf480d32-part14"], "sda15": ["scsi-14d534654202020209c519212543a8f4783142ca3cf480d32-part15", "scsi-3600224809c519212543a2ca3cf480d32-part15", "wwn-0x600224809c519212543a2ca3cf480d32-part15"], "sda1": ["scsi-14d534654202020209c519212543a8f4783142ca3cf480d32-part1", "scsi-3600224809c519212543a2ca3cf480d32-part1", "wwn-0x600224809c519212543a2ca3cf480d32-part1"], "sdb1": ["scsi-14d534654202020205c1e8b20c977084a8d1522c90366bdce-part1", "scsi-3600224805c1e8b20c97722c90366bdce-part1", "wwn-0x600224805c1e8b20c97722c90366bdce-part1"]}, "uuids": {"sda1": ["721ea9a7-9d5f-4501-82e8-5ba059b492e5"], "sda15": ["E8AE-90AB"], "sdb1": ["5fbb754a-dd42-4ad8-8bdb-41feb2a25b98"]}, "labels": {"sda15": ["UEFI"], "sda1": ["cloudimg-rootfs"]}, "masters": {}}, "ansible_uptime_seconds": 12642, "ansible_lvm": {"lvs": {}, "vgs": {}, "pvs": {}}, "ansible_mounts": [{"mount": "/", "device": "/dev/root", "fstype": "ext4", "options": "rw,relatime,discard,errors=remount-ro", "dump": 0, "passno": 0, "size_total": 31025332224, "size_available": 26600255488, "block_size": 4096, "block_total": 7574544, "block_available": 6494203, "block_used": 1080341, "inode_total": 3870720, "inode_available": 3723336, "inode_used": 147384, "uuid": "721ea9a7-9d5f-4501-82e8-5ba059b492e5"}, {"mount": "/snap/core20/2434", "device": "/dev/loop0", "fstype": "squashfs", "options": "ro,nodev,relatime,errors=continue,threads=single", "dump": 0, "passno": 0, "size_total": 66846720, "size_available": 0, "block_size": 131072, "block_total": 510, "block_available": 0, "block_used": 510, "inode_total": 11851, "inode_available": 0, "inode_used": 11851, "uuid": "N/A"}, {"mount": "/snap/lxd/31333", "device": "/dev/loop1", "fstype": "squashfs", "options": "ro,nodev,relatime,errors=continue,threads=single", "dump": 0, "passno": 0, "size_total": 93847552, "size_available": 0, "block_size": 131072, "block_total": 716, "block_available": 0, "block_used": 716, "inode_total": 961, "inode_available": 0, "inode_used": 961, "uuid": "N/A"}, {"mount": "/snap/snapd/23545", "device": "/dev/loop2", "fstype": "squashfs", "options": "ro,nodev,relatime,errors=continue,threads=single", "dump": 0, "passno": 0, "size_total": 46661632, "size_available": 0, "block_size": 131072, "block_total": 356, "block_available": 0, "block_used": 356, "inode_total": 608, "inode_available": 0, "inode_used": 608, "uuid": "N/A"}, {"mount": "/boot/efi", "device": "/dev/sda15", "fstype": "vfat", "options": "rw,relatime,fmask=0077,dmask=0077,codepage=437,iocharset=iso8859-1,shortname=mixed,errors=remount-ro", "dump": 0, "passno": 0, "size_total": 109395456, "size_available": 103057408, "block_size": 512, "block_total": 213663, "block_available": 201284, "block_used": 12379, "inode_total": 0, "inode_available": 0, "inode_used": 0, "uuid": "E8AE-90AB"}, {"mount": "/mnt", "device": "/dev/sdb1", "fstype": "ext4", "options": "rw,relatime", "dump": 0, "passno": 0, "size_total": 7296020480, "size_available": 6903513088, "block_size": 4096, "block_total": 1781255, "block_available": 1685428, "block_used": 95827, "inode_total": 458752, "inode_available": 458740, "inode_used": 12, "uuid": "5fbb754a-dd42-4ad8-8bdb-41feb2a25b98"}], "ansible_pkg_mgr": "apt", "ansible_service_mgr": "systemd", "gather_subset": ["all"], "module_setup": true}, "invocation": {"module_args": {"gather_subset": ["all"], "gather_timeout": 10, "filter": [], "fact_path": "/etc/ansible/facts.d"}}}\n', b"OpenSSH_9.8p1, LibreSSL 3.3.6\r\ndebug1: Reading configuration data /etc/ssh/ssh_config\r\ndebug1: /etc/ssh/ssh_config line 21: include /etc/ssh/ssh_config.d/* matched no files\r\ndebug1: /etc/ssh/ssh_config line 54: Applying options for *\r\ndebug2: resolve_canonicalize: hostname 40.68.93.141 is address\r\ndebug3: expanded UserKnownHostsFile '~/.ssh/known_hosts' -> '/Users/snrj/.ssh/known_hosts'\r\ndebug3: expanded UserKnownHostsFile '~/.ssh/known_hosts2' -> '/Users/snrj/.ssh/known_hosts2'\r\ndebug1: Authenticator provider $SSH_SK_PROVIDER did not resolve; disabling\r\ndebug1: auto-mux: Trying existing master at '/Users/snrj/.ansible/cp/1da56dae57'\r\ndebug2: fd 3 setting O_NONBLOCK\r\ndebug2: mux_client_hello_exchange: master version 4\r\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\r\ndebug3: mux_client_request_session: entering\r\ndebug3: mux_client_request_alive: entering\r\ndebug3: mux_client_request_alive: done pid = 64223\r\ndebug3: mux_client_request_session: session request sent\r\ndebug1: mux_client_request_session: master session id: 2\r\ndebug3: mux_client_read_packet_timeout: read header failed: Broken pipe\r\ndebug2: Received exit status from master 0\r\n")
2025-02-21 02:52:25,211 p=64208 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 40.68.93.141 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-21 02:52:25,211 p=64208 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:52:25,216 p=64208 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/app_vars.yml'
2025-02-21 02:52:25,216 p=64208 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/vars.yml'
2025-02-21 02:52:25,217 p=64208 u=snrj n=ansible INFO| TASK [flask_app : Update apt package index] *****************************************************************************************************************
2025-02-21 02:52:25,217 p=64208 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:3
2025-02-21 02:52:25,357 p=64208 u=snrj n=ansible INFO| Using module file /opt/homebrew/Cellar/ansible/11.2.0/libexec/lib/python3.13/site-packages/ansible/modules/apt.py
2025-02-21 02:52:25,357 p=64208 u=snrj n=ansible INFO| Pipelining is enabled.
2025-02-21 02:52:25,357 p=64208 u=snrj n=ansible INFO| <40.68.93.141> ESTABLISH SSH CONNECTION FOR USER: azureadmin
2025-02-21 02:52:25,357 p=64208 u=snrj n=ansible INFO| <40.68.93.141> SSH: EXEC ssh -vvv -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o 'IdentityFile="/Users/snrj/.ssh/id_rsa"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User="azureadmin"' -o ConnectTimeout=30 -o StrictHostKeyChecking=no -o 'ControlPath="/Users/snrj/.ansible/cp/1da56dae57"' 40.68.93.141 '/bin/sh -c '"'"'sudo -H -S -n  -u root /bin/sh -c '"'"'"'"'"'"'"'"'echo BECOME-SUCCESS-ssvmumjdiofqaahrxqrpavldxhgojbdz ; /usr/bin/python3.10'"'"'"'"'"'"'"'"' && sleep 0'"'"''
2025-02-21 02:52:25,446 p=64208 u=snrj n=ansible INFO| Escalation succeeded
2025-02-21 02:52:29,427 p=64208 u=snrj n=ansible INFO| <40.68.93.141> (0, b'\n{"changed": true, "cache_updated": true, "cache_update_time": 1740102748, "invocation": {"module_args": {"update_cache": true, "state": "present", "update_cache_retries": 5, "update_cache_retry_max_delay": 12, "cache_valid_time": 0, "purge": false, "force": false, "upgrade": null, "dpkg_options": "force-confdef,force-confold", "autoremove": false, "autoclean": false, "fail_on_autoremove": false, "only_upgrade": false, "force_apt_get": false, "clean": false, "allow_unauthenticated": false, "allow_downgrade": false, "allow_change_held_packages": false, "lock_timeout": 60, "package": null, "deb": null, "default_release": null, "install_recommends": null, "policy_rc_d": null}}}\n', b"OpenSSH_9.8p1, LibreSSL 3.3.6\r\ndebug1: Reading configuration data /etc/ssh/ssh_config\r\ndebug1: /etc/ssh/ssh_config line 21: include /etc/ssh/ssh_config.d/* matched no files\r\ndebug1: /etc/ssh/ssh_config line 54: Applying options for *\r\ndebug2: resolve_canonicalize: hostname 40.68.93.141 is address\r\ndebug3: expanded UserKnownHostsFile '~/.ssh/known_hosts' -> '/Users/snrj/.ssh/known_hosts'\r\ndebug3: expanded UserKnownHostsFile '~/.ssh/known_hosts2' -> '/Users/snrj/.ssh/known_hosts2'\r\ndebug1: Authenticator provider $SSH_SK_PROVIDER did not resolve; disabling\r\ndebug1: auto-mux: Trying existing master at '/Users/snrj/.ansible/cp/1da56dae57'\r\ndebug2: fd 3 setting O_NONBLOCK\r\ndebug2: mux_client_hello_exchange: master version 4\r\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\r\ndebug3: mux_client_request_session: entering\r\ndebug3: mux_client_request_alive: entering\r\ndebug3: mux_client_request_alive: done pid = 64223\r\ndebug3: mux_client_request_session: session request sent\r\ndebug1: mux_client_request_session: master session id: 2\r\ndebug3: mux_client_read_packet_timeout: read header failed: Broken pipe\r\ndebug2: Received exit status from master 0\r\n")
2025-02-21 02:52:29,432 p=64208 u=snrj n=ansible INFO| changed: [40.68.93.141] => {
    "cache_update_time": 1740102748,
    "cache_updated": true,
    "changed": true,
    "invocation": {
        "module_args": {
            "allow_change_held_packages": false,
            "allow_downgrade": false,
            "allow_unauthenticated": false,
            "autoclean": false,
            "autoremove": false,
            "cache_valid_time": 0,
            "clean": false,
            "deb": null,
            "default_release": null,
            "dpkg_options": "force-confdef,force-confold",
            "fail_on_autoremove": false,
            "force": false,
            "force_apt_get": false,
            "install_recommends": null,
            "lock_timeout": 60,
            "only_upgrade": false,
            "package": null,
            "policy_rc_d": null,
            "purge": false,
            "state": "present",
            "update_cache": true,
            "update_cache_retries": 5,
            "update_cache_retry_max_delay": 12,
            "upgrade": null
        }
    }
}
2025-02-21 02:52:29,440 p=64208 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/app_vars.yml'
2025-02-21 02:52:29,440 p=64208 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/vars.yml'
2025-02-21 02:52:29,441 p=64208 u=snrj n=ansible INFO| TASK [flask_app : Ensure the 'universe' repository is enabled] **********************************************************************************************
2025-02-21 02:52:29,441 p=64208 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:7
2025-02-21 02:52:29,543 p=64208 u=snrj n=ansible INFO| Using module file /opt/homebrew/Cellar/ansible/11.2.0/libexec/lib/python3.13/site-packages/ansible/modules/apt_repository.py
2025-02-21 02:52:29,543 p=64208 u=snrj n=ansible INFO| Pipelining is enabled.
2025-02-21 02:52:29,543 p=64208 u=snrj n=ansible INFO| <40.68.93.141> ESTABLISH SSH CONNECTION FOR USER: azureadmin
2025-02-21 02:52:29,543 p=64208 u=snrj n=ansible INFO| <40.68.93.141> SSH: EXEC ssh -vvv -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o 'IdentityFile="/Users/snrj/.ssh/id_rsa"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User="azureadmin"' -o ConnectTimeout=30 -o StrictHostKeyChecking=no -o 'ControlPath="/Users/snrj/.ansible/cp/1da56dae57"' 40.68.93.141 '/bin/sh -c '"'"'sudo -H -S -n  -u root /bin/sh -c '"'"'"'"'"'"'"'"'echo BECOME-SUCCESS-zfpiaiqksmlhlqdgxfzakucxqeyenhkg ; /usr/bin/python3.10'"'"'"'"'"'"'"'"' && sleep 0'"'"''
2025-02-21 02:52:29,633 p=64208 u=snrj n=ansible INFO| Escalation succeeded
2025-02-21 02:52:30,350 p=64208 u=snrj n=ansible INFO| <40.68.93.141> (0, b'\n{"changed": false, "repo": "deb http://archive.ubuntu.com/ubuntu/ jammy universe", "sources_added": [], "sources_removed": [], "state": "present", "diff": [], "invocation": {"module_args": {"repo": "deb http://archive.ubuntu.com/ubuntu/ jammy universe", "state": "present", "update_cache": true, "update_cache_retries": 5, "update_cache_retry_max_delay": 12, "install_python_apt": true, "validate_certs": true, "mode": null, "filename": null, "codename": null}}}\n', b"OpenSSH_9.8p1, LibreSSL 3.3.6\r\ndebug1: Reading configuration data /etc/ssh/ssh_config\r\ndebug1: /etc/ssh/ssh_config line 21: include /etc/ssh/ssh_config.d/* matched no files\r\ndebug1: /etc/ssh/ssh_config line 54: Applying options for *\r\ndebug2: resolve_canonicalize: hostname 40.68.93.141 is address\r\ndebug3: expanded UserKnownHostsFile '~/.ssh/known_hosts' -> '/Users/snrj/.ssh/known_hosts'\r\ndebug3: expanded UserKnownHostsFile '~/.ssh/known_hosts2' -> '/Users/snrj/.ssh/known_hosts2'\r\ndebug1: Authenticator provider $SSH_SK_PROVIDER did not resolve; disabling\r\ndebug1: auto-mux: Trying existing master at '/Users/snrj/.ansible/cp/1da56dae57'\r\ndebug2: fd 3 setting O_NONBLOCK\r\ndebug2: mux_client_hello_exchange: master version 4\r\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\r\ndebug3: mux_client_request_session: entering\r\ndebug3: mux_client_request_alive: entering\r\ndebug3: mux_client_request_alive: done pid = 64223\r\ndebug3: mux_client_request_session: session request sent\r\ndebug1: mux_client_request_session: master session id: 2\r\ndebug3: mux_client_read_packet_timeout: read header failed: Broken pipe\r\ndebug2: Received exit status from master 0\r\n")
2025-02-21 02:52:30,355 p=64208 u=snrj n=ansible INFO| ok: [40.68.93.141] => {
    "changed": false,
    "diff": [],
    "invocation": {
        "module_args": {
            "codename": null,
            "filename": null,
            "install_python_apt": true,
            "mode": null,
            "repo": "deb http://archive.ubuntu.com/ubuntu/ jammy universe",
            "state": "present",
            "update_cache": true,
            "update_cache_retries": 5,
            "update_cache_retry_max_delay": 12,
            "validate_certs": true
        }
    },
    "repo": "deb http://archive.ubuntu.com/ubuntu/ jammy universe",
    "sources_added": [],
    "sources_removed": [],
    "state": "present"
}
2025-02-21 02:52:30,364 p=64208 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/app_vars.yml'
2025-02-21 02:52:30,365 p=64208 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/vars.yml'
2025-02-21 02:52:30,366 p=64208 u=snrj n=ansible INFO| TASK [flask_app : Install python3-pip] **********************************************************************************************************************
2025-02-21 02:52:30,366 p=64208 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:12
2025-02-21 02:52:30,405 p=64208 u=snrj n=ansible INFO| Using module file /opt/homebrew/Cellar/ansible/11.2.0/libexec/lib/python3.13/site-packages/ansible/modules/apt.py
2025-02-21 02:52:30,405 p=64208 u=snrj n=ansible INFO| Pipelining is enabled.
2025-02-21 02:52:30,406 p=64208 u=snrj n=ansible INFO| <40.68.93.141> ESTABLISH SSH CONNECTION FOR USER: azureadmin
2025-02-21 02:52:30,406 p=64208 u=snrj n=ansible INFO| <40.68.93.141> SSH: EXEC ssh -vvv -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o 'IdentityFile="/Users/snrj/.ssh/id_rsa"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User="azureadmin"' -o ConnectTimeout=30 -o StrictHostKeyChecking=no -o 'ControlPath="/Users/snrj/.ansible/cp/1da56dae57"' 40.68.93.141 '/bin/sh -c '"'"'sudo -H -S -n  -u root /bin/sh -c '"'"'"'"'"'"'"'"'echo BECOME-SUCCESS-rxwlfyorgdyetyooxhzphofedmitlczl ; /usr/bin/python3.10'"'"'"'"'"'"'"'"' && sleep 0'"'"''
2025-02-21 02:52:30,503 p=64208 u=snrj n=ansible INFO| Escalation succeeded
2025-02-21 02:52:32,640 p=64208 u=snrj n=ansible INFO| <40.68.93.141> (0, b'\n{"changed": false, "cache_updated": false, "cache_update_time": 1740102748, "invocation": {"module_args": {"name": "python3-pip", "state": "present", "package": ["python3-pip"], "update_cache_retries": 5, "update_cache_retry_max_delay": 12, "cache_valid_time": 0, "purge": false, "force": false, "upgrade": null, "dpkg_options": "force-confdef,force-confold", "autoremove": false, "autoclean": false, "fail_on_autoremove": false, "only_upgrade": false, "force_apt_get": false, "clean": false, "allow_unauthenticated": false, "allow_downgrade": false, "allow_change_held_packages": false, "lock_timeout": 60, "update_cache": null, "deb": null, "default_release": null, "install_recommends": null, "policy_rc_d": null}}}\n', b"OpenSSH_9.8p1, LibreSSL 3.3.6\r\ndebug1: Reading configuration data /etc/ssh/ssh_config\r\ndebug1: /etc/ssh/ssh_config line 21: include /etc/ssh/ssh_config.d/* matched no files\r\ndebug1: /etc/ssh/ssh_config line 54: Applying options for *\r\ndebug2: resolve_canonicalize: hostname 40.68.93.141 is address\r\ndebug3: expanded UserKnownHostsFile '~/.ssh/known_hosts' -> '/Users/snrj/.ssh/known_hosts'\r\ndebug3: expanded UserKnownHostsFile '~/.ssh/known_hosts2' -> '/Users/snrj/.ssh/known_hosts2'\r\ndebug1: Authenticator provider $SSH_SK_PROVIDER did not resolve; disabling\r\ndebug1: auto-mux: Trying existing master at '/Users/snrj/.ansible/cp/1da56dae57'\r\ndebug2: fd 3 setting O_NONBLOCK\r\ndebug2: mux_client_hello_exchange: master version 4\r\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\r\ndebug3: mux_client_request_session: entering\r\ndebug3: mux_client_request_alive: entering\r\ndebug3: mux_client_request_alive: done pid = 64223\r\ndebug3: mux_client_request_session: session request sent\r\ndebug1: mux_client_request_session: master session id: 2\r\ndebug3: mux_client_read_packet_timeout: read header failed: Broken pipe\r\ndebug2: Received exit status from master 0\r\n")
2025-02-21 02:52:32,646 p=64208 u=snrj n=ansible INFO| ok: [40.68.93.141] => {
    "cache_update_time": 1740102748,
    "cache_updated": false,
    "changed": false,
    "invocation": {
        "module_args": {
            "allow_change_held_packages": false,
            "allow_downgrade": false,
            "allow_unauthenticated": false,
            "autoclean": false,
            "autoremove": false,
            "cache_valid_time": 0,
            "clean": false,
            "deb": null,
            "default_release": null,
            "dpkg_options": "force-confdef,force-confold",
            "fail_on_autoremove": false,
            "force": false,
            "force_apt_get": false,
            "install_recommends": null,
            "lock_timeout": 60,
            "name": "python3-pip",
            "only_upgrade": false,
            "package": [
                "python3-pip"
            ],
            "policy_rc_d": null,
            "purge": false,
            "state": "present",
            "update_cache": null,
            "update_cache_retries": 5,
            "update_cache_retry_max_delay": 12,
            "upgrade": null
        }
    }
}
2025-02-21 02:52:32,659 p=64208 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/app_vars.yml'
2025-02-21 02:52:32,660 p=64208 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/vars.yml'
2025-02-21 02:52:32,660 p=64208 u=snrj n=ansible INFO| TASK [flask_app : Install required Python packages] *********************************************************************************************************
2025-02-21 02:52:32,660 p=64208 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:17
2025-02-21 02:52:32,749 p=64208 u=snrj n=ansible INFO| Using module file /opt/homebrew/Cellar/ansible/11.2.0/libexec/lib/python3.13/site-packages/ansible/modules/pip.py
2025-02-21 02:52:32,749 p=64208 u=snrj n=ansible INFO| Pipelining is enabled.
2025-02-21 02:52:32,749 p=64208 u=snrj n=ansible INFO| <40.68.93.141> ESTABLISH SSH CONNECTION FOR USER: azureadmin
2025-02-21 02:52:32,749 p=64208 u=snrj n=ansible INFO| <40.68.93.141> SSH: EXEC ssh -vvv -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o 'IdentityFile="/Users/snrj/.ssh/id_rsa"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User="azureadmin"' -o ConnectTimeout=30 -o StrictHostKeyChecking=no -o 'ControlPath="/Users/snrj/.ansible/cp/1da56dae57"' 40.68.93.141 '/bin/sh -c '"'"'sudo -H -S -n  -u root /bin/sh -c '"'"'"'"'"'"'"'"'echo BECOME-SUCCESS-hadqhhhprsreqaebevutjmlhdrfrjeby ; /usr/bin/python3.10'"'"'"'"'"'"'"'"' && sleep 0'"'"''
2025-02-21 02:52:32,856 p=64208 u=snrj n=ansible INFO| Escalation succeeded
2025-02-21 02:52:35,985 p=64208 u=snrj n=ansible INFO| <40.68.93.141> (0, b'\n{"changed": false, "cmd": ["/usr/bin/python3.10", "-m", "pip.__main__", "install", "fastapi", "uvicorn", "azure-monitor-opentelemetry"], "name": ["fastapi", "uvicorn", "azure-monitor-opentelemetry"], "version": null, "state": "present", "requirements": null, "virtualenv": null, "stdout": "Requirement already satisfied: fastapi in /usr/local/lib/python3.10/dist-packages (0.115.8)\\nRequirement already satisfied: uvicorn in /usr/local/lib/python3.10/dist-packages (0.34.0)\\nRequirement already satisfied: azure-monitor-opentelemetry in /usr/local/lib/python3.10/dist-packages (1.6.5)\\nRequirement already satisfied: pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4 in /usr/local/lib/python3.10/dist-packages (from fastapi) (2.10.6)\\nRequirement already satisfied: starlette<0.46.0,>=0.40.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (0.45.3)\\nRequirement already satisfied: typing-extensions>=4.8.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (4.12.2)\\nRequirement already satisfied: click>=7.0 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (8.1.8)\\nRequirement already satisfied: h11>=0.8 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (0.14.0)\\nRequirement already satisfied: azure-core<2.0.0,>=1.28.0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.32.0)\\nRequirement already satisfied: opentelemetry-instrumentation-flask~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\\nRequirement already satisfied: opentelemetry-instrumentation-requests~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\\nRequirement already satisfied: azure-core-tracing-opentelemetry~=1.0.0b11 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b11)\\nRequirement already satisfied: opentelemetry-instrumentation-urllib~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\\nRequirement already satisfied: opentelemetry-instrumentation-django~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\\nRequirement already satisfied: opentelemetry-instrumentation-psycopg2~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\\nRequirement already satisfied: opentelemetry-instrumentation-fastapi~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\\nRequirement already satisfied: opentelemetry-resource-detector-azure~=0.1.4 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.1.5)\\nRequirement already satisfied: azure-monitor-opentelemetry-exporter~=1.0.0b31 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b33)\\nRequirement already satisfied: opentelemetry-sdk~=1.28 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.30.0)\\nRequirement already satisfied: opentelemetry-instrumentation-urllib3~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\\nRequirement already satisfied: six>=1.11.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.16.0)\\nRequirement already satisfied: requests>=2.21.0 in /usr/local/lib/python3.10/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (2.32.3)\\nRequirement already satisfied: opentelemetry-api<2.0.0,>=1.12.0 in /usr/local/lib/python3.10/dist-packages (from azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (1.30.0)\\nRequirement already satisfied: msrest>=0.6.10 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.1)\\nRequirement already satisfied: psutil~=5.9 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (5.9.8)\\nRequirement already satisfied: fixedint==0.1.6 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.1.6)\\nRequirement already satisfied: opentelemetry-instrumentation-wsgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\\nRequirement already satisfied: opentelemetry-semantic-conventions==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\\nRequirement already satisfied: opentelemetry-util-http==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\\nRequirement already satisfied: opentelemetry-instrumentation==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\\nRequirement already satisfied: wrapt<2.0.0,>=1.0.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.17.2)\\nRequirement already satisfied: packaging>=18.0 in /usr/lib/python3/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (21.3)\\nRequirement already satisfied: deprecated>=1.2.6 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-semantic-conventions==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.2.18)\\nRequirement already satisfied: importlib-metadata<=8.5.0,>=6.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (8.5.0)\\nRequirement already satisfied: opentelemetry-instrumentation-asgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\\nRequirement already satisfied: asgiref~=3.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-asgi==0.51b0->opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (3.8.1)\\nRequirement already satisfied: opentelemetry-instrumentation-dbapi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-psycopg2~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\\nRequirement already satisfied: pydantic-core==2.27.2 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (2.27.2)\\nRequirement already satisfied: annotated-types>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (0.7.0)\\nRequirement already satisfied: anyio<5,>=3.6.2 in /usr/local/lib/python3.10/dist-packages (from starlette<0.46.0,>=0.40.0->fastapi) (4.8.0)\\nRequirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.2.2)\\nRequirement already satisfied: idna>=2.8 in /usr/lib/python3/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (3.3)\\nRequirement already satisfied: sniffio>=1.1 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.3.1)\\nRequirement already satisfied: requests-oauthlib>=0.5.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2.0.0)\\nRequirement already satisfied: certifi>=2017.4.17 in /usr/lib/python3/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2020.6.20)\\nRequirement already satisfied: isodate>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.2)\\nRequirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (3.4.1)\\nRequirement already satisfied: urllib3<3,>=1.21.1 in /usr/lib/python3/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.26.5)\\nRequirement already satisfied: zipp>=3.20 in /usr/local/lib/python3.10/dist-packages (from importlib-metadata<=8.5.0,>=6.0->opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (3.21.0)\\nRequirement already satisfied: oauthlib>=3.0.0 in /usr/lib/python3/dist-packages (from requests-oauthlib>=0.5.0->msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (3.2.0)\\n", "stderr": "WARNING: Running pip as the \'root\' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\\n", "invocation": {"module_args": {"name": ["fastapi", "uvicorn", "azure-monitor-opentelemetry"], "state": "present", "virtualenv_site_packages": false, "virtualenv_command": "virtualenv", "editable": false, "break_system_packages": false, "version": null, "requirements": null, "virtualenv": null, "virtualenv_python": null, "extra_args": null, "chdir": null, "executable": null, "umask": null}}}\n', b"OpenSSH_9.8p1, LibreSSL 3.3.6\r\ndebug1: Reading configuration data /etc/ssh/ssh_config\r\ndebug1: /etc/ssh/ssh_config line 21: include /etc/ssh/ssh_config.d/* matched no files\r\ndebug1: /etc/ssh/ssh_config line 54: Applying options for *\r\ndebug2: resolve_canonicalize: hostname 40.68.93.141 is address\r\ndebug3: expanded UserKnownHostsFile '~/.ssh/known_hosts' -> '/Users/snrj/.ssh/known_hosts'\r\ndebug3: expanded UserKnownHostsFile '~/.ssh/known_hosts2' -> '/Users/snrj/.ssh/known_hosts2'\r\ndebug1: Authenticator provider $SSH_SK_PROVIDER did not resolve; disabling\r\ndebug1: auto-mux: Trying existing master at '/Users/snrj/.ansible/cp/1da56dae57'\r\ndebug2: fd 3 setting O_NONBLOCK\r\ndebug2: mux_client_hello_exchange: master version 4\r\ndebug3: mux_client_forwards: request forwardings: 0 local, 0 remote\r\ndebug3: mux_client_request_session: entering\r\ndebug3: mux_client_request_alive: entering\r\ndebug3: mux_client_request_alive: done pid = 64223\r\ndebug3: mux_client_request_session: session request sent\r\ndebug1: mux_client_request_session: master session id: 2\r\ndebug3: mux_client_read_packet_timeout: read header failed: Broken pipe\r\ndebug2: Received exit status from master 0\r\n")
2025-02-21 02:52:35,993 p=64208 u=snrj n=ansible INFO| ok: [40.68.93.141] => {
    "changed": false,
    "cmd": [
        "/usr/bin/python3.10",
        "-m",
        "pip.__main__",
        "install",
        "fastapi",
        "uvicorn",
        "azure-monitor-opentelemetry"
    ],
    "invocation": {
        "module_args": {
            "break_system_packages": false,
            "chdir": null,
            "editable": false,
            "executable": null,
            "extra_args": null,
            "name": [
                "fastapi",
                "uvicorn",
                "azure-monitor-opentelemetry"
            ],
            "requirements": null,
            "state": "present",
            "umask": null,
            "version": null,
            "virtualenv": null,
            "virtualenv_command": "virtualenv",
            "virtualenv_python": null,
            "virtualenv_site_packages": false
        }
    },
    "name": [
        "fastapi",
        "uvicorn",
        "azure-monitor-opentelemetry"
    ],
    "requirements": null,
    "state": "present",
    "stderr": "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n",
    "stderr_lines": [
        "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv"
    ],
    "stdout": "Requirement already satisfied: fastapi in /usr/local/lib/python3.10/dist-packages (0.115.8)\nRequirement already satisfied: uvicorn in /usr/local/lib/python3.10/dist-packages (0.34.0)\nRequirement already satisfied: azure-monitor-opentelemetry in /usr/local/lib/python3.10/dist-packages (1.6.5)\nRequirement already satisfied: pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4 in /usr/local/lib/python3.10/dist-packages (from fastapi) (2.10.6)\nRequirement already satisfied: starlette<0.46.0,>=0.40.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (0.45.3)\nRequirement already satisfied: typing-extensions>=4.8.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (4.12.2)\nRequirement already satisfied: click>=7.0 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (8.1.8)\nRequirement already satisfied: h11>=0.8 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (0.14.0)\nRequirement already satisfied: azure-core<2.0.0,>=1.28.0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.32.0)\nRequirement already satisfied: opentelemetry-instrumentation-flask~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-requests~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: azure-core-tracing-opentelemetry~=1.0.0b11 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b11)\nRequirement already satisfied: opentelemetry-instrumentation-urllib~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-django~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-psycopg2~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-fastapi~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-resource-detector-azure~=0.1.4 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.1.5)\nRequirement already satisfied: azure-monitor-opentelemetry-exporter~=1.0.0b31 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b33)\nRequirement already satisfied: opentelemetry-sdk~=1.28 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.30.0)\nRequirement already satisfied: opentelemetry-instrumentation-urllib3~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: six>=1.11.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.16.0)\nRequirement already satisfied: requests>=2.21.0 in /usr/local/lib/python3.10/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (2.32.3)\nRequirement already satisfied: opentelemetry-api<2.0.0,>=1.12.0 in /usr/local/lib/python3.10/dist-packages (from azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (1.30.0)\nRequirement already satisfied: msrest>=0.6.10 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.1)\nRequirement already satisfied: psutil~=5.9 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (5.9.8)\nRequirement already satisfied: fixedint==0.1.6 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.1.6)\nRequirement already satisfied: opentelemetry-instrumentation-wsgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-semantic-conventions==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-util-http==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: wrapt<2.0.0,>=1.0.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.17.2)\nRequirement already satisfied: packaging>=18.0 in /usr/lib/python3/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (21.3)\nRequirement already satisfied: deprecated>=1.2.6 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-semantic-conventions==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.2.18)\nRequirement already satisfied: importlib-metadata<=8.5.0,>=6.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (8.5.0)\nRequirement already satisfied: opentelemetry-instrumentation-asgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: asgiref~=3.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-asgi==0.51b0->opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (3.8.1)\nRequirement already satisfied: opentelemetry-instrumentation-dbapi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-psycopg2~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: pydantic-core==2.27.2 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (2.27.2)\nRequirement already satisfied: annotated-types>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (0.7.0)\nRequirement already satisfied: anyio<5,>=3.6.2 in /usr/local/lib/python3.10/dist-packages (from starlette<0.46.0,>=0.40.0->fastapi) (4.8.0)\nRequirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.2.2)\nRequirement already satisfied: idna>=2.8 in /usr/lib/python3/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (3.3)\nRequirement already satisfied: sniffio>=1.1 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.3.1)\nRequirement already satisfied: requests-oauthlib>=0.5.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2.0.0)\nRequirement already satisfied: certifi>=2017.4.17 in /usr/lib/python3/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2020.6.20)\nRequirement already satisfied: isodate>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.2)\nRequirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (3.4.1)\nRequirement already satisfied: urllib3<3,>=1.21.1 in /usr/lib/python3/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.26.5)\nRequirement already satisfied: zipp>=3.20 in /usr/local/lib/python3.10/dist-packages (from importlib-metadata<=8.5.0,>=6.0->opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (3.21.0)\nRequirement already satisfied: oauthlib>=3.0.0 in /usr/lib/python3/dist-packages (from requests-oauthlib>=0.5.0->msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (3.2.0)\n",
    "stdout_lines": [
        "Requirement already satisfied: fastapi in /usr/local/lib/python3.10/dist-packages (0.115.8)",
        "Requirement already satisfied: uvicorn in /usr/local/lib/python3.10/dist-packages (0.34.0)",
        "Requirement already satisfied: azure-monitor-opentelemetry in /usr/local/lib/python3.10/dist-packages (1.6.5)",
        "Requirement already satisfied: pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4 in /usr/local/lib/python3.10/dist-packages (from fastapi) (2.10.6)",
        "Requirement already satisfied: starlette<0.46.0,>=0.40.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (0.45.3)",
        "Requirement already satisfied: typing-extensions>=4.8.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (4.12.2)",
        "Requirement already satisfied: click>=7.0 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (8.1.8)",
        "Requirement already satisfied: h11>=0.8 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (0.14.0)",
        "Requirement already satisfied: azure-core<2.0.0,>=1.28.0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.32.0)",
        "Requirement already satisfied: opentelemetry-instrumentation-flask~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)",
        "Requirement already satisfied: opentelemetry-instrumentation-requests~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)",
        "Requirement already satisfied: azure-core-tracing-opentelemetry~=1.0.0b11 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b11)",
        "Requirement already satisfied: opentelemetry-instrumentation-urllib~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)",
        "Requirement already satisfied: opentelemetry-instrumentation-django~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)",
        "Requirement already satisfied: opentelemetry-instrumentation-psycopg2~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)",
        "Requirement already satisfied: opentelemetry-instrumentation-fastapi~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)",
        "Requirement already satisfied: opentelemetry-resource-detector-azure~=0.1.4 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.1.5)",
        "Requirement already satisfied: azure-monitor-opentelemetry-exporter~=1.0.0b31 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b33)",
        "Requirement already satisfied: opentelemetry-sdk~=1.28 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.30.0)",
        "Requirement already satisfied: opentelemetry-instrumentation-urllib3~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)",
        "Requirement already satisfied: six>=1.11.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.16.0)",
        "Requirement already satisfied: requests>=2.21.0 in /usr/local/lib/python3.10/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (2.32.3)",
        "Requirement already satisfied: opentelemetry-api<2.0.0,>=1.12.0 in /usr/local/lib/python3.10/dist-packages (from azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (1.30.0)",
        "Requirement already satisfied: msrest>=0.6.10 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.1)",
        "Requirement already satisfied: psutil~=5.9 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (5.9.8)",
        "Requirement already satisfied: fixedint==0.1.6 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.1.6)",
        "Requirement already satisfied: opentelemetry-instrumentation-wsgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)",
        "Requirement already satisfied: opentelemetry-semantic-conventions==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)",
        "Requirement already satisfied: opentelemetry-util-http==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)",
        "Requirement already satisfied: opentelemetry-instrumentation==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)",
        "Requirement already satisfied: wrapt<2.0.0,>=1.0.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.17.2)",
        "Requirement already satisfied: packaging>=18.0 in /usr/lib/python3/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (21.3)",
        "Requirement already satisfied: deprecated>=1.2.6 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-semantic-conventions==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.2.18)",
        "Requirement already satisfied: importlib-metadata<=8.5.0,>=6.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (8.5.0)",
        "Requirement already satisfied: opentelemetry-instrumentation-asgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (0.51b0)",
        "Requirement already satisfied: asgiref~=3.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-asgi==0.51b0->opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (3.8.1)",
        "Requirement already satisfied: opentelemetry-instrumentation-dbapi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-psycopg2~=0.49b0->azure-monitor-opentelemetry) (0.51b0)",
        "Requirement already satisfied: pydantic-core==2.27.2 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (2.27.2)",
        "Requirement already satisfied: annotated-types>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (0.7.0)",
        "Requirement already satisfied: anyio<5,>=3.6.2 in /usr/local/lib/python3.10/dist-packages (from starlette<0.46.0,>=0.40.0->fastapi) (4.8.0)",
        "Requirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.2.2)",
        "Requirement already satisfied: idna>=2.8 in /usr/lib/python3/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (3.3)",
        "Requirement already satisfied: sniffio>=1.1 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.3.1)",
        "Requirement already satisfied: requests-oauthlib>=0.5.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2.0.0)",
        "Requirement already satisfied: certifi>=2017.4.17 in /usr/lib/python3/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2020.6.20)",
        "Requirement already satisfied: isodate>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.2)",
        "Requirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (3.4.1)",
        "Requirement already satisfied: urllib3<3,>=1.21.1 in /usr/lib/python3/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.26.5)",
        "Requirement already satisfied: zipp>=3.20 in /usr/local/lib/python3.10/dist-packages (from importlib-metadata<=8.5.0,>=6.0->opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (3.21.0)",
        "Requirement already satisfied: oauthlib>=3.0.0 in /usr/lib/python3/dist-packages (from requests-oauthlib>=0.5.0->msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (3.2.0)"
    ],
    "version": null,
    "virtualenv": null
}
2025-02-21 02:52:36,000 p=64208 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/app_vars.yml'
2025-02-21 02:52:36,001 p=64208 u=snrj n=ansible INFO| Read vars_file 'roles/flask_app/vars/vars.yml'
2025-02-21 02:52:36,001 p=64208 u=snrj n=ansible INFO| TASK [flask_app : Set APPLICATION_INSIGHTS_CONNECTION_STRING in .bashrc] ************************************************************************************
2025-02-21 02:52:36,002 p=64208 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:25
2025-02-21 02:52:36,015 p=64208 u=snrj n=ansible INFO| fatal: [40.68.93.141]: FAILED! => {
    "msg": "The task includes an option with an undefined variable.. 'APPLICATION_INSIGHTS_CONNECTION_STRING' is undefined\n\nThe error appears to be in '/Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml': line 25, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Set APPLICATION_INSIGHTS_CONNECTION_STRING in .bashrc\n  ^ here\n"
}
2025-02-21 02:52:36,016 p=64208 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 02:52:36,016 p=64208 u=snrj n=ansible INFO| 40.68.93.141               : ok=5    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2025-02-21 02:54:04,015 p=64394 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 02:54:04,402 p=64394 u=snrj n=ansible INFO| PLAY [Setup Flask App with OpenTelemetry] *******************************************************************************************************************
2025-02-21 02:54:04,410 p=64394 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 02:54:08,023 p=64394 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 40.68.93.141 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-21 02:54:08,023 p=64394 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:54:08,029 p=64394 u=snrj n=ansible INFO| TASK [flask_app : Update apt package index] *****************************************************************************************************************
2025-02-21 02:54:12,230 p=64394 u=snrj n=ansible INFO| changed: [40.68.93.141]
2025-02-21 02:54:12,239 p=64394 u=snrj n=ansible INFO| TASK [flask_app : Ensure the 'universe' repository is enabled] **********************************************************************************************
2025-02-21 02:54:13,230 p=64394 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:54:13,240 p=64394 u=snrj n=ansible INFO| TASK [flask_app : Install python3-pip] **********************************************************************************************************************
2025-02-21 02:54:15,587 p=64394 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:54:15,601 p=64394 u=snrj n=ansible INFO| TASK [flask_app : Install required Python packages] *********************************************************************************************************
2025-02-21 02:54:19,195 p=64394 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:54:19,204 p=64394 u=snrj n=ansible INFO| TASK [flask_app : Set APPLICATION_INSIGHTS_CONNECTION_STRING in .bashrc] ************************************************************************************
2025-02-21 02:54:19,684 p=64394 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:54:19,702 p=64394 u=snrj n=ansible INFO| TASK [flask_app : Copy the sample FastAPI application] ******************************************************************************************************
2025-02-21 02:54:21,556 p=64394 u=snrj n=ansible INFO| changed: [40.68.93.141]
2025-02-21 02:54:21,574 p=64394 u=snrj n=ansible INFO| TASK [flask_app : Start FastAPI application with uvicorn] ***************************************************************************************************
2025-02-21 02:54:23,391 p=64394 u=snrj n=ansible INFO| changed: [40.68.93.141]
2025-02-21 02:54:23,403 p=64394 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 02:54:23,403 p=64394 u=snrj n=ansible INFO| 40.68.93.141               : ok=8    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-21 02:54:45,066 p=64494 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 02:54:45,482 p=64494 u=snrj n=ansible INFO| PLAY [Setup Flask App with OpenTelemetry] *******************************************************************************************************************
2025-02-21 02:54:45,492 p=64494 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 02:54:47,574 p=64494 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 40.68.93.141 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-21 02:54:47,574 p=64494 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:54:47,580 p=64494 u=snrj n=ansible INFO| TASK [flask_app : Update apt package index] *****************************************************************************************************************
2025-02-21 02:54:51,849 p=64494 u=snrj n=ansible INFO| changed: [40.68.93.141]
2025-02-21 02:54:51,856 p=64494 u=snrj n=ansible INFO| TASK [flask_app : Ensure the 'universe' repository is enabled] **********************************************************************************************
2025-02-21 02:54:52,756 p=64494 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:54:52,763 p=64494 u=snrj n=ansible INFO| TASK [flask_app : Install python3-pip] **********************************************************************************************************************
2025-02-21 02:54:55,059 p=64494 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:54:55,074 p=64494 u=snrj n=ansible INFO| TASK [flask_app : Install required Python packages] *********************************************************************************************************
2025-02-21 02:54:58,393 p=64494 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:54:58,402 p=64494 u=snrj n=ansible INFO| TASK [flask_app : Set APPLICATION_INSIGHTS_CONNECTION_STRING in .bashrc] ************************************************************************************
2025-02-21 02:54:59,106 p=64494 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:54:59,119 p=64494 u=snrj n=ansible INFO| TASK [flask_app : Copy the sample FastAPI application] ******************************************************************************************************
2025-02-21 02:55:00,621 p=64494 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:55:00,632 p=64494 u=snrj n=ansible INFO| TASK [flask_app : Start FastAPI application with uvicorn] ***************************************************************************************************
2025-02-21 02:55:02,153 p=64494 u=snrj n=ansible INFO| changed: [40.68.93.141]
2025-02-21 02:55:02,165 p=64494 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 02:55:02,165 p=64494 u=snrj n=ansible INFO| 40.68.93.141               : ok=8    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-21 02:55:34,200 p=64698 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 02:55:34,587 p=64698 u=snrj n=ansible INFO| PLAY [Setup Flask App with OpenTelemetry] *******************************************************************************************************************
2025-02-21 02:55:34,595 p=64698 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 02:55:36,649 p=64698 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 40.68.93.141 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-21 02:55:36,649 p=64698 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:55:36,655 p=64698 u=snrj n=ansible INFO| TASK [flask_app : Update apt package index] *****************************************************************************************************************
2025-02-21 02:55:41,158 p=64698 u=snrj n=ansible INFO| changed: [40.68.93.141]
2025-02-21 02:55:41,168 p=64698 u=snrj n=ansible INFO| TASK [flask_app : Ensure the 'universe' repository is enabled] **********************************************************************************************
2025-02-21 02:55:42,115 p=64698 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:55:42,126 p=64698 u=snrj n=ansible INFO| TASK [flask_app : Install python3-pip] **********************************************************************************************************************
2025-02-21 02:55:44,371 p=64698 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:55:44,385 p=64698 u=snrj n=ansible INFO| TASK [flask_app : Install required Python packages] *********************************************************************************************************
2025-02-21 02:55:48,084 p=64698 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:55:48,093 p=64698 u=snrj n=ansible INFO| TASK [flask_app : Set APPLICATION_INSIGHTS_CONNECTION_STRING in .bashrc] ************************************************************************************
2025-02-21 02:55:48,667 p=64698 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:55:48,680 p=64698 u=snrj n=ansible INFO| TASK [flask_app : Copy the sample FastAPI application] ******************************************************************************************************
2025-02-21 02:55:50,306 p=64698 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:55:50,319 p=64698 u=snrj n=ansible INFO| TASK [flask_app : Start FastAPI application with uvicorn] ***************************************************************************************************
2025-02-21 02:55:52,422 p=64698 u=snrj n=ansible INFO| changed: [40.68.93.141]
2025-02-21 02:55:52,433 p=64698 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 02:55:52,433 p=64698 u=snrj n=ansible INFO| 40.68.93.141               : ok=8    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-21 02:56:22,021 p=64804 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 02:56:22,429 p=64804 u=snrj n=ansible INFO| PLAY [Setup Flask App with OpenTelemetry] *******************************************************************************************************************
2025-02-21 02:56:22,437 p=64804 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 02:56:24,470 p=64804 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 40.68.93.141 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-21 02:56:24,470 p=64804 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:56:24,476 p=64804 u=snrj n=ansible INFO| TASK [flask_app : Update apt package index] *****************************************************************************************************************
2025-02-21 02:56:28,626 p=64804 u=snrj n=ansible INFO| changed: [40.68.93.141]
2025-02-21 02:56:28,636 p=64804 u=snrj n=ansible INFO| TASK [flask_app : Ensure the 'universe' repository is enabled] **********************************************************************************************
2025-02-21 02:56:29,568 p=64804 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:56:29,579 p=64804 u=snrj n=ansible INFO| TASK [flask_app : Install python3-pip] **********************************************************************************************************************
2025-02-21 02:56:31,883 p=64804 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:56:31,898 p=64804 u=snrj n=ansible INFO| TASK [flask_app : Install required Python packages] *********************************************************************************************************
2025-02-21 02:56:35,264 p=64804 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:56:35,275 p=64804 u=snrj n=ansible INFO| TASK [flask_app : Set APPLICATION_INSIGHTS_CONNECTION_STRING in .bashrc] ************************************************************************************
2025-02-21 02:56:35,875 p=64804 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:56:35,887 p=64804 u=snrj n=ansible INFO| TASK [flask_app : Copy the sample FastAPI application] ******************************************************************************************************
2025-02-21 02:56:37,497 p=64804 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:56:37,508 p=64804 u=snrj n=ansible INFO| TASK [flask_app : Start FastAPI application with uvicorn] ***************************************************************************************************
2025-02-21 02:56:39,025 p=64804 u=snrj n=ansible INFO| changed: [40.68.93.141]
2025-02-21 02:56:39,036 p=64804 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 02:56:39,037 p=64804 u=snrj n=ansible INFO| 40.68.93.141               : ok=8    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-21 02:57:26,953 p=64932 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 02:57:27,349 p=64932 u=snrj n=ansible INFO| PLAY [Setup Flask App with OpenTelemetry] *******************************************************************************************************************
2025-02-21 02:57:27,358 p=64932 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 02:57:29,506 p=64932 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 40.68.93.141 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-21 02:57:29,506 p=64932 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:57:29,512 p=64932 u=snrj n=ansible INFO| TASK [flask_app : Update apt package index] *****************************************************************************************************************
2025-02-21 02:57:33,789 p=64932 u=snrj n=ansible INFO| changed: [40.68.93.141]
2025-02-21 02:57:33,799 p=64932 u=snrj n=ansible INFO| TASK [flask_app : Ensure the 'universe' repository is enabled] **********************************************************************************************
2025-02-21 02:57:34,656 p=64932 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:57:34,665 p=64932 u=snrj n=ansible INFO| TASK [flask_app : Install python3-pip] **********************************************************************************************************************
2025-02-21 02:57:36,958 p=64932 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:57:36,972 p=64932 u=snrj n=ansible INFO| TASK [flask_app : Install required Python packages] *********************************************************************************************************
2025-02-21 02:57:40,594 p=64932 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:57:40,604 p=64932 u=snrj n=ansible INFO| TASK [flask_app : Set APPLICATION_INSIGHTS_CONNECTION_STRING in .bashrc] ************************************************************************************
2025-02-21 02:57:41,208 p=64932 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:57:41,219 p=64932 u=snrj n=ansible INFO| TASK [flask_app : Copy the sample FastAPI application] ******************************************************************************************************
2025-02-21 02:57:43,029 p=64932 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:57:43,042 p=64932 u=snrj n=ansible INFO| TASK [flask_app : Start FastAPI application with uvicorn] ***************************************************************************************************
2025-02-21 02:57:45,026 p=64932 u=snrj n=ansible INFO| changed: [40.68.93.141]
2025-02-21 02:57:45,037 p=64932 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 02:57:45,037 p=64932 u=snrj n=ansible INFO| 40.68.93.141               : ok=8    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-21 02:58:39,582 p=65069 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 02:58:40,002 p=65069 u=snrj n=ansible INFO| PLAY [Setup Flask App with OpenTelemetry] *******************************************************************************************************************
2025-02-21 02:58:40,011 p=65069 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 02:58:41,634 p=65069 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 40.68.93.141 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-21 02:58:41,634 p=65069 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:58:41,640 p=65069 u=snrj n=ansible INFO| TASK [flask_app : Update apt package index] *****************************************************************************************************************
2025-02-21 02:58:44,286 p=65069 u=snrj n=ansible INFO| changed: [40.68.93.141]
2025-02-21 02:58:44,295 p=65069 u=snrj n=ansible INFO| TASK [flask_app : Ensure the 'universe' repository is enabled] **********************************************************************************************
2025-02-21 02:58:45,002 p=65069 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:58:45,013 p=65069 u=snrj n=ansible INFO| TASK [flask_app : Install python3-pip] **********************************************************************************************************************
2025-02-21 02:58:46,439 p=65069 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:58:46,452 p=65069 u=snrj n=ansible INFO| TASK [flask_app : Install required Python packages] *********************************************************************************************************
2025-02-21 02:58:48,487 p=65069 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:58:48,497 p=65069 u=snrj n=ansible INFO| TASK [flask_app : Set APPLICATION_INSIGHTS_CONNECTION_STRING in .bashrc] ************************************************************************************
2025-02-21 02:58:48,935 p=65069 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:58:48,946 p=65069 u=snrj n=ansible INFO| TASK [flask_app : Copy the sample FastAPI application] ******************************************************************************************************
2025-02-21 02:58:50,109 p=65069 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:58:50,121 p=65069 u=snrj n=ansible INFO| TASK [flask_app : Start FastAPI application with uvicorn] ***************************************************************************************************
2025-02-21 02:58:51,736 p=65069 u=snrj n=ansible INFO| changed: [40.68.93.141]
2025-02-21 02:58:51,746 p=65069 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 02:58:51,747 p=65069 u=snrj n=ansible INFO| 40.68.93.141               : ok=8    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-21 02:59:06,491 p=65138 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 02:59:06,627 p=65138 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-21 02:59:06,902 p=65138 u=snrj n=ansible INFO| PLAY [Setup Flask App with OpenTelemetry] *******************************************************************************************************************
2025-02-21 02:59:06,912 p=65138 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 02:59:08,504 p=65138 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 40.68.93.141 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-21 02:59:08,504 p=65138 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:59:08,511 p=65138 u=snrj n=ansible INFO| TASK [flask_app : Update apt package index] *****************************************************************************************************************
2025-02-21 02:59:11,223 p=65138 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"cache_update_time": 1740103150, "cache_updated": true, "changed": true}
2025-02-21 02:59:11,232 p=65138 u=snrj n=ansible INFO| TASK [flask_app : Ensure the 'universe' repository is enabled] **********************************************************************************************
2025-02-21 02:59:12,041 p=65138 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "repo": "deb http://archive.ubuntu.com/ubuntu/ jammy universe", "sources_added": [], "sources_removed": [], "state": "present"}
2025-02-21 02:59:12,051 p=65138 u=snrj n=ansible INFO| TASK [flask_app : Install python3-pip] **********************************************************************************************************************
2025-02-21 02:59:13,473 p=65138 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"cache_update_time": 1740103150, "cache_updated": false, "changed": false}
2025-02-21 02:59:13,487 p=65138 u=snrj n=ansible INFO| TASK [flask_app : Install required Python packages] *********************************************************************************************************
2025-02-21 02:59:15,421 p=65138 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "cmd": ["/usr/bin/python3.10", "-m", "pip.__main__", "install", "fastapi", "uvicorn", "azure-monitor-opentelemetry"], "name": ["fastapi", "uvicorn", "azure-monitor-opentelemetry"], "requirements": null, "state": "present", "stderr": "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n", "stderr_lines": ["WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv"], "stdout": "Requirement already satisfied: fastapi in /usr/local/lib/python3.10/dist-packages (0.115.8)\nRequirement already satisfied: uvicorn in /usr/local/lib/python3.10/dist-packages (0.34.0)\nRequirement already satisfied: azure-monitor-opentelemetry in /usr/local/lib/python3.10/dist-packages (1.6.5)\nRequirement already satisfied: pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4 in /usr/local/lib/python3.10/dist-packages (from fastapi) (2.10.6)\nRequirement already satisfied: starlette<0.46.0,>=0.40.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (0.45.3)\nRequirement already satisfied: typing-extensions>=4.8.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (4.12.2)\nRequirement already satisfied: click>=7.0 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (8.1.8)\nRequirement already satisfied: h11>=0.8 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (0.14.0)\nRequirement already satisfied: opentelemetry-instrumentation-requests~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: azure-core<2.0.0,>=1.28.0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.32.0)\nRequirement already satisfied: azure-monitor-opentelemetry-exporter~=1.0.0b31 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b33)\nRequirement already satisfied: opentelemetry-sdk~=1.28 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.30.0)\nRequirement already satisfied: azure-core-tracing-opentelemetry~=1.0.0b11 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b11)\nRequirement already satisfied: opentelemetry-instrumentation-psycopg2~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-flask~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-resource-detector-azure~=0.1.4 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.1.5)\nRequirement already satisfied: opentelemetry-instrumentation-django~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-fastapi~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-urllib~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-urllib3~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: requests>=2.21.0 in /usr/local/lib/python3.10/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (2.32.3)\nRequirement already satisfied: six>=1.11.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.16.0)\nRequirement already satisfied: opentelemetry-api<2.0.0,>=1.12.0 in /usr/local/lib/python3.10/dist-packages (from azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (1.30.0)\nRequirement already satisfied: psutil~=5.9 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (5.9.8)\nRequirement already satisfied: msrest>=0.6.10 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.1)\nRequirement already satisfied: fixedint==0.1.6 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.1.6)\nRequirement already satisfied: opentelemetry-semantic-conventions==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-util-http==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-wsgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: packaging>=18.0 in /usr/lib/python3/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (21.3)\nRequirement already satisfied: wrapt<2.0.0,>=1.0.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.17.2)\nRequirement already satisfied: deprecated>=1.2.6 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-semantic-conventions==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.2.18)\nRequirement already satisfied: importlib-metadata<=8.5.0,>=6.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (8.5.0)\nRequirement already satisfied: opentelemetry-instrumentation-asgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: asgiref~=3.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-asgi==0.51b0->opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (3.8.1)\nRequirement already satisfied: opentelemetry-instrumentation-dbapi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-psycopg2~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: annotated-types>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (0.7.0)\nRequirement already satisfied: pydantic-core==2.27.2 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (2.27.2)\nRequirement already satisfied: anyio<5,>=3.6.2 in /usr/local/lib/python3.10/dist-packages (from starlette<0.46.0,>=0.40.0->fastapi) (4.8.0)\nRequirement already satisfied: sniffio>=1.1 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.3.1)\nRequirement already satisfied: idna>=2.8 in /usr/lib/python3/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (3.3)\nRequirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.2.2)\nRequirement already satisfied: isodate>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.2)\nRequirement already satisfied: requests-oauthlib>=0.5.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2.0.0)\nRequirement already satisfied: certifi>=2017.4.17 in /usr/lib/python3/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2020.6.20)\nRequirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (3.4.1)\nRequirement already satisfied: urllib3<3,>=1.21.1 in /usr/lib/python3/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.26.5)\nRequirement already satisfied: zipp>=3.20 in /usr/local/lib/python3.10/dist-packages (from importlib-metadata<=8.5.0,>=6.0->opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (3.21.0)\nRequirement already satisfied: oauthlib>=3.0.0 in /usr/lib/python3/dist-packages (from requests-oauthlib>=0.5.0->msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (3.2.0)\n", "stdout_lines": ["Requirement already satisfied: fastapi in /usr/local/lib/python3.10/dist-packages (0.115.8)", "Requirement already satisfied: uvicorn in /usr/local/lib/python3.10/dist-packages (0.34.0)", "Requirement already satisfied: azure-monitor-opentelemetry in /usr/local/lib/python3.10/dist-packages (1.6.5)", "Requirement already satisfied: pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4 in /usr/local/lib/python3.10/dist-packages (from fastapi) (2.10.6)", "Requirement already satisfied: starlette<0.46.0,>=0.40.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (0.45.3)", "Requirement already satisfied: typing-extensions>=4.8.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (4.12.2)", "Requirement already satisfied: click>=7.0 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (8.1.8)", "Requirement already satisfied: h11>=0.8 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (0.14.0)", "Requirement already satisfied: opentelemetry-instrumentation-requests~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: azure-core<2.0.0,>=1.28.0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.32.0)", "Requirement already satisfied: azure-monitor-opentelemetry-exporter~=1.0.0b31 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b33)", "Requirement already satisfied: opentelemetry-sdk~=1.28 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.30.0)", "Requirement already satisfied: azure-core-tracing-opentelemetry~=1.0.0b11 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b11)", "Requirement already satisfied: opentelemetry-instrumentation-psycopg2~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-flask~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-resource-detector-azure~=0.1.4 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.1.5)", "Requirement already satisfied: opentelemetry-instrumentation-django~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-fastapi~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-urllib~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-urllib3~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: requests>=2.21.0 in /usr/local/lib/python3.10/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (2.32.3)", "Requirement already satisfied: six>=1.11.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.16.0)", "Requirement already satisfied: opentelemetry-api<2.0.0,>=1.12.0 in /usr/local/lib/python3.10/dist-packages (from azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (1.30.0)", "Requirement already satisfied: psutil~=5.9 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (5.9.8)", "Requirement already satisfied: msrest>=0.6.10 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.1)", "Requirement already satisfied: fixedint==0.1.6 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.1.6)", "Requirement already satisfied: opentelemetry-semantic-conventions==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-util-http==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-wsgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: packaging>=18.0 in /usr/lib/python3/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (21.3)", "Requirement already satisfied: wrapt<2.0.0,>=1.0.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.17.2)", "Requirement already satisfied: deprecated>=1.2.6 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-semantic-conventions==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.2.18)", "Requirement already satisfied: importlib-metadata<=8.5.0,>=6.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (8.5.0)", "Requirement already satisfied: opentelemetry-instrumentation-asgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: asgiref~=3.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-asgi==0.51b0->opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (3.8.1)", "Requirement already satisfied: opentelemetry-instrumentation-dbapi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-psycopg2~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: annotated-types>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (0.7.0)", "Requirement already satisfied: pydantic-core==2.27.2 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (2.27.2)", "Requirement already satisfied: anyio<5,>=3.6.2 in /usr/local/lib/python3.10/dist-packages (from starlette<0.46.0,>=0.40.0->fastapi) (4.8.0)", "Requirement already satisfied: sniffio>=1.1 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.3.1)", "Requirement already satisfied: idna>=2.8 in /usr/lib/python3/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (3.3)", "Requirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.2.2)", "Requirement already satisfied: isodate>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.2)", "Requirement already satisfied: requests-oauthlib>=0.5.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2.0.0)", "Requirement already satisfied: certifi>=2017.4.17 in /usr/lib/python3/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2020.6.20)", "Requirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (3.4.1)", "Requirement already satisfied: urllib3<3,>=1.21.1 in /usr/lib/python3/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.26.5)", "Requirement already satisfied: zipp>=3.20 in /usr/local/lib/python3.10/dist-packages (from importlib-metadata<=8.5.0,>=6.0->opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (3.21.0)", "Requirement already satisfied: oauthlib>=3.0.0 in /usr/lib/python3/dist-packages (from requests-oauthlib>=0.5.0->msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (3.2.0)"], "version": null, "virtualenv": null}
2025-02-21 02:59:15,430 p=65138 u=snrj n=ansible INFO| TASK [flask_app : Set APPLICATION_INSIGHTS_CONNECTION_STRING in .bashrc] ************************************************************************************
2025-02-21 02:59:15,996 p=65138 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"backup": "", "changed": false, "msg": ""}
2025-02-21 02:59:16,007 p=65138 u=snrj n=ansible INFO| TASK [flask_app : Copy the sample FastAPI application] ******************************************************************************************************
2025-02-21 02:59:17,262 p=65138 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "checksum": "a799cc89edd839d4017e683dd6f1bad7612f0e59", "dest": "/home/azureadmin/http_fastapi.py", "gid": 1000, "group": "azureadmin", "mode": "0644", "owner": "azureadmin", "path": "/home/azureadmin/http_fastapi.py", "size": 1240, "state": "file", "uid": 1000}
2025-02-21 02:59:17,275 p=65138 u=snrj n=ansible INFO| TASK [flask_app : Start FastAPI application with uvicorn] ***************************************************************************************************
2025-02-21 02:59:18,988 p=65138 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"ansible_job_id": "j65931303220.17825", "changed": true, "finished": 0, "results_file": "/root/.ansible_async/j65931303220.17825", "started": 1}
2025-02-21 02:59:18,999 p=65138 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 02:59:19,000 p=65138 u=snrj n=ansible INFO| 40.68.93.141               : ok=8    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-21 02:59:53,921 p=65246 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 02:59:54,068 p=65246 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-21 02:59:54,355 p=65246 u=snrj n=ansible INFO| PLAY [Setup Flask App with OpenTelemetry] *******************************************************************************************************************
2025-02-21 02:59:54,364 p=65246 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 02:59:55,930 p=65246 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 40.68.93.141 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-21 02:59:55,930 p=65246 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 02:59:55,936 p=65246 u=snrj n=ansible INFO| TASK [flask_app : Update apt package index] *****************************************************************************************************************
2025-02-21 02:59:58,453 p=65246 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"cache_update_time": 1740103197, "cache_updated": true, "changed": true}
2025-02-21 02:59:58,459 p=65246 u=snrj n=ansible INFO| TASK [flask_app : Ensure the 'universe' repository is enabled] **********************************************************************************************
2025-02-21 02:59:59,046 p=65246 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "repo": "deb http://archive.ubuntu.com/ubuntu/ jammy universe", "sources_added": [], "sources_removed": [], "state": "present"}
2025-02-21 02:59:59,055 p=65246 u=snrj n=ansible INFO| TASK [flask_app : Install python3-pip] **********************************************************************************************************************
2025-02-21 03:00:00,438 p=65246 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"cache_update_time": 1740103197, "cache_updated": false, "changed": false}
2025-02-21 03:00:00,451 p=65246 u=snrj n=ansible INFO| TASK [flask_app : Install required Python packages] *********************************************************************************************************
2025-02-21 03:00:02,467 p=65246 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "cmd": ["/usr/bin/python3.10", "-m", "pip.__main__", "install", "fastapi", "uvicorn", "azure-monitor-opentelemetry"], "name": ["fastapi", "uvicorn", "azure-monitor-opentelemetry"], "requirements": null, "state": "present", "stderr": "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n", "stderr_lines": ["WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv"], "stdout": "Requirement already satisfied: fastapi in /usr/local/lib/python3.10/dist-packages (0.115.8)\nRequirement already satisfied: uvicorn in /usr/local/lib/python3.10/dist-packages (0.34.0)\nRequirement already satisfied: azure-monitor-opentelemetry in /usr/local/lib/python3.10/dist-packages (1.6.5)\nRequirement already satisfied: pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4 in /usr/local/lib/python3.10/dist-packages (from fastapi) (2.10.6)\nRequirement already satisfied: typing-extensions>=4.8.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (4.12.2)\nRequirement already satisfied: starlette<0.46.0,>=0.40.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (0.45.3)\nRequirement already satisfied: h11>=0.8 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (0.14.0)\nRequirement already satisfied: click>=7.0 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (8.1.8)\nRequirement already satisfied: opentelemetry-instrumentation-urllib3~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-resource-detector-azure~=0.1.4 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.1.5)\nRequirement already satisfied: azure-monitor-opentelemetry-exporter~=1.0.0b31 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b33)\nRequirement already satisfied: opentelemetry-instrumentation-django~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: azure-core-tracing-opentelemetry~=1.0.0b11 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b11)\nRequirement already satisfied: opentelemetry-instrumentation-flask~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-requests~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-urllib~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-psycopg2~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-sdk~=1.28 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.30.0)\nRequirement already satisfied: opentelemetry-instrumentation-fastapi~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: azure-core<2.0.0,>=1.28.0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.32.0)\nRequirement already satisfied: six>=1.11.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.16.0)\nRequirement already satisfied: requests>=2.21.0 in /usr/local/lib/python3.10/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (2.32.3)\nRequirement already satisfied: opentelemetry-api<2.0.0,>=1.12.0 in /usr/local/lib/python3.10/dist-packages (from azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (1.30.0)\nRequirement already satisfied: psutil~=5.9 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (5.9.8)\nRequirement already satisfied: fixedint==0.1.6 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.1.6)\nRequirement already satisfied: msrest>=0.6.10 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.1)\nRequirement already satisfied: opentelemetry-instrumentation-wsgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-util-http==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-semantic-conventions==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: wrapt<2.0.0,>=1.0.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.17.2)\nRequirement already satisfied: packaging>=18.0 in /usr/lib/python3/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (21.3)\nRequirement already satisfied: deprecated>=1.2.6 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-semantic-conventions==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.2.18)\nRequirement already satisfied: importlib-metadata<=8.5.0,>=6.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (8.5.0)\nRequirement already satisfied: opentelemetry-instrumentation-asgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: asgiref~=3.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-asgi==0.51b0->opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (3.8.1)\nRequirement already satisfied: opentelemetry-instrumentation-dbapi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-psycopg2~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: annotated-types>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (0.7.0)\nRequirement already satisfied: pydantic-core==2.27.2 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (2.27.2)\nRequirement already satisfied: anyio<5,>=3.6.2 in /usr/local/lib/python3.10/dist-packages (from starlette<0.46.0,>=0.40.0->fastapi) (4.8.0)\nRequirement already satisfied: idna>=2.8 in /usr/lib/python3/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (3.3)\nRequirement already satisfied: sniffio>=1.1 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.3.1)\nRequirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.2.2)\nRequirement already satisfied: requests-oauthlib>=0.5.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2.0.0)\nRequirement already satisfied: isodate>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.2)\nRequirement already satisfied: certifi>=2017.4.17 in /usr/lib/python3/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2020.6.20)\nRequirement already satisfied: urllib3<3,>=1.21.1 in /usr/lib/python3/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.26.5)\nRequirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (3.4.1)\nRequirement already satisfied: zipp>=3.20 in /usr/local/lib/python3.10/dist-packages (from importlib-metadata<=8.5.0,>=6.0->opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (3.21.0)\nRequirement already satisfied: oauthlib>=3.0.0 in /usr/lib/python3/dist-packages (from requests-oauthlib>=0.5.0->msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (3.2.0)\n", "stdout_lines": ["Requirement already satisfied: fastapi in /usr/local/lib/python3.10/dist-packages (0.115.8)", "Requirement already satisfied: uvicorn in /usr/local/lib/python3.10/dist-packages (0.34.0)", "Requirement already satisfied: azure-monitor-opentelemetry in /usr/local/lib/python3.10/dist-packages (1.6.5)", "Requirement already satisfied: pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4 in /usr/local/lib/python3.10/dist-packages (from fastapi) (2.10.6)", "Requirement already satisfied: typing-extensions>=4.8.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (4.12.2)", "Requirement already satisfied: starlette<0.46.0,>=0.40.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (0.45.3)", "Requirement already satisfied: h11>=0.8 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (0.14.0)", "Requirement already satisfied: click>=7.0 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (8.1.8)", "Requirement already satisfied: opentelemetry-instrumentation-urllib3~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-resource-detector-azure~=0.1.4 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.1.5)", "Requirement already satisfied: azure-monitor-opentelemetry-exporter~=1.0.0b31 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b33)", "Requirement already satisfied: opentelemetry-instrumentation-django~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: azure-core-tracing-opentelemetry~=1.0.0b11 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b11)", "Requirement already satisfied: opentelemetry-instrumentation-flask~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-requests~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-urllib~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-psycopg2~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-sdk~=1.28 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.30.0)", "Requirement already satisfied: opentelemetry-instrumentation-fastapi~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: azure-core<2.0.0,>=1.28.0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.32.0)", "Requirement already satisfied: six>=1.11.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.16.0)", "Requirement already satisfied: requests>=2.21.0 in /usr/local/lib/python3.10/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (2.32.3)", "Requirement already satisfied: opentelemetry-api<2.0.0,>=1.12.0 in /usr/local/lib/python3.10/dist-packages (from azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (1.30.0)", "Requirement already satisfied: psutil~=5.9 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (5.9.8)", "Requirement already satisfied: fixedint==0.1.6 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.1.6)", "Requirement already satisfied: msrest>=0.6.10 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.1)", "Requirement already satisfied: opentelemetry-instrumentation-wsgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-util-http==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-semantic-conventions==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: wrapt<2.0.0,>=1.0.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.17.2)", "Requirement already satisfied: packaging>=18.0 in /usr/lib/python3/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (21.3)", "Requirement already satisfied: deprecated>=1.2.6 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-semantic-conventions==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.2.18)", "Requirement already satisfied: importlib-metadata<=8.5.0,>=6.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (8.5.0)", "Requirement already satisfied: opentelemetry-instrumentation-asgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: asgiref~=3.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-asgi==0.51b0->opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (3.8.1)", "Requirement already satisfied: opentelemetry-instrumentation-dbapi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-psycopg2~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: annotated-types>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (0.7.0)", "Requirement already satisfied: pydantic-core==2.27.2 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (2.27.2)", "Requirement already satisfied: anyio<5,>=3.6.2 in /usr/local/lib/python3.10/dist-packages (from starlette<0.46.0,>=0.40.0->fastapi) (4.8.0)", "Requirement already satisfied: idna>=2.8 in /usr/lib/python3/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (3.3)", "Requirement already satisfied: sniffio>=1.1 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.3.1)", "Requirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.2.2)", "Requirement already satisfied: requests-oauthlib>=0.5.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2.0.0)", "Requirement already satisfied: isodate>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.2)", "Requirement already satisfied: certifi>=2017.4.17 in /usr/lib/python3/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2020.6.20)", "Requirement already satisfied: urllib3<3,>=1.21.1 in /usr/lib/python3/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.26.5)", "Requirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (3.4.1)", "Requirement already satisfied: zipp>=3.20 in /usr/local/lib/python3.10/dist-packages (from importlib-metadata<=8.5.0,>=6.0->opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (3.21.0)", "Requirement already satisfied: oauthlib>=3.0.0 in /usr/lib/python3/dist-packages (from requests-oauthlib>=0.5.0->msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (3.2.0)"], "version": null, "virtualenv": null}
2025-02-21 03:00:02,476 p=65246 u=snrj n=ansible INFO| TASK [flask_app : Set APPLICATION_INSIGHTS_CONNECTION_STRING in .bashrc] ************************************************************************************
2025-02-21 03:00:02,840 p=65246 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"backup": "", "changed": false, "msg": ""}
2025-02-21 03:00:02,862 p=65246 u=snrj n=ansible INFO| TASK [flask_app : Copy the sample FastAPI application] ******************************************************************************************************
2025-02-21 03:00:03,985 p=65246 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "checksum": "a799cc89edd839d4017e683dd6f1bad7612f0e59", "dest": "/home/azureadmin/http_fastapi.py", "gid": 1000, "group": "azureadmin", "mode": "0644", "owner": "azureadmin", "path": "/home/azureadmin/http_fastapi.py", "size": 1240, "state": "file", "uid": 1000}
2025-02-21 03:00:04,012 p=65246 u=snrj n=ansible INFO| TASK [flask_app : Start FastAPI application with uvicorn] ***************************************************************************************************
2025-02-21 03:00:05,497 p=65246 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"ansible_job_id": "j242758726525.18357", "changed": true, "finished": 0, "results_file": "/home/azureadmin/.ansible_async/j242758726525.18357", "started": 1}
2025-02-21 03:00:05,507 p=65246 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 03:00:05,507 p=65246 u=snrj n=ansible INFO| 40.68.93.141               : ok=8    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-21 03:00:22,944 p=65320 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 03:00:24,231 p=65320 u=snrj n=ansible INFO| ansible-playbook [core 2.18.2]
  config file = /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg
  configured module search path = ['/Users/snrj/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /opt/homebrew/Cellar/ansible/11.2.0/libexec/lib/python3.13/site-packages/ansible
  ansible collection location = /Users/snrj/Desktop/terraform-azure-demo/configure_vm/collections
  executable location = /opt/homebrew/bin/ansible-playbook
  python version = 3.13.2 (main, Feb  4 2025, 14:51:09) [Clang 16.0.0 (clang-1600.0.26.6)] (/opt/homebrew/Cellar/ansible/11.2.0/libexec/bin/python)
  jinja version = 3.1.5
  libyaml = True
2025-02-21 03:00:24,231 p=65320 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-21 03:00:25,943 p=65320 u=snrj n=ansible INFO| Skipping callback 'default', as we already have a stdout callback.
2025-02-21 03:00:25,943 p=65320 u=snrj n=ansible INFO| Skipping callback 'minimal', as we already have a stdout callback.
2025-02-21 03:00:25,943 p=65320 u=snrj n=ansible INFO| Skipping callback 'oneline', as we already have a stdout callback.
2025-02-21 03:00:25,943 p=65320 u=snrj n=ansible INFO| PLAYBOOK: flask_app.yml *************************************************************************************************************************************
2025-02-21 03:00:25,943 p=65320 u=snrj n=ansible INFO| 1 plays in playbooks/flask_app.yml
2025-02-21 03:00:25,948 p=65320 u=snrj n=ansible INFO| PLAY [Setup Flask App with OpenTelemetry] *******************************************************************************************************************
2025-02-21 03:00:26,013 p=65320 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 03:00:26,013 p=65320 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/playbooks/flask_app.yml:2
2025-02-21 03:00:28,184 p=65320 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 40.68.93.141 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-21 03:00:28,185 p=65320 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 03:00:28,190 p=65320 u=snrj n=ansible INFO| TASK [flask_app : Update apt package index] *****************************************************************************************************************
2025-02-21 03:00:28,191 p=65320 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:3
2025-02-21 03:00:30,889 p=65320 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"cache_update_time": 1740103230, "cache_updated": true, "changed": true}
2025-02-21 03:00:30,899 p=65320 u=snrj n=ansible INFO| TASK [flask_app : Ensure the 'universe' repository is enabled] **********************************************************************************************
2025-02-21 03:00:30,899 p=65320 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:7
2025-02-21 03:00:31,617 p=65320 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "repo": "deb http://archive.ubuntu.com/ubuntu/ jammy universe", "sources_added": [], "sources_removed": [], "state": "present"}
2025-02-21 03:00:31,626 p=65320 u=snrj n=ansible INFO| TASK [flask_app : Install python3-pip] **********************************************************************************************************************
2025-02-21 03:00:31,626 p=65320 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:12
2025-02-21 03:00:32,835 p=65320 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"cache_update_time": 1740103230, "cache_updated": false, "changed": false}
2025-02-21 03:00:32,850 p=65320 u=snrj n=ansible INFO| TASK [flask_app : Install required Python packages] *********************************************************************************************************
2025-02-21 03:00:32,850 p=65320 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:17
2025-02-21 03:00:34,721 p=65320 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "cmd": ["/usr/bin/python3.10", "-m", "pip.__main__", "install", "fastapi", "uvicorn", "azure-monitor-opentelemetry"], "name": ["fastapi", "uvicorn", "azure-monitor-opentelemetry"], "requirements": null, "state": "present", "stderr": "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n", "stderr_lines": ["WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv"], "stdout": "Requirement already satisfied: fastapi in /usr/local/lib/python3.10/dist-packages (0.115.8)\nRequirement already satisfied: uvicorn in /usr/local/lib/python3.10/dist-packages (0.34.0)\nRequirement already satisfied: azure-monitor-opentelemetry in /usr/local/lib/python3.10/dist-packages (1.6.5)\nRequirement already satisfied: typing-extensions>=4.8.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (4.12.2)\nRequirement already satisfied: pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4 in /usr/local/lib/python3.10/dist-packages (from fastapi) (2.10.6)\nRequirement already satisfied: starlette<0.46.0,>=0.40.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (0.45.3)\nRequirement already satisfied: click>=7.0 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (8.1.8)\nRequirement already satisfied: h11>=0.8 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (0.14.0)\nRequirement already satisfied: opentelemetry-resource-detector-azure~=0.1.4 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.1.5)\nRequirement already satisfied: azure-core-tracing-opentelemetry~=1.0.0b11 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b11)\nRequirement already satisfied: opentelemetry-instrumentation-fastapi~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-psycopg2~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: azure-core<2.0.0,>=1.28.0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.32.0)\nRequirement already satisfied: azure-monitor-opentelemetry-exporter~=1.0.0b31 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b33)\nRequirement already satisfied: opentelemetry-instrumentation-requests~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-urllib~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-urllib3~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-sdk~=1.28 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.30.0)\nRequirement already satisfied: opentelemetry-instrumentation-flask~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-django~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: six>=1.11.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.16.0)\nRequirement already satisfied: requests>=2.21.0 in /usr/local/lib/python3.10/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (2.32.3)\nRequirement already satisfied: opentelemetry-api<2.0.0,>=1.12.0 in /usr/local/lib/python3.10/dist-packages (from azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (1.30.0)\nRequirement already satisfied: fixedint==0.1.6 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.1.6)\nRequirement already satisfied: psutil~=5.9 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (5.9.8)\nRequirement already satisfied: msrest>=0.6.10 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.1)\nRequirement already satisfied: opentelemetry-semantic-conventions==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-wsgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-util-http==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: wrapt<2.0.0,>=1.0.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.17.2)\nRequirement already satisfied: packaging>=18.0 in /usr/lib/python3/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (21.3)\nRequirement already satisfied: deprecated>=1.2.6 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-semantic-conventions==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.2.18)\nRequirement already satisfied: importlib-metadata<=8.5.0,>=6.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (8.5.0)\nRequirement already satisfied: opentelemetry-instrumentation-asgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: asgiref~=3.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-asgi==0.51b0->opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (3.8.1)\nRequirement already satisfied: opentelemetry-instrumentation-dbapi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-psycopg2~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: pydantic-core==2.27.2 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (2.27.2)\nRequirement already satisfied: annotated-types>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (0.7.0)\nRequirement already satisfied: anyio<5,>=3.6.2 in /usr/local/lib/python3.10/dist-packages (from starlette<0.46.0,>=0.40.0->fastapi) (4.8.0)\nRequirement already satisfied: sniffio>=1.1 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.3.1)\nRequirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.2.2)\nRequirement already satisfied: idna>=2.8 in /usr/lib/python3/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (3.3)\nRequirement already satisfied: isodate>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.2)\nRequirement already satisfied: certifi>=2017.4.17 in /usr/lib/python3/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2020.6.20)\nRequirement already satisfied: requests-oauthlib>=0.5.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2.0.0)\nRequirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (3.4.1)\nRequirement already satisfied: urllib3<3,>=1.21.1 in /usr/lib/python3/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.26.5)\nRequirement already satisfied: zipp>=3.20 in /usr/local/lib/python3.10/dist-packages (from importlib-metadata<=8.5.0,>=6.0->opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (3.21.0)\nRequirement already satisfied: oauthlib>=3.0.0 in /usr/lib/python3/dist-packages (from requests-oauthlib>=0.5.0->msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (3.2.0)\n", "stdout_lines": ["Requirement already satisfied: fastapi in /usr/local/lib/python3.10/dist-packages (0.115.8)", "Requirement already satisfied: uvicorn in /usr/local/lib/python3.10/dist-packages (0.34.0)", "Requirement already satisfied: azure-monitor-opentelemetry in /usr/local/lib/python3.10/dist-packages (1.6.5)", "Requirement already satisfied: typing-extensions>=4.8.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (4.12.2)", "Requirement already satisfied: pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4 in /usr/local/lib/python3.10/dist-packages (from fastapi) (2.10.6)", "Requirement already satisfied: starlette<0.46.0,>=0.40.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (0.45.3)", "Requirement already satisfied: click>=7.0 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (8.1.8)", "Requirement already satisfied: h11>=0.8 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (0.14.0)", "Requirement already satisfied: opentelemetry-resource-detector-azure~=0.1.4 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.1.5)", "Requirement already satisfied: azure-core-tracing-opentelemetry~=1.0.0b11 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b11)", "Requirement already satisfied: opentelemetry-instrumentation-fastapi~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-psycopg2~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: azure-core<2.0.0,>=1.28.0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.32.0)", "Requirement already satisfied: azure-monitor-opentelemetry-exporter~=1.0.0b31 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b33)", "Requirement already satisfied: opentelemetry-instrumentation-requests~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-urllib~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-urllib3~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-sdk~=1.28 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.30.0)", "Requirement already satisfied: opentelemetry-instrumentation-flask~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-django~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: six>=1.11.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.16.0)", "Requirement already satisfied: requests>=2.21.0 in /usr/local/lib/python3.10/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (2.32.3)", "Requirement already satisfied: opentelemetry-api<2.0.0,>=1.12.0 in /usr/local/lib/python3.10/dist-packages (from azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (1.30.0)", "Requirement already satisfied: fixedint==0.1.6 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.1.6)", "Requirement already satisfied: psutil~=5.9 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (5.9.8)", "Requirement already satisfied: msrest>=0.6.10 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.1)", "Requirement already satisfied: opentelemetry-semantic-conventions==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-wsgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-util-http==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: wrapt<2.0.0,>=1.0.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.17.2)", "Requirement already satisfied: packaging>=18.0 in /usr/lib/python3/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (21.3)", "Requirement already satisfied: deprecated>=1.2.6 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-semantic-conventions==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.2.18)", "Requirement already satisfied: importlib-metadata<=8.5.0,>=6.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (8.5.0)", "Requirement already satisfied: opentelemetry-instrumentation-asgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: asgiref~=3.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-asgi==0.51b0->opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (3.8.1)", "Requirement already satisfied: opentelemetry-instrumentation-dbapi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-psycopg2~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: pydantic-core==2.27.2 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (2.27.2)", "Requirement already satisfied: annotated-types>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (0.7.0)", "Requirement already satisfied: anyio<5,>=3.6.2 in /usr/local/lib/python3.10/dist-packages (from starlette<0.46.0,>=0.40.0->fastapi) (4.8.0)", "Requirement already satisfied: sniffio>=1.1 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.3.1)", "Requirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.2.2)", "Requirement already satisfied: idna>=2.8 in /usr/lib/python3/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (3.3)", "Requirement already satisfied: isodate>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.2)", "Requirement already satisfied: certifi>=2017.4.17 in /usr/lib/python3/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2020.6.20)", "Requirement already satisfied: requests-oauthlib>=0.5.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2.0.0)", "Requirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (3.4.1)", "Requirement already satisfied: urllib3<3,>=1.21.1 in /usr/lib/python3/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.26.5)", "Requirement already satisfied: zipp>=3.20 in /usr/local/lib/python3.10/dist-packages (from importlib-metadata<=8.5.0,>=6.0->opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (3.21.0)", "Requirement already satisfied: oauthlib>=3.0.0 in /usr/lib/python3/dist-packages (from requests-oauthlib>=0.5.0->msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (3.2.0)"], "version": null, "virtualenv": null}
2025-02-21 03:00:34,730 p=65320 u=snrj n=ansible INFO| TASK [flask_app : Set APPLICATION_INSIGHTS_CONNECTION_STRING in .bashrc] ************************************************************************************
2025-02-21 03:00:34,731 p=65320 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:25
2025-02-21 03:00:35,093 p=65320 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"backup": "", "changed": false, "msg": ""}
2025-02-21 03:00:35,104 p=65320 u=snrj n=ansible INFO| TASK [flask_app : Copy the sample FastAPI application] ******************************************************************************************************
2025-02-21 03:00:35,104 p=65320 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:35
2025-02-21 03:00:36,157 p=65320 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "checksum": "a799cc89edd839d4017e683dd6f1bad7612f0e59", "dest": "/home/azureadmin/http_fastapi.py", "gid": 1000, "group": "azureadmin", "mode": "0644", "owner": "azureadmin", "path": "/home/azureadmin/http_fastapi.py", "size": 1240, "state": "file", "uid": 1000}
2025-02-21 03:00:36,167 p=65320 u=snrj n=ansible INFO| TASK [flask_app : Start FastAPI application with uvicorn] ***************************************************************************************************
2025-02-21 03:00:36,167 p=65320 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:40
2025-02-21 03:00:37,682 p=65320 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"ansible_job_id": "j99078261040.18881", "changed": true, "finished": 0, "results_file": "/home/azureadmin/.ansible_async/j99078261040.18881", "started": 1}
2025-02-21 03:00:37,694 p=65320 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 03:00:37,694 p=65320 u=snrj n=ansible INFO| 40.68.93.141               : ok=8    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-21 03:02:00,279 p=65507 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 03:02:00,417 p=65507 u=snrj n=ansible INFO| ansible-playbook [core 2.18.2]
  config file = /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg
  configured module search path = ['/Users/snrj/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /opt/homebrew/Cellar/ansible/11.2.0/libexec/lib/python3.13/site-packages/ansible
  ansible collection location = /Users/snrj/Desktop/terraform-azure-demo/configure_vm/collections
  executable location = /opt/homebrew/bin/ansible-playbook
  python version = 3.13.2 (main, Feb  4 2025, 14:51:09) [Clang 16.0.0 (clang-1600.0.26.6)] (/opt/homebrew/Cellar/ansible/11.2.0/libexec/bin/python)
  jinja version = 3.1.5
  libyaml = True
2025-02-21 03:02:00,417 p=65507 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-21 03:02:00,701 p=65507 u=snrj n=ansible INFO| Skipping callback 'default', as we already have a stdout callback.
2025-02-21 03:02:00,701 p=65507 u=snrj n=ansible INFO| Skipping callback 'minimal', as we already have a stdout callback.
2025-02-21 03:02:00,701 p=65507 u=snrj n=ansible INFO| Skipping callback 'oneline', as we already have a stdout callback.
2025-02-21 03:02:00,701 p=65507 u=snrj n=ansible INFO| PLAYBOOK: flask_app.yml *************************************************************************************************************************************
2025-02-21 03:02:00,701 p=65507 u=snrj n=ansible INFO| 1 plays in playbooks/flask_app.yml
2025-02-21 03:02:00,703 p=65507 u=snrj n=ansible INFO| PLAY [Setup Flask App with OpenTelemetry] *******************************************************************************************************************
2025-02-21 03:02:00,713 p=65507 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 03:02:00,713 p=65507 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/playbooks/flask_app.yml:2
2025-02-21 03:02:05,177 p=65507 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 40.68.93.141 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-21 03:02:05,177 p=65507 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 03:02:05,183 p=65507 u=snrj n=ansible INFO| TASK [flask_app : Update apt package index] *****************************************************************************************************************
2025-02-21 03:02:05,183 p=65507 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:3
2025-02-21 03:02:07,709 p=65507 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"cache_update_time": 1740103327, "cache_updated": true, "changed": true}
2025-02-21 03:02:07,719 p=65507 u=snrj n=ansible INFO| TASK [flask_app : Ensure the 'universe' repository is enabled] **********************************************************************************************
2025-02-21 03:02:07,719 p=65507 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:7
2025-02-21 03:02:08,272 p=65507 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "repo": "deb http://archive.ubuntu.com/ubuntu/ jammy universe", "sources_added": [], "sources_removed": [], "state": "present"}
2025-02-21 03:02:08,281 p=65507 u=snrj n=ansible INFO| TASK [flask_app : Install python3-pip] **********************************************************************************************************************
2025-02-21 03:02:08,281 p=65507 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:12
2025-02-21 03:02:09,499 p=65507 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"cache_update_time": 1740103327, "cache_updated": false, "changed": false}
2025-02-21 03:02:09,514 p=65507 u=snrj n=ansible INFO| TASK [flask_app : Install required Python packages] *********************************************************************************************************
2025-02-21 03:02:09,514 p=65507 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:17
2025-02-21 03:02:11,456 p=65507 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "cmd": ["/usr/bin/python3.10", "-m", "pip.__main__", "install", "fastapi", "uvicorn", "azure-monitor-opentelemetry"], "name": ["fastapi", "uvicorn", "azure-monitor-opentelemetry"], "requirements": null, "state": "present", "stderr": "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n", "stderr_lines": ["WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv"], "stdout": "Requirement already satisfied: fastapi in /usr/local/lib/python3.10/dist-packages (0.115.8)\nRequirement already satisfied: uvicorn in /usr/local/lib/python3.10/dist-packages (0.34.0)\nRequirement already satisfied: azure-monitor-opentelemetry in /usr/local/lib/python3.10/dist-packages (1.6.5)\nRequirement already satisfied: pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4 in /usr/local/lib/python3.10/dist-packages (from fastapi) (2.10.6)\nRequirement already satisfied: typing-extensions>=4.8.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (4.12.2)\nRequirement already satisfied: starlette<0.46.0,>=0.40.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (0.45.3)\nRequirement already satisfied: h11>=0.8 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (0.14.0)\nRequirement already satisfied: click>=7.0 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (8.1.8)\nRequirement already satisfied: azure-monitor-opentelemetry-exporter~=1.0.0b31 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b33)\nRequirement already satisfied: opentelemetry-instrumentation-urllib~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-django~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-requests~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-urllib3~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-sdk~=1.28 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.30.0)\nRequirement already satisfied: azure-core-tracing-opentelemetry~=1.0.0b11 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b11)\nRequirement already satisfied: opentelemetry-instrumentation-flask~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: azure-core<2.0.0,>=1.28.0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.32.0)\nRequirement already satisfied: opentelemetry-resource-detector-azure~=0.1.4 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.1.5)\nRequirement already satisfied: opentelemetry-instrumentation-fastapi~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-psycopg2~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: six>=1.11.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.16.0)\nRequirement already satisfied: requests>=2.21.0 in /usr/local/lib/python3.10/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (2.32.3)\nRequirement already satisfied: opentelemetry-api<2.0.0,>=1.12.0 in /usr/local/lib/python3.10/dist-packages (from azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (1.30.0)\nRequirement already satisfied: msrest>=0.6.10 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.1)\nRequirement already satisfied: fixedint==0.1.6 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.1.6)\nRequirement already satisfied: psutil~=5.9 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (5.9.8)\nRequirement already satisfied: opentelemetry-instrumentation==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-semantic-conventions==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-util-http==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-wsgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: wrapt<2.0.0,>=1.0.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.17.2)\nRequirement already satisfied: packaging>=18.0 in /usr/lib/python3/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (21.3)\nRequirement already satisfied: deprecated>=1.2.6 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-semantic-conventions==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.2.18)\nRequirement already satisfied: importlib-metadata<=8.5.0,>=6.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (8.5.0)\nRequirement already satisfied: opentelemetry-instrumentation-asgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: asgiref~=3.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-asgi==0.51b0->opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (3.8.1)\nRequirement already satisfied: opentelemetry-instrumentation-dbapi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-psycopg2~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: pydantic-core==2.27.2 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (2.27.2)\nRequirement already satisfied: annotated-types>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (0.7.0)\nRequirement already satisfied: anyio<5,>=3.6.2 in /usr/local/lib/python3.10/dist-packages (from starlette<0.46.0,>=0.40.0->fastapi) (4.8.0)\nRequirement already satisfied: idna>=2.8 in /usr/lib/python3/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (3.3)\nRequirement already satisfied: sniffio>=1.1 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.3.1)\nRequirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.2.2)\nRequirement already satisfied: requests-oauthlib>=0.5.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2.0.0)\nRequirement already satisfied: isodate>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.2)\nRequirement already satisfied: certifi>=2017.4.17 in /usr/lib/python3/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2020.6.20)\nRequirement already satisfied: urllib3<3,>=1.21.1 in /usr/lib/python3/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.26.5)\nRequirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (3.4.1)\nRequirement already satisfied: zipp>=3.20 in /usr/local/lib/python3.10/dist-packages (from importlib-metadata<=8.5.0,>=6.0->opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (3.21.0)\nRequirement already satisfied: oauthlib>=3.0.0 in /usr/lib/python3/dist-packages (from requests-oauthlib>=0.5.0->msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (3.2.0)\n", "stdout_lines": ["Requirement already satisfied: fastapi in /usr/local/lib/python3.10/dist-packages (0.115.8)", "Requirement already satisfied: uvicorn in /usr/local/lib/python3.10/dist-packages (0.34.0)", "Requirement already satisfied: azure-monitor-opentelemetry in /usr/local/lib/python3.10/dist-packages (1.6.5)", "Requirement already satisfied: pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4 in /usr/local/lib/python3.10/dist-packages (from fastapi) (2.10.6)", "Requirement already satisfied: typing-extensions>=4.8.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (4.12.2)", "Requirement already satisfied: starlette<0.46.0,>=0.40.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (0.45.3)", "Requirement already satisfied: h11>=0.8 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (0.14.0)", "Requirement already satisfied: click>=7.0 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (8.1.8)", "Requirement already satisfied: azure-monitor-opentelemetry-exporter~=1.0.0b31 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b33)", "Requirement already satisfied: opentelemetry-instrumentation-urllib~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-django~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-requests~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-urllib3~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-sdk~=1.28 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.30.0)", "Requirement already satisfied: azure-core-tracing-opentelemetry~=1.0.0b11 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b11)", "Requirement already satisfied: opentelemetry-instrumentation-flask~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: azure-core<2.0.0,>=1.28.0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.32.0)", "Requirement already satisfied: opentelemetry-resource-detector-azure~=0.1.4 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.1.5)", "Requirement already satisfied: opentelemetry-instrumentation-fastapi~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-psycopg2~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: six>=1.11.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.16.0)", "Requirement already satisfied: requests>=2.21.0 in /usr/local/lib/python3.10/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (2.32.3)", "Requirement already satisfied: opentelemetry-api<2.0.0,>=1.12.0 in /usr/local/lib/python3.10/dist-packages (from azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (1.30.0)", "Requirement already satisfied: msrest>=0.6.10 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.1)", "Requirement already satisfied: fixedint==0.1.6 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.1.6)", "Requirement already satisfied: psutil~=5.9 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (5.9.8)", "Requirement already satisfied: opentelemetry-instrumentation==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-semantic-conventions==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-util-http==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-wsgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: wrapt<2.0.0,>=1.0.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.17.2)", "Requirement already satisfied: packaging>=18.0 in /usr/lib/python3/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (21.3)", "Requirement already satisfied: deprecated>=1.2.6 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-semantic-conventions==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.2.18)", "Requirement already satisfied: importlib-metadata<=8.5.0,>=6.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (8.5.0)", "Requirement already satisfied: opentelemetry-instrumentation-asgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: asgiref~=3.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-asgi==0.51b0->opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (3.8.1)", "Requirement already satisfied: opentelemetry-instrumentation-dbapi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-psycopg2~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: pydantic-core==2.27.2 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (2.27.2)", "Requirement already satisfied: annotated-types>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (0.7.0)", "Requirement already satisfied: anyio<5,>=3.6.2 in /usr/local/lib/python3.10/dist-packages (from starlette<0.46.0,>=0.40.0->fastapi) (4.8.0)", "Requirement already satisfied: idna>=2.8 in /usr/lib/python3/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (3.3)", "Requirement already satisfied: sniffio>=1.1 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.3.1)", "Requirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.2.2)", "Requirement already satisfied: requests-oauthlib>=0.5.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2.0.0)", "Requirement already satisfied: isodate>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.2)", "Requirement already satisfied: certifi>=2017.4.17 in /usr/lib/python3/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2020.6.20)", "Requirement already satisfied: urllib3<3,>=1.21.1 in /usr/lib/python3/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.26.5)", "Requirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (3.4.1)", "Requirement already satisfied: zipp>=3.20 in /usr/local/lib/python3.10/dist-packages (from importlib-metadata<=8.5.0,>=6.0->opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (3.21.0)", "Requirement already satisfied: oauthlib>=3.0.0 in /usr/lib/python3/dist-packages (from requests-oauthlib>=0.5.0->msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (3.2.0)"], "version": null, "virtualenv": null}
2025-02-21 03:02:11,465 p=65507 u=snrj n=ansible INFO| TASK [flask_app : Set APPLICATION_INSIGHTS_CONNECTION_STRING in .bashrc] ************************************************************************************
2025-02-21 03:02:11,465 p=65507 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:25
2025-02-21 03:02:11,824 p=65507 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"backup": "", "changed": false, "msg": ""}
2025-02-21 03:02:11,835 p=65507 u=snrj n=ansible INFO| TASK [flask_app : Copy the sample FastAPI application] ******************************************************************************************************
2025-02-21 03:02:11,835 p=65507 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:35
2025-02-21 03:02:12,860 p=65507 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "checksum": "a799cc89edd839d4017e683dd6f1bad7612f0e59", "dest": "/home/azureadmin/http_fastapi.py", "gid": 1000, "group": "azureadmin", "mode": "0644", "owner": "azureadmin", "path": "/home/azureadmin/http_fastapi.py", "size": 1240, "state": "file", "uid": 1000}
2025-02-21 03:02:12,871 p=65507 u=snrj n=ansible INFO| TASK [flask_app : Start FastAPI application with uvicorn] ***************************************************************************************************
2025-02-21 03:02:12,871 p=65507 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:40
2025-02-21 03:02:13,232 p=65507 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"changed": true, "cmd": "nohup uvicorn /home/azureadmin/http_fastapi.py --host 0.0.0.0 --port 8008 --reload > /home/azureadmin/fastapi.log 2>&1 &\n", "delta": "0:00:00.006776", "end": "2025-02-21 02:02:13.209435", "msg": "", "rc": 0, "start": "2025-02-21 02:02:13.202659", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2025-02-21 03:02:13,242 p=65507 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 03:02:13,242 p=65507 u=snrj n=ansible INFO| 40.68.93.141               : ok=8    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-21 03:03:40,361 p=65686 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 03:03:40,486 p=65686 u=snrj n=ansible INFO| ansible-playbook [core 2.18.2]
  config file = /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg
  configured module search path = ['/Users/snrj/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /opt/homebrew/Cellar/ansible/11.2.0/libexec/lib/python3.13/site-packages/ansible
  ansible collection location = /Users/snrj/Desktop/terraform-azure-demo/configure_vm/collections
  executable location = /opt/homebrew/bin/ansible-playbook
  python version = 3.13.2 (main, Feb  4 2025, 14:51:09) [Clang 16.0.0 (clang-1600.0.26.6)] (/opt/homebrew/Cellar/ansible/11.2.0/libexec/bin/python)
  jinja version = 3.1.5
  libyaml = True
2025-02-21 03:03:40,486 p=65686 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-21 03:03:40,725 p=65686 u=snrj n=ansible INFO| Skipping callback 'default', as we already have a stdout callback.
2025-02-21 03:03:40,725 p=65686 u=snrj n=ansible INFO| Skipping callback 'minimal', as we already have a stdout callback.
2025-02-21 03:03:40,725 p=65686 u=snrj n=ansible INFO| Skipping callback 'oneline', as we already have a stdout callback.
2025-02-21 03:03:40,725 p=65686 u=snrj n=ansible INFO| PLAYBOOK: flask_app.yml *************************************************************************************************************************************
2025-02-21 03:03:40,725 p=65686 u=snrj n=ansible INFO| 1 plays in playbooks/flask_app.yml
2025-02-21 03:03:40,727 p=65686 u=snrj n=ansible INFO| PLAY [Setup Flask App with OpenTelemetry] *******************************************************************************************************************
2025-02-21 03:03:40,734 p=65686 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 03:03:40,734 p=65686 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/playbooks/flask_app.yml:2
2025-02-21 03:03:45,217 p=65686 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 40.68.93.141 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-21 03:03:45,218 p=65686 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 03:03:45,223 p=65686 u=snrj n=ansible INFO| TASK [flask_app : Update apt package index] *****************************************************************************************************************
2025-02-21 03:03:45,224 p=65686 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:3
2025-02-21 03:03:47,929 p=65686 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"cache_update_time": 1740103427, "cache_updated": true, "changed": true}
2025-02-21 03:03:47,939 p=65686 u=snrj n=ansible INFO| TASK [flask_app : Ensure the 'universe' repository is enabled] **********************************************************************************************
2025-02-21 03:03:47,939 p=65686 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:7
2025-02-21 03:03:48,625 p=65686 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "repo": "deb http://archive.ubuntu.com/ubuntu/ jammy universe", "sources_added": [], "sources_removed": [], "state": "present"}
2025-02-21 03:03:48,635 p=65686 u=snrj n=ansible INFO| TASK [flask_app : Install python3-pip] **********************************************************************************************************************
2025-02-21 03:03:48,635 p=65686 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:12
2025-02-21 03:03:50,166 p=65686 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"cache_update_time": 1740103427, "cache_updated": false, "changed": false}
2025-02-21 03:03:50,181 p=65686 u=snrj n=ansible INFO| TASK [flask_app : Install required Python packages] *********************************************************************************************************
2025-02-21 03:03:50,181 p=65686 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:17
2025-02-21 03:03:52,204 p=65686 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "cmd": ["/usr/bin/python3.10", "-m", "pip.__main__", "install", "fastapi", "uvicorn", "azure-monitor-opentelemetry"], "name": ["fastapi", "uvicorn", "azure-monitor-opentelemetry"], "requirements": null, "state": "present", "stderr": "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n", "stderr_lines": ["WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv"], "stdout": "Requirement already satisfied: fastapi in /usr/local/lib/python3.10/dist-packages (0.115.8)\nRequirement already satisfied: uvicorn in /usr/local/lib/python3.10/dist-packages (0.34.0)\nRequirement already satisfied: azure-monitor-opentelemetry in /usr/local/lib/python3.10/dist-packages (1.6.5)\nRequirement already satisfied: typing-extensions>=4.8.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (4.12.2)\nRequirement already satisfied: pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4 in /usr/local/lib/python3.10/dist-packages (from fastapi) (2.10.6)\nRequirement already satisfied: starlette<0.46.0,>=0.40.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (0.45.3)\nRequirement already satisfied: h11>=0.8 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (0.14.0)\nRequirement already satisfied: click>=7.0 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (8.1.8)\nRequirement already satisfied: azure-core-tracing-opentelemetry~=1.0.0b11 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b11)\nRequirement already satisfied: azure-core<2.0.0,>=1.28.0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.32.0)\nRequirement already satisfied: opentelemetry-instrumentation-psycopg2~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-requests~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-flask~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-urllib~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-sdk~=1.28 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.30.0)\nRequirement already satisfied: opentelemetry-instrumentation-fastapi~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-urllib3~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: azure-monitor-opentelemetry-exporter~=1.0.0b31 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b33)\nRequirement already satisfied: opentelemetry-instrumentation-django~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-resource-detector-azure~=0.1.4 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.1.5)\nRequirement already satisfied: requests>=2.21.0 in /usr/local/lib/python3.10/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (2.32.3)\nRequirement already satisfied: six>=1.11.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.16.0)\nRequirement already satisfied: opentelemetry-api<2.0.0,>=1.12.0 in /usr/local/lib/python3.10/dist-packages (from azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (1.30.0)\nRequirement already satisfied: fixedint==0.1.6 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.1.6)\nRequirement already satisfied: psutil~=5.9 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (5.9.8)\nRequirement already satisfied: msrest>=0.6.10 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.1)\nRequirement already satisfied: opentelemetry-instrumentation==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-util-http==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-wsgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-semantic-conventions==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: wrapt<2.0.0,>=1.0.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.17.2)\nRequirement already satisfied: packaging>=18.0 in /usr/lib/python3/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (21.3)\nRequirement already satisfied: deprecated>=1.2.6 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-semantic-conventions==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.2.18)\nRequirement already satisfied: importlib-metadata<=8.5.0,>=6.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (8.5.0)\nRequirement already satisfied: opentelemetry-instrumentation-asgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: asgiref~=3.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-asgi==0.51b0->opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (3.8.1)\nRequirement already satisfied: opentelemetry-instrumentation-dbapi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-psycopg2~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: annotated-types>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (0.7.0)\nRequirement already satisfied: pydantic-core==2.27.2 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (2.27.2)\nRequirement already satisfied: anyio<5,>=3.6.2 in /usr/local/lib/python3.10/dist-packages (from starlette<0.46.0,>=0.40.0->fastapi) (4.8.0)\nRequirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.2.2)\nRequirement already satisfied: sniffio>=1.1 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.3.1)\nRequirement already satisfied: idna>=2.8 in /usr/lib/python3/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (3.3)\nRequirement already satisfied: certifi>=2017.4.17 in /usr/lib/python3/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2020.6.20)\nRequirement already satisfied: requests-oauthlib>=0.5.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2.0.0)\nRequirement already satisfied: isodate>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.2)\nRequirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (3.4.1)\nRequirement already satisfied: urllib3<3,>=1.21.1 in /usr/lib/python3/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.26.5)\nRequirement already satisfied: zipp>=3.20 in /usr/local/lib/python3.10/dist-packages (from importlib-metadata<=8.5.0,>=6.0->opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (3.21.0)\nRequirement already satisfied: oauthlib>=3.0.0 in /usr/lib/python3/dist-packages (from requests-oauthlib>=0.5.0->msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (3.2.0)\n", "stdout_lines": ["Requirement already satisfied: fastapi in /usr/local/lib/python3.10/dist-packages (0.115.8)", "Requirement already satisfied: uvicorn in /usr/local/lib/python3.10/dist-packages (0.34.0)", "Requirement already satisfied: azure-monitor-opentelemetry in /usr/local/lib/python3.10/dist-packages (1.6.5)", "Requirement already satisfied: typing-extensions>=4.8.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (4.12.2)", "Requirement already satisfied: pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4 in /usr/local/lib/python3.10/dist-packages (from fastapi) (2.10.6)", "Requirement already satisfied: starlette<0.46.0,>=0.40.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (0.45.3)", "Requirement already satisfied: h11>=0.8 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (0.14.0)", "Requirement already satisfied: click>=7.0 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (8.1.8)", "Requirement already satisfied: azure-core-tracing-opentelemetry~=1.0.0b11 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b11)", "Requirement already satisfied: azure-core<2.0.0,>=1.28.0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.32.0)", "Requirement already satisfied: opentelemetry-instrumentation-psycopg2~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-requests~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-flask~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-urllib~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-sdk~=1.28 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.30.0)", "Requirement already satisfied: opentelemetry-instrumentation-fastapi~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-urllib3~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: azure-monitor-opentelemetry-exporter~=1.0.0b31 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b33)", "Requirement already satisfied: opentelemetry-instrumentation-django~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-resource-detector-azure~=0.1.4 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.1.5)", "Requirement already satisfied: requests>=2.21.0 in /usr/local/lib/python3.10/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (2.32.3)", "Requirement already satisfied: six>=1.11.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.16.0)", "Requirement already satisfied: opentelemetry-api<2.0.0,>=1.12.0 in /usr/local/lib/python3.10/dist-packages (from azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (1.30.0)", "Requirement already satisfied: fixedint==0.1.6 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.1.6)", "Requirement already satisfied: psutil~=5.9 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (5.9.8)", "Requirement already satisfied: msrest>=0.6.10 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.1)", "Requirement already satisfied: opentelemetry-instrumentation==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-util-http==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-wsgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-semantic-conventions==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: wrapt<2.0.0,>=1.0.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.17.2)", "Requirement already satisfied: packaging>=18.0 in /usr/lib/python3/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (21.3)", "Requirement already satisfied: deprecated>=1.2.6 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-semantic-conventions==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.2.18)", "Requirement already satisfied: importlib-metadata<=8.5.0,>=6.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (8.5.0)", "Requirement already satisfied: opentelemetry-instrumentation-asgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: asgiref~=3.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-asgi==0.51b0->opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (3.8.1)", "Requirement already satisfied: opentelemetry-instrumentation-dbapi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-psycopg2~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: annotated-types>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (0.7.0)", "Requirement already satisfied: pydantic-core==2.27.2 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (2.27.2)", "Requirement already satisfied: anyio<5,>=3.6.2 in /usr/local/lib/python3.10/dist-packages (from starlette<0.46.0,>=0.40.0->fastapi) (4.8.0)", "Requirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.2.2)", "Requirement already satisfied: sniffio>=1.1 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.3.1)", "Requirement already satisfied: idna>=2.8 in /usr/lib/python3/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (3.3)", "Requirement already satisfied: certifi>=2017.4.17 in /usr/lib/python3/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2020.6.20)", "Requirement already satisfied: requests-oauthlib>=0.5.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2.0.0)", "Requirement already satisfied: isodate>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.2)", "Requirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (3.4.1)", "Requirement already satisfied: urllib3<3,>=1.21.1 in /usr/lib/python3/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.26.5)", "Requirement already satisfied: zipp>=3.20 in /usr/local/lib/python3.10/dist-packages (from importlib-metadata<=8.5.0,>=6.0->opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (3.21.0)", "Requirement already satisfied: oauthlib>=3.0.0 in /usr/lib/python3/dist-packages (from requests-oauthlib>=0.5.0->msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (3.2.0)"], "version": null, "virtualenv": null}
2025-02-21 03:03:52,213 p=65686 u=snrj n=ansible INFO| TASK [flask_app : Set APPLICATION_INSIGHTS_CONNECTION_STRING in .bashrc] ************************************************************************************
2025-02-21 03:03:52,213 p=65686 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:25
2025-02-21 03:03:52,568 p=65686 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"backup": "", "changed": false, "msg": ""}
2025-02-21 03:03:52,578 p=65686 u=snrj n=ansible INFO| TASK [flask_app : Copy the sample FastAPI application] ******************************************************************************************************
2025-02-21 03:03:52,578 p=65686 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:35
2025-02-21 03:03:53,780 p=65686 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "checksum": "a799cc89edd839d4017e683dd6f1bad7612f0e59", "dest": "/home/azureadmin/http_fastapi.py", "gid": 1000, "group": "azureadmin", "mode": "0644", "owner": "azureadmin", "path": "/home/azureadmin/http_fastapi.py", "size": 1240, "state": "file", "uid": 1000}
2025-02-21 03:03:53,790 p=65686 u=snrj n=ansible INFO| TASK [flask_app : Start FastAPI application with uvicorn] ***************************************************************************************************
2025-02-21 03:03:53,790 p=65686 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:40
2025-02-21 03:03:54,151 p=65686 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"changed": true, "cmd": "nohup uvicorn /home/azureadmin/http_fastapi.py --host 0.0.0.0 --port 8008 --reload > /home/azureadmin/fastapi.log 2>&1 &\n", "delta": "0:00:00.005660", "end": "2025-02-21 02:03:54.117444", "msg": "", "rc": 0, "start": "2025-02-21 02:03:54.111784", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2025-02-21 03:03:54,160 p=65686 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 03:03:54,160 p=65686 u=snrj n=ansible INFO| 40.68.93.141               : ok=8    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-21 03:08:45,527 p=66233 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 03:08:45,695 p=66233 u=snrj n=ansible INFO| ansible-playbook [core 2.18.2]
  config file = /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg
  configured module search path = ['/Users/snrj/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /opt/homebrew/Cellar/ansible/11.2.0/libexec/lib/python3.13/site-packages/ansible
  ansible collection location = /Users/snrj/Desktop/terraform-azure-demo/configure_vm/collections
  executable location = /opt/homebrew/bin/ansible-playbook
  python version = 3.13.2 (main, Feb  4 2025, 14:51:09) [Clang 16.0.0 (clang-1600.0.26.6)] (/opt/homebrew/Cellar/ansible/11.2.0/libexec/bin/python)
  jinja version = 3.1.5
  libyaml = True
2025-02-21 03:08:45,695 p=66233 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-21 03:08:45,995 p=66233 u=snrj n=ansible INFO| Skipping callback 'default', as we already have a stdout callback.
2025-02-21 03:08:45,995 p=66233 u=snrj n=ansible INFO| Skipping callback 'minimal', as we already have a stdout callback.
2025-02-21 03:08:45,995 p=66233 u=snrj n=ansible INFO| Skipping callback 'oneline', as we already have a stdout callback.
2025-02-21 03:08:45,995 p=66233 u=snrj n=ansible INFO| PLAYBOOK: flask_app.yml *************************************************************************************************************************************
2025-02-21 03:08:45,995 p=66233 u=snrj n=ansible INFO| 1 plays in playbooks/flask_app.yml
2025-02-21 03:08:45,997 p=66233 u=snrj n=ansible INFO| PLAY [Setup Flask App with OpenTelemetry] *******************************************************************************************************************
2025-02-21 03:08:46,007 p=66233 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 03:08:46,007 p=66233 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/playbooks/flask_app.yml:2
2025-02-21 03:08:50,563 p=66233 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 40.68.93.141 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-21 03:08:50,564 p=66233 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 03:08:50,569 p=66233 u=snrj n=ansible INFO| TASK [flask_app : Update apt package index] *****************************************************************************************************************
2025-02-21 03:08:50,570 p=66233 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:3
2025-02-21 03:08:53,168 p=66233 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"cache_update_time": 1740103732, "cache_updated": true, "changed": true}
2025-02-21 03:08:53,177 p=66233 u=snrj n=ansible INFO| TASK [flask_app : Ensure the 'universe' repository is enabled] **********************************************************************************************
2025-02-21 03:08:53,177 p=66233 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:7
2025-02-21 03:08:53,883 p=66233 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "repo": "deb http://archive.ubuntu.com/ubuntu/ jammy universe", "sources_added": [], "sources_removed": [], "state": "present"}
2025-02-21 03:08:53,892 p=66233 u=snrj n=ansible INFO| TASK [flask_app : Install python3-pip] **********************************************************************************************************************
2025-02-21 03:08:53,892 p=66233 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:12
2025-02-21 03:08:55,317 p=66233 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"cache_update_time": 1740103732, "cache_updated": false, "changed": false}
2025-02-21 03:08:55,332 p=66233 u=snrj n=ansible INFO| TASK [flask_app : Install required Python packages] *********************************************************************************************************
2025-02-21 03:08:55,332 p=66233 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:17
2025-02-21 03:08:57,265 p=66233 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "cmd": ["/usr/bin/python3.10", "-m", "pip.__main__", "install", "fastapi", "uvicorn", "azure-monitor-opentelemetry"], "name": ["fastapi", "uvicorn", "azure-monitor-opentelemetry"], "requirements": null, "state": "present", "stderr": "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n", "stderr_lines": ["WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv"], "stdout": "Requirement already satisfied: fastapi in /usr/local/lib/python3.10/dist-packages (0.115.8)\nRequirement already satisfied: uvicorn in /usr/local/lib/python3.10/dist-packages (0.34.0)\nRequirement already satisfied: azure-monitor-opentelemetry in /usr/local/lib/python3.10/dist-packages (1.6.5)\nRequirement already satisfied: typing-extensions>=4.8.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (4.12.2)\nRequirement already satisfied: starlette<0.46.0,>=0.40.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (0.45.3)\nRequirement already satisfied: pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4 in /usr/local/lib/python3.10/dist-packages (from fastapi) (2.10.6)\nRequirement already satisfied: h11>=0.8 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (0.14.0)\nRequirement already satisfied: click>=7.0 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (8.1.8)\nRequirement already satisfied: azure-core<2.0.0,>=1.28.0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.32.0)\nRequirement already satisfied: opentelemetry-instrumentation-requests~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-urllib3~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: azure-monitor-opentelemetry-exporter~=1.0.0b31 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b33)\nRequirement already satisfied: opentelemetry-instrumentation-psycopg2~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-django~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-fastapi~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-urllib~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-sdk~=1.28 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.30.0)\nRequirement already satisfied: opentelemetry-resource-detector-azure~=0.1.4 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.1.5)\nRequirement already satisfied: opentelemetry-instrumentation-flask~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: azure-core-tracing-opentelemetry~=1.0.0b11 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b11)\nRequirement already satisfied: six>=1.11.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.16.0)\nRequirement already satisfied: requests>=2.21.0 in /usr/local/lib/python3.10/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (2.32.3)\nRequirement already satisfied: opentelemetry-api<2.0.0,>=1.12.0 in /usr/local/lib/python3.10/dist-packages (from azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (1.30.0)\nRequirement already satisfied: msrest>=0.6.10 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.1)\nRequirement already satisfied: fixedint==0.1.6 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.1.6)\nRequirement already satisfied: psutil~=5.9 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (5.9.8)\nRequirement already satisfied: opentelemetry-semantic-conventions==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-util-http==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-wsgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: wrapt<2.0.0,>=1.0.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.17.2)\nRequirement already satisfied: packaging>=18.0 in /usr/lib/python3/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (21.3)\nRequirement already satisfied: deprecated>=1.2.6 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-semantic-conventions==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.2.18)\nRequirement already satisfied: importlib-metadata<=8.5.0,>=6.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (8.5.0)\nRequirement already satisfied: opentelemetry-instrumentation-asgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: asgiref~=3.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-asgi==0.51b0->opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (3.8.1)\nRequirement already satisfied: opentelemetry-instrumentation-dbapi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-psycopg2~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: annotated-types>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (0.7.0)\nRequirement already satisfied: pydantic-core==2.27.2 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (2.27.2)\nRequirement already satisfied: anyio<5,>=3.6.2 in /usr/local/lib/python3.10/dist-packages (from starlette<0.46.0,>=0.40.0->fastapi) (4.8.0)\nRequirement already satisfied: sniffio>=1.1 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.3.1)\nRequirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.2.2)\nRequirement already satisfied: idna>=2.8 in /usr/lib/python3/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (3.3)\nRequirement already satisfied: certifi>=2017.4.17 in /usr/lib/python3/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2020.6.20)\nRequirement already satisfied: isodate>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.2)\nRequirement already satisfied: requests-oauthlib>=0.5.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2.0.0)\nRequirement already satisfied: urllib3<3,>=1.21.1 in /usr/lib/python3/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.26.5)\nRequirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (3.4.1)\nRequirement already satisfied: zipp>=3.20 in /usr/local/lib/python3.10/dist-packages (from importlib-metadata<=8.5.0,>=6.0->opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (3.21.0)\nRequirement already satisfied: oauthlib>=3.0.0 in /usr/lib/python3/dist-packages (from requests-oauthlib>=0.5.0->msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (3.2.0)\n", "stdout_lines": ["Requirement already satisfied: fastapi in /usr/local/lib/python3.10/dist-packages (0.115.8)", "Requirement already satisfied: uvicorn in /usr/local/lib/python3.10/dist-packages (0.34.0)", "Requirement already satisfied: azure-monitor-opentelemetry in /usr/local/lib/python3.10/dist-packages (1.6.5)", "Requirement already satisfied: typing-extensions>=4.8.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (4.12.2)", "Requirement already satisfied: starlette<0.46.0,>=0.40.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (0.45.3)", "Requirement already satisfied: pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4 in /usr/local/lib/python3.10/dist-packages (from fastapi) (2.10.6)", "Requirement already satisfied: h11>=0.8 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (0.14.0)", "Requirement already satisfied: click>=7.0 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (8.1.8)", "Requirement already satisfied: azure-core<2.0.0,>=1.28.0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.32.0)", "Requirement already satisfied: opentelemetry-instrumentation-requests~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-urllib3~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: azure-monitor-opentelemetry-exporter~=1.0.0b31 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b33)", "Requirement already satisfied: opentelemetry-instrumentation-psycopg2~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-django~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-fastapi~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-urllib~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-sdk~=1.28 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.30.0)", "Requirement already satisfied: opentelemetry-resource-detector-azure~=0.1.4 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.1.5)", "Requirement already satisfied: opentelemetry-instrumentation-flask~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: azure-core-tracing-opentelemetry~=1.0.0b11 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b11)", "Requirement already satisfied: six>=1.11.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.16.0)", "Requirement already satisfied: requests>=2.21.0 in /usr/local/lib/python3.10/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (2.32.3)", "Requirement already satisfied: opentelemetry-api<2.0.0,>=1.12.0 in /usr/local/lib/python3.10/dist-packages (from azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (1.30.0)", "Requirement already satisfied: msrest>=0.6.10 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.1)", "Requirement already satisfied: fixedint==0.1.6 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.1.6)", "Requirement already satisfied: psutil~=5.9 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (5.9.8)", "Requirement already satisfied: opentelemetry-semantic-conventions==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-util-http==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-wsgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: wrapt<2.0.0,>=1.0.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.17.2)", "Requirement already satisfied: packaging>=18.0 in /usr/lib/python3/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (21.3)", "Requirement already satisfied: deprecated>=1.2.6 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-semantic-conventions==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.2.18)", "Requirement already satisfied: importlib-metadata<=8.5.0,>=6.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (8.5.0)", "Requirement already satisfied: opentelemetry-instrumentation-asgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: asgiref~=3.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-asgi==0.51b0->opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (3.8.1)", "Requirement already satisfied: opentelemetry-instrumentation-dbapi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-psycopg2~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: annotated-types>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (0.7.0)", "Requirement already satisfied: pydantic-core==2.27.2 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (2.27.2)", "Requirement already satisfied: anyio<5,>=3.6.2 in /usr/local/lib/python3.10/dist-packages (from starlette<0.46.0,>=0.40.0->fastapi) (4.8.0)", "Requirement already satisfied: sniffio>=1.1 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.3.1)", "Requirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.2.2)", "Requirement already satisfied: idna>=2.8 in /usr/lib/python3/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (3.3)", "Requirement already satisfied: certifi>=2017.4.17 in /usr/lib/python3/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2020.6.20)", "Requirement already satisfied: isodate>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.2)", "Requirement already satisfied: requests-oauthlib>=0.5.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2.0.0)", "Requirement already satisfied: urllib3<3,>=1.21.1 in /usr/lib/python3/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.26.5)", "Requirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (3.4.1)", "Requirement already satisfied: zipp>=3.20 in /usr/local/lib/python3.10/dist-packages (from importlib-metadata<=8.5.0,>=6.0->opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (3.21.0)", "Requirement already satisfied: oauthlib>=3.0.0 in /usr/lib/python3/dist-packages (from requests-oauthlib>=0.5.0->msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (3.2.0)"], "version": null, "virtualenv": null}
2025-02-21 03:08:57,275 p=66233 u=snrj n=ansible INFO| TASK [flask_app : Set APPLICATION_INSIGHTS_CONNECTION_STRING in .bashrc] ************************************************************************************
2025-02-21 03:08:57,275 p=66233 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:25
2025-02-21 03:08:57,765 p=66233 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"backup": "", "changed": false, "msg": ""}
2025-02-21 03:08:57,777 p=66233 u=snrj n=ansible INFO| TASK [flask_app : Copy the sample FastAPI application] ******************************************************************************************************
2025-02-21 03:08:57,778 p=66233 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:35
2025-02-21 03:08:58,878 p=66233 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "checksum": "a799cc89edd839d4017e683dd6f1bad7612f0e59", "dest": "/home/azureadmin/http_fastapi.py", "gid": 1000, "group": "azureadmin", "mode": "0644", "owner": "azureadmin", "path": "/home/azureadmin/http_fastapi.py", "size": 1240, "state": "file", "uid": 1000}
2025-02-21 03:08:58,891 p=66233 u=snrj n=ansible INFO| TASK [flask_app : Start FastAPI application with uvicorn] ***************************************************************************************************
2025-02-21 03:08:58,891 p=66233 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:40
2025-02-21 03:08:59,301 p=66233 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"changed": true, "cmd": "nohup uvicorn /home/azureadmin/http_fastapi:app --host 0.0.0.0 --port 8008 --reload > /home/azureadmin/fastapi.log 2>&1 &\n", "delta": "0:00:00.005197", "end": "2025-02-21 02:08:59.258134", "msg": "", "rc": 0, "start": "2025-02-21 02:08:59.252937", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2025-02-21 03:08:59,310 p=66233 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 03:08:59,311 p=66233 u=snrj n=ansible INFO| 40.68.93.141               : ok=8    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-21 03:11:11,795 p=66481 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 03:11:11,939 p=66481 u=snrj n=ansible INFO| ansible-playbook [core 2.18.2]
  config file = /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg
  configured module search path = ['/Users/snrj/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /opt/homebrew/Cellar/ansible/11.2.0/libexec/lib/python3.13/site-packages/ansible
  ansible collection location = /Users/snrj/Desktop/terraform-azure-demo/configure_vm/collections
  executable location = /opt/homebrew/bin/ansible-playbook
  python version = 3.13.2 (main, Feb  4 2025, 14:51:09) [Clang 16.0.0 (clang-1600.0.26.6)] (/opt/homebrew/Cellar/ansible/11.2.0/libexec/bin/python)
  jinja version = 3.1.5
  libyaml = True
2025-02-21 03:11:11,939 p=66481 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-21 03:11:12,206 p=66481 u=snrj n=ansible INFO| Skipping callback 'default', as we already have a stdout callback.
2025-02-21 03:11:12,206 p=66481 u=snrj n=ansible INFO| Skipping callback 'minimal', as we already have a stdout callback.
2025-02-21 03:11:12,206 p=66481 u=snrj n=ansible INFO| Skipping callback 'oneline', as we already have a stdout callback.
2025-02-21 03:11:12,206 p=66481 u=snrj n=ansible INFO| PLAYBOOK: flask_app.yml *************************************************************************************************************************************
2025-02-21 03:11:12,206 p=66481 u=snrj n=ansible INFO| 1 plays in playbooks/flask_app.yml
2025-02-21 03:11:12,208 p=66481 u=snrj n=ansible INFO| PLAY [Setup Flask App with OpenTelemetry] *******************************************************************************************************************
2025-02-21 03:11:12,218 p=66481 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 03:11:12,218 p=66481 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/playbooks/flask_app.yml:2
2025-02-21 03:11:16,416 p=66481 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 40.68.93.141 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-21 03:11:16,416 p=66481 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 03:11:16,422 p=66481 u=snrj n=ansible INFO| TASK [flask_app : Update apt package index] *****************************************************************************************************************
2025-02-21 03:11:16,422 p=66481 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:3
2025-02-21 03:11:18,992 p=66481 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"cache_update_time": 1740103878, "cache_updated": true, "changed": true}
2025-02-21 03:11:19,001 p=66481 u=snrj n=ansible INFO| TASK [flask_app : Ensure the 'universe' repository is enabled] **********************************************************************************************
2025-02-21 03:11:19,002 p=66481 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:7
2025-02-21 03:11:19,605 p=66481 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "repo": "deb http://archive.ubuntu.com/ubuntu/ jammy universe", "sources_added": [], "sources_removed": [], "state": "present"}
2025-02-21 03:11:19,615 p=66481 u=snrj n=ansible INFO| TASK [flask_app : Install python3-pip] **********************************************************************************************************************
2025-02-21 03:11:19,615 p=66481 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:12
2025-02-21 03:11:20,850 p=66481 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"cache_update_time": 1740103878, "cache_updated": false, "changed": false}
2025-02-21 03:11:20,864 p=66481 u=snrj n=ansible INFO| TASK [flask_app : Install required Python packages] *********************************************************************************************************
2025-02-21 03:11:20,864 p=66481 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:17
2025-02-21 03:11:22,784 p=66481 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "cmd": ["/usr/bin/python3.10", "-m", "pip.__main__", "install", "fastapi", "uvicorn", "azure-monitor-opentelemetry"], "name": ["fastapi", "uvicorn", "azure-monitor-opentelemetry"], "requirements": null, "state": "present", "stderr": "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n", "stderr_lines": ["WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv"], "stdout": "Requirement already satisfied: fastapi in /usr/local/lib/python3.10/dist-packages (0.115.8)\nRequirement already satisfied: uvicorn in /usr/local/lib/python3.10/dist-packages (0.34.0)\nRequirement already satisfied: azure-monitor-opentelemetry in /usr/local/lib/python3.10/dist-packages (1.6.5)\nRequirement already satisfied: pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4 in /usr/local/lib/python3.10/dist-packages (from fastapi) (2.10.6)\nRequirement already satisfied: starlette<0.46.0,>=0.40.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (0.45.3)\nRequirement already satisfied: typing-extensions>=4.8.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (4.12.2)\nRequirement already satisfied: click>=7.0 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (8.1.8)\nRequirement already satisfied: h11>=0.8 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (0.14.0)\nRequirement already satisfied: opentelemetry-sdk~=1.28 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.30.0)\nRequirement already satisfied: opentelemetry-instrumentation-urllib3~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-psycopg2~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: azure-core-tracing-opentelemetry~=1.0.0b11 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b11)\nRequirement already satisfied: opentelemetry-instrumentation-requests~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: azure-monitor-opentelemetry-exporter~=1.0.0b31 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b33)\nRequirement already satisfied: opentelemetry-instrumentation-fastapi~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-flask~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-urllib~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-django~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: azure-core<2.0.0,>=1.28.0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.32.0)\nRequirement already satisfied: opentelemetry-resource-detector-azure~=0.1.4 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.1.5)\nRequirement already satisfied: requests>=2.21.0 in /usr/local/lib/python3.10/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (2.32.3)\nRequirement already satisfied: six>=1.11.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.16.0)\nRequirement already satisfied: opentelemetry-api<2.0.0,>=1.12.0 in /usr/local/lib/python3.10/dist-packages (from azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (1.30.0)\nRequirement already satisfied: psutil~=5.9 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (5.9.8)\nRequirement already satisfied: msrest>=0.6.10 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.1)\nRequirement already satisfied: fixedint==0.1.6 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.1.6)\nRequirement already satisfied: opentelemetry-instrumentation==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-util-http==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-wsgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-semantic-conventions==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: packaging>=18.0 in /usr/lib/python3/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (21.3)\nRequirement already satisfied: wrapt<2.0.0,>=1.0.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.17.2)\nRequirement already satisfied: deprecated>=1.2.6 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-semantic-conventions==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.2.18)\nRequirement already satisfied: importlib-metadata<=8.5.0,>=6.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (8.5.0)\nRequirement already satisfied: opentelemetry-instrumentation-asgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: asgiref~=3.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-asgi==0.51b0->opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (3.8.1)\nRequirement already satisfied: opentelemetry-instrumentation-dbapi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-psycopg2~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: pydantic-core==2.27.2 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (2.27.2)\nRequirement already satisfied: annotated-types>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (0.7.0)\nRequirement already satisfied: anyio<5,>=3.6.2 in /usr/local/lib/python3.10/dist-packages (from starlette<0.46.0,>=0.40.0->fastapi) (4.8.0)\nRequirement already satisfied: idna>=2.8 in /usr/lib/python3/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (3.3)\nRequirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.2.2)\nRequirement already satisfied: sniffio>=1.1 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.3.1)\nRequirement already satisfied: requests-oauthlib>=0.5.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2.0.0)\nRequirement already satisfied: isodate>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.2)\nRequirement already satisfied: certifi>=2017.4.17 in /usr/lib/python3/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2020.6.20)\nRequirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (3.4.1)\nRequirement already satisfied: urllib3<3,>=1.21.1 in /usr/lib/python3/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.26.5)\nRequirement already satisfied: zipp>=3.20 in /usr/local/lib/python3.10/dist-packages (from importlib-metadata<=8.5.0,>=6.0->opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (3.21.0)\nRequirement already satisfied: oauthlib>=3.0.0 in /usr/lib/python3/dist-packages (from requests-oauthlib>=0.5.0->msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (3.2.0)\n", "stdout_lines": ["Requirement already satisfied: fastapi in /usr/local/lib/python3.10/dist-packages (0.115.8)", "Requirement already satisfied: uvicorn in /usr/local/lib/python3.10/dist-packages (0.34.0)", "Requirement already satisfied: azure-monitor-opentelemetry in /usr/local/lib/python3.10/dist-packages (1.6.5)", "Requirement already satisfied: pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4 in /usr/local/lib/python3.10/dist-packages (from fastapi) (2.10.6)", "Requirement already satisfied: starlette<0.46.0,>=0.40.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (0.45.3)", "Requirement already satisfied: typing-extensions>=4.8.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (4.12.2)", "Requirement already satisfied: click>=7.0 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (8.1.8)", "Requirement already satisfied: h11>=0.8 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (0.14.0)", "Requirement already satisfied: opentelemetry-sdk~=1.28 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.30.0)", "Requirement already satisfied: opentelemetry-instrumentation-urllib3~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-psycopg2~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: azure-core-tracing-opentelemetry~=1.0.0b11 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b11)", "Requirement already satisfied: opentelemetry-instrumentation-requests~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: azure-monitor-opentelemetry-exporter~=1.0.0b31 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b33)", "Requirement already satisfied: opentelemetry-instrumentation-fastapi~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-flask~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-urllib~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-django~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: azure-core<2.0.0,>=1.28.0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.32.0)", "Requirement already satisfied: opentelemetry-resource-detector-azure~=0.1.4 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.1.5)", "Requirement already satisfied: requests>=2.21.0 in /usr/local/lib/python3.10/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (2.32.3)", "Requirement already satisfied: six>=1.11.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.16.0)", "Requirement already satisfied: opentelemetry-api<2.0.0,>=1.12.0 in /usr/local/lib/python3.10/dist-packages (from azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (1.30.0)", "Requirement already satisfied: psutil~=5.9 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (5.9.8)", "Requirement already satisfied: msrest>=0.6.10 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.1)", "Requirement already satisfied: fixedint==0.1.6 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.1.6)", "Requirement already satisfied: opentelemetry-instrumentation==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-util-http==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-wsgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-semantic-conventions==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: packaging>=18.0 in /usr/lib/python3/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (21.3)", "Requirement already satisfied: wrapt<2.0.0,>=1.0.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.17.2)", "Requirement already satisfied: deprecated>=1.2.6 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-semantic-conventions==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.2.18)", "Requirement already satisfied: importlib-metadata<=8.5.0,>=6.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (8.5.0)", "Requirement already satisfied: opentelemetry-instrumentation-asgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: asgiref~=3.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-asgi==0.51b0->opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (3.8.1)", "Requirement already satisfied: opentelemetry-instrumentation-dbapi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-psycopg2~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: pydantic-core==2.27.2 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (2.27.2)", "Requirement already satisfied: annotated-types>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (0.7.0)", "Requirement already satisfied: anyio<5,>=3.6.2 in /usr/local/lib/python3.10/dist-packages (from starlette<0.46.0,>=0.40.0->fastapi) (4.8.0)", "Requirement already satisfied: idna>=2.8 in /usr/lib/python3/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (3.3)", "Requirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.2.2)", "Requirement already satisfied: sniffio>=1.1 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.3.1)", "Requirement already satisfied: requests-oauthlib>=0.5.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2.0.0)", "Requirement already satisfied: isodate>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.2)", "Requirement already satisfied: certifi>=2017.4.17 in /usr/lib/python3/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2020.6.20)", "Requirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (3.4.1)", "Requirement already satisfied: urllib3<3,>=1.21.1 in /usr/lib/python3/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.26.5)", "Requirement already satisfied: zipp>=3.20 in /usr/local/lib/python3.10/dist-packages (from importlib-metadata<=8.5.0,>=6.0->opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (3.21.0)", "Requirement already satisfied: oauthlib>=3.0.0 in /usr/lib/python3/dist-packages (from requests-oauthlib>=0.5.0->msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (3.2.0)"], "version": null, "virtualenv": null}
2025-02-21 03:11:22,794 p=66481 u=snrj n=ansible INFO| TASK [flask_app : Set APPLICATION_INSIGHTS_CONNECTION_STRING in .bashrc] ************************************************************************************
2025-02-21 03:11:22,794 p=66481 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:25
2025-02-21 03:11:23,158 p=66481 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"backup": "", "changed": false, "msg": ""}
2025-02-21 03:11:23,170 p=66481 u=snrj n=ansible INFO| TASK [flask_app : Copy the sample FastAPI application] ******************************************************************************************************
2025-02-21 03:11:23,170 p=66481 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:35
2025-02-21 03:11:24,411 p=66481 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "checksum": "a799cc89edd839d4017e683dd6f1bad7612f0e59", "dest": "/home/azureadmin/http_fastapi.py", "gid": 1000, "group": "azureadmin", "mode": "0644", "owner": "azureadmin", "path": "/home/azureadmin/http_fastapi.py", "size": 1240, "state": "file", "uid": 1000}
2025-02-21 03:11:24,423 p=66481 u=snrj n=ansible INFO| TASK [flask_app : Start FastAPI application with uvicorn] ***************************************************************************************************
2025-02-21 03:11:24,423 p=66481 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:40
2025-02-21 03:13:33,191 p=66820 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 03:13:33,326 p=66820 u=snrj n=ansible INFO| ansible-playbook [core 2.18.2]
  config file = /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg
  configured module search path = ['/Users/snrj/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /opt/homebrew/Cellar/ansible/11.2.0/libexec/lib/python3.13/site-packages/ansible
  ansible collection location = /Users/snrj/Desktop/terraform-azure-demo/configure_vm/collections
  executable location = /opt/homebrew/bin/ansible-playbook
  python version = 3.13.2 (main, Feb  4 2025, 14:51:09) [Clang 16.0.0 (clang-1600.0.26.6)] (/opt/homebrew/Cellar/ansible/11.2.0/libexec/bin/python)
  jinja version = 3.1.5
  libyaml = True
2025-02-21 03:13:33,326 p=66820 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-21 03:13:33,608 p=66820 u=snrj n=ansible INFO| Skipping callback 'default', as we already have a stdout callback.
2025-02-21 03:13:33,608 p=66820 u=snrj n=ansible INFO| Skipping callback 'minimal', as we already have a stdout callback.
2025-02-21 03:13:33,608 p=66820 u=snrj n=ansible INFO| Skipping callback 'oneline', as we already have a stdout callback.
2025-02-21 03:13:33,608 p=66820 u=snrj n=ansible INFO| PLAYBOOK: flask_app.yml *************************************************************************************************************************************
2025-02-21 03:13:33,608 p=66820 u=snrj n=ansible INFO| 1 plays in playbooks/flask_app.yml
2025-02-21 03:13:33,610 p=66820 u=snrj n=ansible INFO| PLAY [Setup Flask App with OpenTelemetry] *******************************************************************************************************************
2025-02-21 03:13:33,619 p=66820 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 03:13:33,619 p=66820 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/playbooks/flask_app.yml:2
2025-02-21 03:13:35,033 p=66820 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 40.68.93.141 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-21 03:13:35,034 p=66820 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 03:13:35,040 p=66820 u=snrj n=ansible INFO| TASK [flask_app : Update apt package index] *****************************************************************************************************************
2025-02-21 03:13:35,040 p=66820 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:3
2025-02-21 03:13:37,460 p=66820 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"cache_update_time": 1740104016, "cache_updated": true, "changed": true}
2025-02-21 03:13:37,469 p=66820 u=snrj n=ansible INFO| TASK [flask_app : Ensure the 'universe' repository is enabled] **********************************************************************************************
2025-02-21 03:13:37,469 p=66820 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:7
2025-02-21 03:13:38,047 p=66820 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "repo": "deb http://archive.ubuntu.com/ubuntu/ jammy universe", "sources_added": [], "sources_removed": [], "state": "present"}
2025-02-21 03:13:38,056 p=66820 u=snrj n=ansible INFO| TASK [flask_app : Install python3-pip] **********************************************************************************************************************
2025-02-21 03:13:38,057 p=66820 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:12
2025-02-21 03:13:39,174 p=66820 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"cache_update_time": 1740104016, "cache_updated": false, "changed": false}
2025-02-21 03:13:39,188 p=66820 u=snrj n=ansible INFO| TASK [flask_app : Install required Python packages] *********************************************************************************************************
2025-02-21 03:13:39,188 p=66820 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:17
2025-02-21 03:13:41,019 p=66820 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "cmd": ["/usr/bin/python3.10", "-m", "pip.__main__", "install", "fastapi", "uvicorn", "azure-monitor-opentelemetry"], "name": ["fastapi", "uvicorn", "azure-monitor-opentelemetry"], "requirements": null, "state": "present", "stderr": "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n", "stderr_lines": ["WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv"], "stdout": "Requirement already satisfied: fastapi in /usr/local/lib/python3.10/dist-packages (0.115.8)\nRequirement already satisfied: uvicorn in /usr/local/lib/python3.10/dist-packages (0.34.0)\nRequirement already satisfied: azure-monitor-opentelemetry in /usr/local/lib/python3.10/dist-packages (1.6.5)\nRequirement already satisfied: pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4 in /usr/local/lib/python3.10/dist-packages (from fastapi) (2.10.6)\nRequirement already satisfied: starlette<0.46.0,>=0.40.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (0.45.3)\nRequirement already satisfied: typing-extensions>=4.8.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (4.12.2)\nRequirement already satisfied: h11>=0.8 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (0.14.0)\nRequirement already satisfied: click>=7.0 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (8.1.8)\nRequirement already satisfied: azure-core<2.0.0,>=1.28.0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.32.0)\nRequirement already satisfied: azure-monitor-opentelemetry-exporter~=1.0.0b31 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b33)\nRequirement already satisfied: opentelemetry-instrumentation-psycopg2~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-sdk~=1.28 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.30.0)\nRequirement already satisfied: azure-core-tracing-opentelemetry~=1.0.0b11 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b11)\nRequirement already satisfied: opentelemetry-instrumentation-django~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-fastapi~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-urllib~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-flask~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-requests~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-resource-detector-azure~=0.1.4 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.1.5)\nRequirement already satisfied: opentelemetry-instrumentation-urllib3~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: six>=1.11.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.16.0)\nRequirement already satisfied: requests>=2.21.0 in /usr/local/lib/python3.10/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (2.32.3)\nRequirement already satisfied: opentelemetry-api<2.0.0,>=1.12.0 in /usr/local/lib/python3.10/dist-packages (from azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (1.30.0)\nRequirement already satisfied: psutil~=5.9 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (5.9.8)\nRequirement already satisfied: msrest>=0.6.10 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.1)\nRequirement already satisfied: fixedint==0.1.6 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.1.6)\nRequirement already satisfied: opentelemetry-semantic-conventions==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-util-http==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-wsgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: packaging>=18.0 in /usr/lib/python3/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (21.3)\nRequirement already satisfied: wrapt<2.0.0,>=1.0.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.17.2)\nRequirement already satisfied: deprecated>=1.2.6 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-semantic-conventions==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.2.18)\nRequirement already satisfied: importlib-metadata<=8.5.0,>=6.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (8.5.0)\nRequirement already satisfied: opentelemetry-instrumentation-asgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: asgiref~=3.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-asgi==0.51b0->opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (3.8.1)\nRequirement already satisfied: opentelemetry-instrumentation-dbapi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-psycopg2~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: pydantic-core==2.27.2 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (2.27.2)\nRequirement already satisfied: annotated-types>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (0.7.0)\nRequirement already satisfied: anyio<5,>=3.6.2 in /usr/local/lib/python3.10/dist-packages (from starlette<0.46.0,>=0.40.0->fastapi) (4.8.0)\nRequirement already satisfied: sniffio>=1.1 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.3.1)\nRequirement already satisfied: idna>=2.8 in /usr/lib/python3/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (3.3)\nRequirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.2.2)\nRequirement already satisfied: requests-oauthlib>=0.5.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2.0.0)\nRequirement already satisfied: certifi>=2017.4.17 in /usr/lib/python3/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2020.6.20)\nRequirement already satisfied: isodate>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.2)\nRequirement already satisfied: urllib3<3,>=1.21.1 in /usr/lib/python3/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.26.5)\nRequirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (3.4.1)\nRequirement already satisfied: zipp>=3.20 in /usr/local/lib/python3.10/dist-packages (from importlib-metadata<=8.5.0,>=6.0->opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (3.21.0)\nRequirement already satisfied: oauthlib>=3.0.0 in /usr/lib/python3/dist-packages (from requests-oauthlib>=0.5.0->msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (3.2.0)\n", "stdout_lines": ["Requirement already satisfied: fastapi in /usr/local/lib/python3.10/dist-packages (0.115.8)", "Requirement already satisfied: uvicorn in /usr/local/lib/python3.10/dist-packages (0.34.0)", "Requirement already satisfied: azure-monitor-opentelemetry in /usr/local/lib/python3.10/dist-packages (1.6.5)", "Requirement already satisfied: pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4 in /usr/local/lib/python3.10/dist-packages (from fastapi) (2.10.6)", "Requirement already satisfied: starlette<0.46.0,>=0.40.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (0.45.3)", "Requirement already satisfied: typing-extensions>=4.8.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (4.12.2)", "Requirement already satisfied: h11>=0.8 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (0.14.0)", "Requirement already satisfied: click>=7.0 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (8.1.8)", "Requirement already satisfied: azure-core<2.0.0,>=1.28.0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.32.0)", "Requirement already satisfied: azure-monitor-opentelemetry-exporter~=1.0.0b31 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b33)", "Requirement already satisfied: opentelemetry-instrumentation-psycopg2~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-sdk~=1.28 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.30.0)", "Requirement already satisfied: azure-core-tracing-opentelemetry~=1.0.0b11 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b11)", "Requirement already satisfied: opentelemetry-instrumentation-django~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-fastapi~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-urllib~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-flask~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-requests~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-resource-detector-azure~=0.1.4 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.1.5)", "Requirement already satisfied: opentelemetry-instrumentation-urllib3~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: six>=1.11.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.16.0)", "Requirement already satisfied: requests>=2.21.0 in /usr/local/lib/python3.10/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (2.32.3)", "Requirement already satisfied: opentelemetry-api<2.0.0,>=1.12.0 in /usr/local/lib/python3.10/dist-packages (from azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (1.30.0)", "Requirement already satisfied: psutil~=5.9 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (5.9.8)", "Requirement already satisfied: msrest>=0.6.10 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.1)", "Requirement already satisfied: fixedint==0.1.6 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.1.6)", "Requirement already satisfied: opentelemetry-semantic-conventions==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-util-http==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-wsgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: packaging>=18.0 in /usr/lib/python3/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (21.3)", "Requirement already satisfied: wrapt<2.0.0,>=1.0.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.17.2)", "Requirement already satisfied: deprecated>=1.2.6 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-semantic-conventions==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.2.18)", "Requirement already satisfied: importlib-metadata<=8.5.0,>=6.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (8.5.0)", "Requirement already satisfied: opentelemetry-instrumentation-asgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: asgiref~=3.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-asgi==0.51b0->opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (3.8.1)", "Requirement already satisfied: opentelemetry-instrumentation-dbapi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-psycopg2~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: pydantic-core==2.27.2 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (2.27.2)", "Requirement already satisfied: annotated-types>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (0.7.0)", "Requirement already satisfied: anyio<5,>=3.6.2 in /usr/local/lib/python3.10/dist-packages (from starlette<0.46.0,>=0.40.0->fastapi) (4.8.0)", "Requirement already satisfied: sniffio>=1.1 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.3.1)", "Requirement already satisfied: idna>=2.8 in /usr/lib/python3/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (3.3)", "Requirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.2.2)", "Requirement already satisfied: requests-oauthlib>=0.5.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2.0.0)", "Requirement already satisfied: certifi>=2017.4.17 in /usr/lib/python3/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2020.6.20)", "Requirement already satisfied: isodate>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.2)", "Requirement already satisfied: urllib3<3,>=1.21.1 in /usr/lib/python3/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.26.5)", "Requirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (3.4.1)", "Requirement already satisfied: zipp>=3.20 in /usr/local/lib/python3.10/dist-packages (from importlib-metadata<=8.5.0,>=6.0->opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (3.21.0)", "Requirement already satisfied: oauthlib>=3.0.0 in /usr/lib/python3/dist-packages (from requests-oauthlib>=0.5.0->msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (3.2.0)"], "version": null, "virtualenv": null}
2025-02-21 03:13:41,028 p=66820 u=snrj n=ansible INFO| TASK [flask_app : Set APPLICATION_INSIGHTS_CONNECTION_STRING in .bashrc] ************************************************************************************
2025-02-21 03:13:41,029 p=66820 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:25
2025-02-21 03:13:41,501 p=66820 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"backup": "", "changed": false, "msg": ""}
2025-02-21 03:13:41,513 p=66820 u=snrj n=ansible INFO| TASK [flask_app : Copy the sample FastAPI application] ******************************************************************************************************
2025-02-21 03:13:41,513 p=66820 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:35
2025-02-21 03:13:42,513 p=66820 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "checksum": "a799cc89edd839d4017e683dd6f1bad7612f0e59", "dest": "/home/azureadmin/http_fastapi.py", "gid": 1000, "group": "azureadmin", "mode": "0644", "owner": "azureadmin", "path": "/home/azureadmin/http_fastapi.py", "size": 1240, "state": "file", "uid": 1000}
2025-02-21 03:13:42,523 p=66820 u=snrj n=ansible INFO| TASK [flask_app : Create FastAPI service] *******************************************************************************************************************
2025-02-21 03:13:42,523 p=66820 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:48
2025-02-21 03:13:43,856 p=66820 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"changed": true, "checksum": "eb5dfed5194e924844812030fc04fc288b50bdb8", "dest": "/etc/systemd/system/fastapi.service", "gid": 0, "group": "root", "md5sum": "c256fc46fb0aa660a02980a47d6a41ed", "mode": "0644", "owner": "root", "size": 256, "src": "/home/azureadmin/.ansible/tmp/ansible-tmp-1740104022.606368-66857-147904758379883/.source.service", "state": "file", "uid": 0}
2025-02-21 03:13:43,865 p=66820 u=snrj n=ansible INFO| TASK [flask_app : Enable and start FastAPI service] *********************************************************************************************************
2025-02-21 03:13:43,865 p=66820 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:65
2025-02-21 03:13:45,116 p=66820 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"changed": true, "enabled": true, "name": "fastapi", "state": "started", "status": {"ActiveEnterTimestamp": "n/a", "ActiveEnterTimestampMonotonic": "0", "ActiveExitTimestamp": "n/a", "ActiveExitTimestampMonotonic": "0", "ActiveState": "inactive", "After": "network.target systemd-journald.socket sysinit.target system.slice basic.target -.mount", "AllowIsolate": "no", "AssertResult": "no", "AssertTimestamp": "n/a", "AssertTimestampMonotonic": "0", "Before": "shutdown.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "[not set]", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "no", "ConditionTimestamp": "n/a", "ConditionTimestampMonotonic": "0", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "FastAPI Service", "DevicePolicy": "auto", "DynamicUser": "no", "ExecMainCode": "0", "ExecMainExitTimestamp": "n/a", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "0", "ExecMainStartTimestamp": "n/a", "ExecMainStartTimestampMonotonic": "0", "ExecMainStatus": "0", "ExecStart": "{ path=/usr/local/bin/uvicorn ; argv[]=/usr/local/bin/uvicorn http_fastapi:app --host 0.0.0.0 --port 8008 --reload ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/local/bin/uvicorn ; argv[]=/usr/local/bin/uvicorn http_fastapi:app --host 0.0.0.0 --port 8008 --reload ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/etc/systemd/system/fastapi.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "fastapi.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "n/a", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "n/a", "InactiveExitTimestampMonotonic": "0", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "13611", "LimitNPROCSoft": "13611", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "13611", "LimitSIGPENDINGSoft": "13611", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "0", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "[not set]", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "fastapi.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "-.mount system.slice sysinit.target", "RequiresMountsFor": "/home/azureadmin", "Restart": "always", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "n/a", "StateChangeTimestampMonotonic": "0", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "dead", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "[not set]", "TasksMax": "4083", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "disabled", "User": "azureadmin", "UtmpMode": "init", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "infinity", "WorkingDirectory": "/home/azureadmin"}}
2025-02-21 03:13:45,126 p=66820 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 03:13:45,126 p=66820 u=snrj n=ansible INFO| 40.68.93.141               : ok=9    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-21 03:16:29,834 p=67137 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 03:16:29,981 p=67137 u=snrj n=ansible INFO| ansible-playbook [core 2.18.2]
  config file = /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg
  configured module search path = ['/Users/snrj/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /opt/homebrew/Cellar/ansible/11.2.0/libexec/lib/python3.13/site-packages/ansible
  ansible collection location = /Users/snrj/Desktop/terraform-azure-demo/configure_vm/collections
  executable location = /opt/homebrew/bin/ansible-playbook
  python version = 3.13.2 (main, Feb  4 2025, 14:51:09) [Clang 16.0.0 (clang-1600.0.26.6)] (/opt/homebrew/Cellar/ansible/11.2.0/libexec/bin/python)
  jinja version = 3.1.5
  libyaml = True
2025-02-21 03:16:29,981 p=67137 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-21 03:16:30,273 p=67137 u=snrj n=ansible INFO| Skipping callback 'default', as we already have a stdout callback.
2025-02-21 03:16:30,273 p=67137 u=snrj n=ansible INFO| Skipping callback 'minimal', as we already have a stdout callback.
2025-02-21 03:16:30,273 p=67137 u=snrj n=ansible INFO| Skipping callback 'oneline', as we already have a stdout callback.
2025-02-21 03:16:30,274 p=67137 u=snrj n=ansible INFO| PLAYBOOK: flask_app.yml *************************************************************************************************************************************
2025-02-21 03:16:30,274 p=67137 u=snrj n=ansible INFO| 1 plays in playbooks/flask_app.yml
2025-02-21 03:16:30,275 p=67137 u=snrj n=ansible INFO| PLAY [Setup Flask App with OpenTelemetry] *******************************************************************************************************************
2025-02-21 03:16:30,285 p=67137 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 03:16:30,285 p=67137 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/playbooks/flask_app.yml:2
2025-02-21 03:16:35,979 p=67137 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 40.68.93.141 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-21 03:16:35,979 p=67137 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 03:16:35,984 p=67137 u=snrj n=ansible INFO| TASK [flask_app : Update apt package index] *****************************************************************************************************************
2025-02-21 03:16:35,985 p=67137 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:3
2025-02-21 03:16:40,095 p=67137 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"cache_update_time": 1740104198, "cache_updated": true, "changed": true}
2025-02-21 03:16:40,105 p=67137 u=snrj n=ansible INFO| TASK [flask_app : Ensure the 'universe' repository is enabled] **********************************************************************************************
2025-02-21 03:16:40,105 p=67137 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:7
2025-02-21 03:16:41,064 p=67137 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "repo": "deb http://archive.ubuntu.com/ubuntu/ jammy universe", "sources_added": [], "sources_removed": [], "state": "present"}
2025-02-21 03:16:41,074 p=67137 u=snrj n=ansible INFO| TASK [flask_app : Install python3-pip] **********************************************************************************************************************
2025-02-21 03:16:41,075 p=67137 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:12
2025-02-21 03:16:43,340 p=67137 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"cache_update_time": 1740104198, "cache_updated": false, "changed": false}
2025-02-21 03:16:43,357 p=67137 u=snrj n=ansible INFO| TASK [flask_app : Install required Python packages] *********************************************************************************************************
2025-02-21 03:16:43,357 p=67137 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:17
2025-02-21 03:16:47,109 p=67137 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "cmd": ["/usr/bin/python3.10", "-m", "pip.__main__", "install", "fastapi", "uvicorn", "azure-monitor-opentelemetry"], "name": ["fastapi", "uvicorn", "azure-monitor-opentelemetry"], "requirements": null, "state": "present", "stderr": "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n", "stderr_lines": ["WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv"], "stdout": "Requirement already satisfied: fastapi in /usr/local/lib/python3.10/dist-packages (0.115.8)\nRequirement already satisfied: uvicorn in /usr/local/lib/python3.10/dist-packages (0.34.0)\nRequirement already satisfied: azure-monitor-opentelemetry in /usr/local/lib/python3.10/dist-packages (1.6.5)\nRequirement already satisfied: typing-extensions>=4.8.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (4.12.2)\nRequirement already satisfied: pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4 in /usr/local/lib/python3.10/dist-packages (from fastapi) (2.10.6)\nRequirement already satisfied: starlette<0.46.0,>=0.40.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (0.45.3)\nRequirement already satisfied: click>=7.0 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (8.1.8)\nRequirement already satisfied: h11>=0.8 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (0.14.0)\nRequirement already satisfied: opentelemetry-instrumentation-psycopg2~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: azure-core-tracing-opentelemetry~=1.0.0b11 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b11)\nRequirement already satisfied: opentelemetry-instrumentation-fastapi~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: azure-core<2.0.0,>=1.28.0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.32.0)\nRequirement already satisfied: opentelemetry-resource-detector-azure~=0.1.4 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.1.5)\nRequirement already satisfied: opentelemetry-instrumentation-urllib3~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-sdk~=1.28 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.30.0)\nRequirement already satisfied: azure-monitor-opentelemetry-exporter~=1.0.0b31 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b33)\nRequirement already satisfied: opentelemetry-instrumentation-urllib~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-django~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-flask~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-requests~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: six>=1.11.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.16.0)\nRequirement already satisfied: requests>=2.21.0 in /usr/local/lib/python3.10/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (2.32.3)\nRequirement already satisfied: opentelemetry-api<2.0.0,>=1.12.0 in /usr/local/lib/python3.10/dist-packages (from azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (1.30.0)\nRequirement already satisfied: psutil~=5.9 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (5.9.8)\nRequirement already satisfied: fixedint==0.1.6 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.1.6)\nRequirement already satisfied: msrest>=0.6.10 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.1)\nRequirement already satisfied: opentelemetry-instrumentation==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-semantic-conventions==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-wsgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-util-http==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: wrapt<2.0.0,>=1.0.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.17.2)\nRequirement already satisfied: packaging>=18.0 in /usr/lib/python3/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (21.3)\nRequirement already satisfied: deprecated>=1.2.6 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-semantic-conventions==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.2.18)\nRequirement already satisfied: importlib-metadata<=8.5.0,>=6.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (8.5.0)\nRequirement already satisfied: opentelemetry-instrumentation-asgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: asgiref~=3.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-asgi==0.51b0->opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (3.8.1)\nRequirement already satisfied: opentelemetry-instrumentation-dbapi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-psycopg2~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: annotated-types>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (0.7.0)\nRequirement already satisfied: pydantic-core==2.27.2 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (2.27.2)\nRequirement already satisfied: anyio<5,>=3.6.2 in /usr/local/lib/python3.10/dist-packages (from starlette<0.46.0,>=0.40.0->fastapi) (4.8.0)\nRequirement already satisfied: sniffio>=1.1 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.3.1)\nRequirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.2.2)\nRequirement already satisfied: idna>=2.8 in /usr/lib/python3/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (3.3)\nRequirement already satisfied: certifi>=2017.4.17 in /usr/lib/python3/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2020.6.20)\nRequirement already satisfied: requests-oauthlib>=0.5.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2.0.0)\nRequirement already satisfied: isodate>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.2)\nRequirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (3.4.1)\nRequirement already satisfied: urllib3<3,>=1.21.1 in /usr/lib/python3/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.26.5)\nRequirement already satisfied: zipp>=3.20 in /usr/local/lib/python3.10/dist-packages (from importlib-metadata<=8.5.0,>=6.0->opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (3.21.0)\nRequirement already satisfied: oauthlib>=3.0.0 in /usr/lib/python3/dist-packages (from requests-oauthlib>=0.5.0->msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (3.2.0)\n", "stdout_lines": ["Requirement already satisfied: fastapi in /usr/local/lib/python3.10/dist-packages (0.115.8)", "Requirement already satisfied: uvicorn in /usr/local/lib/python3.10/dist-packages (0.34.0)", "Requirement already satisfied: azure-monitor-opentelemetry in /usr/local/lib/python3.10/dist-packages (1.6.5)", "Requirement already satisfied: typing-extensions>=4.8.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (4.12.2)", "Requirement already satisfied: pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4 in /usr/local/lib/python3.10/dist-packages (from fastapi) (2.10.6)", "Requirement already satisfied: starlette<0.46.0,>=0.40.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (0.45.3)", "Requirement already satisfied: click>=7.0 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (8.1.8)", "Requirement already satisfied: h11>=0.8 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (0.14.0)", "Requirement already satisfied: opentelemetry-instrumentation-psycopg2~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: azure-core-tracing-opentelemetry~=1.0.0b11 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b11)", "Requirement already satisfied: opentelemetry-instrumentation-fastapi~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: azure-core<2.0.0,>=1.28.0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.32.0)", "Requirement already satisfied: opentelemetry-resource-detector-azure~=0.1.4 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.1.5)", "Requirement already satisfied: opentelemetry-instrumentation-urllib3~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-sdk~=1.28 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.30.0)", "Requirement already satisfied: azure-monitor-opentelemetry-exporter~=1.0.0b31 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b33)", "Requirement already satisfied: opentelemetry-instrumentation-urllib~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-django~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-flask~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-requests~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: six>=1.11.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.16.0)", "Requirement already satisfied: requests>=2.21.0 in /usr/local/lib/python3.10/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (2.32.3)", "Requirement already satisfied: opentelemetry-api<2.0.0,>=1.12.0 in /usr/local/lib/python3.10/dist-packages (from azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (1.30.0)", "Requirement already satisfied: psutil~=5.9 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (5.9.8)", "Requirement already satisfied: fixedint==0.1.6 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.1.6)", "Requirement already satisfied: msrest>=0.6.10 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.1)", "Requirement already satisfied: opentelemetry-instrumentation==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-semantic-conventions==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-wsgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-util-http==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: wrapt<2.0.0,>=1.0.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.17.2)", "Requirement already satisfied: packaging>=18.0 in /usr/lib/python3/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (21.3)", "Requirement already satisfied: deprecated>=1.2.6 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-semantic-conventions==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.2.18)", "Requirement already satisfied: importlib-metadata<=8.5.0,>=6.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (8.5.0)", "Requirement already satisfied: opentelemetry-instrumentation-asgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: asgiref~=3.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-asgi==0.51b0->opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (3.8.1)", "Requirement already satisfied: opentelemetry-instrumentation-dbapi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-psycopg2~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: annotated-types>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (0.7.0)", "Requirement already satisfied: pydantic-core==2.27.2 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (2.27.2)", "Requirement already satisfied: anyio<5,>=3.6.2 in /usr/local/lib/python3.10/dist-packages (from starlette<0.46.0,>=0.40.0->fastapi) (4.8.0)", "Requirement already satisfied: sniffio>=1.1 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.3.1)", "Requirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.2.2)", "Requirement already satisfied: idna>=2.8 in /usr/lib/python3/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (3.3)", "Requirement already satisfied: certifi>=2017.4.17 in /usr/lib/python3/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2020.6.20)", "Requirement already satisfied: requests-oauthlib>=0.5.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2.0.0)", "Requirement already satisfied: isodate>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.2)", "Requirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (3.4.1)", "Requirement already satisfied: urllib3<3,>=1.21.1 in /usr/lib/python3/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.26.5)", "Requirement already satisfied: zipp>=3.20 in /usr/local/lib/python3.10/dist-packages (from importlib-metadata<=8.5.0,>=6.0->opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (3.21.0)", "Requirement already satisfied: oauthlib>=3.0.0 in /usr/lib/python3/dist-packages (from requests-oauthlib>=0.5.0->msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (3.2.0)"], "version": null, "virtualenv": null}
2025-02-21 03:16:47,123 p=67137 u=snrj n=ansible INFO| TASK [flask_app : Set APPLICATION_INSIGHTS_CONNECTION_STRING in .bashrc] ************************************************************************************
2025-02-21 03:16:47,123 p=67137 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:25
2025-02-21 03:16:47,695 p=67137 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"backup": "", "changed": false, "msg": ""}
2025-02-21 03:16:47,710 p=67137 u=snrj n=ansible INFO| TASK [flask_app : Copy the sample FastAPI application] ******************************************************************************************************
2025-02-21 03:16:47,710 p=67137 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:35
2025-02-21 03:16:49,126 p=67137 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "checksum": "a799cc89edd839d4017e683dd6f1bad7612f0e59", "dest": "/home/azureadmin/http_fastapi.py", "gid": 1000, "group": "azureadmin", "mode": "0644", "owner": "azureadmin", "path": "/home/azureadmin/http_fastapi.py", "size": 1240, "state": "file", "uid": 1000}
2025-02-21 03:16:49,142 p=67137 u=snrj n=ansible INFO| TASK [flask_app : Create FastAPI service] *******************************************************************************************************************
2025-02-21 03:16:49,142 p=67137 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:48
2025-02-21 03:16:51,056 p=67137 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"changed": true, "checksum": "dc1caf88702db15a980beb3885ec3c30105eb3a8", "dest": "/etc/systemd/system/fastapi.service", "gid": 0, "group": "root", "md5sum": "c4566588330fd1d1cb1ca6224d5bc1f3", "mode": "0644", "owner": "root", "size": 309, "src": "/home/azureadmin/.ansible/tmp/ansible-tmp-1740104209.233921-67189-262777176832774/.source.service", "state": "file", "uid": 0}
2025-02-21 03:16:51,065 p=67137 u=snrj n=ansible INFO| TASK [flask_app : Enable and start FastAPI service] *********************************************************************************************************
2025-02-21 03:16:51,065 p=67137 u=snrj n=ansible INFO| task path: /Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask_app/tasks/main.yml:66
2025-02-21 03:16:52,409 p=67137 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "enabled": true, "name": "fastapi", "state": "started", "status": {"ActiveEnterTimestamp": "Fri 2025-02-21 02:13:44 UTC", "ActiveEnterTimestampMonotonic": "13922526124", "ActiveExitTimestamp": "n/a", "ActiveExitTimestampMonotonic": "0", "ActiveState": "active", "After": "sysinit.target systemd-journald.socket network.target basic.target system.slice -.mount", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-21 02:13:44 UTC", "AssertTimestampMonotonic": "13922521329", "Before": "shutdown.target multi-user.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "167454354000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-21 02:13:44 UTC", "ConditionTimestampMonotonic": "13922521327", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/fastapi.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "FastAPI Service", "DevicePolicy": "auto", "DynamicUser": "no", "EffectiveCPUs": "0", "EffectiveMemoryNodes": "0", "ExecMainCode": "0", "ExecMainExitTimestamp": "n/a", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "21799", "ExecMainStartTimestamp": "Fri 2025-02-21 02:13:44 UTC", "ExecMainStartTimestampMonotonic": "13922525243", "ExecMainStatus": "0", "ExecStart": "{ path=/usr/local/bin/uvicorn ; argv[]=/usr/local/bin/uvicorn http_fastapi:app --host 0.0.0.0 --port 8008 --reload ; ignore_errors=no ; start_time=[Fri 2025-02-21 02:13:44 UTC] ; stop_time=[n/a] ; pid=21799 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/local/bin/uvicorn ; argv[]=/usr/local/bin/uvicorn http_fastapi:app --host 0.0.0.0 --port 8008 --reload ; flags= ; start_time=[Fri 2025-02-21 02:13:44 UTC] ; stop_time=[n/a] ; pid=21799 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/etc/systemd/system/fastapi.service", "FreezerState": "running", "GID": "1000", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "fastapi.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "n/a", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "Fri 2025-02-21 02:13:44 UTC", "InactiveExitTimestampMonotonic": "13922526124", "InvocationID": "079691d7c6e543259aefbcee316e89d0", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "13611", "LimitNPROCSoft": "13611", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "13611", "LimitSIGPENDINGSoft": "13611", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "21799", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "83673088", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "fastapi.service", "NeedDaemonReload": "yes", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "-.mount sysinit.target system.slice", "RequiresMountsFor": "/home/azureadmin", "Restart": "always", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Fri 2025-02-21 02:13:44 UTC", "StateChangeTimestampMonotonic": "13922526124", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "3", "TasksMax": "4083", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UID": "1000", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "azureadmin", "UtmpMode": "init", "WantedBy": "multi-user.target", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0", "WorkingDirectory": "/home/azureadmin"}}
2025-02-21 03:16:52,419 p=67137 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 03:16:52,419 p=67137 u=snrj n=ansible INFO| 40.68.93.141               : ok=9    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-21 03:18:19,787 p=67337 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 03:18:19,926 p=67337 u=snrj n=ansible INFO| Using /Users/snrj/Desktop/terraform-azure-demo/configure_vm/ansible.cfg as config file
2025-02-21 03:18:20,177 p=67337 u=snrj n=ansible INFO| PLAY [Setup Flask App with OpenTelemetry] *******************************************************************************************************************
2025-02-21 03:18:20,186 p=67337 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 03:18:25,139 p=67337 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 40.68.93.141 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-21 03:18:25,139 p=67337 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 03:18:25,145 p=67337 u=snrj n=ansible INFO| TASK [flask_app : Update apt package index] *****************************************************************************************************************
2025-02-21 03:18:29,224 p=67337 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"cache_update_time": 1740104307, "cache_updated": true, "changed": true}
2025-02-21 03:18:29,233 p=67337 u=snrj n=ansible INFO| TASK [flask_app : Ensure the 'universe' repository is enabled] **********************************************************************************************
2025-02-21 03:18:30,102 p=67337 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "repo": "deb http://archive.ubuntu.com/ubuntu/ jammy universe", "sources_added": [], "sources_removed": [], "state": "present"}
2025-02-21 03:18:30,112 p=67337 u=snrj n=ansible INFO| TASK [flask_app : Install python3-pip] **********************************************************************************************************************
2025-02-21 03:18:32,447 p=67337 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"cache_update_time": 1740104307, "cache_updated": false, "changed": false}
2025-02-21 03:18:32,461 p=67337 u=snrj n=ansible INFO| TASK [flask_app : Install required Python packages] *********************************************************************************************************
2025-02-21 03:18:36,126 p=67337 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "cmd": ["/usr/bin/python3.10", "-m", "pip.__main__", "install", "fastapi", "uvicorn", "azure-monitor-opentelemetry"], "name": ["fastapi", "uvicorn", "azure-monitor-opentelemetry"], "requirements": null, "state": "present", "stderr": "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n", "stderr_lines": ["WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv"], "stdout": "Requirement already satisfied: fastapi in /usr/local/lib/python3.10/dist-packages (0.115.8)\nRequirement already satisfied: uvicorn in /usr/local/lib/python3.10/dist-packages (0.34.0)\nRequirement already satisfied: azure-monitor-opentelemetry in /usr/local/lib/python3.10/dist-packages (1.6.5)\nRequirement already satisfied: starlette<0.46.0,>=0.40.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (0.45.3)\nRequirement already satisfied: typing-extensions>=4.8.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (4.12.2)\nRequirement already satisfied: pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4 in /usr/local/lib/python3.10/dist-packages (from fastapi) (2.10.6)\nRequirement already satisfied: h11>=0.8 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (0.14.0)\nRequirement already satisfied: click>=7.0 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (8.1.8)\nRequirement already satisfied: azure-core-tracing-opentelemetry~=1.0.0b11 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b11)\nRequirement already satisfied: opentelemetry-instrumentation-flask~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-urllib~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-requests~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-resource-detector-azure~=0.1.4 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.1.5)\nRequirement already satisfied: opentelemetry-instrumentation-django~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-psycopg2~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: azure-monitor-opentelemetry-exporter~=1.0.0b31 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b33)\nRequirement already satisfied: opentelemetry-instrumentation-fastapi~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-urllib3~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-sdk~=1.28 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.30.0)\nRequirement already satisfied: azure-core<2.0.0,>=1.28.0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.32.0)\nRequirement already satisfied: six>=1.11.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.16.0)\nRequirement already satisfied: requests>=2.21.0 in /usr/local/lib/python3.10/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (2.32.3)\nRequirement already satisfied: opentelemetry-api<2.0.0,>=1.12.0 in /usr/local/lib/python3.10/dist-packages (from azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (1.30.0)\nRequirement already satisfied: psutil~=5.9 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (5.9.8)\nRequirement already satisfied: msrest>=0.6.10 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.1)\nRequirement already satisfied: fixedint==0.1.6 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.1.6)\nRequirement already satisfied: opentelemetry-semantic-conventions==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-util-http==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: opentelemetry-instrumentation-wsgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: packaging>=18.0 in /usr/lib/python3/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (21.3)\nRequirement already satisfied: wrapt<2.0.0,>=1.0.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.17.2)\nRequirement already satisfied: deprecated>=1.2.6 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-semantic-conventions==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.2.18)\nRequirement already satisfied: importlib-metadata<=8.5.0,>=6.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (8.5.0)\nRequirement already satisfied: opentelemetry-instrumentation-asgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: asgiref~=3.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-asgi==0.51b0->opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (3.8.1)\nRequirement already satisfied: opentelemetry-instrumentation-dbapi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-psycopg2~=0.49b0->azure-monitor-opentelemetry) (0.51b0)\nRequirement already satisfied: annotated-types>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (0.7.0)\nRequirement already satisfied: pydantic-core==2.27.2 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (2.27.2)\nRequirement already satisfied: anyio<5,>=3.6.2 in /usr/local/lib/python3.10/dist-packages (from starlette<0.46.0,>=0.40.0->fastapi) (4.8.0)\nRequirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.2.2)\nRequirement already satisfied: idna>=2.8 in /usr/lib/python3/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (3.3)\nRequirement already satisfied: sniffio>=1.1 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.3.1)\nRequirement already satisfied: certifi>=2017.4.17 in /usr/lib/python3/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2020.6.20)\nRequirement already satisfied: isodate>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.2)\nRequirement already satisfied: requests-oauthlib>=0.5.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2.0.0)\nRequirement already satisfied: urllib3<3,>=1.21.1 in /usr/lib/python3/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.26.5)\nRequirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (3.4.1)\nRequirement already satisfied: zipp>=3.20 in /usr/local/lib/python3.10/dist-packages (from importlib-metadata<=8.5.0,>=6.0->opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (3.21.0)\nRequirement already satisfied: oauthlib>=3.0.0 in /usr/lib/python3/dist-packages (from requests-oauthlib>=0.5.0->msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (3.2.0)\n", "stdout_lines": ["Requirement already satisfied: fastapi in /usr/local/lib/python3.10/dist-packages (0.115.8)", "Requirement already satisfied: uvicorn in /usr/local/lib/python3.10/dist-packages (0.34.0)", "Requirement already satisfied: azure-monitor-opentelemetry in /usr/local/lib/python3.10/dist-packages (1.6.5)", "Requirement already satisfied: starlette<0.46.0,>=0.40.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (0.45.3)", "Requirement already satisfied: typing-extensions>=4.8.0 in /usr/local/lib/python3.10/dist-packages (from fastapi) (4.12.2)", "Requirement already satisfied: pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4 in /usr/local/lib/python3.10/dist-packages (from fastapi) (2.10.6)", "Requirement already satisfied: h11>=0.8 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (0.14.0)", "Requirement already satisfied: click>=7.0 in /usr/local/lib/python3.10/dist-packages (from uvicorn) (8.1.8)", "Requirement already satisfied: azure-core-tracing-opentelemetry~=1.0.0b11 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b11)", "Requirement already satisfied: opentelemetry-instrumentation-flask~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-urllib~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-requests~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-resource-detector-azure~=0.1.4 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.1.5)", "Requirement already satisfied: opentelemetry-instrumentation-django~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-psycopg2~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: azure-monitor-opentelemetry-exporter~=1.0.0b31 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.0.0b33)", "Requirement already satisfied: opentelemetry-instrumentation-fastapi~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-urllib3~=0.49b0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-sdk~=1.28 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.30.0)", "Requirement already satisfied: azure-core<2.0.0,>=1.28.0 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry) (1.32.0)", "Requirement already satisfied: six>=1.11.0 in /usr/lib/python3/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.16.0)", "Requirement already satisfied: requests>=2.21.0 in /usr/local/lib/python3.10/dist-packages (from azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (2.32.3)", "Requirement already satisfied: opentelemetry-api<2.0.0,>=1.12.0 in /usr/local/lib/python3.10/dist-packages (from azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (1.30.0)", "Requirement already satisfied: psutil~=5.9 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (5.9.8)", "Requirement already satisfied: msrest>=0.6.10 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.1)", "Requirement already satisfied: fixedint==0.1.6 in /usr/local/lib/python3.10/dist-packages (from azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.1.6)", "Requirement already satisfied: opentelemetry-semantic-conventions==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-util-http==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: opentelemetry-instrumentation-wsgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: packaging>=18.0 in /usr/lib/python3/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (21.3)", "Requirement already satisfied: wrapt<2.0.0,>=1.0.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.17.2)", "Requirement already satisfied: deprecated>=1.2.6 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-semantic-conventions==0.51b0->opentelemetry-instrumentation-django~=0.49b0->azure-monitor-opentelemetry) (1.2.18)", "Requirement already satisfied: importlib-metadata<=8.5.0,>=6.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (8.5.0)", "Requirement already satisfied: opentelemetry-instrumentation-asgi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: asgiref~=3.0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-asgi==0.51b0->opentelemetry-instrumentation-fastapi~=0.49b0->azure-monitor-opentelemetry) (3.8.1)", "Requirement already satisfied: opentelemetry-instrumentation-dbapi==0.51b0 in /usr/local/lib/python3.10/dist-packages (from opentelemetry-instrumentation-psycopg2~=0.49b0->azure-monitor-opentelemetry) (0.51b0)", "Requirement already satisfied: annotated-types>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (0.7.0)", "Requirement already satisfied: pydantic-core==2.27.2 in /usr/local/lib/python3.10/dist-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (2.27.2)", "Requirement already satisfied: anyio<5,>=3.6.2 in /usr/local/lib/python3.10/dist-packages (from starlette<0.46.0,>=0.40.0->fastapi) (4.8.0)", "Requirement already satisfied: exceptiongroup>=1.0.2 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.2.2)", "Requirement already satisfied: idna>=2.8 in /usr/lib/python3/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (3.3)", "Requirement already satisfied: sniffio>=1.1 in /usr/local/lib/python3.10/dist-packages (from anyio<5,>=3.6.2->starlette<0.46.0,>=0.40.0->fastapi) (1.3.1)", "Requirement already satisfied: certifi>=2017.4.17 in /usr/lib/python3/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2020.6.20)", "Requirement already satisfied: isodate>=0.6.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (0.7.2)", "Requirement already satisfied: requests-oauthlib>=0.5.0 in /usr/local/lib/python3.10/dist-packages (from msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (2.0.0)", "Requirement already satisfied: urllib3<3,>=1.21.1 in /usr/lib/python3/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (1.26.5)", "Requirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests>=2.21.0->azure-core<2.0.0,>=1.28.0->azure-monitor-opentelemetry) (3.4.1)", "Requirement already satisfied: zipp>=3.20 in /usr/local/lib/python3.10/dist-packages (from importlib-metadata<=8.5.0,>=6.0->opentelemetry-api<2.0.0,>=1.12.0->azure-core-tracing-opentelemetry~=1.0.0b11->azure-monitor-opentelemetry) (3.21.0)", "Requirement already satisfied: oauthlib>=3.0.0 in /usr/lib/python3/dist-packages (from requests-oauthlib>=0.5.0->msrest>=0.6.10->azure-monitor-opentelemetry-exporter~=1.0.0b31->azure-monitor-opentelemetry) (3.2.0)"], "version": null, "virtualenv": null}
2025-02-21 03:18:36,136 p=67337 u=snrj n=ansible INFO| TASK [flask_app : Set APPLICATION_INSIGHTS_CONNECTION_STRING in .bashrc] ************************************************************************************
2025-02-21 03:18:36,752 p=67337 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"backup": "", "changed": false, "msg": ""}
2025-02-21 03:18:36,762 p=67337 u=snrj n=ansible INFO| TASK [flask_app : Copy the sample FastAPI application] ******************************************************************************************************
2025-02-21 03:18:38,086 p=67337 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "checksum": "a799cc89edd839d4017e683dd6f1bad7612f0e59", "dest": "/home/azureadmin/http_fastapi.py", "gid": 1000, "group": "azureadmin", "mode": "0644", "owner": "azureadmin", "path": "/home/azureadmin/http_fastapi.py", "size": 1240, "state": "file", "uid": 1000}
2025-02-21 03:18:38,097 p=67337 u=snrj n=ansible INFO| TASK [flask_app : Create FastAPI service] *******************************************************************************************************************
2025-02-21 03:18:39,957 p=67337 u=snrj n=ansible INFO| changed: [40.68.93.141] => {"changed": true, "checksum": "2e293647791a14ed3fa20794594a3aa3436aa9a8", "dest": "/etc/systemd/system/fastapi.service", "gid": 0, "group": "root", "md5sum": "35be53d7243bcbdaeeb9f8dfcf780d5e", "mode": "0644", "owner": "root", "size": 350, "src": "/home/azureadmin/.ansible/tmp/ansible-tmp-1740104318.206481-67389-51279124752979/.source.service", "state": "file", "uid": 0}
2025-02-21 03:18:39,966 p=67337 u=snrj n=ansible INFO| TASK [flask_app : Enable and start FastAPI service] *********************************************************************************************************
2025-02-21 03:18:41,054 p=67337 u=snrj n=ansible INFO| ok: [40.68.93.141] => {"changed": false, "enabled": true, "name": "fastapi", "state": "started", "status": {"ActiveEnterTimestamp": "Fri 2025-02-21 02:17:22 UTC", "ActiveEnterTimestampMonotonic": "14140502326", "ActiveExitTimestamp": "Fri 2025-02-21 02:17:21 UTC", "ActiveExitTimestampMonotonic": "14138670112", "ActiveState": "active", "After": "sysinit.target systemd-journald.socket network.target basic.target system.slice -.mount", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Fri 2025-02-21 02:17:22 UTC", "AssertTimestampMonotonic": "14140497078", "Before": "shutdown.target multi-user.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "65857511000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "no", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Fri 2025-02-21 02:17:22 UTC", "ConditionTimestampMonotonic": "14140497075", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/fastapi.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "no", "Description": "FastAPI Service", "DevicePolicy": "auto", "DynamicUser": "no", "EffectiveCPUs": "0", "EffectiveMemoryNodes": "0", "ExecMainCode": "0", "ExecMainExitTimestamp": "n/a", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "22426", "ExecMainStartTimestamp": "Fri 2025-02-21 02:17:22 UTC", "ExecMainStartTimestampMonotonic": "14140501323", "ExecMainStatus": "0", "ExecStart": "{ path=/usr/local/bin/uvicorn ; argv[]=/usr/local/bin/uvicorn http_fastapi:app --host 0.0.0.0 --port 8008 --reload ; ignore_errors=no ; start_time=[Fri 2025-02-21 02:17:22 UTC] ; stop_time=[n/a] ; pid=22426 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/local/bin/uvicorn ; argv[]=/usr/local/bin/uvicorn http_fastapi:app --host 0.0.0.0 --port 8008 --reload ; flags= ; start_time=[Fri 2025-02-21 02:17:22 UTC] ; stop_time=[n/a] ; pid=22426 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/etc/systemd/system/fastapi.service", "FreezerState": "running", "GID": "1000", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "fastapi.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Fri 2025-02-21 02:17:22 UTC", "InactiveEnterTimestampMonotonic": "14140495875", "InactiveExitTimestamp": "Fri 2025-02-21 02:17:22 UTC", "InactiveExitTimestampMonotonic": "14140502326", "InvocationID": "c88113e71e624a78af37f0eedc816dc4", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "0", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "8388608", "LimitMEMLOCKSoft": "8388608", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "524288", "LimitNOFILESoft": "1024", "LimitNPROC": "13611", "LimitNPROCSoft": "13611", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "13611", "LimitSIGPENDINGSoft": "13611", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "22426", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "83341312", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "fastapi.service", "NeedDaemonReload": "yes", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMPolicy": "stop", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "-.mount sysinit.target system.slice", "RequiresMountsFor": "/home/azureadmin", "Restart": "always", "RestartKillSignal": "15", "RestartUSec": "100ms", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitIntervalUSec": "10s", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Fri 2025-02-21 02:17:22 UTC", "StateChangeTimestampMonotonic": "14140502326", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "3", "TasksMax": "4083", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "1min 30s", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "simple", "UID": "1000", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "User": "azureadmin", "UtmpMode": "init", "WantedBy": "multi-user.target", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0", "WorkingDirectory": "/home/azureadmin"}}
2025-02-21 03:18:41,063 p=67337 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 03:18:41,064 p=67337 u=snrj n=ansible INFO| 40.68.93.141               : ok=9    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-21 03:25:06,713 p=68309 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 03:25:07,124 p=68309 u=snrj n=ansible INFO| PLAY [Setup Flask App with OpenTelemetry] *******************************************************************************************************************
2025-02-21 03:25:07,132 p=68309 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 03:25:10,957 p=68309 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 40.68.93.141 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-21 03:25:10,957 p=68309 u=snrj n=ansible INFO| ok: [40.68.93.141]
2025-02-21 03:25:10,963 p=68309 u=snrj n=ansible INFO| TASK [flask_app : Update apt package index] *****************************************************************************************************************
2025-02-21 03:25:33,240 p=68309 u=snrj n=ansible INFO| changed: [40.68.93.141]
2025-02-21 03:25:33,251 p=68309 u=snrj n=ansible INFO| TASK [flask_app : Ensure the 'universe' repository is enabled] **********************************************************************************************
2025-02-21 03:25:49,194 p=68309 u=snrj n=ansible INFO| changed: [40.68.93.141]
2025-02-21 03:25:49,205 p=68309 u=snrj n=ansible INFO| TASK [flask_app : Install python3-pip] **********************************************************************************************************************
2025-02-21 03:26:27,434 p=68309 u=snrj n=ansible INFO| changed: [40.68.93.141]
2025-02-21 03:26:27,441 p=68309 u=snrj n=ansible INFO| TASK [flask_app : Install required Python packages] *********************************************************************************************************
2025-02-21 03:26:39,208 p=68309 u=snrj n=ansible INFO| changed: [40.68.93.141]
2025-02-21 03:26:39,218 p=68309 u=snrj n=ansible INFO| TASK [flask_app : Set APPLICATION_INSIGHTS_CONNECTION_STRING in .bashrc] ************************************************************************************
2025-02-21 03:26:39,594 p=68309 u=snrj n=ansible WARNING| [WARNING]: Module remote_tmp /home/azureadmin/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues when running as another
user. To avoid this, create the remote_tmp dir with the correct permissions manually

2025-02-21 03:26:39,595 p=68309 u=snrj n=ansible INFO| changed: [40.68.93.141]
2025-02-21 03:26:39,606 p=68309 u=snrj n=ansible INFO| TASK [flask_app : Copy the sample FastAPI application] ******************************************************************************************************
2025-02-21 03:26:41,032 p=68309 u=snrj n=ansible INFO| changed: [40.68.93.141]
2025-02-21 03:26:41,044 p=68309 u=snrj n=ansible INFO| TASK [flask_app : Create FastAPI service] *******************************************************************************************************************
2025-02-21 03:26:42,356 p=68309 u=snrj n=ansible INFO| changed: [40.68.93.141]
2025-02-21 03:26:42,369 p=68309 u=snrj n=ansible INFO| TASK [flask_app : Reload systemd daemon] ********************************************************************************************************************
2025-02-21 03:26:43,262 p=68309 u=snrj n=ansible INFO| changed: [40.68.93.141]
2025-02-21 03:26:43,295 p=68309 u=snrj n=ansible INFO| TASK [flask_app : Restart FastAPI service] ******************************************************************************************************************
2025-02-21 03:26:44,172 p=68309 u=snrj n=ansible INFO| changed: [40.68.93.141]
2025-02-21 03:26:44,181 p=68309 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 03:26:44,181 p=68309 u=snrj n=ansible INFO| 40.68.93.141               : ok=10   changed=9    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-21 09:12:51,635 p=1898 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 09:12:55,366 p=1898 u=snrj n=ansible INFO| PLAY [Setup Flask App with OpenTelemetry] ********************************************************************************************************************
2025-02-21 09:12:55,435 p=1898 u=snrj n=ansible INFO| TASK [Gathering Facts] ***************************************************************************************************************************************
2025-02-21 09:12:59,609 p=1898 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 20.160.210.242 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-21 09:12:59,609 p=1898 u=snrj n=ansible INFO| ok: [20.160.210.242]
2025-02-21 09:12:59,616 p=1898 u=snrj n=ansible INFO| TASK [flask_app : Update apt package index] ******************************************************************************************************************
2025-02-21 09:13:23,789 p=1898 u=snrj n=ansible INFO| changed: [20.160.210.242]
2025-02-21 09:13:23,801 p=1898 u=snrj n=ansible INFO| TASK [flask_app : Ensure the 'universe' repository is enabled] ***********************************************************************************************
2025-02-21 09:13:39,584 p=1898 u=snrj n=ansible INFO| changed: [20.160.210.242]
2025-02-21 09:13:39,602 p=1898 u=snrj n=ansible INFO| TASK [flask_app : Install python3-pip] ***********************************************************************************************************************
2025-02-21 09:14:16,058 p=1898 u=snrj n=ansible INFO| changed: [20.160.210.242]
2025-02-21 09:14:16,067 p=1898 u=snrj n=ansible INFO| TASK [flask_app : Install required Python packages] **********************************************************************************************************
2025-02-21 09:14:27,240 p=1898 u=snrj n=ansible INFO| changed: [20.160.210.242]
2025-02-21 09:14:27,250 p=1898 u=snrj n=ansible INFO| TASK [flask_app : Set APPLICATION_INSIGHTS_CONNECTION_STRING in .bashrc] *************************************************************************************
2025-02-21 09:14:27,616 p=1898 u=snrj n=ansible WARNING| [WARNING]: Module remote_tmp /home/azureadmin/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues when running as another
user. To avoid this, create the remote_tmp dir with the correct permissions manually

2025-02-21 09:14:27,616 p=1898 u=snrj n=ansible INFO| changed: [20.160.210.242]
2025-02-21 09:14:27,643 p=1898 u=snrj n=ansible INFO| TASK [flask_app : Copy the sample FastAPI application] *******************************************************************************************************
2025-02-21 09:14:29,169 p=1898 u=snrj n=ansible INFO| changed: [20.160.210.242]
2025-02-21 09:14:29,180 p=1898 u=snrj n=ansible INFO| TASK [flask_app : Create FastAPI service] ********************************************************************************************************************
2025-02-21 09:14:30,483 p=1898 u=snrj n=ansible INFO| changed: [20.160.210.242]
2025-02-21 09:14:30,500 p=1898 u=snrj n=ansible INFO| TASK [flask_app : Reload systemd daemon] *********************************************************************************************************************
2025-02-21 09:14:31,315 p=1898 u=snrj n=ansible INFO| changed: [20.160.210.242]
2025-02-21 09:14:31,339 p=1898 u=snrj n=ansible INFO| TASK [flask_app : Restart FastAPI service] *******************************************************************************************************************
2025-02-21 09:14:32,117 p=1898 u=snrj n=ansible INFO| changed: [20.160.210.242]
2025-02-21 09:14:32,126 p=1898 u=snrj n=ansible INFO| PLAY RECAP ***************************************************************************************************************************************************
2025-02-21 09:14:32,126 p=1898 u=snrj n=ansible INFO| 20.160.210.242             : ok=10   changed=9    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-21 10:52:46,396 p=7279 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 10:52:49,842 p=7279 u=snrj n=ansible INFO| PLAY [Setup Flask App with OpenTelemetry] *******************************************************************************************************************
2025-02-21 10:52:49,921 p=7279 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 10:52:53,827 p=7279 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 13.81.114.214 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-21 10:52:53,827 p=7279 u=snrj n=ansible INFO| ok: [13.81.114.214]
2025-02-21 10:52:53,831 p=7279 u=snrj n=ansible INFO| TASK [flask_app : Update apt package index] *****************************************************************************************************************
2025-02-21 10:53:07,873 p=7279 u=snrj n=ansible INFO| changed: [13.81.114.214]
2025-02-21 10:53:07,887 p=7279 u=snrj n=ansible INFO| TASK [flask_app : Ensure the 'universe' repository is enabled] **********************************************************************************************
2025-02-21 10:53:22,471 p=7279 u=snrj n=ansible INFO| changed: [13.81.114.214]
2025-02-21 10:53:22,486 p=7279 u=snrj n=ansible INFO| TASK [flask_app : Install python3-pip] **********************************************************************************************************************
2025-02-21 10:54:01,574 p=7279 u=snrj n=ansible INFO| changed: [13.81.114.214]
2025-02-21 10:54:01,583 p=7279 u=snrj n=ansible INFO| TASK [flask_app : Install required Python packages] *********************************************************************************************************
2025-02-21 10:54:10,337 p=7279 u=snrj n=ansible INFO| changed: [13.81.114.214]
2025-02-21 10:54:10,350 p=7279 u=snrj n=ansible INFO| TASK [flask_app : Set APPLICATION_INSIGHTS_CONNECTION_STRING in .bashrc] ************************************************************************************
2025-02-21 10:54:10,674 p=7279 u=snrj n=ansible WARNING| [WARNING]: Module remote_tmp /home/azureadmin/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues when running as another
user. To avoid this, create the remote_tmp dir with the correct permissions manually

2025-02-21 10:54:10,675 p=7279 u=snrj n=ansible INFO| changed: [13.81.114.214]
2025-02-21 10:54:10,691 p=7279 u=snrj n=ansible INFO| TASK [flask_app : Copy the sample FastAPI application] ******************************************************************************************************
2025-02-21 10:54:12,016 p=7279 u=snrj n=ansible INFO| changed: [13.81.114.214]
2025-02-21 10:54:12,029 p=7279 u=snrj n=ansible INFO| TASK [flask_app : Create FastAPI service] *******************************************************************************************************************
2025-02-21 10:54:13,171 p=7279 u=snrj n=ansible INFO| changed: [13.81.114.214]
2025-02-21 10:54:13,195 p=7279 u=snrj n=ansible INFO| TASK [flask_app : Reload systemd daemon] ********************************************************************************************************************
2025-02-21 10:54:13,919 p=7279 u=snrj n=ansible INFO| changed: [13.81.114.214]
2025-02-21 10:54:13,944 p=7279 u=snrj n=ansible INFO| TASK [flask_app : Restart FastAPI service] ******************************************************************************************************************
2025-02-21 10:54:14,595 p=7279 u=snrj n=ansible INFO| changed: [13.81.114.214]
2025-02-21 10:54:14,605 p=7279 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 10:54:14,605 p=7279 u=snrj n=ansible INFO| 13.81.114.214              : ok=10   changed=9    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-21 11:05:02,120 p=8642 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 11:05:02,593 p=8642 u=snrj n=ansible INFO| PLAY [Setup Locust Traffic Generator] ***********************************************************************************************************************
2025-02-21 11:05:02,602 p=8642 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 11:05:04,727 p=8642 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 13.81.114.214 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-21 11:05:04,727 p=8642 u=snrj n=ansible INFO| ok: [13.81.114.214]
2025-02-21 11:05:04,732 p=8642 u=snrj n=ansible INFO| TASK [locust : Install pip] *********************************************************************************************************************************
2025-02-21 11:05:05,792 p=8642 u=snrj n=ansible INFO| ok: [13.81.114.214]
2025-02-21 11:05:05,800 p=8642 u=snrj n=ansible INFO| TASK [locust : Install locust using pip] ********************************************************************************************************************
2025-02-21 11:05:16,751 p=8642 u=snrj n=ansible INFO| changed: [13.81.114.214]
2025-02-21 11:05:16,759 p=8642 u=snrj n=ansible INFO| TASK [locust : Create locustfile directory] *****************************************************************************************************************
2025-02-21 11:05:17,238 p=8642 u=snrj n=ansible INFO| changed: [13.81.114.214]
2025-02-21 11:05:17,246 p=8642 u=snrj n=ansible INFO| TASK [locust : Copy locust files for traffic generation] ****************************************************************************************************
2025-02-21 11:05:19,442 p=8642 u=snrj n=ansible INFO| changed: [13.81.114.214]
2025-02-21 11:05:19,455 p=8642 u=snrj n=ansible INFO| TASK [locust : Install required Python dependencies for locustfile] *****************************************************************************************
2025-02-21 11:05:22,079 p=8642 u=snrj n=ansible INFO| ok: [13.81.114.214]
2025-02-21 11:05:22,098 p=8642 u=snrj n=ansible INFO| TASK [locust : Run locust] **********************************************************************************************************************************
2025-02-21 11:05:23,470 p=8642 u=snrj n=ansible INFO| changed: [13.81.114.214]
2025-02-21 11:05:23,476 p=8642 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 11:05:23,476 p=8642 u=snrj n=ansible INFO| 13.81.114.214              : ok=7    changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-21 11:08:11,576 p=9006 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 11:08:12,042 p=9006 u=snrj n=ansible INFO| PLAY [Setup Locust Traffic Generator] ***********************************************************************************************************************
2025-02-21 11:08:12,051 p=9006 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 11:08:14,270 p=9006 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 13.81.114.214 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-21 11:08:14,270 p=9006 u=snrj n=ansible INFO| ok: [13.81.114.214]
2025-02-21 11:08:14,275 p=9006 u=snrj n=ansible INFO| TASK [locust : Install pip] *********************************************************************************************************************************
2025-02-21 11:08:15,437 p=9006 u=snrj n=ansible INFO| ok: [13.81.114.214]
2025-02-21 11:08:15,450 p=9006 u=snrj n=ansible INFO| TASK [locust : Install locust using pip] ********************************************************************************************************************
2025-02-21 11:08:16,935 p=9006 u=snrj n=ansible INFO| ok: [13.81.114.214]
2025-02-21 11:08:16,945 p=9006 u=snrj n=ansible INFO| TASK [locust : Create locustfile directory] *****************************************************************************************************************
2025-02-21 11:08:17,287 p=9006 u=snrj n=ansible INFO| ok: [13.81.114.214]
2025-02-21 11:08:17,302 p=9006 u=snrj n=ansible INFO| TASK [locust : Copy locust files for traffic generation] ****************************************************************************************************
2025-02-21 11:08:19,141 p=9006 u=snrj n=ansible INFO| ok: [13.81.114.214]
2025-02-21 11:08:19,159 p=9006 u=snrj n=ansible INFO| TASK [locust : Install required Python dependencies for locustfile] *****************************************************************************************
2025-02-21 11:08:21,788 p=9006 u=snrj n=ansible INFO| ok: [13.81.114.214]
2025-02-21 11:08:21,802 p=9006 u=snrj n=ansible INFO| TASK [locust : Run locust] **********************************************************************************************************************************
2025-02-21 11:08:23,148 p=9006 u=snrj n=ansible INFO| changed: [13.81.114.214]
2025-02-21 11:08:23,163 p=9006 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 11:08:23,163 p=9006 u=snrj n=ansible INFO| 13.81.114.214              : ok=7    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-21 12:03:09,839 p=15349 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 12:03:12,452 p=15349 u=snrj n=ansible INFO| PLAY [Setup Locust Traffic Generator] ***********************************************************************************************************************
2025-02-21 12:03:12,501 p=15349 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 12:03:18,683 p=15349 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 20.229.216.201 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another
Python interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for
more information.

2025-02-21 12:03:18,683 p=15349 u=snrj n=ansible INFO| ok: [20.229.216.201]
2025-02-21 12:03:18,687 p=15349 u=snrj n=ansible INFO| TASK [locust : Install pip] *********************************************************************************************************************************
2025-02-21 12:03:26,165 p=15349 u=snrj n=ansible INFO| fatal: [20.229.216.201]: FAILED! => {"changed": false, "msg": "No package matching 'python3-pip' is available"}
2025-02-21 12:03:26,166 p=15349 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 12:03:26,166 p=15349 u=snrj n=ansible INFO| 20.229.216.201             : ok=1    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2025-02-21 12:03:33,457 p=15397 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 12:03:33,868 p=15397 u=snrj n=ansible INFO| PLAY [Setup Flask App with OpenTelemetry] *******************************************************************************************************************
2025-02-21 12:03:33,877 p=15397 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 12:03:35,285 p=15397 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 20.229.216.201 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another
Python interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for
more information.

2025-02-21 12:03:35,286 p=15397 u=snrj n=ansible INFO| ok: [20.229.216.201]
2025-02-21 12:03:35,290 p=15397 u=snrj n=ansible INFO| TASK [flask_app : Update apt package index] *****************************************************************************************************************
2025-02-21 12:03:52,960 p=15397 u=snrj n=ansible INFO| changed: [20.229.216.201]
2025-02-21 12:03:52,965 p=15397 u=snrj n=ansible INFO| TASK [flask_app : Ensure the 'universe' repository is enabled] **********************************************************************************************
2025-02-21 12:04:09,007 p=15397 u=snrj n=ansible INFO| changed: [20.229.216.201]
2025-02-21 12:04:09,018 p=15397 u=snrj n=ansible INFO| TASK [flask_app : Install python3-pip] **********************************************************************************************************************
2025-02-21 12:04:44,823 p=15397 u=snrj n=ansible INFO| changed: [20.229.216.201]
2025-02-21 12:04:44,827 p=15397 u=snrj n=ansible INFO| TASK [flask_app : Install required Python packages] *********************************************************************************************************
2025-02-21 12:04:55,895 p=15397 u=snrj n=ansible INFO| changed: [20.229.216.201]
2025-02-21 12:04:55,900 p=15397 u=snrj n=ansible INFO| TASK [flask_app : Set APPLICATION_INSIGHTS_CONNECTION_STRING in .bashrc] ************************************************************************************
2025-02-21 12:04:56,278 p=15397 u=snrj n=ansible WARNING| [WARNING]: Module remote_tmp /home/azureadmin/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues when running as another
user. To avoid this, create the remote_tmp dir with the correct permissions manually

2025-02-21 12:04:56,279 p=15397 u=snrj n=ansible INFO| changed: [20.229.216.201]
2025-02-21 12:04:56,290 p=15397 u=snrj n=ansible INFO| TASK [flask_app : Copy the sample FastAPI application] ******************************************************************************************************
2025-02-21 12:04:57,585 p=15397 u=snrj n=ansible INFO| changed: [20.229.216.201]
2025-02-21 12:04:57,590 p=15397 u=snrj n=ansible INFO| TASK [flask_app : Create FastAPI service] *******************************************************************************************************************
2025-02-21 12:04:58,725 p=15397 u=snrj n=ansible INFO| changed: [20.229.216.201]
2025-02-21 12:04:58,735 p=15397 u=snrj n=ansible INFO| TASK [flask_app : Reload systemd daemon] ********************************************************************************************************************
2025-02-21 12:04:59,461 p=15397 u=snrj n=ansible INFO| changed: [20.229.216.201]
2025-02-21 12:04:59,474 p=15397 u=snrj n=ansible INFO| TASK [flask_app : Restart FastAPI service] ******************************************************************************************************************
2025-02-21 12:05:00,208 p=15397 u=snrj n=ansible INFO| changed: [20.229.216.201]
2025-02-21 12:05:00,212 p=15397 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 12:05:00,213 p=15397 u=snrj n=ansible INFO| 20.229.216.201             : ok=10   changed=9    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-21 12:05:29,032 p=15607 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 12:05:29,431 p=15607 u=snrj n=ansible INFO| PLAY [Setup Locust Traffic Generator] ***********************************************************************************************************************
2025-02-21 12:05:29,439 p=15607 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 12:05:30,843 p=15607 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 20.229.216.201 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another
Python interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for
more information.

2025-02-21 12:05:30,843 p=15607 u=snrj n=ansible INFO| ok: [20.229.216.201]
2025-02-21 12:05:30,846 p=15607 u=snrj n=ansible INFO| TASK [locust : Install pip] *********************************************************************************************************************************
2025-02-21 12:05:32,144 p=15607 u=snrj n=ansible INFO| ok: [20.229.216.201]
2025-02-21 12:05:32,150 p=15607 u=snrj n=ansible INFO| TASK [locust : Install locust using pip] ********************************************************************************************************************
2025-02-21 12:05:41,539 p=15607 u=snrj n=ansible INFO| changed: [20.229.216.201]
2025-02-21 12:05:41,543 p=15607 u=snrj n=ansible INFO| TASK [locust : Create locustfile directory] *****************************************************************************************************************
2025-02-21 12:05:41,917 p=15607 u=snrj n=ansible INFO| changed: [20.229.216.201]
2025-02-21 12:05:41,922 p=15607 u=snrj n=ansible INFO| TASK [locust : Copy locust files for traffic generation] ****************************************************************************************************
2025-02-21 12:05:44,093 p=15607 u=snrj n=ansible INFO| changed: [20.229.216.201]
2025-02-21 12:05:44,102 p=15607 u=snrj n=ansible INFO| TASK [locust : Install required Python dependencies for locustfile] *****************************************************************************************
2025-02-21 12:05:47,220 p=15607 u=snrj n=ansible INFO| ok: [20.229.216.201]
2025-02-21 12:05:47,230 p=15607 u=snrj n=ansible INFO| TASK [locust : Run locust] **********************************************************************************************************************************
2025-02-21 12:05:48,558 p=15607 u=snrj n=ansible INFO| changed: [20.229.216.201]
2025-02-21 12:05:48,564 p=15607 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 12:05:48,564 p=15607 u=snrj n=ansible INFO| 20.229.216.201             : ok=7    changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-21 12:49:19,975 p=20463 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 12:49:22,656 p=20463 u=snrj n=ansible INFO| PLAY [Setup Flask App with OpenTelemetry] *******************************************************************************************************************
2025-02-21 12:49:22,716 p=20463 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 12:49:29,335 p=20463 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 128.251.190.100 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another
Python interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for
more information.

2025-02-21 12:49:29,335 p=20463 u=snrj n=ansible INFO| ok: [128.251.190.100]
2025-02-21 12:49:29,338 p=20463 u=snrj n=ansible INFO| TASK [flask_app : Update apt package index] *****************************************************************************************************************
2025-02-21 12:49:52,087 p=20463 u=snrj n=ansible INFO| changed: [128.251.190.100]
2025-02-21 12:49:52,098 p=20463 u=snrj n=ansible INFO| TASK [flask_app : Ensure the 'universe' repository is enabled] **********************************************************************************************
2025-02-21 12:50:09,649 p=20463 u=snrj n=ansible INFO| changed: [128.251.190.100]
2025-02-21 12:50:09,654 p=20463 u=snrj n=ansible INFO| TASK [flask_app : Install python3-pip] **********************************************************************************************************************
2025-02-21 12:50:43,674 p=20463 u=snrj n=ansible INFO| changed: [128.251.190.100]
2025-02-21 12:50:43,678 p=20463 u=snrj n=ansible INFO| TASK [flask_app : Install required Python packages] *********************************************************************************************************
2025-02-21 12:50:56,276 p=20463 u=snrj n=ansible INFO| changed: [128.251.190.100]
2025-02-21 12:50:56,283 p=20463 u=snrj n=ansible INFO| TASK [flask_app : Set APPLICATION_INSIGHTS_CONNECTION_STRING in .bashrc] ************************************************************************************
2025-02-21 12:50:56,637 p=20463 u=snrj n=ansible WARNING| [WARNING]: Module remote_tmp /home/azureadmin/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues when running as another
user. To avoid this, create the remote_tmp dir with the correct permissions manually

2025-02-21 12:50:56,637 p=20463 u=snrj n=ansible INFO| changed: [128.251.190.100]
2025-02-21 12:50:56,645 p=20463 u=snrj n=ansible INFO| TASK [flask_app : Copy the sample FastAPI application] ******************************************************************************************************
2025-02-21 12:50:57,915 p=20463 u=snrj n=ansible INFO| changed: [128.251.190.100]
2025-02-21 12:50:57,919 p=20463 u=snrj n=ansible INFO| TASK [flask_app : Create FastAPI service] *******************************************************************************************************************
2025-02-21 12:50:59,087 p=20463 u=snrj n=ansible INFO| changed: [128.251.190.100]
2025-02-21 12:50:59,102 p=20463 u=snrj n=ansible INFO| TASK [flask_app : Reload systemd daemon] ********************************************************************************************************************
2025-02-21 12:50:59,905 p=20463 u=snrj n=ansible INFO| changed: [128.251.190.100]
2025-02-21 12:50:59,925 p=20463 u=snrj n=ansible INFO| TASK [flask_app : Restart FastAPI service] ******************************************************************************************************************
2025-02-21 12:51:00,724 p=20463 u=snrj n=ansible INFO| changed: [128.251.190.100]
2025-02-21 12:51:00,734 p=20463 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 12:51:00,734 p=20463 u=snrj n=ansible INFO| 128.251.190.100            : ok=10   changed=9    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-21 12:51:21,874 p=20687 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 12:51:22,298 p=20687 u=snrj n=ansible INFO| PLAY [Setup Locust Traffic Generator] ***********************************************************************************************************************
2025-02-21 12:51:22,308 p=20687 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 12:51:23,797 p=20687 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 128.251.190.100 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another
Python interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for
more information.

2025-02-21 12:51:23,798 p=20687 u=snrj n=ansible INFO| ok: [128.251.190.100]
2025-02-21 12:51:23,801 p=20687 u=snrj n=ansible INFO| TASK [locust : Install pip] *********************************************************************************************************************************
2025-02-21 12:51:25,199 p=20687 u=snrj n=ansible INFO| ok: [128.251.190.100]
2025-02-21 12:51:25,205 p=20687 u=snrj n=ansible INFO| TASK [locust : Install locust using pip] ********************************************************************************************************************
2025-02-21 12:51:35,986 p=20687 u=snrj n=ansible INFO| changed: [128.251.190.100]
2025-02-21 12:51:35,996 p=20687 u=snrj n=ansible INFO| TASK [locust : Create locustfile directory] *****************************************************************************************************************
2025-02-21 12:51:36,398 p=20687 u=snrj n=ansible INFO| changed: [128.251.190.100]
2025-02-21 12:51:36,407 p=20687 u=snrj n=ansible INFO| TASK [locust : Copy locust files for traffic generation] ****************************************************************************************************
2025-02-21 12:51:38,846 p=20687 u=snrj n=ansible INFO| changed: [128.251.190.100]
2025-02-21 12:51:38,864 p=20687 u=snrj n=ansible INFO| TASK [locust : Install required Python dependencies for locustfile] *****************************************************************************************
2025-02-21 12:51:42,299 p=20687 u=snrj n=ansible INFO| ok: [128.251.190.100]
2025-02-21 12:51:42,310 p=20687 u=snrj n=ansible INFO| TASK [locust : Run locust] **********************************************************************************************************************************
2025-02-21 12:51:43,649 p=20687 u=snrj n=ansible INFO| changed: [128.251.190.100]
2025-02-21 12:51:43,655 p=20687 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 12:51:43,655 p=20687 u=snrj n=ansible INFO| 128.251.190.100            : ok=7    changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-21 13:31:07,579 p=24776 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 13:31:10,852 p=24776 u=snrj n=ansible INFO| PLAY [Configure OpenTelemetry Collector and Prometheus] *****************************************************************************************************
2025-02-21 13:31:10,914 p=24776 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 13:31:14,332 p=24776 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 128.251.190.100 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another
Python interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for
more information.

2025-02-21 13:31:14,332 p=24776 u=snrj n=ansible INFO| ok: [128.251.190.100]
2025-02-21 13:31:14,336 p=24776 u=snrj n=ansible INFO| TASK [prometheus : Install Prometheus dependencies] *********************************************************************************************************
2025-02-21 13:31:15,821 p=24776 u=snrj n=ansible INFO| ok: [128.251.190.100] => (item=wget)
2025-02-21 13:31:17,150 p=24776 u=snrj n=ansible INFO| ok: [128.251.190.100] => (item=tar)
2025-02-21 13:31:17,162 p=24776 u=snrj n=ansible INFO| TASK [prometheus : Download Prometheus] *********************************************************************************************************************
2025-02-21 13:31:19,673 p=24776 u=snrj n=ansible WARNING| [WARNING]: Module remote_tmp /root/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues when running as another user. To
avoid this, create the remote_tmp dir with the correct permissions manually

2025-02-21 13:31:19,673 p=24776 u=snrj n=ansible INFO| changed: [128.251.190.100]
2025-02-21 13:31:19,691 p=24776 u=snrj n=ansible INFO| TASK [prometheus : Extract Prometheus tarball] **************************************************************************************************************
2025-02-21 13:31:22,313 p=24776 u=snrj n=ansible INFO| changed: [128.251.190.100]
2025-02-21 13:31:22,331 p=24776 u=snrj n=ansible INFO| TASK [prometheus : Template Prometheus config] **************************************************************************************************************
2025-02-21 13:31:22,642 p=24776 u=snrj n=ansible INFO| An exception occurred during task execution. To see the full traceback, use -vvv. The error was: ansible.errors.AnsibleUndefinedVariable: 'prometheus_scrape_interval' is undefined
2025-02-21 13:31:22,642 p=24776 u=snrj n=ansible INFO| fatal: [128.251.190.100]: FAILED! => {"changed": false, "msg": "AnsibleUndefinedVariable: 'prometheus_scrape_interval' is undefined"}
2025-02-21 13:31:22,643 p=24776 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 13:31:22,643 p=24776 u=snrj n=ansible INFO| 128.251.190.100            : ok=4    changed=2    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2025-02-21 13:32:32,841 p=24951 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 13:32:33,306 p=24951 u=snrj n=ansible INFO| PLAY [Configure OpenTelemetry Collector and Prometheus] *****************************************************************************************************
2025-02-21 13:32:33,315 p=24951 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-21 13:32:36,262 p=24951 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 128.251.190.100 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another
Python interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for
more information.

2025-02-21 13:32:36,262 p=24951 u=snrj n=ansible INFO| ok: [128.251.190.100]
2025-02-21 13:32:36,267 p=24951 u=snrj n=ansible INFO| TASK [prometheus : Install Prometheus dependencies] *********************************************************************************************************
2025-02-21 13:32:37,589 p=24951 u=snrj n=ansible INFO| ok: [128.251.190.100] => (item=wget)
2025-02-21 13:32:38,963 p=24951 u=snrj n=ansible INFO| ok: [128.251.190.100] => (item=tar)
2025-02-21 13:32:38,975 p=24951 u=snrj n=ansible INFO| TASK [prometheus : Download Prometheus] *********************************************************************************************************************
2025-02-21 13:32:39,887 p=24951 u=snrj n=ansible INFO| ok: [128.251.190.100]
2025-02-21 13:32:39,897 p=24951 u=snrj n=ansible INFO| TASK [prometheus : Extract Prometheus tarball] **************************************************************************************************************
2025-02-21 13:32:42,648 p=24951 u=snrj n=ansible INFO| changed: [128.251.190.100]
2025-02-21 13:32:42,665 p=24951 u=snrj n=ansible INFO| TASK [prometheus : Template Prometheus config] **************************************************************************************************************
2025-02-21 13:32:44,437 p=24951 u=snrj n=ansible INFO| changed: [128.251.190.100]
2025-02-21 13:32:44,446 p=24951 u=snrj n=ansible INFO| TASK [prometheus : Create Prometheus systemd service] *******************************************************************************************************
2025-02-21 13:32:45,669 p=24951 u=snrj n=ansible INFO| changed: [128.251.190.100]
2025-02-21 13:32:45,678 p=24951 u=snrj n=ansible INFO| TASK [prometheus : Enable and start Prometheus service] *****************************************************************************************************
2025-02-21 13:32:46,870 p=24951 u=snrj n=ansible INFO| changed: [128.251.190.100]
2025-02-21 13:32:46,880 p=24951 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-21 13:32:46,880 p=24951 u=snrj n=ansible INFO| 128.251.190.100            : ok=7    changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-21 13:56:19,050 p=27338 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-21 13:56:19,584 p=27338 u=snrj n=ansible INFO| Starting galaxy role install process
2025-02-21 13:56:20,406 p=27338 u=snrj n=ansible INFO| - downloading role 'grafana', owned by grafana
2025-02-21 13:56:20,640 p=27338 u=snrj n=ansible WARNING| [WARNING]: - grafana.grafana was NOT installed successfully: - sorry, grafana.grafana was not found on https://galaxy.ansible.com/api/.

2025-02-21 13:56:20,642 p=27338 u=snrj n=ansible ERROR| ERROR! - you can use --ignore-errors to skip failed roles and finish processing the list.
2025-02-24 12:55:46,337 p=47254 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-24 12:55:50,046 p=47254 u=snrj n=ansible INFO| PLAY [Check status of OpenTelemetry Collector service] ******************************************************************************************************
2025-02-24 12:55:50,113 p=47254 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-24 12:55:55,794 p=47254 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 20.73.47.46 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-24 12:55:55,795 p=47254 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 12:55:55,798 p=47254 u=snrj n=ansible INFO| TASK [Get otelcol service status] ***************************************************************************************************************************
2025-02-24 12:55:56,465 p=47254 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 12:55:56,485 p=47254 u=snrj n=ansible INFO| TASK [Display otelcol service status] ***********************************************************************************************************************
2025-02-24 12:55:56,503 p=47254 u=snrj n=ansible INFO| ok: [20.73.47.46] => {
    "msg": "otelcol service is inactive"
}
2025-02-24 12:55:56,509 p=47254 u=snrj n=ansible INFO| TASK [Get Prometheus service status] ************************************************************************************************************************
2025-02-24 12:55:57,052 p=47254 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 12:55:57,063 p=47254 u=snrj n=ansible INFO| TASK [Display prometheus service status] ********************************************************************************************************************
2025-02-24 12:55:57,078 p=47254 u=snrj n=ansible INFO| ok: [20.73.47.46] => {
    "msg": "prometheus service is inactive"
}
2025-02-24 12:55:57,079 p=47254 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-24 12:55:57,079 p=47254 u=snrj n=ansible INFO| 20.73.47.46                : ok=5    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-24 12:56:13,180 p=47315 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-24 12:56:13,305 p=47315 u=snrj n=ansible ERROR| ERROR! the playbook: playbooks/ does not appear to be a file
2025-02-24 12:56:20,988 p=47328 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-24 12:56:21,383 p=47328 u=snrj n=ansible INFO| PLAY [Configure OpenTelemetry Collector and Prometheus] *****************************************************************************************************
2025-02-24 12:56:21,390 p=47328 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-24 12:56:22,667 p=47328 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 20.73.47.46 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-24 12:56:22,668 p=47328 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 12:56:22,673 p=47328 u=snrj n=ansible INFO| TASK [prometheus : Install Prometheus dependencies] *********************************************************************************************************
2025-02-24 12:56:23,459 p=47328 u=snrj n=ansible INFO| ok: [20.73.47.46] => (item=wget)
2025-02-24 12:56:24,112 p=47328 u=snrj n=ansible INFO| ok: [20.73.47.46] => (item=tar)
2025-02-24 12:56:24,123 p=47328 u=snrj n=ansible INFO| TASK [prometheus : Download Prometheus] *********************************************************************************************************************
2025-02-24 12:56:27,765 p=47328 u=snrj n=ansible WARNING| [WARNING]: Module remote_tmp /root/.ansible/tmp did not exist and was created with a mode of 0700, this may cause issues when running as another user. To
avoid this, create the remote_tmp dir with the correct permissions manually

2025-02-24 12:56:27,765 p=47328 u=snrj n=ansible INFO| changed: [20.73.47.46]
2025-02-24 12:56:27,797 p=47328 u=snrj n=ansible INFO| TASK [prometheus : Extract Prometheus tarball] **************************************************************************************************************
2025-02-24 12:56:30,013 p=47328 u=snrj n=ansible INFO| changed: [20.73.47.46]
2025-02-24 12:56:30,033 p=47328 u=snrj n=ansible INFO| TASK [prometheus : Template Prometheus config] **************************************************************************************************************
2025-02-24 12:56:32,171 p=47328 u=snrj n=ansible INFO| changed: [20.73.47.46]
2025-02-24 12:56:32,180 p=47328 u=snrj n=ansible INFO| TASK [prometheus : Create Prometheus systemd service] *******************************************************************************************************
2025-02-24 12:56:33,382 p=47328 u=snrj n=ansible INFO| changed: [20.73.47.46]
2025-02-24 12:56:33,391 p=47328 u=snrj n=ansible INFO| TASK [prometheus : Enable and start Prometheus service] *****************************************************************************************************
2025-02-24 12:56:34,322 p=47328 u=snrj n=ansible INFO| changed: [20.73.47.46]
2025-02-24 12:56:34,336 p=47328 u=snrj n=ansible INFO| TASK [grafana : Install Grafana] ****************************************************************************************************************************
2025-02-24 12:56:45,214 p=47328 u=snrj n=ansible INFO| fatal: [20.73.47.46]: FAILED! => {"changed": false, "msg": "No package matching 'grafana' is available"}
2025-02-24 12:56:45,217 p=47328 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-24 12:56:45,217 p=47328 u=snrj n=ansible INFO| 20.73.47.46                : ok=7    changed=5    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2025-02-24 12:57:08,567 p=47456 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-24 12:57:08,953 p=47456 u=snrj n=ansible INFO| PLAY [Check status of OpenTelemetry Collector service] ******************************************************************************************************
2025-02-24 12:57:08,962 p=47456 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-24 12:57:10,266 p=47456 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 20.73.47.46 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-24 12:57:10,267 p=47456 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 12:57:10,271 p=47456 u=snrj n=ansible INFO| TASK [Get otelcol service status] ***************************************************************************************************************************
2025-02-24 12:57:10,819 p=47456 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 12:57:10,827 p=47456 u=snrj n=ansible INFO| TASK [Display otelcol service status] ***********************************************************************************************************************
2025-02-24 12:57:10,844 p=47456 u=snrj n=ansible INFO| ok: [20.73.47.46] => {
    "msg": "otelcol service is inactive"
}
2025-02-24 12:57:10,849 p=47456 u=snrj n=ansible INFO| TASK [Get Prometheus service status] ************************************************************************************************************************
2025-02-24 12:57:11,395 p=47456 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 12:57:11,406 p=47456 u=snrj n=ansible INFO| TASK [Display prometheus service status] ********************************************************************************************************************
2025-02-24 12:57:11,421 p=47456 u=snrj n=ansible INFO| ok: [20.73.47.46] => {
    "msg": "prometheus service is active"
}
2025-02-24 12:57:11,422 p=47456 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-24 12:57:11,422 p=47456 u=snrj n=ansible INFO| 20.73.47.46                : ok=5    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-24 13:02:59,559 p=48075 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-24 13:03:00,035 p=48075 u=snrj n=ansible INFO| PLAY [Setup Flask App with OpenTelemetry] *******************************************************************************************************************
2025-02-24 13:03:00,047 p=48075 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-24 13:03:02,436 p=48075 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 20.73.47.46 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-24 13:03:02,437 p=48075 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 13:03:02,443 p=48075 u=snrj n=ansible INFO| TASK [flask_app : Update apt package index] *****************************************************************************************************************
2025-02-24 13:03:04,365 p=48075 u=snrj n=ansible INFO| changed: [20.73.47.46]
2025-02-24 13:03:04,374 p=48075 u=snrj n=ansible INFO| TASK [flask_app : Ensure the 'universe' repository is enabled] **********************************************************************************************
2025-02-24 13:03:14,031 p=48075 u=snrj n=ansible INFO| changed: [20.73.47.46]
2025-02-24 13:03:14,044 p=48075 u=snrj n=ansible INFO| TASK [flask_app : Install python3-pip] **********************************************************************************************************************
2025-02-24 13:03:48,683 p=48075 u=snrj n=ansible INFO| changed: [20.73.47.46]
2025-02-24 13:03:48,696 p=48075 u=snrj n=ansible INFO| TASK [flask_app : Install required Python packages] *********************************************************************************************************
2025-02-24 13:03:58,148 p=48075 u=snrj n=ansible INFO| changed: [20.73.47.46]
2025-02-24 13:03:58,160 p=48075 u=snrj n=ansible INFO| TASK [flask_app : Set APPLICATION_INSIGHTS_CONNECTION_STRING in .bashrc] ************************************************************************************
2025-02-24 13:03:58,494 p=48075 u=snrj n=ansible INFO| changed: [20.73.47.46]
2025-02-24 13:03:58,511 p=48075 u=snrj n=ansible INFO| TASK [flask_app : Copy the sample FastAPI application] ******************************************************************************************************
2025-02-24 13:03:59,920 p=48075 u=snrj n=ansible INFO| changed: [20.73.47.46]
2025-02-24 13:03:59,934 p=48075 u=snrj n=ansible INFO| TASK [flask_app : Create FastAPI service] *******************************************************************************************************************
2025-02-24 13:04:01,192 p=48075 u=snrj n=ansible INFO| changed: [20.73.47.46]
2025-02-24 13:04:01,208 p=48075 u=snrj n=ansible INFO| TASK [flask_app : Reload systemd daemon] ********************************************************************************************************************
2025-02-24 13:04:01,878 p=48075 u=snrj n=ansible INFO| changed: [20.73.47.46]
2025-02-24 13:04:01,902 p=48075 u=snrj n=ansible INFO| TASK [flask_app : Restart FastAPI service] ******************************************************************************************************************
2025-02-24 13:04:02,536 p=48075 u=snrj n=ansible INFO| changed: [20.73.47.46]
2025-02-24 13:04:02,546 p=48075 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-24 13:04:02,546 p=48075 u=snrj n=ansible INFO| 20.73.47.46                : ok=10   changed=9    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-24 13:05:32,761 p=48344 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-24 13:05:33,163 p=48344 u=snrj n=ansible INFO| PLAY [Configure OpenTelemetry Collector and Prometheus] *****************************************************************************************************
2025-02-24 13:05:33,171 p=48344 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-24 13:05:35,489 p=48344 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 20.73.47.46 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-24 13:05:35,490 p=48344 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 13:05:35,495 p=48344 u=snrj n=ansible INFO| TASK [prometheus : Install Prometheus dependencies] *********************************************************************************************************
2025-02-24 13:05:36,529 p=48344 u=snrj n=ansible INFO| ok: [20.73.47.46] => (item=wget)
2025-02-24 13:05:37,654 p=48344 u=snrj n=ansible INFO| ok: [20.73.47.46] => (item=tar)
2025-02-24 13:05:37,665 p=48344 u=snrj n=ansible INFO| TASK [prometheus : Download Prometheus] *********************************************************************************************************************
2025-02-24 13:05:38,679 p=48344 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 13:05:38,694 p=48344 u=snrj n=ansible INFO| TASK [prometheus : Extract Prometheus tarball] **************************************************************************************************************
2025-02-24 13:05:40,904 p=48344 u=snrj n=ansible INFO| changed: [20.73.47.46]
2025-02-24 13:05:40,916 p=48344 u=snrj n=ansible INFO| TASK [prometheus : Template Prometheus config] **************************************************************************************************************
2025-02-24 13:05:42,259 p=48344 u=snrj n=ansible INFO| changed: [20.73.47.46]
2025-02-24 13:05:42,268 p=48344 u=snrj n=ansible INFO| TASK [prometheus : Create Prometheus systemd service] *******************************************************************************************************
2025-02-24 13:05:43,242 p=48344 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 13:05:43,251 p=48344 u=snrj n=ansible INFO| TASK [prometheus : Enable and start Prometheus service] *****************************************************************************************************
2025-02-24 13:05:43,844 p=48344 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 13:05:43,858 p=48344 u=snrj n=ansible INFO| TASK [grafana : Install Grafana] ****************************************************************************************************************************
2025-02-24 13:05:45,861 p=48344 u=snrj n=ansible INFO| fatal: [20.73.47.46]: FAILED! => {"changed": false, "msg": "No package matching 'grafana' is available"}
2025-02-24 13:05:45,862 p=48344 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-24 13:05:45,862 p=48344 u=snrj n=ansible INFO| 20.73.47.46                : ok=7    changed=2    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2025-02-24 13:05:49,637 p=48404 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-24 13:05:50,044 p=48404 u=snrj n=ansible INFO| PLAY [Check status of OpenTelemetry Collector service] ******************************************************************************************************
2025-02-24 13:05:50,052 p=48404 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-24 13:05:51,544 p=48404 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 20.73.47.46 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-24 13:05:51,544 p=48404 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 13:05:51,547 p=48404 u=snrj n=ansible INFO| TASK [Get otelcol service status] ***************************************************************************************************************************
2025-02-24 13:05:52,114 p=48404 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 13:05:52,123 p=48404 u=snrj n=ansible INFO| TASK [Display otelcol service status] ***********************************************************************************************************************
2025-02-24 13:05:52,140 p=48404 u=snrj n=ansible INFO| ok: [20.73.47.46] => {
    "msg": "otelcol service is inactive"
}
2025-02-24 13:05:52,145 p=48404 u=snrj n=ansible INFO| TASK [Get Prometheus service status] ************************************************************************************************************************
2025-02-24 13:05:52,614 p=48404 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 13:05:52,625 p=48404 u=snrj n=ansible INFO| TASK [Display prometheus service status] ********************************************************************************************************************
2025-02-24 13:05:52,640 p=48404 u=snrj n=ansible INFO| ok: [20.73.47.46] => {
    "msg": "prometheus service is active"
}
2025-02-24 13:05:52,641 p=48404 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-24 13:05:52,641 p=48404 u=snrj n=ansible INFO| 20.73.47.46                : ok=5    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-24 17:42:38,353 p=69462 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-24 17:42:41,726 p=69462 u=snrj n=ansible INFO| PLAY [Check status of OpenTelemetry Collector service] ******************************************************************************************************
2025-02-24 17:42:41,785 p=69462 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-24 17:42:44,810 p=69462 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 20.73.47.46 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-24 17:42:44,811 p=69462 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 17:42:44,815 p=69462 u=snrj n=ansible INFO| TASK [Get otelcol service status] ***************************************************************************************************************************
2025-02-24 17:42:45,441 p=69462 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 17:42:45,463 p=69462 u=snrj n=ansible INFO| TASK [Display otelcol service status] ***********************************************************************************************************************
2025-02-24 17:42:45,482 p=69462 u=snrj n=ansible INFO| ok: [20.73.47.46] => {
    "msg": "otelcol service is inactive"
}
2025-02-24 17:42:45,487 p=69462 u=snrj n=ansible INFO| TASK [Get Prometheus service status] ************************************************************************************************************************
2025-02-24 17:42:45,919 p=69462 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 17:42:45,929 p=69462 u=snrj n=ansible INFO| TASK [Display prometheus service status] ********************************************************************************************************************
2025-02-24 17:42:45,944 p=69462 u=snrj n=ansible INFO| ok: [20.73.47.46] => {
    "msg": "prometheus service is active"
}
2025-02-24 17:42:45,945 p=69462 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-24 17:42:45,945 p=69462 u=snrj n=ansible INFO| 20.73.47.46                : ok=5    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-02-24 17:43:53,628 p=69606 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-24 17:43:54,064 p=69606 u=snrj n=ansible INFO| PLAY [Configure OpenTelemetry Collector and Prometheus] *****************************************************************************************************
2025-02-24 17:43:54,072 p=69606 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-24 17:43:56,254 p=69606 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 20.73.47.46 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-24 17:43:56,254 p=69606 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 17:43:56,267 p=69606 u=snrj n=ansible INFO| TASK [otel_collector : Template OpenTelemetry Collector config] *********************************************************************************************
2025-02-24 17:43:57,624 p=69606 u=snrj n=ansible INFO| fatal: [20.73.47.46]: FAILED! => {"changed": false, "checksum": "1dce44aa41fdb5141c44aeb10ef8caa143d3b7c9", "msg": "Destination directory /etc/otelcol does not exist"}
2025-02-24 17:43:57,625 p=69606 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-24 17:43:57,625 p=69606 u=snrj n=ansible INFO| 20.73.47.46                : ok=1    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2025-02-24 17:55:50,221 p=70910 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-24 17:55:50,690 p=70910 u=snrj n=ansible INFO| PLAY [Configure OpenTelemetry Collector and Prometheus] *****************************************************************************************************
2025-02-24 17:55:50,700 p=70910 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-24 17:55:52,960 p=70910 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 20.73.47.46 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-24 17:55:52,960 p=70910 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 17:55:52,969 p=70910 u=snrj n=ansible INFO| TASK [otel_collector : Template OpenTelemetry Collector config] *********************************************************************************************
2025-02-24 17:55:54,242 p=70910 u=snrj n=ansible INFO| fatal: [20.73.47.46]: FAILED! => {"changed": false, "checksum": "84c4f4d8901502d79c9de361a0bf99d4f5ef45b7", "msg": "Destination directory /etc/otelcol does not exist"}
2025-02-24 17:55:54,243 p=70910 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-24 17:55:54,243 p=70910 u=snrj n=ansible INFO| 20.73.47.46                : ok=1    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2025-02-24 17:56:12,348 p=70971 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-24 17:56:12,800 p=70971 u=snrj n=ansible ERROR| ERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:
JSON: Expecting value: line 1 column 1 (char 0)

Syntax Error while loading YAML.
  mapping values are not allowed in this context. mapping values are not allowed in this context
  in "<unicode string>", line 2, column 12

The error appears to be in '/Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/prometheus/handlers/main.yml': line 2, column 12, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

- name: Restart Prometheus
    systemd:
           ^ here

2025-02-24 17:56:28,268 p=71005 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-24 17:56:28,677 p=71005 u=snrj n=ansible INFO| PLAY [Configure OpenTelemetry Collector and Prometheus] *****************************************************************************************************
2025-02-24 17:56:28,687 p=71005 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-24 17:56:30,053 p=71005 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 20.73.47.46 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-24 17:56:30,054 p=71005 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 17:56:30,058 p=71005 u=snrj n=ansible INFO| TASK [prometheus : Install Prometheus dependencies] *********************************************************************************************************
2025-02-24 17:56:31,097 p=71005 u=snrj n=ansible INFO| ok: [20.73.47.46] => (item=wget)
2025-02-24 17:56:32,026 p=71005 u=snrj n=ansible INFO| ok: [20.73.47.46] => (item=tar)
2025-02-24 17:56:32,039 p=71005 u=snrj n=ansible INFO| TASK [prometheus : Download Prometheus if not already downloaded] *******************************************************************************************
2025-02-24 17:56:32,451 p=71005 u=snrj n=ansible INFO| fatal: [20.73.47.46]: FAILED! => {"changed": false, "msg": "Unsupported parameters for (get_url) module: creates. Supported parameters include: attributes, backup, checksum, ciphers, client_cert, client_key, decompress, dest, force, force_basic_auth, group, headers, http_agent, mode, owner, selevel, serole, setype, seuser, timeout, tmp_dest, unredirected_headers, unsafe_writes, url, url_password, url_username, use_gssapi, use_netrc, use_proxy, validate_certs (attr, password, username)."}
2025-02-24 17:56:32,452 p=71005 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-24 17:56:32,452 p=71005 u=snrj n=ansible INFO| 20.73.47.46                : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2025-02-24 17:57:10,872 p=71116 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-24 17:57:11,239 p=71116 u=snrj n=ansible INFO| PLAY [Configure OpenTelemetry Collector and Prometheus] *****************************************************************************************************
2025-02-24 17:57:11,249 p=71116 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-24 17:57:12,528 p=71116 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 20.73.47.46 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-24 17:57:12,528 p=71116 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 17:57:12,534 p=71116 u=snrj n=ansible INFO| TASK [prometheus : Install Prometheus dependencies] *********************************************************************************************************
2025-02-24 17:57:13,510 p=71116 u=snrj n=ansible INFO| ok: [20.73.47.46] => (item=wget)
2025-02-24 17:57:14,515 p=71116 u=snrj n=ansible INFO| ok: [20.73.47.46] => (item=tar)
2025-02-24 17:57:14,527 p=71116 u=snrj n=ansible INFO| TASK [prometheus : Check if Prometheus tarball already exists] **********************************************************************************************
2025-02-24 17:57:15,027 p=71116 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 17:57:15,042 p=71116 u=snrj n=ansible INFO| TASK [prometheus : Download Prometheus if not already downloaded] *******************************************************************************************
2025-02-24 17:57:15,054 p=71116 u=snrj n=ansible INFO| skipping: [20.73.47.46]
2025-02-24 17:57:15,061 p=71116 u=snrj n=ansible INFO| TASK [prometheus : Check if Prometheus is already extracted] ************************************************************************************************
2025-02-24 17:57:15,492 p=71116 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 17:57:15,513 p=71116 u=snrj n=ansible INFO| TASK [prometheus : Extract Prometheus tarball if not extracted] *********************************************************************************************
2025-02-24 17:57:15,529 p=71116 u=snrj n=ansible INFO| skipping: [20.73.47.46]
2025-02-24 17:57:15,538 p=71116 u=snrj n=ansible INFO| TASK [prometheus : Template Prometheus config] **************************************************************************************************************
2025-02-24 17:57:16,781 p=71116 u=snrj n=ansible INFO| changed: [20.73.47.46]
2025-02-24 17:57:16,790 p=71116 u=snrj n=ansible INFO| TASK [prometheus : Create Prometheus systemd service] *******************************************************************************************************
2025-02-24 17:57:17,664 p=71116 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 17:57:17,674 p=71116 u=snrj n=ansible INFO| TASK [prometheus : Check Prometheus service status] *********************************************************************************************************
2025-02-24 17:57:18,033 p=71116 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 17:57:18,043 p=71116 u=snrj n=ansible INFO| TASK [prometheus : Start Prometheus if not running] *********************************************************************************************************
2025-02-24 17:57:18,056 p=71116 u=snrj n=ansible INFO| skipping: [20.73.47.46]
2025-02-24 17:57:18,072 p=71116 u=snrj n=ansible INFO| RUNNING HANDLER [prometheus : Restart Prometheus] ***********************************************************************************************************
2025-02-24 17:57:18,686 p=71116 u=snrj n=ansible INFO| changed: [20.73.47.46]
2025-02-24 17:57:18,688 p=71116 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-24 17:57:18,688 p=71116 u=snrj n=ansible INFO| 20.73.47.46                : ok=8    changed=2    unreachable=0    failed=0    skipped=3    rescued=0    ignored=0   
2025-02-24 17:57:25,163 p=71173 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-24 17:57:25,574 p=71173 u=snrj n=ansible INFO| PLAY [Configure OpenTelemetry Collector and Prometheus] *****************************************************************************************************
2025-02-24 17:57:25,584 p=71173 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-24 17:57:26,875 p=71173 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 20.73.47.46 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-24 17:57:26,875 p=71173 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 17:57:26,879 p=71173 u=snrj n=ansible INFO| TASK [prometheus : Install Prometheus dependencies] *********************************************************************************************************
2025-02-24 17:57:27,852 p=71173 u=snrj n=ansible INFO| ok: [20.73.47.46] => (item=wget)
2025-02-24 17:57:28,851 p=71173 u=snrj n=ansible INFO| ok: [20.73.47.46] => (item=tar)
2025-02-24 17:57:28,864 p=71173 u=snrj n=ansible INFO| TASK [prometheus : Check if Prometheus tarball already exists] **********************************************************************************************
2025-02-24 17:57:29,323 p=71173 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 17:57:29,337 p=71173 u=snrj n=ansible INFO| TASK [prometheus : Download Prometheus if not already downloaded] *******************************************************************************************
2025-02-24 17:57:29,350 p=71173 u=snrj n=ansible INFO| skipping: [20.73.47.46]
2025-02-24 17:57:29,356 p=71173 u=snrj n=ansible INFO| TASK [prometheus : Check if Prometheus is already extracted] ************************************************************************************************
2025-02-24 17:57:29,642 p=71173 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 17:57:29,652 p=71173 u=snrj n=ansible INFO| TASK [prometheus : Extract Prometheus tarball if not extracted] *********************************************************************************************
2025-02-24 17:57:29,665 p=71173 u=snrj n=ansible INFO| skipping: [20.73.47.46]
2025-02-24 17:57:29,674 p=71173 u=snrj n=ansible INFO| TASK [prometheus : Template Prometheus config] **************************************************************************************************************
2025-02-24 17:57:30,526 p=71173 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 17:57:30,536 p=71173 u=snrj n=ansible INFO| TASK [prometheus : Create Prometheus systemd service] *******************************************************************************************************
2025-02-24 17:57:31,348 p=71173 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 17:57:31,358 p=71173 u=snrj n=ansible INFO| TASK [prometheus : Check Prometheus service status] *********************************************************************************************************
2025-02-24 17:57:31,689 p=71173 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 17:57:31,699 p=71173 u=snrj n=ansible INFO| TASK [prometheus : Start Prometheus if not running] *********************************************************************************************************
2025-02-24 17:57:31,712 p=71173 u=snrj n=ansible INFO| skipping: [20.73.47.46]
2025-02-24 17:57:31,719 p=71173 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-24 17:57:31,720 p=71173 u=snrj n=ansible INFO| 20.73.47.46                : ok=7    changed=0    unreachable=0    failed=0    skipped=3    rescued=0    ignored=0   
2025-02-24 18:01:40,133 p=72363 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-24 18:01:40,561 p=72363 u=snrj n=ansible ERROR| ERROR! Invalid callback for stdout specified: rich
2025-02-24 18:02:26,958 p=72453 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-24 18:02:27,370 p=72453 u=snrj n=ansible ERROR| ERROR! Invalid callback for stdout specified: rich
2025-02-24 18:03:22,103 p=72628 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-24 18:03:22,508 p=72628 u=snrj n=ansible ERROR| ERROR! Invalid callback for stdout specified: rich
2025-02-24 18:03:26,929 p=72639 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-24 18:03:27,332 p=72639 u=snrj n=ansible ERROR| ERROR! Invalid callback for stdout specified: rich
2025-02-24 18:03:58,415 p=72686 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-24 18:03:58,802 p=72686 u=snrj n=ansible ERROR| ERROR! Invalid callback for stdout specified: rich
2025-02-24 18:04:21,735 p=72728 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-24 18:04:22,135 p=72728 u=snrj n=ansible INFO| [DEPRECATION WARNING]: community.general.yaml has been deprecated. The plugin has been superseded by the the option `result_format=yaml` in callback plugin 
ansible.builtin.default from ansible-core 2.13 onwards. This feature will be removed from community.general in version 13.0.0. Deprecation warnings can be 
disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-24 18:04:22,166 p=72728 u=snrj n=ansible INFO| PLAY [Configure OpenTelemetry Collector and Prometheus] *****************************************************************************************************
2025-02-24 18:04:22,178 p=72728 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-24 18:04:24,380 p=72728 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 20.73.47.46 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-24 18:04:24,380 p=72728 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 18:04:24,387 p=72728 u=snrj n=ansible INFO| TASK [prometheus : Install Prometheus dependencies] *********************************************************************************************************
2025-02-24 18:04:25,384 p=72728 u=snrj n=ansible INFO| ok: [20.73.47.46] => (item=wget)
2025-02-24 18:04:26,376 p=72728 u=snrj n=ansible INFO| ok: [20.73.47.46] => (item=tar)
2025-02-24 18:04:26,394 p=72728 u=snrj n=ansible INFO| TASK [prometheus : Check if Prometheus tarball already exists] **********************************************************************************************
2025-02-24 18:04:26,991 p=72728 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 18:04:27,006 p=72728 u=snrj n=ansible INFO| TASK [prometheus : Download Prometheus if not already downloaded] *******************************************************************************************
2025-02-24 18:04:27,022 p=72728 u=snrj n=ansible INFO| skipping: [20.73.47.46]
2025-02-24 18:04:27,028 p=72728 u=snrj n=ansible INFO| TASK [prometheus : Check if Prometheus is already extracted] ************************************************************************************************
2025-02-24 18:04:27,367 p=72728 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 18:04:27,382 p=72728 u=snrj n=ansible INFO| TASK [prometheus : Extract Prometheus tarball if not extracted] *********************************************************************************************
2025-02-24 18:04:27,401 p=72728 u=snrj n=ansible INFO| skipping: [20.73.47.46]
2025-02-24 18:04:27,411 p=72728 u=snrj n=ansible INFO| TASK [prometheus : Template Prometheus config] **************************************************************************************************************
2025-02-24 18:04:28,297 p=72728 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 18:04:28,310 p=72728 u=snrj n=ansible INFO| TASK [prometheus : Create Prometheus systemd service] *******************************************************************************************************
2025-02-24 18:04:29,109 p=72728 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 18:04:29,123 p=72728 u=snrj n=ansible INFO| TASK [prometheus : Check Prometheus service status] *********************************************************************************************************
2025-02-24 18:04:29,449 p=72728 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 18:04:29,461 p=72728 u=snrj n=ansible INFO| TASK [prometheus : Start Prometheus if not running] *********************************************************************************************************
2025-02-24 18:04:29,479 p=72728 u=snrj n=ansible INFO| skipping: [20.73.47.46]
2025-02-24 18:04:29,487 p=72728 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-24 18:04:29,487 p=72728 u=snrj n=ansible INFO| 20.73.47.46                : ok=7    changed=0    unreachable=0    failed=0    skipped=3    rescued=0    ignored=0   
2025-02-24 18:07:03,341 p=73525 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-24 18:07:03,763 p=73525 u=snrj n=ansible INFO| [DEPRECATION WARNING]: community.general.yaml has been deprecated. The plugin has been superseded by the the option `result_format=yaml` in callback plugin 
ansible.builtin.default from ansible-core 2.13 onwards. This feature will be removed from community.general in version 13.0.0. Deprecation warnings can be 
disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-24 18:07:03,784 p=73525 u=snrj n=ansible INFO| PLAY [Configure OpenTelemetry Collector and Prometheus] *****************************************************************************************************
2025-02-24 18:07:03,794 p=73525 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-24 18:07:06,069 p=73525 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 20.73.47.46 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-24 18:07:06,069 p=73525 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 18:07:06,076 p=73525 u=snrj n=ansible INFO| TASK [prometheus : Install Prometheus dependencies] *********************************************************************************************************
2025-02-24 18:07:07,056 p=73525 u=snrj n=ansible INFO| ok: [20.73.47.46] => (item=wget)
2025-02-24 18:07:08,001 p=73525 u=snrj n=ansible INFO| ok: [20.73.47.46] => (item=tar)
2025-02-24 18:07:08,012 p=73525 u=snrj n=ansible INFO| TASK [prometheus : Check if Prometheus tarball already exists] **********************************************************************************************
2025-02-24 18:07:08,477 p=73525 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 18:07:08,488 p=73525 u=snrj n=ansible INFO| TASK [prometheus : Download Prometheus if not already downloaded] *******************************************************************************************
2025-02-24 18:07:08,501 p=73525 u=snrj n=ansible INFO| skipping: [20.73.47.46]
2025-02-24 18:07:08,508 p=73525 u=snrj n=ansible INFO| TASK [prometheus : Check if Prometheus is already extracted] ************************************************************************************************
2025-02-24 18:07:08,800 p=73525 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 18:07:08,812 p=73525 u=snrj n=ansible INFO| TASK [prometheus : Extract Prometheus tarball if not extracted] *********************************************************************************************
2025-02-24 18:07:08,825 p=73525 u=snrj n=ansible INFO| skipping: [20.73.47.46]
2025-02-24 18:07:08,833 p=73525 u=snrj n=ansible INFO| TASK [prometheus : Template Prometheus config] **************************************************************************************************************
2025-02-24 18:07:09,727 p=73525 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 18:07:09,737 p=73525 u=snrj n=ansible INFO| TASK [prometheus : Create Prometheus systemd service] *******************************************************************************************************
2025-02-24 18:07:10,581 p=73525 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 18:07:10,591 p=73525 u=snrj n=ansible INFO| TASK [prometheus : Check Prometheus service status] *********************************************************************************************************
2025-02-24 18:07:10,921 p=73525 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 18:07:10,930 p=73525 u=snrj n=ansible INFO| TASK [prometheus : Start Prometheus if not running] *********************************************************************************************************
2025-02-24 18:07:10,943 p=73525 u=snrj n=ansible INFO| skipping: [20.73.47.46]
2025-02-24 18:07:10,951 p=73525 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-24 18:07:10,951 p=73525 u=snrj n=ansible INFO| 20.73.47.46                : ok=7    changed=0    unreachable=0    failed=0    skipped=3    rescued=0    ignored=0   
2025-02-24 18:07:29,519 p=73594 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-24 18:07:32,756 p=73594 u=snrj n=ansible INFO| [DEPRECATION WARNING]: community.general.yaml has been deprecated. The plugin has been superseded by the the option `result_format=yaml` in callback plugin 
ansible.builtin.default from ansible-core 2.13 onwards. This feature will be removed from community.general in version 13.0.0. Deprecation warnings can be 
disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-24 18:07:32,873 p=73594 u=snrj n=ansible INFO| PLAY [Configure OpenTelemetry Collector and Prometheus] *****************************************************************************************************
2025-02-24 18:07:32,957 p=73594 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-24 18:07:34,947 p=73594 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 20.73.47.46 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-24 18:07:34,947 p=73594 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 18:07:34,954 p=73594 u=snrj n=ansible INFO| TASK [prometheus : Install Prometheus dependencies] *********************************************************************************************************
2025-02-24 18:07:36,010 p=73594 u=snrj n=ansible INFO| ok: [20.73.47.46] => (item=wget)
2025-02-24 18:07:36,950 p=73594 u=snrj n=ansible INFO| ok: [20.73.47.46] => (item=tar)
2025-02-24 18:07:36,962 p=73594 u=snrj n=ansible INFO| TASK [prometheus : Check if Prometheus tarball already exists] **********************************************************************************************
2025-02-24 18:07:37,455 p=73594 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 18:07:37,466 p=73594 u=snrj n=ansible INFO| TASK [prometheus : Download Prometheus if not already downloaded] *******************************************************************************************
2025-02-24 18:07:37,479 p=73594 u=snrj n=ansible INFO| skipping: [20.73.47.46]
2025-02-24 18:07:37,486 p=73594 u=snrj n=ansible INFO| TASK [prometheus : Check if Prometheus is already extracted] ************************************************************************************************
2025-02-24 18:07:37,771 p=73594 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 18:07:37,790 p=73594 u=snrj n=ansible INFO| TASK [prometheus : Extract Prometheus tarball if not extracted] *********************************************************************************************
2025-02-24 18:07:37,805 p=73594 u=snrj n=ansible INFO| skipping: [20.73.47.46]
2025-02-24 18:07:37,822 p=73594 u=snrj n=ansible INFO| TASK [prometheus : Template Prometheus config] **************************************************************************************************************
2025-02-24 18:07:38,768 p=73594 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 18:07:38,778 p=73594 u=snrj n=ansible INFO| TASK [prometheus : Create Prometheus systemd service] *******************************************************************************************************
2025-02-24 18:07:39,579 p=73594 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 18:07:39,590 p=73594 u=snrj n=ansible INFO| TASK [prometheus : Check Prometheus service status] *********************************************************************************************************
2025-02-24 18:07:39,947 p=73594 u=snrj n=ansible INFO| ok: [20.73.47.46]
2025-02-24 18:07:39,956 p=73594 u=snrj n=ansible INFO| TASK [prometheus : Start Prometheus if not running] *********************************************************************************************************
2025-02-24 18:07:39,970 p=73594 u=snrj n=ansible INFO| skipping: [20.73.47.46]
2025-02-24 18:07:39,978 p=73594 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-24 18:07:39,978 p=73594 u=snrj n=ansible INFO| 20.73.47.46                : ok=7    changed=0    unreachable=0    failed=0    skipped=3    rescued=0    ignored=0   
2025-02-24 18:07:59,196 p=73678 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-24 18:07:59,574 p=73678 u=snrj n=ansible ERROR| ERROR! Invalid callback for stdout specified: rich
2025-02-24 18:28:56,404 p=76048 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-24 18:28:59,979 p=76048 u=snrj n=ansible ERROR| ERROR! Invalid callback for stdout specified: rich
2025-02-24 18:29:08,236 p=76069 u=snrj n=ansible INFO| [DEPRECATION WARNING]: [defaults]collections_paths option. Reason: does not fit var naming standard, use the singular form collections_path instead 
Alternatives: none. This feature will be removed in version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-02-24 18:29:08,627 p=76069 u=snrj n=ansible ERROR| ERROR! Invalid callback for stdout specified: rich
2025-02-24 18:29:35,420 p=76135 u=snrj n=ansible INFO| PLAY [Setup Flask App with OpenTelemetry] *******************************************************************************************************************
2025-02-24 18:29:35,475 p=76135 u=snrj n=ansible INFO| TASK [Gathering Facts] **************************************************************************************************************************************
2025-02-24 18:29:41,359 p=76135 u=snrj n=ansible WARNING| [WARNING]: Platform linux on host 168.63.20.95 is using the discovered Python interpreter at /usr/bin/python3.10, but future installation of another Python
interpreter could change the meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more
information.

2025-02-24 18:29:41,360 p=76135 u=snrj n=ansible INFO| ok: [168.63.20.95]
2025-02-24 18:29:41,366 p=76135 u=snrj n=ansible INFO| TASK [flask-app : Update apt package index] *****************************************************************************************************************
2025-02-24 18:30:02,103 p=76135 u=snrj n=ansible INFO| changed: [168.63.20.95]
2025-02-24 18:30:02,115 p=76135 u=snrj n=ansible INFO| TASK [flask-app : Ensure the 'universe' repository is enabled] **********************************************************************************************
2025-02-24 18:30:13,994 p=76135 u=snrj n=ansible INFO| changed: [168.63.20.95]
2025-02-24 18:30:14,011 p=76135 u=snrj n=ansible INFO| TASK [flask-app : Install python3-pip] **********************************************************************************************************************
2025-02-24 18:30:48,416 p=76135 u=snrj n=ansible INFO| changed: [168.63.20.95]
2025-02-24 18:30:48,429 p=76135 u=snrj n=ansible INFO| TASK [flask-app : Install required Python packages] *********************************************************************************************************
2025-02-24 18:30:59,913 p=76135 u=snrj n=ansible INFO| changed: [168.63.20.95]
2025-02-24 18:30:59,925 p=76135 u=snrj n=ansible INFO| TASK [flask-app : Set APPLICATION_INSIGHTS_CONNECTION_STRING in .bashrc] ************************************************************************************
2025-02-24 18:30:59,946 p=76135 u=snrj n=ansible INFO| fatal: [168.63.20.95]: FAILED! => 
  msg: |-
    The task includes an option with an undefined variable.. 'APPLICATION_INSIGHTS_CONNECTION_STRING' is undefined
  
    The error appears to be in '/Users/snrj/Desktop/terraform-azure-demo/configure_vm/roles/flask-app/tasks/main.yml': line 25, column 3, but may
    be elsewhere in the file depending on the exact syntax problem.
  
    The offending line appears to be:
  
  
    - name: Set APPLICATION_INSIGHTS_CONNECTION_STRING in .bashrc
      ^ here
2025-02-24 18:30:59,947 p=76135 u=snrj n=ansible INFO| PLAY RECAP **************************************************************************************************************************************************
2025-02-24 18:30:59,947 p=76135 u=snrj n=ansible INFO| 168.63.20.95               : ok=5    changed=4    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
